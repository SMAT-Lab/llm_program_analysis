{
    "type": "module",
    "start_token": 0,
    "end_token": 534,
    "children": [
        {
            "type": "import_statement",
            "start_token": 0,
            "end_token": 1,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 1,
                    "end_token": 1,
                    "label": "asyncio"
                }
            ],
            "label": "import asyncio"
        },
        {
            "type": "import_statement",
            "start_token": 3,
            "end_token": 4,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 4,
                    "end_token": 4,
                    "label": "logging"
                }
            ],
            "label": "import logging"
        },
        {
            "type": "import_statement",
            "start_token": 6,
            "end_token": 7,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 7,
                    "end_token": 7,
                    "label": "uuid"
                }
            ],
            "label": "import uuid"
        },
        {
            "type": "import_from_statement",
            "start_token": 9,
            "end_token": 12,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 10,
                    "end_token": 10,
                    "label": "collections"
                },
                {
                    "type": "identifier",
                    "start_token": 12,
                    "end_token": 12,
                    "label": "defaultdict"
                }
            ],
            "label": "from collections import defaultdict"
        },
        {
            "type": "import_from_statement",
            "start_token": 14,
            "end_token": 19,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 15,
                    "end_token": 15,
                    "label": "datetime"
                },
                {
                    "type": "identifier",
                    "start_token": 17,
                    "end_token": 19,
                    "label": "datetime, timezone"
                }
            ],
            "label": "from datetime import datetime, timezone"
        },
        {
            "type": "import_from_statement",
            "start_token": 21,
            "end_token": 30,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 22,
                    "end_token": 22,
                    "label": "typing"
                },
                {
                    "type": "identifier",
                    "start_token": 24,
                    "end_token": 30,
                    "label": "Any, Literal, Optional, Type"
                }
            ],
            "label": "from typing import Any, Literal, Optional, Type"
        },
        {
            "type": "import_statement",
            "start_token": 33,
            "end_token": 34,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 34,
                    "end_token": 34,
                    "label": "prisma"
                }
            ],
            "label": "import prisma"
        },
        {
            "type": "import_from_statement",
            "start_token": 36,
            "end_token": 47,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 37,
                    "end_token": 39,
                    "label": "prisma.models"
                },
                {
                    "type": "identifier",
                    "start_token": 41,
                    "end_token": 47,
                    "label": "AgentGraph, AgentGraphExecution, AgentNode, AgentNodeLink"
                }
            ],
            "label": "from prisma.models import AgentGraph, AgentGraphExecution, AgentNode, AgentNodeLink"
        },
        {
            "type": "import_from_statement",
            "start_token": 49,
            "end_token": 54,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 50,
                    "end_token": 52,
                    "label": "prisma.types"
                },
                {
                    "type": "identifier",
                    "start_token": 54,
                    "end_token": 54,
                    "label": "AgentGraphWhereInput"
                }
            ],
            "label": "from prisma.types import AgentGraphWhereInput"
        },
        {
            "type": "import_from_statement",
            "start_token": 56,
            "end_token": 61,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 57,
                    "end_token": 59,
                    "label": "pydantic.fields"
                },
                {
                    "type": "identifier",
                    "start_token": 61,
                    "end_token": 61,
                    "label": "computed_field"
                }
            ],
            "label": "from pydantic.fields import computed_field"
        },
        {
            "type": "import_from_statement",
            "start_token": 64,
            "end_token": 71,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 65,
                    "end_token": 69,
                    "label": "backend.blocks.agent"
                },
                {
                    "type": "identifier",
                    "start_token": 71,
                    "end_token": 71,
                    "label": "AgentExecutorBlock"
                }
            ],
            "label": "from backend.blocks.agent import AgentExecutorBlock"
        },
        {
            "type": "import_from_statement",
            "start_token": 73,
            "end_token": 82,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 75,
                    "end_token": 78,
                    "label": ".blocks.basic"
                },
                {
                    "type": "identifier",
                    "start_token": 80,
                    "end_token": 82,
                    "label": "AgentInputBlock, AgentOutputBlock"
                }
            ],
            "label": "from backend.blocks.basic import AgentInputBlock, AgentOutputBlock"
        },
        {
            "type": "import_from_statement",
            "start_token": 84,
            "end_token": 89,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 85,
                    "end_token": 87,
                    "label": "backend.util"
                },
                {
                    "type": "identifier",
                    "start_token": 89,
                    "end_token": 89,
                    "label": "json"
                }
            ],
            "label": "from backend.util import json"
        },
        {
            "type": "import_from_statement",
            "start_token": 92,
            "end_token": 102,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 93,
                    "end_token": 94,
                    "label": ".block"
                },
                {
                    "type": "identifier",
                    "start_token": 96,
                    "end_token": 102,
                    "label": "BlockInput, BlockType, get_block, get_blocks"
                }
            ],
            "label": "from .block import BlockInput, BlockType, get_block, get_blocks"
        },
        {
            "type": "import_from_statement",
            "start_token": 104,
            "end_token": 110,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 105,
                    "end_token": 106,
                    "label": ".db"
                },
                {
                    "type": "identifier",
                    "start_token": 108,
                    "end_token": 110,
                    "label": "BaseDbModel, transaction"
                }
            ],
            "label": "from .db import BaseDbModel, transaction"
        },
        {
            "type": "import_from_statement",
            "start_token": 112,
            "end_token": 116,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 113,
                    "end_token": 114,
                    "label": ".execution"
                },
                {
                    "type": "identifier",
                    "start_token": 116,
                    "end_token": 116,
                    "label": "ExecutionStatus"
                }
            ],
            "label": "from .execution import ExecutionStatus"
        },
        {
            "type": "import_from_statement",
            "start_token": 118,
            "end_token": 124,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 119,
                    "end_token": 120,
                    "label": ".includes"
                },
                {
                    "type": "identifier",
                    "start_token": 122,
                    "end_token": 124,
                    "label": "AGENT_GRAPH_INCLUDE, AGENT_NODE_INCLUDE"
                }
            ],
            "label": "from .includes import AGENT_GRAPH_INCLUDE, AGENT_NODE_INCLUDE"
        },
        {
            "type": "import_from_statement",
            "start_token": 126,
            "end_token": 130,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 127,
                    "end_token": 128,
                    "label": ".integrations"
                },
                {
                    "type": "identifier",
                    "start_token": 130,
                    "end_token": 130,
                    "label": "Webhook"
                }
            ],
            "label": "from .integrations import Webhook"
        },
        {
            "type": "assignment",
            "start_token": 133,
            "end_token": 140,
            "children": [
                {
                    "type": "attribute",
                    "start_token": 135,
                    "end_token": 137,
                    "children": [
                        {
                            "type": "dotted_name",
                            "start_token": 135,
                            "end_token": 135,
                            "label": "logging"
                        }
                    ],
                    "label": "logging.getLogger"
                },
                {
                    "type": "argument_list",
                    "start_token": 138,
                    "end_token": 139,
                    "label": "(__name__"
                }
            ],
            "label": "logger = logging.getLogger(__name__)"
        },
        {
            "type": "comment",
            "start_token": 150,
            "end_token": 161,
            "label": "# Fix 2-way reference Node <-> Webhook\n"
        },
        {
            "type": "block",
            "start_token": 162,
            "end_token": 166,
            "children": [
                {
                    "type": "attribute",
                    "start_token": 163,
                    "end_token": 165,
                    "children": [
                        {
                            "type": "dotted_name",
                            "start_token": 163,
                            "end_token": 163,
                            "label": "."
                        }
                    ],
                    "label": ".model_rebuild("
                },
                {
                    "type": "argument_list",
                    "start_token": 165,
                    "end_token": 165,
                    "label": "("
                }
            ],
            "label": "Webhook.model_rebuild()"
        },
        {
            "type": "decorated_definition",
            "start_token": 175,
            "end_token": 274,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 175,
                    "end_token": 176,
                    "label": "@staticmethod"
                },
                {
                    "type": "function_definition",
                    "start_token": 178,
                    "end_token": 274,
                    "children": [
                        {
                            "type": "parameters",
                            "start_token": 179,
                            "end_token": 188,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "start_token": 181,
                                    "end_token": 183,
                                    "label": "node: AgentNode"
                                },
                                {
                                    "type": "typed_parameter",
                                    "start_token": 185,
                                    "end_token": 187,
                                    "label": "for_export: bool"
                                }
                            ],
                            "label": "_process_node(node: AgentNode, for_export: bool)"
                        },
                        {
                            "type": "type",
                            "start_token": 190,
                            "end_token": 191,
                            "label": "> AgentNode"
                        },
                        {
                            "type": "block",
                            "start_token": 192,
                            "end_token": 273,
                            "children": [
                                {
                                    "type": "if_statement",
                                    "start_token": 194,
                                    "end_token": 196,
                                    "children": [
                                        {
                                            "type": "if_clause",
                                            "start_token": 194,
                                            "end_token": 196,
                                            "label": "if for_export:"
                                        }
                                    ],
                                    "label": "if for_export:"
                                },
                                {
                                    "type": "comment",
                                    "start_token": 198,
                                    "end_token": 204,
                                    "label": "# Remove credentials from node input\n"
                                },
                                {
                                    "type": "if_statement",
                                    "start_token": 205,
                                    "end_token": 251,
                                    "children": [
                                        {
                                            "type": "if_clause",
                                            "start_token": 205,
                                            "end_token": 209,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 206,
                                                    "end_token": 208,
                                                    "label": "node.constantInput"
                                                }
                                            ],
                                            "label": "if node.constantInput:"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 211,
                                            "end_token": 230,
                                            "label": "constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 233,
                                            "end_token": 239,
                                            "label": "constant_input = GraphModel._hide_node_input_credentials(constant_input"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 242,
                                            "end_token": 251,
                                            "label": "node.constantInput = json.dumps(constant_input)"
                                        }
                                    ],
                                    "label": "if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)"
                                },
                                {
                                    "type": "comment",
                                    "start_token": 254,
                                    "end_token": 258,
                                    "label": "# Remove webhook info\n"
                                },
                                {
                                    "type": "assignment",
                                    "start_token": 259,
                                    "end_token": 263,
                                    "label": "node.webhookId = None"
                                },
                                {
                                    "type": "assignment",
                                    "start_token": 265,
                                    "end_token": 269,
                                    "label": "node.Webhook = None"
                                },
                                {
                                    "type": "return_statement",
                                    "start_token": 272,
                                    "end_token": 273,
                                    "label": "return node"
                                }
                            ],
                            "label": ":\n        if for_export:\n            # Remove credentials from node input\n            if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)\n\n            # Remove webhook info\n            node.webhookId = None\n            node.Webhook = None\n\n        return node"
                        }
                    ],
                    "label": "def _process_node(node: AgentNode, for_export: bool) -> AgentNode:\n        if for_export:\n            # Remove credentials from node input\n            if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)\n\n            # Remove webhook info\n            node.webhookId = None\n            node.Webhook = None\n\n        return node\n"
                }
            ],
            "label": "@staticmethod\n    def _process_node(node: AgentNode, for_export: bool) -> AgentNode:\n        if for_export:\n            # Remove credentials from node input\n            if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)\n\n            # Remove webhook info\n            node.webhookId = None\n            node.Webhook = None\n\n        return node\n"
        },
        {
            "type": "decorated_definition",
            "start_token": 276,
            "end_token": 404,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 276,
                    "end_token": 277,
                    "label": "@staticmethod"
                },
                {
                    "type": "function_definition",
                    "start_token": 279,
                    "end_token": 404,
                    "children": [
                        {
                            "type": "parameters",
                            "start_token": 280,
                            "end_token": 289,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "start_token": 282,
                                    "end_token": 284,
                                    "label": "input_data: dict"
                                }
                            ],
                            "label": "_hide_node_input_credentials(input_data: dict[str, Any]"
                        },
                        {
                            "type": "type",
                            "start_token": 291,
                            "end_token": 298,
                            "label": "-> dict[str, Any]"
                        },
                        {
                            "type": "block",
                            "start_token": 299,
                            "end_token": 404,
                            "children": [
                                {
                                    "type": "assignment",
                                    "start_token": 301,
                                    "end_token": 313,
                                    "label": "sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]"
                                },
                                {
                                    "type": "assignment",
                                    "start_token": 315,
                                    "end_token": 318,
                                    "label": "result = {}"
                                },
                                {
                                    "type": "for_statement",
                                    "start_token": 320,
                                    "end_token": 401,
                                    "children": [
                                        {
                                            "type": "for_in_clause",
                                            "start_token": 320,
                                            "end_token": 327,
                                            "label": "for key, value in input_data.items"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 330,
                                            "end_token": 401,
                                            "children": [
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 332,
                                                    "end_token": 338,
                                                    "children": [
                                                        {
                                                            "type": "if_clause",
                                                            "start_token": 332,
                                                            "end_token": 338,
                                                            "children": [
                                                                {
                                                                    "type": "binary_operator",
                                                                    "start_token": 333,
                                                                    "end_token": 337,
                                                                    "label": "isinstance(value, dict"
                                                                }
                                                            ],
                                                            "label": "if isinstance(value, dict)"
                                                        }
                                                    ],
                                                    "label": "if isinstance(value, dict)"
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 341,
                                                    "end_token": 351,
                                                    "label": "result[key] = GraphModel._hide_node_input_credentials(value)"
                                                },
                                                {
                                                    "type": "elif_clause",
                                                    "start_token": 353,
                                                    "end_token": 375,
                                                    "children": [
                                                        {
                                                            "type": "if_clause",
                                                            "start_token": 353,
                                                            "end_token": 375,
                                                            "children": [
                                                                {
                                                                    "type": "binary_operator",
                                                                    "start_token": 354,
                                                                    "end_token": 370,
                                                                    "label": "isinstance(value, str) and any(\n                sensitive_key in key.lower()"
                                                                }
                                                            ],
                                                            "label": "elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n"
                                                        }
                                                    ],
                                                    "label": "elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n"
                                                },
                                                {
                                                    "type": "continue_statement",
                                                    "start_token": 390,
                                                    "end_token": 391,
                                                    "label": "continue\n"
                                                },
                                                {
                                                    "type": "else_clause",
                                                    "start_token": 392,
                                                    "end_token": 400,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 395,
                                                            "end_token": 400,
                                                            "label": "result[key] = value"
                                                        }
                                                    ],
                                                    "label": "else:\n                result[key] = value"
                                                }
                                            ],
                                            "label": ":\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n"
                                        }
                                    ],
                                    "label": "for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n"
                                },
                                {
                                    "type": "return_statement",
                                    "start_token": 402,
                                    "end_token": 403,
                                    "label": "return result"
                                }
                            ],
                            "label": ":\n        sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]\n        result = {}\n        for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result\n"
                        }
                    ],
                    "label": "def _hide_node_input_credentials(input_data: dict[str, Any]) -> dict[str, Any]:\n        sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]\n        result = {}\n        for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result\n"
                }
            ],
            "label": "@staticmethod\n    def _hide_node_input_credentials(input_data: dict[str, Any]) -> dict[str, Any]:\n        sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]\n        result = {}\n        for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result\n"
        },
        {
            "type": "comment",
            "start_token": 407,
            "end_token": 452,
            "label": "# --------------------- CRUD functions --------------------- #"
        },
        {
            "type": "comment",
            "start_token": 478,
            "end_token": 528,
            "label": "# ------------------------ UTILITIES ------------------------ #"
        },
        {
            "type": "comment",
            "start_token": 503,
            "end_token": 528,
            "label": "UTILITIES ------------------------ #"
        },
        {
            "type": "function_placeholder",
            "name": "get_node",
            "start_line": 430,
            "end_line": 435,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 47,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 47,
                            "children": [
                                {
                                    "type": "decorated_definition",
                                    "start_token": 0,
                                    "end_token": 47,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "get_node"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 7,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 4,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 4,
                                                            "end_token": 4,
                                                            "label": "node_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 6,
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "node_id: str"
                                                }
                                            ],
                                            "label": "(node_id: str)"
                                        },
                                        {
                                            "type": "union_type",
                                            "start_token": 9,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "label": "NodeModel"
                                                }
                                            ],
                                            "label": "> NodeModel"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 12,
                                            "end_token": 47,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 13,
                                                    "end_token": 39,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 13,
                                                            "end_token": 13,
                                                            "label": "node"
                                                        },
                                                        {
                                                            "type": "await",
                                                            "start_token": 15,
                                                            "end_token": 39,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 16,
                                                                    "end_token": 39,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 16,
                                                                            "end_token": 22,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 16,
                                                                                    "end_token": 18,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 16,
                                                                                            "end_token": 16,
                                                                                            "label": "AgentNode"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 18,
                                                                                            "end_token": 18,
                                                                                            "label": "prisma"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentNode.prisma"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 22,
                                                                                    "end_token": 22,
                                                                                    "label": "find_unique_or_raise"
                                                                                }
                                                                            ],
                                                                            "label": "AgentNode.prisma().find_unique_or_raise"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 23,
                                                                            "end_token": 39,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 27,
                                                                                    "end_token": 31,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 28,
                                                                                            "end_token": 30,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 28,
                                                                                                    "end_token": 28,
                                                                                                    "label": "\"id\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 30,
                                                                                                    "end_token": 30,
                                                                                                    "label": "node_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"id\": node_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "{\"id\": node_id}"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 34,
                                                                                    "end_token": 36,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 34,
                                                                                            "end_token": 34,
                                                                                            "label": "include"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 36,
                                                                                            "end_token": 36,
                                                                                            "label": "AGENT_NODE_INCLUDE"
                                                                                        }
                                                                                    ],
                                                                                    "label": "include=AGENT_NODE_INCLUDE"
                                                                                }
                                                                            ],
                                                                            "label": "(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )"
                                                                        }
                                                                    ],
                                                                    "label": "AgentNode.prisma().find_unique_or_raise(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )"
                                                                }
                                                            ],
                                                            "label": "await AgentNode.prisma().find_unique_or_raise(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )"
                                                        }
                                                    ],
                                                    "label": "node = await AgentNode.prisma().find_unique_or_raise(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )"
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 41,
                                                    "end_token": 47,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 42,
                                                            "end_token": 47,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 42,
                                                                    "end_token": 44,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 42,
                                                                            "end_token": 42,
                                                                            "label": "NodeModel"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 44,
                                                                            "end_token": 44,
                                                                            "label": "from_db"
                                                                        }
                                                                    ],
                                                                    "label": "NodeModel.from_db"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 45,
                                                                    "end_token": 47,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 46,
                                                                            "end_token": 46,
                                                                            "label": "node"
                                                                        }
                                                                    ],
                                                                    "label": "(node)"
                                                                }
                                                            ],
                                                            "label": "NodeModel.from_db(node)"
                                                        }
                                                    ],
                                                    "label": "return NodeModel.from_db(node)"
                                                }
                                            ],
                                            "label": "\n    node = await AgentNode.prisma().find_unique_or_raise(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )\n    return NodeModel.from_db(node)"
                                        }
                                    ],
                                    "label": "async def get_node(node_id: str) -> NodeModel:\n    node = await AgentNode.prisma().find_unique_or_raise(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )\n    return NodeModel.from_db(node)"
                                }
                            ],
                            "label": "async def get_node(node_id: str) -> NodeModel:\n    node = await AgentNode.prisma().find_unique_or_raise(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )\n    return NodeModel.from_db(node)"
                        }
                    ],
                    "label": "async def get_node(node_id: str) -> NodeModel:\n    node = await AgentNode.prisma().find_unique_or_raise(\n        where={\"id\": node_id},\n        include=AGENT_NODE_INCLUDE,\n    )\n    return NodeModel.from_db(node)"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "set_node_webhook",
            "start_line": 438,
            "end_line": 450,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 100,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 100,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "set_node_webhook"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 13,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "node_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "node_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 8,
                                            "end_token": 12,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "children": [],
                                                    "label": "webhook_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 12,
                                                    "children": [],
                                                    "label": "str | None"
                                                }
                                            ],
                                            "label": "webhook_id: str | None"
                                        }
                                    ],
                                    "label": "(node_id: str, webhook_id: str | None)"
                                },
                                {
                                    "type": "union_type",
                                    "start_token": 15,
                                    "end_token": 17,
                                    "children": [
                                        {
                                            "type": "type",
                                            "start_token": 16,
                                            "end_token": 16,
                                            "children": [],
                                            "label": "NodeModel"
                                        }
                                    ],
                                    "label": "> NodeModel:"
                                },
                                {
                                    "type": "block",
                                    "start_token": 18,
                                    "end_token": 100,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 19,
                                            "end_token": 80,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 19,
                                                    "end_token": 19,
                                                    "children": [],
                                                    "label": "node"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 21,
                                                    "end_token": 80,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 22,
                                                            "end_token": 80,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 22,
                                                                    "end_token": 28,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 22,
                                                                            "end_token": 22,
                                                                            "children": [],
                                                                            "label": "AgentNode"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 24,
                                                                            "end_token": 24,
                                                                            "children": [],
                                                                            "label": "prisma"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 28,
                                                                            "end_token": 28,
                                                                            "children": [],
                                                                            "label": "update"
                                                                        }
                                                                    ],
                                                                    "label": "AgentNode.prisma().update"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 29,
                                                                    "end_token": 80,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 31,
                                                                            "end_token": 39,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 34,
                                                                                    "end_token": 34,
                                                                                    "children": [],
                                                                                    "label": "\"id\""
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 36,
                                                                                    "end_token": 36,
                                                                                    "children": [],
                                                                                    "label": "node_id"
                                                                                }
                                                                            ],
                                                                            "label": "where={\"id\": node_id},\n"
                                                                        },
                                                                        {
                                                                            "type": "conditional_expression",
                                                                            "start_token": 40,
                                                                            "end_token": 70,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 44,
                                                                                    "end_token": 56,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 45,
                                                                                            "end_token": 55,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 45,
                                                                                                    "end_token": 45,
                                                                                                    "children": [],
                                                                                                    "label": "\"Webhook\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 47,
                                                                                                    "end_token": 55,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 48,
                                                                                                            "end_token": 54,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 48,
                                                                                                                    "end_token": 48,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"connect\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "dictionary",
                                                                                                                    "start_token": 50,
                                                                                                                    "end_token": 54,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "pair",
                                                                                                                            "start_token": 51,
                                                                                                                            "end_token": 53,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "string",
                                                                                                                                    "start_token": 51,
                                                                                                                                    "end_token": 51,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "\"id\""
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 53,
                                                                                                                                    "end_token": 53,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "webhook_id"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "\"id\": webhook_id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "{\"id\": webhook_id}"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"connect\": {\"id\": webhook_id}"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\"connect\": {\"id\": webhook_id}}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"Webhook\": {\"connect\": {\"id\": webhook_id}}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "{\"Webhook\": {\"connect\": {\"id\": webhook_id}}}"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 59,
                                                                                    "end_token": 59,
                                                                                    "children": [],
                                                                                    "label": "webhook_id"
                                                                                },
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 62,
                                                                                    "end_token": 70,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 63,
                                                                                            "end_token": 69,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 63,
                                                                                                    "end_token": 63,
                                                                                                    "children": [],
                                                                                                    "label": "\"Webhook\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 65,
                                                                                                    "end_token": 69,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 66,
                                                                                                            "end_token": 68,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 66,
                                                                                                                    "end_token": 66,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"disconnect\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "true",
                                                                                                                    "start_token": 68,
                                                                                                                    "end_token": 68,
                                                                                                                    "children": [],
                                                                                                                    "label": "True"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"disconnect\": True"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\"disconnect\": True}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"Webhook\": {\"disconnect\": True}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "{\"Webhook\": {\"disconnect\": True}}"
                                                                                }
                                                                            ],
                                                                            "label": "data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 75,
                                                                            "end_token": 77,
                                                                            "children": [],
                                                                            "label": "include=AGENT_NODE_INCLUDE"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        where={\"id\": node_id},\n        data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}\n        ),\n        include=AGENT_NODE_INCLUDE,\n    )"
                                                                }
                                                            ],
                                                            "label": "AgentNode.prisma().update(\n        where={\"id\": node_id},\n        data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}\n        ),\n        include=AGENT_NODE_INCLUDE,\n    )"
                                                        }
                                                    ],
                                                    "label": "await AgentNode.prisma().update(\n        where={\"id\": node_id},\n        data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}\n        ),\n        include=AGENT_NODE_INCLUDE,\n    )"
                                                }
                                            ],
                                            "label": "node = await AgentNode.prisma().update(\n        where={\"id\": node_id},\n        data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}\n        ),\n        include=AGENT_NODE_INCLUDE,\n    )"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 82,
                                            "end_token": 92,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "start_token": 83,
                                                    "end_token": 84,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 84,
                                                            "end_token": 84,
                                                            "children": [],
                                                            "label": "node"
                                                        }
                                                    ],
                                                    "label": "not node"
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "start_token": 87,
                                                    "end_token": 92,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 88,
                                                            "end_token": 92,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 88,
                                                                    "end_token": 88,
                                                                    "children": [],
                                                                    "label": "ValueError"
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 91,
                                                                    "end_token": 91,
                                                                    "children": [],
                                                                    "label": "\"Node #{node_id} not found\""
                                                                }
                                                            ],
                                                            "label": "ValueError(f\"Node #{node_id} not found\")"
                                                        }
                                                    ],
                                                    "label": "raise ValueError(f\"Node #{node_id} not found\")"
                                                }
                                            ],
                                            "label": "if not node:\n        raise ValueError(f\"Node #{node_id} not found\")"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 94,
                                            "end_token": 100,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 95,
                                                    "end_token": 100,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 95,
                                                            "end_token": 97,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 95,
                                                                    "end_token": 95,
                                                                    "children": [],
                                                                    "label": "NodeModel"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 97,
                                                                    "end_token": 97,
                                                                    "children": [],
                                                                    "label": "from_db"
                                                                }
                                                            ],
                                                            "label": "NodeModel.from_db"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 98,
                                                            "end_token": 100,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 99,
                                                                    "end_token": 99,
                                                                    "children": [],
                                                                    "label": "node"
                                                                }
                                                            ],
                                                            "label": "(node)"
                                                        }
                                                    ],
                                                    "label": "NodeModel.from_db(node)"
                                                }
                                            ],
                                            "label": "return NodeModel.from_db(node)"
                                        }
                                    ],
                                    "label": "\n    node = await AgentNode.prisma().update(\n        where={\"id\": node_id},\n        data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}\n        ),\n        include=AGENT_NODE_INCLUDE,\n    )\n    if not node:\n        raise ValueError(f\"Node #{node_id} not found\")\n    return NodeModel.from_db(node)"
                                }
                            ],
                            "label": "async def set_node_webhook(node_id: str, webhook_id: str | None) -> NodeModel:\n    node = await AgentNode.prisma().update(\n        where={\"id\": node_id},\n        data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}\n        ),\n        include=AGENT_NODE_INCLUDE,\n    )\n    if not node:\n        raise ValueError(f\"Node #{node_id} not found\")\n    return NodeModel.from_db(node)"
                        }
                    ],
                    "label": "async def set_node_webhook(node_id: str, webhook_id: str | None) -> NodeModel:\n    node = await AgentNode.prisma().update(\n        where={\"id\": node_id},\n        data=(\n            {\"Webhook\": {\"connect\": {\"id\": webhook_id}}}\n            if webhook_id\n            else {\"Webhook\": {\"disconnect\": True}}\n        ),\n        include=AGENT_NODE_INCLUDE,\n    )\n    if not node:\n        raise ValueError(f\"Node #{node_id} not found\")\n    return NodeModel.from_db(node)"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graphs",
            "start_line": 453,
            "end_line": 490,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 163,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 163,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "get_graphs"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 24,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 7,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "children": [],
                                                    "label": ": str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 10,
                                            "end_token": 22,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "children": [],
                                                    "label": "filter_by"
                                                },
                                                {
                                                    "type": "union_type",
                                                    "start_token": 11,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 12,
                                                            "end_token": 17,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 12,
                                                                    "end_token": 12,
                                                                    "children": [],
                                                                    "label": "Literal"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 13,
                                                                    "end_token": 17,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 14,
                                                                            "end_token": 14,
                                                                            "children": [],
                                                                            "label": "\"active\""
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 16,
                                                                            "end_token": 16,
                                                                            "children": [],
                                                                            "label": "\"template\""
                                                                        }
                                                                    ],
                                                                    "label": "[\"active\", \"template\"]"
                                                                }
                                                            ],
                                                            "label": "Literal[\"active\", \"template\"]"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 19,
                                                            "end_token": 19,
                                                            "children": [],
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": ": Literal[\"active\", \"template\"] | None"
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 20,
                                                    "end_token": 22,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 21,
                                                            "end_token": 21,
                                                            "children": [],
                                                            "label": "\"active\""
                                                        }
                                                    ],
                                                    "label": "= \"active\","
                                                }
                                            ],
                                            "label": "filter_by: Literal[\"active\", \"template\"] | None = \"active\","
                                        }
                                    ],
                                    "label": "(\n    user_id: str,\n    filter_by: Literal[\"active\", \"template\"] | None = \"active\",\n)"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 26,
                                    "end_token": 30,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 27,
                                            "end_token": 27,
                                            "children": [],
                                            "label": "list"
                                        },
                                        {
                                            "type": "list",
                                            "start_token": 28,
                                            "end_token": 30,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 29,
                                                    "end_token": 29,
                                                    "children": [],
                                                    "label": "GraphModel"
                                                }
                                            ],
                                            "label": "[GraphModel]"
                                        }
                                    ],
                                    "label": "> list[GraphModel]"
                                },
                                {
                                    "type": "string",
                                    "start_token": 33,
                                    "end_token": 35,
                                    "children": [],
                                    "label": "\"\"\"\n    Retrieves graph metadata objects.\n    Default behaviour is to get all currently active graphs.\n\n    Args:\n        filter_by: An optional filter to either select templates or active graphs.\n        user_id: The ID of the user that owns the graph.\n\n    Returns:\n        list[GraphModel]: A list of objects representing the retrieved graphs.\n    \"\"\""
                                },
                                {
                                    "type": "block",
                                    "start_token": 36,
                                    "end_token": 163,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 37,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 37,
                                                    "end_token": 37,
                                                    "children": [],
                                                    "label": "where_clause"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 39,
                                                    "end_token": 39,
                                                    "children": [],
                                                    "label": "AgentGraphWhereInput"
                                                },
                                                {
                                                    "type": "dictionary",
                                                    "start_token": 41,
                                                    "end_token": 45,
                                                    "children": [
                                                        {
                                                            "type": "pair",
                                                            "start_token": 42,
                                                            "end_token": 44,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 42,
                                                                    "end_token": 42,
                                                                    "children": [],
                                                                    "label": "\"userId\""
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 44,
                                                                    "end_token": 44,
                                                                    "children": [],
                                                                    "label": "user_id"
                                                                }
                                                            ],
                                                            "label": "\"userId\": user_id"
                                                        }
                                                    ],
                                                    "label": "{\"userId\": user_id}"
                                                }
                                            ],
                                            "label": "where_clause: AgentGraphWhereInput = {\"userId\": user_id}"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 48,
                                            "end_token": 61,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "start_token": 49,
                                                    "end_token": 52,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 49,
                                                            "end_token": 49,
                                                            "children": [],
                                                            "label": "filter_by"
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 52,
                                                            "end_token": 52,
                                                            "children": [],
                                                            "label": "\"active\""
                                                        }
                                                    ],
                                                    "label": "filter_by == \"active\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 53,
                                                    "end_token": 61,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 55,
                                                            "end_token": 60,
                                                            "children": [
                                                                {
                                                                    "type": "subscript",
                                                                    "start_token": 55,
                                                                    "end_token": 58,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 55,
                                                                            "end_token": 55,
                                                                            "children": [],
                                                                            "label": "where_clause"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 57,
                                                                            "end_token": 57,
                                                                            "children": [],
                                                                            "label": "\"isActive\""
                                                                        }
                                                                    ],
                                                                    "label": "where_clause[\"isActive\"]"
                                                                },
                                                                {
                                                                    "type": "true",
                                                                    "start_token": 60,
                                                                    "end_token": 60,
                                                                    "children": [],
                                                                    "label": "True"
                                                                }
                                                            ],
                                                            "label": "where_clause[\"isActive\"] = True"
                                                        }
                                                    ],
                                                    "label": ":\n        where_clause[\"isActive\"] = True\n"
                                                }
                                            ],
                                            "label": "if filter_by == \"active\":\n        where_clause[\"isActive\"] = True\n"
                                        },
                                        {
                                            "type": "elif_clause",
                                            "start_token": 62,
                                            "end_token": 74,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "start_token": 63,
                                                    "end_token": 66,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 63,
                                                            "end_token": 63,
                                                            "children": [],
                                                            "label": "filter_by"
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 66,
                                                            "end_token": 66,
                                                            "children": [],
                                                            "label": "\"template\""
                                                        }
                                                    ],
                                                    "label": "filter_by == \"template\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 67,
                                                    "end_token": 74,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 69,
                                                            "end_token": 74,
                                                            "children": [
                                                                {
                                                                    "type": "subscript",
                                                                    "start_token": 69,
                                                                    "end_token": 72,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 69,
                                                                            "end_token": 69,
                                                                            "children": [],
                                                                            "label": "where_clause"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 71,
                                                                            "end_token": 71,
                                                                            "children": [],
                                                                            "label": "\"isTemplate\""
                                                                        }
                                                                    ],
                                                                    "label": "where_clause[\"isTemplate\"]"
                                                                },
                                                                {
                                                                    "type": "true",
                                                                    "start_token": 74,
                                                                    "end_token": 74,
                                                                    "children": [],
                                                                    "label": "True"
                                                                }
                                                            ],
                                                            "label": "where_clause[\"isTemplate\"] = True"
                                                        }
                                                    ],
                                                    "label": ":\n        where_clause[\"isTemplate\"] = True"
                                                }
                                            ],
                                            "label": "elif filter_by == \"template\":\n        where_clause[\"isTemplate\"] = True"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 77,
                                            "end_token": 115,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 77,
                                                    "end_token": 77,
                                                    "children": [],
                                                    "label": "graphs"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 79,
                                                    "end_token": 79,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 80,
                                                            "end_token": 115,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 80,
                                                                    "end_token": 84,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 80,
                                                                            "end_token": 82,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 80,
                                                                                    "end_token": 80,
                                                                                    "children": [],
                                                                                    "label": "AgentGraph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 82,
                                                                                    "end_token": 82,
                                                                                    "children": [],
                                                                                    "label": "prisma"
                                                                                }
                                                                            ],
                                                                            "label": "AgentGraph.prisma"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 84,
                                                                            "end_token": 84,
                                                                            "children": [],
                                                                            "label": ")"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraph.prisma()"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 86,
                                                                    "end_token": 115,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 89,
                                                                            "end_token": 92,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 89,
                                                                                    "end_token": 89,
                                                                                    "children": [],
                                                                                    "label": "where"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 91,
                                                                                    "end_token": 91,
                                                                                    "children": [],
                                                                                    "label": "where_clause"
                                                                                }
                                                                            ],
                                                                            "label": "where=where_clause,"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 94,
                                                                            "end_token": 99,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 94,
                                                                                    "end_token": 94,
                                                                                    "children": [],
                                                                                    "label": "distinct"
                                                                                },
                                                                                {
                                                                                    "type": "list",
                                                                                    "start_token": 96,
                                                                                    "end_token": 98,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 97,
                                                                                            "end_token": 97,
                                                                                            "children": [],
                                                                                            "label": "\"id\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "[\"id\"]"
                                                                                }
                                                                            ],
                                                                            "label": "distinct=[\"id\"],"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 101,
                                                                            "end_token": 107,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 101,
                                                                                    "end_token": 101,
                                                                                    "children": [],
                                                                                    "label": "order"
                                                                                },
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 103,
                                                                                    "end_token": 107,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 104,
                                                                                            "end_token": 106,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 104,
                                                                                                    "end_token": 104,
                                                                                                    "children": [],
                                                                                                    "label": "\"version\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 106,
                                                                                                    "end_token": 106,
                                                                                                    "children": [],
                                                                                                    "label": "\"desc\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"version\": \"desc\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "{\"version\": \"desc\"}"
                                                                                }
                                                                            ],
                                                                            "label": "order={\"version\": \"desc\"}"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 110,
                                                                            "end_token": 112,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 110,
                                                                                    "end_token": 110,
                                                                                    "children": [],
                                                                                    "label": "include"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 112,
                                                                                    "end_token": 112,
                                                                                    "children": [],
                                                                                    "label": "AGENT_GRAPH_INCLUDE"
                                                                                }
                                                                            ],
                                                                            "label": "include=AGENT_GRAPH_INCLUDE"
                                                                        }
                                                                    ],
                                                                    "label": "find_many(\n        where=where_clause,\n        distinct=[\"id\"],\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )"
                                                                }
                                                            ],
                                                            "label": "AgentGraph.prisma().find_many(\n        where=where_clause,\n        distinct=[\"id\"],\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )"
                                                        }
                                                    ],
                                                    "label": "await"
                                                }
                                            ],
                                            "label": "graphs = await AgentGraph.prisma().find_many(\n        where=where_clause,\n        distinct=[\"id\"],\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 118,
                                            "end_token": 121,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 118,
                                                    "end_token": 118,
                                                    "children": [],
                                                    "label": "graph_models"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 120,
                                                    "end_token": 121,
                                                    "children": [],
                                                    "label": "[]"
                                                }
                                            ],
                                            "label": "graph_models = []"
                                        },
                                        {
                                            "type": "for_statement",
                                            "start_token": 123,
                                            "end_token": 158,
                                            "children": [
                                                {
                                                    "type": "for_in_clause",
                                                    "start_token": 123,
                                                    "end_token": 126,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 124,
                                                            "end_token": 124,
                                                            "children": [],
                                                            "label": "graph"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 126,
                                                            "end_token": 126,
                                                            "children": [],
                                                            "label": "graphs"
                                                        }
                                                    ],
                                                    "label": "for graph in graphs"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 127,
                                                    "end_token": 158,
                                                    "children": [
                                                        {
                                                            "type": "try_statement",
                                                            "start_token": 129,
                                                            "end_token": 158,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 130,
                                                                    "end_token": 142,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 132,
                                                                            "end_token": 142,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 132,
                                                                                    "end_token": 134,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 132,
                                                                                            "end_token": 132,
                                                                                            "children": [],
                                                                                            "label": "graph_models"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 134,
                                                                                            "end_token": 134,
                                                                                            "children": [],
                                                                                            "label": "append"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_models.append"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 136,
                                                                                    "end_token": 141,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 136,
                                                                                            "end_token": 138,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 136,
                                                                                                    "end_token": 136,
                                                                                                    "children": [],
                                                                                                    "label": "GraphModel"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 138,
                                                                                                    "end_token": 138,
                                                                                                    "children": [],
                                                                                                    "label": "from_db"
                                                                                                }
                                                                                            ],
                                                                                            "label": "GraphModel.from_db"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 139,
                                                                                            "end_token": 141,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 140,
                                                                                                    "end_token": 140,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(graph)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "GraphModel.from_db(graph)"
                                                                                }
                                                                            ],
                                                                            "label": "graph_models.append(GraphModel.from_db(graph))"
                                                                        }
                                                                    ],
                                                                    "label": ":\n            graph_models.append(GraphModel.from_db(graph))"
                                                                },
                                                                {
                                                                    "type": "except_clause",
                                                                    "start_token": 144,
                                                                    "end_token": 158,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 145,
                                                                            "end_token": 146,
                                                                            "children": [],
                                                                            "label": "Exception as"
                                                                        },
                                                                        {
                                                                            "type": "as_pattern",
                                                                            "start_token": 146,
                                                                            "end_token": 147,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 147,
                                                                                    "end_token": 147,
                                                                                    "children": [],
                                                                                    "label": "e"
                                                                                }
                                                                            ],
                                                                            "label": "as e"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 148,
                                                                            "end_token": 158,
                                                                            "children": [
                                                                                {
                                                                                    "type": "expression_statement",
                                                                                    "start_token": 150,
                                                                                    "end_token": 156,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 150,
                                                                                            "end_token": 156,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 150,
                                                                                                    "end_token": 152,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 150,
                                                                                                            "end_token": 150,
                                                                                                            "children": [],
                                                                                                            "label": "logger"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 152,
                                                                                                            "end_token": 152,
                                                                                                            "children": [],
                                                                                                            "label": "error"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "logger.error"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 153,
                                                                                                    "end_token": 156,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "concatenated_string",
                                                                                                            "start_token": 154,
                                                                                                            "end_token": 155,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 154,
                                                                                                                    "end_token": 154,
                                                                                                                    "children": [],
                                                                                                                    "label": "f"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 155,
                                                                                                                    "end_token": 155,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"Error processing graph {graph.id}: {e}\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "f\"Error processing graph {graph.id}: {e}\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(f\"Error processing graph {graph.id}: {e}\")"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger.error(f\"Error processing graph {graph.id}: {e}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error(f\"Error processing graph {graph.id}: {e}\")"
                                                                                },
                                                                                {
                                                                                    "type": "continue_statement",
                                                                                    "start_token": 158,
                                                                                    "end_token": 158,
                                                                                    "children": [],
                                                                                    "label": "continue"
                                                                                }
                                                                            ],
                                                                            "label": ":\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue"
                                                                        }
                                                                    ],
                                                                    "label": "except Exception as e:\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue"
                                                                }
                                                            ],
                                                            "label": "try:\n            graph_models.append(GraphModel.from_db(graph))\n        except Exception as e:\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue"
                                                        }
                                                    ],
                                                    "label": ":\n        try:\n            graph_models.append(GraphModel.from_db(graph))\n        except Exception as e:\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue"
                                                }
                                            ],
                                            "label": "for graph in graphs:\n        try:\n            graph_models.append(GraphModel.from_db(graph))\n        except Exception as e:\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 161,
                                            "end_token": 162,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 162,
                                                    "end_token": 162,
                                                    "children": [],
                                                    "label": "graph_models"
                                                }
                                            ],
                                            "label": "return graph_models"
                                        }
                                    ],
                                    "label": "\n    where_clause: AgentGraphWhereInput = {\"userId\": user_id}\n\n    if filter_by == \"active\":\n        where_clause[\"isActive\"] = True\n    elif filter_by == \"template\":\n        where_clause[\"isTemplate\"] = True\n\n    graphs = await AgentGraph.prisma().find_many(\n        where=where_clause,\n        distinct=[\"id\"],\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )\n\n    graph_models = []\n    for graph in graphs:\n        try:\n            graph_models.append(GraphModel.from_db(graph))\n        except Exception as e:\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue\n\n    return graph_models\n"
                                }
                            ],
                            "label": "async def get_graphs(\n    user_id: str,\n    filter_by: Literal[\"active\", \"template\"] | None = \"active\",\n) -> list[GraphModel]:\n    \"\"\"\n    Retrieves graph metadata objects.\n    Default behaviour is to get all currently active graphs.\n\n    Args:\n        filter_by: An optional filter to either select templates or active graphs.\n        user_id: The ID of the user that owns the graph.\n\n    Returns:\n        list[GraphModel]: A list of objects representing the retrieved graphs.\n    \"\"\"\n    where_clause: AgentGraphWhereInput = {\"userId\": user_id}\n\n    if filter_by == \"active\":\n        where_clause[\"isActive\"] = True\n    elif filter_by == \"template\":\n        where_clause[\"isTemplate\"] = True\n\n    graphs = await AgentGraph.prisma().find_many(\n        where=where_clause,\n        distinct=[\"id\"],\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )\n\n    graph_models = []\n    for graph in graphs:\n        try:\n            graph_models.append(GraphModel.from_db(graph))\n        except Exception as e:\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue\n\n    return graph_models\n"
                        }
                    ],
                    "label": "async def get_graphs(\n    user_id: str,\n    filter_by: Literal[\"active\", \"template\"] | None = \"active\",\n) -> list[GraphModel]:\n    \"\"\"\n    Retrieves graph metadata objects.\n    Default behaviour is to get all currently active graphs.\n\n    Args:\n        filter_by: An optional filter to either select templates or active graphs.\n        user_id: The ID of the user that owns the graph.\n\n    Returns:\n        list[GraphModel]: A list of objects representing the retrieved graphs.\n    \"\"\"\n    where_clause: AgentGraphWhereInput = {\"userId\": user_id}\n\n    if filter_by == \"active\":\n        where_clause[\"isActive\"] = True\n    elif filter_by == \"template\":\n        where_clause[\"isTemplate\"] = True\n\n    graphs = await AgentGraph.prisma().find_many(\n        where=where_clause,\n        distinct=[\"id\"],\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )\n\n    graph_models = []\n    for graph in graphs:\n        try:\n            graph_models.append(GraphModel.from_db(graph))\n        except Exception as e:\n            logger.error(f\"Error processing graph {graph.id}: {e}\")\n            continue\n\n    return graph_models\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_executions",
            "start_line": 493,
            "end_line": 498,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 61,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 60,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "get_executions"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 7,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        }
                                    ],
                                    "label": "(user_id: str)"
                                },
                                {
                                    "type": "union_type",
                                    "start_token": 9,
                                    "end_token": 13,
                                    "children": [
                                        {
                                            "type": "generic_type",
                                            "start_token": 10,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "children": [],
                                                    "label": "list"
                                                },
                                                {
                                                    "type": "type_parameter",
                                                    "start_token": 12,
                                                    "end_token": 12,
                                                    "children": [],
                                                    "label": "GraphExecution"
                                                }
                                            ],
                                            "label": "list[GraphExecution]"
                                        }
                                    ],
                                    "label": "> list[GraphExecution]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 15,
                                    "end_token": 60,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 16,
                                            "end_token": 46,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 16,
                                                    "end_token": 16,
                                                    "children": [],
                                                    "label": "executions"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 18,
                                                    "end_token": 46,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 19,
                                                            "end_token": 46,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 19,
                                                                    "end_token": 21,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 19,
                                                                            "end_token": 19,
                                                                            "children": [],
                                                                            "label": "AgentGraphExecution"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 21,
                                                                            "end_token": 21,
                                                                            "children": [],
                                                                            "label": "prisma"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraphExecution.prisma"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 24,
                                                                    "end_token": 46,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 25,
                                                                            "end_token": 25,
                                                                            "children": [],
                                                                            "label": "find_many"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 26,
                                                                            "end_token": 46,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 28,
                                                                                    "end_token": 34,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 31,
                                                                                            "end_token": 33,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 31,
                                                                                                    "end_token": 31,
                                                                                                    "children": [],
                                                                                                    "label": "\"userId\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 33,
                                                                                                    "end_token": 33,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"userId\": user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "where={\"userId\": user_id}"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 37,
                                                                                    "end_token": 43,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 40,
                                                                                            "end_token": 40,
                                                                                            "children": [],
                                                                                            "label": "\"createdAt\""
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 42,
                                                                                            "end_token": 42,
                                                                                            "children": [],
                                                                                            "label": "\"desc\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "order={\"createdAt\": \"desc\"}"
                                                                                }
                                                                            ],
                                                                            "label": "(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )"
                                                                        }
                                                                    ],
                                                                    "label": ".find_many(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )"
                                                                }
                                                            ],
                                                            "label": "AgentGraphExecution.prisma().find_many(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )"
                                                        }
                                                    ],
                                                    "label": "await AgentGraphExecution.prisma().find_many(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )"
                                                }
                                            ],
                                            "label": "executions = await AgentGraphExecution.prisma().find_many(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 48,
                                            "end_token": 60,
                                            "children": [
                                                {
                                                    "type": "list_comprehension",
                                                    "start_token": 49,
                                                    "end_token": 60,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 50,
                                                            "end_token": 55,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 50,
                                                                    "end_token": 52,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 50,
                                                                            "end_token": 50,
                                                                            "children": [],
                                                                            "label": "GraphExecution"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 52,
                                                                            "end_token": 52,
                                                                            "children": [],
                                                                            "label": "from_db"
                                                                        }
                                                                    ],
                                                                    "label": "GraphExecution.from_db"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 53,
                                                                    "end_token": 55,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 54,
                                                                            "end_token": 54,
                                                                            "children": [],
                                                                            "label": "execution"
                                                                        }
                                                                    ],
                                                                    "label": "(execution)"
                                                                }
                                                            ],
                                                            "label": "GraphExecution.from_db(execution)"
                                                        },
                                                        {
                                                            "type": "for_in_clause",
                                                            "start_token": 56,
                                                            "end_token": 59,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 57,
                                                                    "end_token": 57,
                                                                    "children": [],
                                                                    "label": "execution"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 59,
                                                                    "end_token": 59,
                                                                    "children": [],
                                                                    "label": "executions"
                                                                }
                                                            ],
                                                            "label": "for execution in executions"
                                                        }
                                                    ],
                                                    "label": "[GraphExecution.from_db(execution) for execution in executions]"
                                                }
                                            ],
                                            "label": "return [GraphExecution.from_db(execution) for execution in executions]"
                                        }
                                    ],
                                    "label": "\n    executions = await AgentGraphExecution.prisma().find_many(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )\n    return [GraphExecution.from_db(execution) for execution in executions]"
                                }
                            ],
                            "label": "async def get_executions(user_id: str) -> list[GraphExecution]:\n    executions = await AgentGraphExecution.prisma().find_many(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )\n    return [GraphExecution.from_db(execution) for execution in executions]"
                        }
                    ],
                    "label": "async def get_executions(user_id: str) -> list[GraphExecution]:\n    executions = await AgentGraphExecution.prisma().find_many(\n        where={\"userId\": user_id},\n        order={\"createdAt\": \"desc\"},\n    )\n    return [GraphExecution.from_db(execution) for execution in executions]\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_execution",
            "start_line": 501,
            "end_line": 505,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 55,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 55,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "get_execution"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 11,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 8,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "label": "execution_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "execution_id: str"
                                        }
                                    ],
                                    "label": "(user_id: str, execution_id: str)"
                                },
                                {
                                    "type": "union_type",
                                    "start_token": 12,
                                    "end_token": 16,
                                    "children": [
                                        {
                                            "type": "type",
                                            "start_token": 14,
                                            "end_token": 14,
                                            "label": "GraphExecution"
                                        },
                                        {
                                            "type": "none",
                                            "start_token": 16,
                                            "end_token": 16,
                                            "label": "None"
                                        }
                                    ],
                                    "label": "-> GraphExecution | None"
                                },
                                {
                                    "type": "block",
                                    "start_token": 18,
                                    "end_token": 55,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 19,
                                            "end_token": 41,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 19,
                                                    "end_token": 19,
                                                    "label": "execution"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 21,
                                                    "end_token": 41,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 21,
                                                            "end_token": 43,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 22,
                                                                    "end_token": 28,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 22,
                                                                            "end_token": 24,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 22,
                                                                                    "end_token": 22,
                                                                                    "label": "AgentGraphExecution"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 24,
                                                                                    "end_token": 24,
                                                                                    "label": "prisma"
                                                                                }
                                                                            ],
                                                                            "label": "AgentGraphExecution.prisma"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 28,
                                                                            "end_token": 28,
                                                                            "label": "find_first"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraphExecution.prisma().find_first"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 29,
                                                                    "end_token": 43,
                                                                    "children": [
                                                                        {
                                                                            "type": "dictionary",
                                                                            "start_token": 33,
                                                                            "end_token": 41,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 34,
                                                                                    "end_token": 36,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 34,
                                                                                            "end_token": 34,
                                                                                            "label": "\"id\""
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 36,
                                                                                            "end_token": 36,
                                                                                            "label": "execution_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"id\": execution_id"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 38,
                                                                                    "end_token": 40,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 38,
                                                                                            "end_token": 38,
                                                                                            "label": "\"userId\""
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 40,
                                                                                            "end_token": 40,
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"userId\": user_id"
                                                                                }
                                                                            ],
                                                                            "label": "{\"id\": execution_id, \"userId\": user_id}"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        where={\"id\": execution_id, \"userId\": user_id}\n    )"
                                                                }
                                                            ],
                                                            "label": "await AgentGraphExecution.prisma().find_first(\n        where={\"id\": execution_id, \"userId\": user_id}\n    )"
                                                        }
                                                    ],
                                                    "label": "await AgentGraphExecution.prisma().find_first(\n        where={\"id\": execution_id, \"userId\": user_id}"
                                                }
                                            ],
                                            "label": "execution = await AgentGraphExecution.prisma().find_first(\n        where={\"id\": execution_id, \"userId\": user_id}"
                                        },
                                        {
                                            "type": "conditional_expression",
                                            "start_token": 45,
                                            "end_token": 55,
                                            "children": [
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 45,
                                                    "end_token": 51,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 46,
                                                            "end_token": 51,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 46,
                                                                    "end_token": 48,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 46,
                                                                            "end_token": 46,
                                                                            "label": "GraphExecution"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 48,
                                                                            "end_token": 48,
                                                                            "label": "from_db"
                                                                        }
                                                                    ],
                                                                    "label": "GraphExecution.from_db"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 49,
                                                                    "end_token": 51,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 50,
                                                                            "end_token": 50,
                                                                            "label": "execution"
                                                                        }
                                                                    ],
                                                                    "label": "(execution)"
                                                                }
                                                            ],
                                                            "label": "GraphExecution.from_db(execution)"
                                                        }
                                                    ],
                                                    "label": "return GraphExecution.from_db(execution)"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 53,
                                                    "end_token": 53,
                                                    "label": "execution"
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 55,
                                                    "end_token": 55,
                                                    "label": "None"
                                                }
                                            ],
                                            "label": "return GraphExecution.from_db(execution) if execution else None"
                                        }
                                    ],
                                    "label": "\n    execution = await AgentGraphExecution.prisma().find_first(\n        where={\"id\": execution_id, \"userId\": user_id}\n    )\n    return GraphExecution.from_db(execution) if execution else None"
                                }
                            ],
                            "label": "async def get_execution(user_id: str, execution_id: str) -> GraphExecution | None:\n    execution = await AgentGraphExecution.prisma().find_first(\n        where={\"id\": execution_id, \"userId\": user_id}\n    )\n    return GraphExecution.from_db(execution) if execution else None"
                        }
                    ],
                    "label": "async def get_execution(user_id: str, execution_id: str) -> GraphExecution | None:\n    execution = await AgentGraphExecution.prisma().find_first(\n        where={\"id\": execution_id, \"userId\": user_id}\n    )\n    return GraphExecution.from_db(execution) if execution else None"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graph",
            "start_line": 508,
            "end_line": 539,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 171,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 171,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "def get_graph"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 42,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 7,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "children": [],
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "children": [],
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": ": str"
                                                }
                                            ],
                                            "label": "\n    graph_id: str"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 9,
                                            "end_token": 16,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "children": [],
                                                    "label": "version"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 11,
                                                    "end_token": 12,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 12,
                                                            "end_token": 12,
                                                            "children": [],
                                                            "label": "int"
                                                        }
                                                    ],
                                                    "label": ": int"
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 13,
                                                    "end_token": 16,
                                                    "children": [],
                                                    "label": "| None = None"
                                                }
                                            ],
                                            "label": "\n    version: int | None = None"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 18,
                                            "end_token": 23,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 19,
                                                    "end_token": 19,
                                                    "children": [],
                                                    "label": "template"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 20,
                                                    "end_token": 21,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 21,
                                                            "end_token": 21,
                                                            "children": [],
                                                            "label": "bool"
                                                        }
                                                    ],
                                                    "label": ": bool"
                                                },
                                                {
                                                    "type": "false",
                                                    "start_token": 22,
                                                    "end_token": 23,
                                                    "children": [],
                                                    "label": "= False"
                                                }
                                            ],
                                            "label": "\n    template: bool = False"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 25,
                                            "end_token": 32,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 26,
                                                    "end_token": 26,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 27,
                                                    "end_token": 28,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 28,
                                                            "end_token": 28,
                                                            "children": [],
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": ": str"
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 29,
                                                    "end_token": 32,
                                                    "children": [],
                                                    "label": "| None = None"
                                                }
                                            ],
                                            "label": "\n    user_id: str | None = None"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 34,
                                            "end_token": 39,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 35,
                                                    "end_token": 35,
                                                    "children": [],
                                                    "label": "for_export"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 36,
                                                    "end_token": 37,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 37,
                                                            "end_token": 37,
                                                            "children": [],
                                                            "label": "bool"
                                                        }
                                                    ],
                                                    "label": ": bool"
                                                },
                                                {
                                                    "type": "false",
                                                    "start_token": 38,
                                                    "end_token": 39,
                                                    "children": [],
                                                    "label": "= False"
                                                }
                                            ],
                                            "label": "\n    for_export: bool = False"
                                        }
                                    ],
                                    "label": "(\n    graph_id: str,\n    version: int | None = None,\n    template: bool = False,\n    user_id: str | None = None,\n    for_export: bool = False,\n)"
                                },
                                {
                                    "type": "conditional_expression",
                                    "start_token": 43,
                                    "end_token": 47,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 44,
                                            "end_token": 45,
                                            "children": [],
                                            "label": "> GraphModel"
                                        },
                                        {
                                            "type": "none",
                                            "start_token": 46,
                                            "end_token": 47,
                                            "children": [],
                                            "label": "| None"
                                        }
                                    ],
                                    "label": "-> GraphModel | None"
                                },
                                {
                                    "type": "string",
                                    "start_token": 49,
                                    "end_token": 52,
                                    "children": [
                                        {
                                            "type": "string_content",
                                            "start_token": 50,
                                            "end_token": 50,
                                            "children": [],
                                            "label": "\"\""
                                        }
                                    ],
                                    "label": "\n    \"\"\"\n    Retrieves a graph from the DB.\n    Defaults to the version with `is_active` if `version` is not passed,\n    or the latest version with `is_template` if `template=True`.\n\n    Returns `None` if the record is not found.\n    \"\"\""
                                },
                                {
                                    "type": "block",
                                    "start_token": 53,
                                    "end_token": 171,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 54,
                                            "end_token": 65,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 54,
                                                    "end_token": 55,
                                                    "children": [],
                                                    "label": "where_clause:"
                                                },
                                                {
                                                    "type": "dictionary",
                                                    "start_token": 58,
                                                    "end_token": 65,
                                                    "children": [
                                                        {
                                                            "type": "pair",
                                                            "start_token": 60,
                                                            "end_token": 63,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 60,
                                                                    "end_token": 60,
                                                                    "children": [],
                                                                    "label": "\"id\""
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 62,
                                                                    "end_token": 62,
                                                                    "children": [],
                                                                    "label": "graph_id"
                                                                }
                                                            ],
                                                            "label": "\"id\": graph_id,"
                                                        }
                                                    ],
                                                    "label": "{\n        \"id\": graph_id,\n    }"
                                                }
                                            ],
                                            "label": "where_clause: AgentGraphWhereInput = {\n        \"id\": graph_id,\n    }"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 67,
                                            "end_token": 80,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "start_token": 68,
                                                    "end_token": 71,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 68,
                                                            "end_token": 68,
                                                            "children": [],
                                                            "label": "version"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 70,
                                                            "end_token": 71,
                                                            "children": [],
                                                            "label": "not None"
                                                        }
                                                    ],
                                                    "label": "version is not None"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 72,
                                                    "end_token": 80,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 74,
                                                            "end_token": 79,
                                                            "children": [
                                                                {
                                                                    "type": "subscript",
                                                                    "start_token": 74,
                                                                    "end_token": 78,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 74,
                                                                            "end_token": 74,
                                                                            "children": [],
                                                                            "label": "where_clause"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 76,
                                                                            "end_token": 76,
                                                                            "children": [],
                                                                            "label": "\"version\""
                                                                        }
                                                                    ],
                                                                    "label": "where_clause[\"version\"] ="
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 78,
                                                                    "end_token": 78,
                                                                    "children": [],
                                                                    "label": "="
                                                                }
                                                            ],
                                                            "label": "where_clause[\"version\"] = version"
                                                        }
                                                    ],
                                                    "label": ":\n        where_clause[\"version\"] = version\n"
                                                }
                                            ],
                                            "label": "if version is not None:\n        where_clause[\"version\"] = version\n"
                                        },
                                        {
                                            "type": "elif_clause",
                                            "start_token": 81,
                                            "end_token": 92,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "start_token": 82,
                                                    "end_token": 83,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 83,
                                                            "end_token": 83,
                                                            "children": [],
                                                            "label": "template"
                                                        }
                                                    ],
                                                    "label": "not template"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 84,
                                                    "end_token": 92,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 86,
                                                            "end_token": 91,
                                                            "children": [
                                                                {
                                                                    "type": "subscript",
                                                                    "start_token": 86,
                                                                    "end_token": 90,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 86,
                                                                            "end_token": 86,
                                                                            "children": [],
                                                                            "label": "where_clause"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 88,
                                                                            "end_token": 88,
                                                                            "children": [],
                                                                            "label": "\"isActive\""
                                                                        }
                                                                    ],
                                                                    "label": "where_clause[\"isActive\"] ="
                                                                },
                                                                {
                                                                    "type": "true",
                                                                    "start_token": 90,
                                                                    "end_token": 90,
                                                                    "children": [],
                                                                    "label": "="
                                                                }
                                                            ],
                                                            "label": "where_clause[\"isActive\"] = True"
                                                        }
                                                    ],
                                                    "label": ":\n        where_clause[\"isActive\"] = True\n"
                                                }
                                            ],
                                            "label": "elif not template:\n        where_clause[\"isActive\"] = True\n"
                                        },
                                        {
                                            "type": "comment",
                                            "start_token": 94,
                                            "end_token": 107,
                                            "children": [],
                                            "label": "# TODO: Fix hack workaround to get adding store agents to work\n"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 108,
                                            "end_token": 124,
                                            "children": [
                                                {
                                                    "type": "boolean_operator",
                                                    "start_token": 109,
                                                    "end_token": 115,
                                                    "children": [
                                                        {
                                                            "type": "comparison_operator",
                                                            "start_token": 110,
                                                            "end_token": 113,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 110,
                                                                    "end_token": 110,
                                                                    "children": [],
                                                                    "label": "is"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 112,
                                                                    "end_token": 113,
                                                                    "children": [],
                                                                    "label": "None and"
                                                                }
                                                            ],
                                                            "label": "is not None and"
                                                        },
                                                        {
                                                            "type": "not_operator",
                                                            "start_token": 114,
                                                            "end_token": 115,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 115,
                                                                    "end_token": 115,
                                                                    "children": [],
                                                                    "label": "template"
                                                                }
                                                            ],
                                                            "label": "not template"
                                                        }
                                                    ],
                                                    "label": "user_id is not None and not template"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 116,
                                                    "end_token": 124,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 118,
                                                            "end_token": 123,
                                                            "children": [
                                                                {
                                                                    "type": "subscript",
                                                                    "start_token": 118,
                                                                    "end_token": 122,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 118,
                                                                            "end_token": 118,
                                                                            "children": [],
                                                                            "label": "where_clause"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 120,
                                                                            "end_token": 120,
                                                                            "children": [],
                                                                            "label": "\"userId\""
                                                                        }
                                                                    ],
                                                                    "label": "where_clause[\"userId\"] ="
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 122,
                                                                    "end_token": 122,
                                                                    "children": [],
                                                                    "label": "="
                                                                }
                                                            ],
                                                            "label": "where_clause[\"userId\"] = user_id"
                                                        }
                                                    ],
                                                    "label": ":\n        where_clause[\"userId\"] = user_id\n"
                                                }
                                            ],
                                            "label": "if user_id is not None and not template:\n        where_clause[\"userId\"] = user_id\n"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 126,
                                            "end_token": 157,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 126,
                                                    "end_token": 126,
                                                    "children": [],
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 128,
                                                    "end_token": 157,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 129,
                                                            "end_token": 157,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 129,
                                                                    "end_token": 135,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 129,
                                                                            "end_token": 132,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 129,
                                                                                    "end_token": 129,
                                                                                    "children": [],
                                                                                    "label": "AgentGraph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 131,
                                                                                    "end_token": 131,
                                                                                    "children": [],
                                                                                    "label": "prisma"
                                                                                }
                                                                            ],
                                                                            "label": "AgentGraph.prisma("
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 133,
                                                                            "end_token": 133,
                                                                            "children": [],
                                                                            "label": ")"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraph.prisma().find_first"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 136,
                                                                    "end_token": 156,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 138,
                                                                            "end_token": 141,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_separator",
                                                                                    "start_token": 138,
                                                                                    "end_token": 138,
                                                                                    "children": [],
                                                                                    "label": "where"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 140,
                                                                                    "end_token": 140,
                                                                                    "children": [],
                                                                                    "label": "where_clause"
                                                                                }
                                                                            ],
                                                                            "label": "where=where_clause,"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 143,
                                                                            "end_token": 146,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_separator",
                                                                                    "start_token": 143,
                                                                                    "end_token": 143,
                                                                                    "children": [],
                                                                                    "label": "include"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 145,
                                                                                    "end_token": 145,
                                                                                    "children": [],
                                                                                    "label": "AGENT_GRAPH_INCLUDE"
                                                                                }
                                                                            ],
                                                                            "label": "include=AGENT_GRAPH_INCLUDE,"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 148,
                                                                            "end_token": 155,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_separator",
                                                                                    "start_token": 148,
                                                                                    "end_token": 148,
                                                                                    "children": [],
                                                                                    "label": "order"
                                                                                },
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 150,
                                                                                    "end_token": 155,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 151,
                                                                                            "end_token": 153,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 151,
                                                                                                    "end_token": 151,
                                                                                                    "children": [],
                                                                                                    "label": "\"version\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 153,
                                                                                                    "end_token": 153,
                                                                                                    "children": [],
                                                                                                    "label": "\"desc\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"version\": \"desc\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "{\"version\": \"desc\"},"
                                                                                }
                                                                            ],
                                                                            "label": "order={\"version\": \"desc\"},"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        where=where_clause,\n        include=AGENT_GRAPH_INCLUDE,\n        order={\"version\": \"desc\"},\n"
                                                                }
                                                            ],
                                                            "label": "AgentGraph.prisma().find_first(\n        where=where_clause,\n        include=AGENT_GRAPH_INCLUDE,\n        order={\"version\": \"desc\"},\n    )"
                                                        }
                                                    ],
                                                    "label": "await AgentGraph.prisma().find_first(\n        where=where_clause,\n        include=AGENT_GRAPH_INCLUDE,\n        order={\"version\": \"desc\"},\n    )"
                                                }
                                            ],
                                            "label": "graph = await AgentGraph.prisma().find_first(\n        where=where_clause,\n        include=AGENT_GRAPH_INCLUDE,\n        order={\"version\": \"desc\"},\n    )"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 159,
                                            "end_token": 171,
                                            "children": [
                                                {
                                                    "type": "conditional_expression",
                                                    "start_token": 160,
                                                    "end_token": 171,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 160,
                                                            "end_token": 167,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 160,
                                                                    "end_token": 163,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 160,
                                                                            "end_token": 160,
                                                                            "children": [],
                                                                            "label": "GraphModel"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 162,
                                                                            "end_token": 162,
                                                                            "children": [],
                                                                            "label": "from_db"
                                                                        }
                                                                    ],
                                                                    "label": "GraphModel.from_db("
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 164,
                                                                    "end_token": 166,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 164,
                                                                            "end_token": 164,
                                                                            "children": [],
                                                                            "label": "graph"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 166,
                                                                            "end_token": 166,
                                                                            "children": [],
                                                                            "label": "for_export"
                                                                        }
                                                                    ],
                                                                    "label": "graph, for_export"
                                                                }
                                                            ],
                                                            "label": "GraphModel.from_db(graph, for_export)"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 169,
                                                            "end_token": 169,
                                                            "children": [],
                                                            "label": "graph"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 171,
                                                            "end_token": 171,
                                                            "children": [],
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "GraphModel.from_db(graph, for_export) if graph else None"
                                                }
                                            ],
                                            "label": "return GraphModel.from_db(graph, for_export) if graph else None"
                                        }
                                    ],
                                    "label": "\n    where_clause: AgentGraphWhereInput = {\n        \"id\": graph_id,\n    }\n    if version is not None:\n        where_clause[\"version\"] = version\n    elif not template:\n        where_clause[\"isActive\"] = True\n\n    # TODO: Fix hack workaround to get adding store agents to work\n    if user_id is not None and not template:\n        where_clause[\"userId\"] = user_id\n\n    graph = await AgentGraph.prisma().find_first(\n        where=where_clause,\n        include=AGENT_GRAPH_INCLUDE,\n        order={\"version\": \"desc\"},\n    )\n    return GraphModel.from_db(graph, for_export) if graph else None"
                                }
                            ],
                            "label": "async def get_graph(\n    graph_id: str,\n    version: int | None = None,\n    template: bool = False,\n    user_id: str | None = None,\n    for_export: bool = False,\n) -> GraphModel | None:\n    \"\"\"\n    Retrieves a graph from the DB.\n    Defaults to the version with `is_active` if `version` is not passed,\n    or the latest version with `is_template` if `template=True`.\n\n    Returns `None` if the record is not found.\n    \"\"\"\n    where_clause: AgentGraphWhereInput = {\n        \"id\": graph_id,\n    }\n    if version is not None:\n        where_clause[\"version\"] = version\n    elif not template:\n        where_clause[\"isActive\"] = True\n\n    # TODO: Fix hack workaround to get adding store agents to work\n    if user_id is not None and not template:\n        where_clause[\"userId\"] = user_id\n\n    graph = await AgentGraph.prisma().find_first(\n        where=where_clause,\n        include=AGENT_GRAPH_INCLUDE,\n        order={\"version\": \"desc\"},\n    )\n    return GraphModel.from_db(graph, for_export) if graph else None"
                        }
                    ],
                    "label": "async def get_graph(\n    graph_id: str,\n    version: int | None = None,\n    template: bool = False,\n    user_id: str | None = None,\n    for_export: bool = False,\n) -> GraphModel | None:\n    \"\"\"\n    Retrieves a graph from the DB.\n    Defaults to the version with `is_active` if `version` is not passed,\n    or the latest version with `is_template` if `template=True`.\n\n    Returns `None` if the record is not found.\n    \"\"\"\n    where_clause: AgentGraphWhereInput = {\n        \"id\": graph_id,\n    }\n    if version is not None:\n        where_clause[\"version\"] = version\n    elif not template:\n        where_clause[\"isActive\"] = True\n\n    # TODO: Fix hack workaround to get adding store agents to work\n    if user_id is not None and not template:\n        where_clause[\"userId\"] = user_id\n\n    graph = await AgentGraph.prisma().find_first(\n        where=where_clause,\n        include=AGENT_GRAPH_INCLUDE,\n        order={\"version\": \"desc\"},\n    )\n    return GraphModel.from_db(graph, for_export) if graph else None"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "set_graph_active_version",
            "start_line": 542,
            "end_line": 564,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 155,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 95,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 95,
                                    "children": [
                                        {
                                            "type": "keyword",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "label": "async"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "set_graph_active_version"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 15,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 4,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 4,
                                                            "end_token": 4,
                                                            "label": "graph_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 6,
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "graph_id: str"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 8,
                                                    "end_token": 10,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 8,
                                                            "end_token": 8,
                                                            "label": "version"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "label": "int"
                                                        }
                                                    ],
                                                    "label": "version: int"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 12,
                                                    "end_token": 14,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 12,
                                                            "end_token": 12,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 14,
                                                            "end_token": 14,
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "user_id: str"
                                                }
                                            ],
                                            "label": "(graph_id: str, version: int, user_id: str)"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 19,
                                            "end_token": 95,
                                            "children": [
                                                {
                                                    "type": "comment",
                                                    "start_token": 21,
                                                    "end_token": 35,
                                                    "label": "# Activate the requested version if it exists and is owned by the user."
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 37,
                                                    "end_token": 80,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 37,
                                                            "end_token": 37,
                                                            "label": "updated_count"
                                                        },
                                                        {
                                                            "type": "await",
                                                            "start_token": 39,
                                                            "end_token": 80,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 40,
                                                                    "end_token": 80,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 40,
                                                                            "end_token": 42,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 40,
                                                                                    "end_token": 40,
                                                                                    "label": "AgentGraph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 41,
                                                                                    "end_token": 41,
                                                                                    "label": "."
                                                                                }
                                                                            ],
                                                                            "label": "AgentGraph.prisma"
                                                                        },
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 45,
                                                                            "end_token": 46,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 45,
                                                                                    "end_token": 45,
                                                                                    "label": "."
                                                                                }
                                                                            ],
                                                                            "label": ".update_many"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 47,
                                                                            "end_token": 80,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 49,
                                                                                    "end_token": 55,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 52,
                                                                                            "end_token": 54,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 52,
                                                                                                    "end_token": 52,
                                                                                                    "label": "\"isActive\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "true",
                                                                                                    "start_token": 54,
                                                                                                    "end_token": 54,
                                                                                                    "label": "True"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"isActive\": True"
                                                                                        }
                                                                                    ],
                                                                                    "label": "data={\"isActive\": True}"
                                                                                },
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "start_token": 59,
                                                                                    "end_token": 77,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 62,
                                                                                            "end_token": 64,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 62,
                                                                                                    "label": "\"id\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 64,
                                                                                                    "end_token": 64,
                                                                                                    "label": "graph_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"id\": graph_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 67,
                                                                                            "end_token": 69,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 67,
                                                                                                    "end_token": 67,
                                                                                                    "label": "\"version\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 69,
                                                                                                    "end_token": 69,
                                                                                                    "label": "version"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"version\": version"
                                                                                        },
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 72,
                                                                                            "end_token": 74,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 72,
                                                                                                    "label": "\"userId\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 74,
                                                                                                    "end_token": 74,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\"userId\": user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        }"
                                                                                }
                                                                            ],
                                                                            "label": "(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraph.prisma().update_many(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )"
                                                                }
                                                            ],
                                                            "label": "await AgentGraph.prisma().update_many(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )"
                                                        }
                                                    ],
                                                    "label": "updated_count = await AgentGraph.prisma().update_many(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )"
                                                },
                                                {
                                                    "type": "conditional_expression",
                                                    "start_token": 82,
                                                    "end_token": 94,
                                                    "children": [
                                                        {
                                                            "type": "comparison_operator",
                                                            "start_token": 83,
                                                            "end_token": 86,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 83,
                                                                    "end_token": 83,
                                                                    "label": "updated_count"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "start_token": 86,
                                                                    "end_token": 86,
                                                                    "label": "0"
                                                                }
                                                            ],
                                                            "label": "updated_count == 0"
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 89,
                                                            "end_token": 94,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 90,
                                                                    "end_token": 94,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 90,
                                                                            "end_token": 90,
                                                                            "label": "Exception"
                                                                        },
                                                                        {
                                                                            "type": "expression_list",
                                                                            "start_token": 91,
                                                                            "end_token": 94,
                                                                            "children": [
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "start_token": 93,
                                                                                    "end_token": 93,
                                                                                    "label": "\"Graph #{graph_id} v{version} not found or not owned by user\""
                                                                                }
                                                                            ],
                                                                            "label": "(f\"Graph #{graph_id} v{version} not found or not owned by user\")"
                                                                        }
                                                                    ],
                                                                    "label": "Exception(f\"Graph #{graph_id} v{version} not found or not owned by user\")"
                                                                }
                                                            ],
                                                            "label": "raise Exception(f\"Graph #{graph_id} v{version} not found or not owned by user\")"
                                                        }
                                                    ],
                                                    "label": "if updated_count == 0:\n        raise Exception(f\"Graph #{graph_id} v{version} not found or not owned by user\")"
                                                }
                                            ],
                                            "label": ":\n    # Activate the requested version if it exists and is owned by the user.\n    updated_count = await AgentGraph.prisma().update_many(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )\n    if updated_count == 0:\n        raise Exception(f\"Graph #{graph_id} v{version} not found or not owned by user\")\n"
                                        }
                                    ],
                                    "label": "async def set_graph_active_version(graph_id: str, version: int, user_id: str) -> None:\n    # Activate the requested version if it exists and is owned by the user.\n    updated_count = await AgentGraph.prisma().update_many(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )\n    if updated_count == 0:\n        raise Exception(f\"Graph #{graph_id} v{version} not found or not owned by user\")\n"
                                }
                            ],
                            "label": "async def set_graph_active_version(graph_id: str, version: int, user_id: str) -> None:\n    # Activate the requested version if it exists and is owned by the user.\n    updated_count = await AgentGraph.prisma().update_many(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )\n    if updated_count == 0:\n        raise Exception(f\"Graph #{graph_id} v{version} not found or not owned by user\")\n"
                        },
                        {
                            "type": "block",
                            "start_token": 97,
                            "end_token": 155,
                            "children": [
                                {
                                    "type": "comment",
                                    "start_token": 97,
                                    "end_token": 102,
                                    "label": "# Deactivate all other versions."
                                },
                                {
                                    "type": "await",
                                    "start_token": 104,
                                    "end_token": 154,
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 105,
                                            "end_token": 154,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 105,
                                                    "end_token": 107,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 105,
                                                            "end_token": 105,
                                                            "label": "AgentGraph"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 106,
                                                            "end_token": 106,
                                                            "label": "."
                                                        }
                                                    ],
                                                    "label": "AgentGraph.prisma"
                                                },
                                                {
                                                    "type": "attribute",
                                                    "start_token": 110,
                                                    "end_token": 111,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 110,
                                                            "end_token": 110,
                                                            "label": "."
                                                        }
                                                    ],
                                                    "label": ".update_many"
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 112,
                                                    "end_token": 154,
                                                    "children": [
                                                        {
                                                            "type": "dictionary",
                                                            "start_token": 114,
                                                            "end_token": 120,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 117,
                                                                    "end_token": 119,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 117,
                                                                            "end_token": 117,
                                                                            "label": "\"isActive\""
                                                                        },
                                                                        {
                                                                            "type": "false",
                                                                            "start_token": 119,
                                                                            "end_token": 119,
                                                                            "label": "False"
                                                                        }
                                                                    ],
                                                                    "label": "\"isActive\": False"
                                                                }
                                                            ],
                                                            "label": "data={\"isActive\": False}"
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "start_token": 124,
                                                            "end_token": 151,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 127,
                                                                    "end_token": 129,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 127,
                                                                            "end_token": 127,
                                                                            "label": "\"id\""
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 129,
                                                                            "end_token": 129,
                                                                            "label": "graph_id"
                                                                        }
                                                                    ],
                                                                    "label": "\"id\": graph_id"
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 132,
                                                                    "end_token": 138,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 132,
                                                                            "end_token": 132,
                                                                            "label": "\"version\""
                                                                        },
                                                                        {
                                                                            "type": "dictionary_splat",
                                                                            "start_token": 134,
                                                                            "end_token": 137,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 137,
                                                                                    "end_token": 137,
                                                                                    "label": "version"
                                                                                }
                                                                            ],
                                                                            "label": "{\"not\": version"
                                                                        }
                                                                    ],
                                                                    "label": "\"version\": {\"not\": version}"
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 141,
                                                                    "end_token": 143,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 141,
                                                                            "end_token": 141,
                                                                            "label": "\"userId\""
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 143,
                                                                            "end_token": 143,
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "\"userId\": user_id"
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 146,
                                                                    "end_token": 148,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 146,
                                                                            "end_token": 146,
                                                                            "label": "\"isActive\""
                                                                        },
                                                                        {
                                                                            "type": "true",
                                                                            "start_token": 148,
                                                                            "end_token": 148,
                                                                            "label": "True"
                                                                        }
                                                                    ],
                                                                    "label": "\"isActive\": True"
                                                                }
                                                            ],
                                                            "label": "={\n            \"id\": graph_id,\n            \"version\": {\"not\": version},\n            \"userId\": user_id,\n            \"isActive\": True,\n        }"
                                                        }
                                                    ],
                                                    "label": "(\n        data={\"isActive\": False},\n        where={\n            \"id\": graph_id,\n            \"version\": {\"not\": version},\n            \"userId\": user_id,\n            \"isActive\": True,\n        },\n    )"
                                                }
                                            ],
                                            "label": "AgentGraph.prisma().update_many(\n        data={\"isActive\": False},\n        where={\n            \"id\": graph_id,\n            \"version\": {\"not\": version},\n            \"userId\": user_id,\n            \"isActive\": True,\n        },\n    )"
                                        }
                                    ],
                                    "label": "await AgentGraph.prisma().update_many(\n        data={\"isActive\": False},\n        where={\n            \"id\": graph_id,\n            \"version\": {\"not\": version},\n            \"userId\": user_id,\n            \"isActive\": True,\n        },\n    )"
                                }
                            ],
                            "label": "# Deactivate all other versions.\n    await AgentGraph.prisma().update_many(\n        data={\"isActive\": False},\n        where={\n            \"id\": graph_id,\n            \"version\": {\"not\": version},\n            \"userId\": user_id,\n            \"isActive\": True,\n        },\n    )\n"
                        }
                    ],
                    "label": "async def set_graph_active_version(graph_id: str, version: int, user_id: str) -> None:\n    # Activate the requested version if it exists and is owned by the user.\n    updated_count = await AgentGraph.prisma().update_many(\n        data={\"isActive\": True},\n        where={\n            \"id\": graph_id,\n            \"version\": version,\n            \"userId\": user_id,\n        },\n    )\n    if updated_count == 0:\n        raise Exception(f\"Graph #{graph_id} v{version} not found or not owned by user\")\n\n    # Deactivate all other versions.\n    await AgentGraph.prisma().update_many(\n        data={\"isActive\": False},\n        where={\n            \"id\": graph_id,\n            \"version\": {\"not\": version},\n            \"userId\": user_id,\n            \"isActive\": True,\n        },\n    )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graph_all_versions",
            "start_line": 567,
            "end_line": 577,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 84,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 84,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "get_graph_all_versions"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 11,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "graph_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 8,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        }
                                    ],
                                    "label": "(graph_id: str, user_id: str)"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 13,
                                    "end_token": 17,
                                    "children": [
                                        {
                                            "type": "type",
                                            "start_token": 14,
                                            "end_token": 14,
                                            "children": [],
                                            "label": "list"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 16,
                                            "end_token": 16,
                                            "children": [],
                                            "label": "GraphModel"
                                        }
                                    ],
                                    "label": "> list[GraphModel]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 19,
                                    "end_token": 84,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 20,
                                            "end_token": 59,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 20,
                                                    "end_token": 20,
                                                    "children": [],
                                                    "label": "graph_versions"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 22,
                                                    "end_token": 59,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 23,
                                                            "end_token": 59,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 23,
                                                                    "end_token": 29,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 23,
                                                                            "end_token": 27,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 23,
                                                                                    "end_token": 23,
                                                                                    "children": [],
                                                                                    "label": "AgentGraph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 25,
                                                                                    "end_token": 25,
                                                                                    "children": [],
                                                                                    "label": "prisma"
                                                                                }
                                                                            ],
                                                                            "label": "AgentGraph.prisma()"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 29,
                                                                            "end_token": 29,
                                                                            "children": [],
                                                                            "label": "find_many"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraph.prisma().find_many"
                                                                },
                                                                {
                                                                    "type": "arguments",
                                                                    "start_token": 30,
                                                                    "end_token": 59,
                                                                    "children": [
                                                                        {
                                                                            "type": "dictionary",
                                                                            "start_token": 32,
                                                                            "end_token": 42,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 35,
                                                                                    "end_token": 37,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "children": [],
                                                                                            "label": "\"id\""
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 37,
                                                                                            "end_token": 37,
                                                                                            "children": [],
                                                                                            "label": "graph_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"id\": graph_id"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 39,
                                                                                    "end_token": 41,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 39,
                                                                                            "end_token": 39,
                                                                                            "children": [],
                                                                                            "label": "\"userId\""
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 41,
                                                                                            "end_token": 41,
                                                                                            "children": [],
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"userId\": user_id"
                                                                                }
                                                                            ],
                                                                            "label": "where={\"id\": graph_id, \"userId\": user_id}"
                                                                        },
                                                                        {
                                                                            "type": "dictionary",
                                                                            "start_token": 45,
                                                                            "end_token": 51,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 48,
                                                                                    "end_token": 50,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 48,
                                                                                            "end_token": 48,
                                                                                            "children": [],
                                                                                            "label": "\"version\""
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 50,
                                                                                            "end_token": 50,
                                                                                            "children": [],
                                                                                            "label": "\"desc\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"version\": \"desc\""
                                                                                }
                                                                            ],
                                                                            "label": "order={\"version\": \"desc\"}"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 54,
                                                                            "end_token": 56,
                                                                            "children": [],
                                                                            "label": "include=AGENT_GRAPH_INCLUDE"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        where={\"id\": graph_id, \"userId\": user_id},\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )"
                                                                }
                                                            ],
                                                            "label": "AgentGraph.prisma().find_many(\n        where={\"id\": graph_id, \"userId\": user_id},\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )"
                                                        }
                                                    ],
                                                    "label": "await AgentGraph.prisma().find_many(\n        where={\"id\": graph_id, \"userId\": user_id},\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )"
                                                }
                                            ],
                                            "label": "graph_versions = await AgentGraph.prisma().find_many(\n        where={\"id\": graph_id, \"userId\": user_id},\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 62,
                                            "end_token": 69,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "start_token": 63,
                                                    "end_token": 64,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 64,
                                                            "end_token": 64,
                                                            "children": [],
                                                            "label": "graph_versions"
                                                        }
                                                    ],
                                                    "label": "not graph_versions"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 65,
                                                    "end_token": 69,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 67,
                                                            "end_token": 69,
                                                            "children": [
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 68,
                                                                    "end_token": 68,
                                                                    "children": [],
                                                                    "label": "["
                                                                }
                                                            ],
                                                            "label": "return []"
                                                        }
                                                    ],
                                                    "label": ":\n        return []"
                                                }
                                            ],
                                            "label": "if not graph_versions:\n        return []"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 72,
                                            "end_token": 84,
                                            "children": [
                                                {
                                                    "type": "list_comprehension",
                                                    "start_token": 73,
                                                    "end_token": 84,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 74,
                                                            "end_token": 79,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 74,
                                                                    "end_token": 76,
                                                                    "children": [
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 74,
                                                                            "end_token": 74,
                                                                            "children": [],
                                                                            "label": "GraphModel"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 76,
                                                                            "end_token": 76,
                                                                            "children": [],
                                                                            "label": "from_db"
                                                                        }
                                                                    ],
                                                                    "label": "GraphModel.from_db"
                                                                },
                                                                {
                                                                    "type": "arguments",
                                                                    "start_token": 77,
                                                                    "end_token": 79,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 78,
                                                                            "end_token": 78,
                                                                            "children": [],
                                                                            "label": "graph"
                                                                        }
                                                                    ],
                                                                    "label": "(graph)"
                                                                }
                                                            ],
                                                            "label": "GraphModel.from_db(graph)"
                                                        },
                                                        {
                                                            "type": "for_in_clause",
                                                            "start_token": 80,
                                                            "end_token": 83,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 81,
                                                                    "end_token": 81,
                                                                    "children": [],
                                                                    "label": "graph"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 83,
                                                                    "end_token": 83,
                                                                    "children": [],
                                                                    "label": "graph_versions"
                                                                }
                                                            ],
                                                            "label": "for graph in graph_versions"
                                                        }
                                                    ],
                                                    "label": "[GraphModel.from_db(graph) for graph in graph_versions]"
                                                }
                                            ],
                                            "label": "return [GraphModel.from_db(graph) for graph in graph_versions]"
                                        }
                                    ],
                                    "label": "\n    graph_versions = await AgentGraph.prisma().find_many(\n        where={\"id\": graph_id, \"userId\": user_id},\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )\n\n    if not graph_versions:\n        return []\n\n    return [GraphModel.from_db(graph) for graph in graph_versions]"
                                }
                            ],
                            "label": "async def get_graph_all_versions(graph_id: str, user_id: str) -> list[GraphModel]:\n    graph_versions = await AgentGraph.prisma().find_many(\n        where={\"id\": graph_id, \"userId\": user_id},\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )\n\n    if not graph_versions:\n        return []\n\n    return [GraphModel.from_db(graph) for graph in graph_versions]"
                        }
                    ],
                    "label": "async def get_graph_all_versions(graph_id: str, user_id: str) -> list[GraphModel]:\n    graph_versions = await AgentGraph.prisma().find_many(\n        where={\"id\": graph_id, \"userId\": user_id},\n        order={\"version\": \"desc\"},\n        include=AGENT_GRAPH_INCLUDE,\n    )\n\n    if not graph_versions:\n        return []\n\n    return [GraphModel.from_db(graph) for graph in graph_versions]"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "delete_graph",
            "start_line": 580,
            "end_line": 586,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 56,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 56,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "delete_graph"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 11,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "graph_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 8,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        }
                                    ],
                                    "label": "(graph_id: str, user_id: str)"
                                },
                                {
                                    "type": "type",
                                    "start_token": 14,
                                    "end_token": 14,
                                    "children": [],
                                    "label": "int"
                                },
                                {
                                    "type": "block",
                                    "start_token": 15,
                                    "end_token": 56,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 17,
                                            "end_token": 41,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 17,
                                                    "end_token": 17,
                                                    "children": [],
                                                    "label": "entries_count"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 19,
                                                    "end_token": 41,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 20,
                                                            "end_token": 41,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 20,
                                                                    "end_token": 26,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 20,
                                                                            "end_token": 22,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 20,
                                                                                    "end_token": 20,
                                                                                    "children": [],
                                                                                    "label": "AgentGraph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 22,
                                                                                    "end_token": 22,
                                                                                    "children": [],
                                                                                    "label": "prisma"
                                                                                }
                                                                            ],
                                                                            "label": "AgentGraph.prisma"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 26,
                                                                            "end_token": 26,
                                                                            "children": [],
                                                                            "label": "delete_many"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraph.prisma().delete_many"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 27,
                                                                    "end_token": 41,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 29,
                                                                            "end_token": 35,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 32,
                                                                                    "end_token": 32,
                                                                                    "children": [],
                                                                                    "label": "\"id\""
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 34,
                                                                                    "end_token": 34,
                                                                                    "children": [],
                                                                                    "label": "graph_id"
                                                                                }
                                                                            ],
                                                                            "label": "where={\"id\": graph_id,"
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 36,
                                                                            "end_token": 38,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 36,
                                                                                    "end_token": 36,
                                                                                    "children": [],
                                                                                    "label": "\"userId\""
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 38,
                                                                                    "end_token": 38,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "\"userId\": user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        where={\"id\": graph_id, \"userId\": user_id}\n    )"
                                                                }
                                                            ],
                                                            "label": "AgentGraph.prisma().delete_many(\n        where={\"id\": graph_id, \"userId\": user_id}\n    )"
                                                        }
                                                    ],
                                                    "label": "await AgentGraph.prisma().delete_many(\n        where={\"id\": graph_id, \"userId\": user_id}\n    )"
                                                }
                                            ],
                                            "label": "entries_count = await AgentGraph.prisma().delete_many(\n        where={\"id\": graph_id, \"userId\": user_id}\n    )"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 43,
                                            "end_token": 56,
                                            "children": [
                                                {
                                                    "type": "if_clause",
                                                    "start_token": 43,
                                                    "end_token": 45,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 44,
                                                            "end_token": 44,
                                                            "children": [],
                                                            "label": "entries_count"
                                                        }
                                                    ],
                                                    "label": "if entries_count:"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 46,
                                                    "end_token": 56,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "start_token": 47,
                                                            "end_token": 53,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 47,
                                                                    "end_token": 53,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 47,
                                                                            "end_token": 49,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 47,
                                                                                    "end_token": 47,
                                                                                    "children": [],
                                                                                    "label": "logger"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 49,
                                                                                    "end_token": 49,
                                                                                    "children": [],
                                                                                    "label": "info"
                                                                                }
                                                                            ],
                                                                            "label": "logger.info"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 50,
                                                                            "end_token": 53,
                                                                            "children": [
                                                                                {
                                                                                    "type": "concatenated_string",
                                                                                    "start_token": 51,
                                                                                    "end_token": 52,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 51,
                                                                                            "end_token": 51,
                                                                                            "children": [],
                                                                                            "label": "f"
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "start_token": 52,
                                                                                            "end_token": 52,
                                                                                            "children": [],
                                                                                            "label": "\"Deleted {entries_count} graph entries for Graph #{graph_id}\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "f\"Deleted {entries_count} graph entries for Graph #{graph_id}\""
                                                                                }
                                                                            ],
                                                                            "label": "(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.info(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")"
                                                                }
                                                            ],
                                                            "label": "logger.info(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 55,
                                                            "end_token": 56,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 56,
                                                                    "end_token": 56,
                                                                    "children": [],
                                                                    "label": "entries_count"
                                                                }
                                                            ],
                                                            "label": "return entries_count"
                                                        }
                                                    ],
                                                    "label": "\n        logger.info(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")\n    return entries_count"
                                                }
                                            ],
                                            "label": "if entries_count:\n        logger.info(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")\n    return entries_count"
                                        }
                                    ],
                                    "label": ":\n    entries_count = await AgentGraph.prisma().delete_many(\n        where={\"id\": graph_id, \"userId\": user_id}\n    )\n    if entries_count:\n        logger.info(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")\n    return entries_count"
                                }
                            ],
                            "label": "async def delete_graph(graph_id: str, user_id: str) -> int:\n    entries_count = await AgentGraph.prisma().delete_many(\n        where={\"id\": graph_id, \"userId\": user_id}\n    )\n    if entries_count:\n        logger.info(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")\n    return entries_count"
                        }
                    ],
                    "label": "async def delete_graph(graph_id: str, user_id: str) -> int:\n    entries_count = await AgentGraph.prisma().delete_many(\n        where={\"id\": graph_id, \"userId\": user_id}\n    )\n    if entries_count:\n        logger.info(f\"Deleted {entries_count} graph entries for Graph #{graph_id}\")\n    return entries_count"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "create_graph",
            "start_line": 589,
            "end_line": 598,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 73,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 73,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "create_graph"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 11,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "label": "Graph"
                                                }
                                            ],
                                            "label": "graph: Graph"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 8,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        }
                                    ],
                                    "label": "(graph: Graph, user_id: str)"
                                },
                                {
                                    "type": "type",
                                    "start_token": 13,
                                    "end_token": 14,
                                    "label": "> GraphModel"
                                },
                                {
                                    "type": "block",
                                    "start_token": 16,
                                    "end_token": 73,
                                    "children": [
                                        {
                                            "type": "with_statement",
                                            "start_token": 17,
                                            "end_token": 24,
                                            "children": [
                                                {
                                                    "type": "with_item",
                                                    "start_token": 18,
                                                    "end_token": 23,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 19,
                                                            "end_token": 21,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 19,
                                                                    "end_token": 19,
                                                                    "label": "transaction"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 20,
                                                                    "end_token": 21,
                                                                    "label": "()"
                                                                }
                                                            ],
                                                            "label": "transaction()"
                                                        },
                                                        {
                                                            "type": "as_pattern",
                                                            "start_token": 22,
                                                            "end_token": 23,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 23,
                                                                    "end_token": 23,
                                                                    "label": "tx"
                                                                }
                                                            ],
                                                            "label": "as tx"
                                                        }
                                                    ],
                                                    "label": "with transaction() as tx"
                                                }
                                            ],
                                            "label": "async with transaction() as tx:"
                                        },
                                        {
                                            "type": "await",
                                            "start_token": 26,
                                            "end_token": 34,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 27,
                                                    "end_token": 34,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 27,
                                                            "end_token": 27,
                                                            "label": "__create_graph"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 28,
                                                            "end_token": 34,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 29,
                                                                    "end_token": 29,
                                                                    "label": "tx"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 31,
                                                                    "end_token": 31,
                                                                    "label": "graph"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 33,
                                                                    "end_token": 33,
                                                                    "label": "user_id"
                                                                }
                                                            ],
                                                            "label": "(tx, graph, user_id)"
                                                        }
                                                    ],
                                                    "label": "__create_graph(tx, graph, user_id)"
                                                }
                                            ],
                                            "label": "await __create_graph(tx, graph, user_id)"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 37,
                                            "end_token": 66,
                                            "children": [
                                                {
                                                    "type": "if_clause",
                                                    "start_token": 37,
                                                    "end_token": 62,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 38,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 38,
                                                                    "end_token": 38,
                                                                    "label": "created_graph"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 41,
                                                                    "end_token": 61,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 42,
                                                                            "end_token": 61,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 42,
                                                                                    "end_token": 42,
                                                                                    "label": "get_graph"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 43,
                                                                                    "end_token": 60,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 45,
                                                                                            "end_token": 47,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 45,
                                                                                                    "end_token": 45,
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 47,
                                                                                                    "end_token": 47,
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 49,
                                                                                            "end_token": 51,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 49,
                                                                                                    "end_token": 49,
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 51,
                                                                                                    "end_token": 51,
                                                                                                    "label": "version"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.version"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 53,
                                                                                            "end_token": 55,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 53,
                                                                                                    "end_token": 53,
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 55,
                                                                                                    "end_token": 55,
                                                                                                    "label": "is_template"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.is_template"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 57,
                                                                                            "end_token": 59,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 57,
                                                                                                    "end_token": 57,
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 59,
                                                                                                    "end_token": 59,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n"
                                                                                }
                                                                            ],
                                                                            "label": "get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    )"
                                                                        }
                                                                    ],
                                                                    "label": "await get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    )"
                                                                }
                                                            ],
                                                            "label": "created_graph := await get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    ):\n        return created_graph"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 64,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 65,
                                                                    "end_token": 65,
                                                                    "label": "created_graph"
                                                                }
                                                            ],
                                                            "label": "return created_graph"
                                                        }
                                                    ],
                                                    "label": "if created_graph := await get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    ):"
                                                }
                                            ],
                                            "label": "if created_graph := await get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    ):\n        return created_graph\n"
                                        },
                                        {
                                            "type": "raise_statement",
                                            "start_token": 68,
                                            "end_token": 73,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 69,
                                                    "end_token": 73,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 69,
                                                            "end_token": 69,
                                                            "label": "ValueError"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 70,
                                                            "end_token": 73,
                                                            "children": [
                                                                {
                                                                    "type": "concatenated_string",
                                                                    "start_token": 71,
                                                                    "end_token": 72,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 71,
                                                                            "end_token": 72,
                                                                            "label": "f\"Created graph {graph.id} v{graph.version} is not in DB\""
                                                                        }
                                                                    ],
                                                                    "label": "f\"Created graph {graph.id} v{graph.version} is not in DB\""
                                                                }
                                                            ],
                                                            "label": "(f\"Created graph {graph.id} v{graph.version} is not in DB\")"
                                                        }
                                                    ],
                                                    "label": "ValueError(f\"Created graph {graph.id} v{graph.version} is not in DB\")"
                                                }
                                            ],
                                            "label": "raise ValueError(f\"Created graph {graph.id} v{graph.version} is not in DB\")"
                                        }
                                    ],
                                    "label": "\n    async with transaction() as tx:\n        await __create_graph(tx, graph, user_id)\n\n    if created_graph := await get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    ):\n        return created_graph\n\n    raise ValueError(f\"Created graph {graph.id} v{graph.version} is not in DB\")"
                                }
                            ],
                            "label": "async def create_graph(graph: Graph, user_id: str) -> GraphModel:\n    async with transaction() as tx:\n        await __create_graph(tx, graph, user_id)\n\n    if created_graph := await get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    ):\n        return created_graph\n\n    raise ValueError(f\"Created graph {graph.id} v{graph.version} is not in DB\")"
                        }
                    ],
                    "label": "async def create_graph(graph: Graph, user_id: str) -> GraphModel:\n    async with transaction() as tx:\n        await __create_graph(tx, graph, user_id)\n\n    if created_graph := await get_graph(\n        graph.id, graph.version, graph.is_template, user_id=user_id\n    ):\n        return created_graph\n\n    raise ValueError(f\"Created graph {graph.id} v{graph.version} is not in DB\")"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "__create_graph",
            "start_line": 601,
            "end_line": 644,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 254,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 80,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "__create_graph"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 13,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 5,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "tx"
                                                }
                                            ],
                                            "label": "tx,"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 6,
                                            "end_token": 8,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 7,
                                                    "end_token": 8,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 8,
                                                            "end_token": 8,
                                                            "children": [],
                                                            "label": "Graph"
                                                        }
                                                    ],
                                                    "label": ": Graph"
                                                }
                                            ],
                                            "label": "graph: Graph"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 10,
                                            "end_token": 12,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 12,
                                                    "end_token": 12,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        }
                                    ],
                                    "label": "(tx, graph: Graph, user_id: str)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 15,
                                    "end_token": 80,
                                    "children": [
                                        {
                                            "type": "await",
                                            "start_token": 16,
                                            "end_token": 80,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 17,
                                                    "end_token": 80,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 17,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 17,
                                                                    "end_token": 17,
                                                                    "children": [],
                                                                    "label": "AgentGraph"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 19,
                                                                    "end_token": 19,
                                                                    "children": [],
                                                                    "label": "prisma"
                                                                }
                                                            ],
                                                            "label": "AgentGraph.prisma"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 20,
                                                            "end_token": 22,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 21,
                                                                    "end_token": 21,
                                                                    "children": [],
                                                                    "label": "tx"
                                                                }
                                                            ],
                                                            "label": "(tx)"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 23,
                                                            "end_token": 80,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 23,
                                                                    "end_token": 24,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 23,
                                                                            "end_token": 23,
                                                                            "children": [],
                                                                            "label": "."
                                                                        }
                                                                    ],
                                                                    "label": ".create"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 25,
                                                                    "end_token": 80,
                                                                    "children": [
                                                                        {
                                                                            "type": "dictionary",
                                                                            "start_token": 28,
                                                                            "end_token": 78,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 31,
                                                                                    "end_token": 36,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 31,
                                                                                            "end_token": 31,
                                                                                            "children": [],
                                                                                            "label": "\"id\""
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 33,
                                                                                            "end_token": 35,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 33,
                                                                                                    "end_token": 33,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 35,
                                                                                                    "end_token": 35,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"id\": graph.id,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 38,
                                                                                    "end_token": 43,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 38,
                                                                                            "end_token": 38,
                                                                                            "children": [],
                                                                                            "label": "\"version\""
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 40,
                                                                                            "end_token": 42,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 40,
                                                                                                    "end_token": 40,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 42,
                                                                                                    "end_token": 42,
                                                                                                    "children": [],
                                                                                                    "label": "version"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.version"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"version\": graph.version,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 45,
                                                                                    "end_token": 50,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 45,
                                                                                            "end_token": 45,
                                                                                            "children": [],
                                                                                            "label": "\"name\""
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 47,
                                                                                            "end_token": 49,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 47,
                                                                                                    "end_token": 47,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 49,
                                                                                                    "end_token": 49,
                                                                                                    "children": [],
                                                                                                    "label": "name"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.name"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"name\": graph.name,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 52,
                                                                                    "end_token": 57,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 52,
                                                                                            "end_token": 52,
                                                                                            "children": [],
                                                                                            "label": "\"description\""
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 54,
                                                                                            "end_token": 56,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 54,
                                                                                                    "end_token": 54,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 56,
                                                                                                    "children": [],
                                                                                                    "label": "description"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.description"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"description\": graph.description,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 59,
                                                                                    "end_token": 64,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 59,
                                                                                            "end_token": 59,
                                                                                            "children": [],
                                                                                            "label": "\"isTemplate\""
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 61,
                                                                                            "end_token": 63,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 61,
                                                                                                    "end_token": 61,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 63,
                                                                                                    "end_token": 63,
                                                                                                    "children": [],
                                                                                                    "label": "is_template"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.is_template"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"isTemplate\": graph.is_template,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 66,
                                                                                    "end_token": 71,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 66,
                                                                                            "end_token": 66,
                                                                                            "children": [],
                                                                                            "label": "\"isActive\""
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 68,
                                                                                            "end_token": 70,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 68,
                                                                                                    "end_token": 68,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 70,
                                                                                                    "end_token": 70,
                                                                                                    "children": [],
                                                                                                    "label": "is_active"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.is_active"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"isActive\": graph.is_active,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 73,
                                                                                    "end_token": 76,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 73,
                                                                                            "end_token": 73,
                                                                                            "children": [],
                                                                                            "label": "\"userId\""
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 75,
                                                                                            "end_token": 75,
                                                                                            "children": [],
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"userId\": user_id,"
                                                                                }
                                                                            ],
                                                                            "label": "={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        data={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }\n    )"
                                                                }
                                                            ],
                                                            "label": ".create(\n        data={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }\n    )"
                                                        }
                                                    ],
                                                    "label": "AgentGraph.prisma(tx).create(\n        data={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }\n    )"
                                                }
                                            ],
                                            "label": "await AgentGraph.prisma(tx).create(\n        data={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }\n    )"
                                        },
                                        {
                                            "type": "await",
                                            "start_token": 83,
                                            "end_token": 169,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 84,
                                                    "end_token": 170,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 84,
                                                            "end_token": 86,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 84,
                                                                    "end_token": 84,
                                                                    "children": [],
                                                                    "label": "asyncio"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 86,
                                                                    "end_token": 86,
                                                                    "children": [],
                                                                    "label": "gather"
                                                                }
                                                            ],
                                                            "label": "asyncio.gather"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 87,
                                                            "end_token": 169,
                                                            "children": [
                                                                {
                                                                    "type": "unpacking",
                                                                    "start_token": 89,
                                                                    "end_token": 167,
                                                                    "children": [
                                                                        {
                                                                            "type": "list_comprehension",
                                                                            "start_token": 90,
                                                                            "end_token": 167,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 92,
                                                                                    "end_token": 158,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 92,
                                                                                            "end_token": 94,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 92,
                                                                                                    "end_token": 92,
                                                                                                    "children": [],
                                                                                                    "label": "AgentNode"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 94,
                                                                                                    "end_token": 94,
                                                                                                    "children": [],
                                                                                                    "label": "prisma"
                                                                                                }
                                                                                            ],
                                                                                            "label": "AgentNode.prisma"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 95,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 96,
                                                                                                    "end_token": 96,
                                                                                                    "children": [],
                                                                                                    "label": "tx"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(tx)"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 98,
                                                                                            "end_token": 158,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 98,
                                                                                                    "end_token": 99,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 98,
                                                                                                            "end_token": 98,
                                                                                                            "children": [],
                                                                                                            "label": "."
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ".create"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 100,
                                                                                                    "end_token": 158,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "dictionary",
                                                                                                            "start_token": 102,
                                                                                                            "end_token": 156,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 104,
                                                                                                                    "end_token": 109,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 104,
                                                                                                                            "end_token": 104,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"id\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 106,
                                                                                                                            "end_token": 108,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 106,
                                                                                                                                    "end_token": 106,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "node"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 108,
                                                                                                                                    "end_token": 108,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "id"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "node.id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"id\": node.id,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 111,
                                                                                                                    "end_token": 116,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 111,
                                                                                                                            "end_token": 111,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"agentBlockId\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 113,
                                                                                                                            "end_token": 115,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 113,
                                                                                                                                    "end_token": 113,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "node"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 115,
                                                                                                                                    "end_token": 115,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "block_id"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "node.block_id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"agentBlockId\": node.block_id,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 118,
                                                                                                                    "end_token": 123,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 118,
                                                                                                                            "end_token": 118,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"agentGraphId\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 120,
                                                                                                                            "end_token": 122,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 120,
                                                                                                                                    "end_token": 120,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "graph"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 122,
                                                                                                                                    "end_token": 122,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "id"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "graph.id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"agentGraphId\": graph.id,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 125,
                                                                                                                    "end_token": 130,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 125,
                                                                                                                            "end_token": 125,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"agentGraphVersion\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 127,
                                                                                                                            "end_token": 129,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 127,
                                                                                                                                    "end_token": 127,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "graph"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 129,
                                                                                                                                    "end_token": 129,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "version"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "graph.version"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"agentGraphVersion\": graph.version,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 132,
                                                                                                                    "end_token": 142,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 132,
                                                                                                                            "end_token": 132,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"constantInput\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "call",
                                                                                                                            "start_token": 134,
                                                                                                                            "end_token": 141,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 134,
                                                                                                                                    "end_token": 136,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 134,
                                                                                                                                            "end_token": 134,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "json"
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 136,
                                                                                                                                            "end_token": 136,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "dumps"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "json.dumps"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "argument_list",
                                                                                                                                    "start_token": 137,
                                                                                                                                    "end_token": 141,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "attribute",
                                                                                                                                            "start_token": 138,
                                                                                                                                            "end_token": 140,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 138,
                                                                                                                                                    "end_token": 138,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "node"
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 140,
                                                                                                                                                    "end_token": 140,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "input_default"
                                                                                                                                                }
                                                                                                                                            ],
                                                                                                                                            "label": "node.input_default"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "(node.input_default)"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "json.dumps(node.input_default)"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"constantInput\": json.dumps(node.input_default),"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 144,
                                                                                                                    "end_token": 154,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 144,
                                                                                                                            "end_token": 144,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"metadata\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "call",
                                                                                                                            "start_token": 146,
                                                                                                                            "end_token": 153,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 146,
                                                                                                                                    "end_token": 148,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 146,
                                                                                                                                            "end_token": 146,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "json"
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 148,
                                                                                                                                            "end_token": 148,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "dumps"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "json.dumps"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "argument_list",
                                                                                                                                    "start_token": 149,
                                                                                                                                    "end_token": 153,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "attribute",
                                                                                                                                            "start_token": 150,
                                                                                                                                            "end_token": 152,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 150,
                                                                                                                                                    "end_token": 150,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "node"
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 152,
                                                                                                                                                    "end_token": 152,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "metadata"
                                                                                                                                                }
                                                                                                                                            ],
                                                                                                                                            "label": "node.metadata"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "(node.metadata)"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "json.dumps(node.metadata)"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"metadata\": json.dumps(node.metadata),"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "{\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )"
                                                                                                }
                                                                                            ],
                                                                                            "label": ".create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentNode.prisma(tx).create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )"
                                                                                }
                                                                            ],
                                                                            "label": "[\n            AgentNode.prisma(tx).create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )\n            for node in graph.nodes\n        ]"
                                                                        },
                                                                        {
                                                                            "type": "for_in_clause",
                                                                            "start_token": 160,
                                                                            "end_token": 166,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 161,
                                                                                    "end_token": 161,
                                                                                    "children": [],
                                                                                    "label": "node"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 163,
                                                                                    "end_token": 165,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 163,
                                                                                            "end_token": 163,
                                                                                            "children": [],
                                                                                            "label": "graph"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 165,
                                                                                            "end_token": 165,
                                                                                            "children": [],
                                                                                            "label": "nodes"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph.nodes"
                                                                                }
                                                                            ],
                                                                            "label": "for node in graph.nodes\n"
                                                                        }
                                                                    ],
                                                                    "label": "*[\n            AgentNode.prisma(tx).create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )\n            for node in graph.nodes\n        ]"
                                                                }
                                                            ],
                                                            "label": "(\n        *[\n            AgentNode.prisma(tx).create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )\n            for node in graph.nodes\n        ]\n    )"
                                                        }
                                                    ],
                                                    "label": "asyncio.gather(\n        *[\n            AgentNode.prisma(tx).create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )\n            for node in graph.nodes\n        ]\n    )\n"
                                                }
                                            ],
                                            "label": "await asyncio.gather(\n        *[\n            AgentNode.prisma(tx).create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )\n            for node in graph.nodes\n        ]\n    )"
                                        },
                                        {
                                            "type": "await",
                                            "start_token": 172,
                                            "end_token": 253,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 173,
                                                    "end_token": 253,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 173,
                                                            "end_token": 175,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 173,
                                                                    "end_token": 173,
                                                                    "children": [],
                                                                    "label": "asyncio"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 175,
                                                                    "end_token": 175,
                                                                    "children": [],
                                                                    "label": "gather"
                                                                }
                                                            ],
                                                            "label": "asyncio.gather"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 176,
                                                            "end_token": 253,
                                                            "children": [
                                                                {
                                                                    "type": "unpacking",
                                                                    "start_token": 178,
                                                                    "end_token": 251,
                                                                    "children": [
                                                                        {
                                                                            "type": "list_comprehension",
                                                                            "start_token": 179,
                                                                            "end_token": 251,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 181,
                                                                                    "end_token": 243,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 181,
                                                                                            "end_token": 183,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 181,
                                                                                                    "end_token": 181,
                                                                                                    "children": [],
                                                                                                    "label": "AgentNodeLink"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 183,
                                                                                                    "end_token": 183,
                                                                                                    "children": [],
                                                                                                    "label": "prisma"
                                                                                                }
                                                                                            ],
                                                                                            "label": "AgentNodeLink.prisma"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 184,
                                                                                            "end_token": 186,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 185,
                                                                                                    "end_token": 185,
                                                                                                    "children": [],
                                                                                                    "label": "tx"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(tx)"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 187,
                                                                                            "end_token": 243,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 187,
                                                                                                    "end_token": 188,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 187,
                                                                                                            "end_token": 187,
                                                                                                            "children": [],
                                                                                                            "label": "."
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ".create"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 189,
                                                                                                    "end_token": 243,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "dictionary",
                                                                                                            "start_token": 191,
                                                                                                            "end_token": 241,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 193,
                                                                                                                    "end_token": 202,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 193,
                                                                                                                            "end_token": 193,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"id\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "call",
                                                                                                                            "start_token": 195,
                                                                                                                            "end_token": 201,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 197,
                                                                                                                                    "end_token": 198,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 197,
                                                                                                                                            "end_token": 197,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "uuid"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "uuid."
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "str(uuid.uuid4()"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"id\": str(uuid.uuid4())"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 205,
                                                                                                                    "end_token": 210,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 205,
                                                                                                                            "end_token": 205,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"sourceName\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 207,
                                                                                                                            "end_token": 209,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 207,
                                                                                                                                    "end_token": 207,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "link"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "link.source_name"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"sourceName\": link.source_name,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 212,
                                                                                                                    "end_token": 217,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 212,
                                                                                                                            "end_token": 212,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"sinkName\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 214,
                                                                                                                            "end_token": 216,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 214,
                                                                                                                                    "end_token": 214,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "link"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "link.sink_name"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"sinkName\": link.sink_name,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 219,
                                                                                                                    "end_token": 224,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 219,
                                                                                                                            "end_token": 219,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"agentNodeSourceId\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 221,
                                                                                                                            "end_token": 223,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 221,
                                                                                                                                    "end_token": 221,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "link"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "link.source_id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"agentNodeSourceId\": link.source_id,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 226,
                                                                                                                    "end_token": 231,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 226,
                                                                                                                            "end_token": 226,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"agentNodeSinkId\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 228,
                                                                                                                            "end_token": 230,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 228,
                                                                                                                                    "end_token": 228,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "link"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "link.sink_id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"agentNodeSinkId\": link.sink_id,"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 233,
                                                                                                                    "end_token": 238,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 233,
                                                                                                                            "end_token": 233,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"isStatic\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 235,
                                                                                                                            "end_token": 237,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 235,
                                                                                                                                    "end_token": 235,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "link"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "link.is_static"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"isStatic\": link.is_static,"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "{\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n"
                                                                                                }
                                                                                            ],
                                                                                            "label": ".create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentNodeLink.prisma(tx).create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n"
                                                                                },
                                                                                {
                                                                                    "type": "for_in_clause",
                                                                                    "start_token": 244,
                                                                                    "end_token": 250,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 245,
                                                                                            "end_token": 245,
                                                                                            "children": [],
                                                                                            "label": "link"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 247,
                                                                                            "end_token": 249,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 247,
                                                                                                    "end_token": 247,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.links"
                                                                                        }
                                                                                    ],
                                                                                    "label": "for link in graph.links\n"
                                                                                }
                                                                            ],
                                                                            "label": "[\n            AgentNodeLink.prisma(tx).create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n            for link in graph.links\n        ]"
                                                                        }
                                                                    ],
                                                                    "label": "*[\n            AgentNodeLink.prisma(tx).create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n            for link in graph.links\n        ]"
                                                                }
                                                            ],
                                                            "label": "(\n        *[\n            AgentNodeLink.prisma(tx).create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n            for link in graph.links\n        ]\n    )"
                                                        }
                                                    ],
                                                    "label": "asyncio.gather(\n        *[\n            AgentNodeLink.prisma(tx).create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n            for link in graph.links\n        ]\n    )"
                                                }
                                            ],
                                            "label": "await asyncio.gather(\n        *[\n            AgentNodeLink.prisma(tx).create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n            for link in graph.links\n        ]\n    )"
                                        }
                                    ],
                                    "label": "\n    await AgentGraph.prisma(tx).create(\n        data={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }\n    )"
                                }
                            ],
                            "label": "async def __create_graph(tx, graph: Graph, user_id: str):\n    await AgentGraph.prisma(tx).create(\n        data={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }\n    )"
                        }
                    ],
                    "label": "async def __create_graph(tx, graph: Graph, user_id: str):\n    await AgentGraph.prisma(tx).create(\n        data={\n            \"id\": graph.id,\n            \"version\": graph.version,\n            \"name\": graph.name,\n            \"description\": graph.description,\n            \"isTemplate\": graph.is_template,\n            \"isActive\": graph.is_active,\n            \"userId\": user_id,\n        }\n    )\n\n    await asyncio.gather(\n        *[\n            AgentNode.prisma(tx).create(\n                {\n                    \"id\": node.id,\n                    \"agentBlockId\": node.block_id,\n                    \"agentGraphId\": graph.id,\n                    \"agentGraphVersion\": graph.version,\n                    \"constantInput\": json.dumps(node.input_default),\n                    \"metadata\": json.dumps(node.metadata),\n                }\n            )\n            for node in graph.nodes\n        ]\n    )\n\n    await asyncio.gather(\n        *[\n            AgentNodeLink.prisma(tx).create(\n                {\n                    \"id\": str(uuid.uuid4()),\n                    \"sourceName\": link.source_name,\n                    \"sinkName\": link.sink_name,\n                    \"agentNodeSourceId\": link.source_id,\n                    \"agentNodeSinkId\": link.sink_id,\n                    \"isStatic\": link.is_static,\n                }\n            )\n            for link in graph.links\n        ]\n    )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "make_graph_model",
            "start_line": 650,
            "end_line": 673,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 98,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 97,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "make_graph_model"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 10,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 3,
                                            "end_token": 5,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 3,
                                                    "end_token": 3,
                                                    "label": "creatable_graph"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "Graph"
                                                }
                                            ],
                                            "label": "creatable_graph: Graph"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        }
                                    ],
                                    "label": "(creatable_graph: Graph, user_id: str)"
                                },
                                {
                                    "type": "return_statement",
                                    "start_token": 11,
                                    "end_token": 13,
                                    "children": [
                                        {
                                            "type": "type",
                                            "start_token": 13,
                                            "end_token": 13,
                                            "label": "GraphModel"
                                        }
                                    ],
                                    "label": "-> GraphModel"
                                },
                                {
                                    "type": "string",
                                    "start_token": 16,
                                    "end_token": 18,
                                    "label": "\"\"\"\n    Convert a Graph to a GraphModel, setting graph_id and graph_version on all nodes.\n\n    Args:\n        creatable_graph (Graph): The creatable graph to convert.\n        user_id (str): The ID of the user creating the graph.\n\n    Returns:\n        GraphModel: The converted Graph object.\n    \"\"\""
                                },
                                {
                                    "type": "block",
                                    "start_token": 20,
                                    "end_token": 97,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 32,
                                            "end_token": 97,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 32,
                                                    "end_token": 97,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 33,
                                                            "end_token": 33,
                                                            "label": "GraphModel"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 34,
                                                            "end_token": 97,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary_splat",
                                                                    "start_token": 36,
                                                                    "end_token": 47,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 38,
                                                                            "end_token": 47,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 38,
                                                                                    "end_token": 40,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 38,
                                                                                            "end_token": 38,
                                                                                            "label": "creatable_graph"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 40,
                                                                                            "end_token": 40,
                                                                                            "label": "model_dump"
                                                                                        }
                                                                                    ],
                                                                                    "label": "creatable_graph.model_dump"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 41,
                                                                                    "end_token": 47,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 42,
                                                                                            "end_token": 46,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 42,
                                                                                                    "end_token": 42,
                                                                                                    "label": "exclude"
                                                                                                },
                                                                                                {
                                                                                                    "type": "set",
                                                                                                    "start_token": 44,
                                                                                                    "end_token": 46,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 45,
                                                                                                            "end_token": 45,
                                                                                                            "label": "\"nodes\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\"nodes\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "exclude={\"nodes\"}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(exclude={\"nodes\"})"
                                                                                }
                                                                            ],
                                                                            "label": "creatable_graph.model_dump(exclude={\"nodes\"})"
                                                                        }
                                                                    ],
                                                                    "label": "**creatable_graph.model_dump(exclude={\"nodes\"})"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 50,
                                                                    "end_token": 52,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 50,
                                                                            "end_token": 50,
                                                                            "label": "user_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 52,
                                                                            "end_token": 52,
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "user_id=user_id"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 55,
                                                                    "end_token": 94,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 55,
                                                                            "end_token": 55,
                                                                            "label": "nodes"
                                                                        },
                                                                        {
                                                                            "type": "list_comprehension",
                                                                            "start_token": 57,
                                                                            "end_token": 94,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 59,
                                                                                    "end_token": 85,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 59,
                                                                                            "end_token": 59,
                                                                                            "label": "NodeModel"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 60,
                                                                                            "end_token": 85,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "dictionary_splat",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 68,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 64,
                                                                                                            "end_token": 68,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 64,
                                                                                                                    "end_token": 66,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 64,
                                                                                                                            "end_token": 64,
                                                                                                                            "label": "creatable_node"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 66,
                                                                                                                            "end_token": 66,
                                                                                                                            "label": "model_dump"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "creatable_node.model_dump"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "start_token": 67,
                                                                                                                    "end_token": 68,
                                                                                                                    "label": "()"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "creatable_node.model_dump()"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "**creatable_node.model_dump()"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 71,
                                                                                                    "end_token": 76,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 71,
                                                                                                            "end_token": 71,
                                                                                                            "label": "graph_id"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 73,
                                                                                                            "end_token": 75,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 73,
                                                                                                                    "end_token": 73,
                                                                                                                    "label": "creatable_graph"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 75,
                                                                                                                    "end_token": 75,
                                                                                                                    "label": "id"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "creatable_graph.id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "graph_id=creatable_graph.id,"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 78,
                                                                                                    "end_token": 83,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 78,
                                                                                                            "end_token": 78,
                                                                                                            "label": "graph_version"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 80,
                                                                                                            "end_token": 82,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 80,
                                                                                                                    "end_token": 80,
                                                                                                                    "label": "creatable_graph"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 82,
                                                                                                                    "end_token": 82,
                                                                                                                    "label": "version"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "creatable_graph.version"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "graph_version=creatable_graph.version,"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )"
                                                                                },
                                                                                {
                                                                                    "type": "for_in_clause",
                                                                                    "start_token": 87,
                                                                                    "end_token": 92,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 88,
                                                                                            "end_token": 88,
                                                                                            "label": "creatable_node"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 90,
                                                                                            "end_token": 92,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 90,
                                                                                                    "end_token": 90,
                                                                                                    "label": "creatable_graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 92,
                                                                                                    "end_token": 92,
                                                                                                    "label": "nodes"
                                                                                                }
                                                                                            ],
                                                                                            "label": "creatable_graph.nodes"
                                                                                        }
                                                                                    ],
                                                                                    "label": "for creatable_node in creatable_graph.nodes"
                                                                                }
                                                                            ],
                                                                            "label": "[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ]"
                                                                        }
                                                                    ],
                                                                    "label": "nodes=[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ]"
                                                                }
                                                            ],
                                                            "label": "(\n        **creatable_graph.model_dump(exclude={\"nodes\"}),\n        user_id=user_id,\n        nodes=[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ],\n    )"
                                                        }
                                                    ],
                                                    "label": "return GraphModel(\n        **creatable_graph.model_dump(exclude={\"nodes\"}),\n        user_id=user_id,\n        nodes=[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ],\n    )"
                                                }
                                            ],
                                            "label": "return GraphModel(\n        **creatable_graph.model_dump(exclude={\"nodes\"}),\n        user_id=user_id,\n        nodes=[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ],\n    )"
                                        }
                                    ],
                                    "label": "# Create a new Graph object, inheriting properties from CreatableGraph\n    return GraphModel(\n        **creatable_graph.model_dump(exclude={\"nodes\"}),\n        user_id=user_id,\n        nodes=[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ],\n    )"
                                }
                            ],
                            "label": "def make_graph_model(creatable_graph: Graph, user_id: str) -> GraphModel:\n    \"\"\"\n    Convert a Graph to a GraphModel, setting graph_id and graph_version on all nodes.\n\n    Args:\n        creatable_graph (Graph): The creatable graph to convert.\n        user_id (str): The ID of the user creating the graph.\n\n    Returns:\n        GraphModel: The converted Graph object.\n    \"\"\"\n    # Create a new Graph object, inheriting properties from CreatableGraph\n    return GraphModel(\n        **creatable_graph.model_dump(exclude={\"nodes\"}),\n        user_id=user_id,\n        nodes=[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ],\n    )"
                        }
                    ],
                    "label": "def make_graph_model(creatable_graph: Graph, user_id: str) -> GraphModel:\n    \"\"\"\n    Convert a Graph to a GraphModel, setting graph_id and graph_version on all nodes.\n\n    Args:\n        creatable_graph (Graph): The creatable graph to convert.\n        user_id (str): The ID of the user creating the graph.\n\n    Returns:\n        GraphModel: The converted Graph object.\n    \"\"\"\n    # Create a new Graph object, inheriting properties from CreatableGraph\n    return GraphModel(\n        **creatable_graph.model_dump(exclude={\"nodes\"}),\n        user_id=user_id,\n        nodes=[\n            NodeModel(\n                **creatable_node.model_dump(),\n                graph_id=creatable_graph.id,\n                graph_version=creatable_graph.version,\n            )\n            for creatable_node in creatable_graph.nodes\n        ],\n    )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "fix_llm_provider_credentials",
            "start_line": 676,
            "end_line": 746,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 369,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 369,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 369,
                                    "children": [
                                        {
                                            "type": "block",
                                            "start_token": 11,
                                            "end_token": 369,
                                            "children": [
                                                {
                                                    "type": "import_from_statement",
                                                    "start_token": 11,
                                                    "end_token": 18,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 12,
                                                            "end_token": 16,
                                                            "label": "backend.integrations.credentials_store"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 18,
                                                            "end_token": 18,
                                                            "label": "IntegrationCredentialsStore"
                                                        }
                                                    ],
                                                    "label": "from backend.integrations.credentials_store import IntegrationCredentialsStore"
                                                },
                                                {
                                                    "type": "import_from_statement",
                                                    "start_token": 21,
                                                    "end_token": 25,
                                                    "children": [
                                                        {
                                                            "type": "relative_import",
                                                            "start_token": 22,
                                                            "end_token": 22,
                                                            "label": "."
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 23,
                                                            "end_token": 23,
                                                            "label": "user"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 25,
                                                            "end_token": 25,
                                                            "label": "get_user_integrations"
                                                        }
                                                    ],
                                                    "label": "from .user import get_user_integrations"
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 28,
                                                    "end_token": 32,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 28,
                                                            "end_token": 28,
                                                            "label": "store"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 30,
                                                            "end_token": 32,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 30,
                                                                    "end_token": 30,
                                                                    "label": "IntegrationCredentialsStore"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 31,
                                                                    "end_token": 32,
                                                                    "label": "()"
                                                                }
                                                            ],
                                                            "label": "IntegrationCredentialsStore()"
                                                        }
                                                    ],
                                                    "label": "store = IntegrationCredentialsStore()"
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 35,
                                                    "end_token": 65,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 35,
                                                            "end_token": 35,
                                                            "label": "broken_nodes"
                                                        },
                                                        {
                                                            "type": "await",
                                                            "start_token": 37,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 38,
                                                                    "end_token": 65,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 38,
                                                                            "end_token": 44,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 38,
                                                                                    "end_token": 42,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 38,
                                                                                            "end_token": 38,
                                                                                            "label": "prisma"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 41,
                                                                                            "end_token": 42,
                                                                                            "label": "()"
                                                                                        }
                                                                                    ],
                                                                                    "label": "prisma.get_client()"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 44,
                                                                                    "end_token": 44,
                                                                                    "label": "query_raw"
                                                                                }
                                                                            ],
                                                                            "label": "prisma.get_client().query_raw"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 45,
                                                                            "end_token": 65,
                                                                            "children": [],
                                                                            "label": "(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )"
                                                                        }
                                                                    ],
                                                                    "label": "prisma.get_client().query_raw(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )"
                                                                }
                                                            ],
                                                            "label": "await prisma.get_client().query_raw(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )"
                                                        }
                                                    ],
                                                    "label": "broken_nodes = await prisma.get_client().query_raw(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )"
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "start_token": 67,
                                                    "end_token": 73,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 67,
                                                            "end_token": 73,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 67,
                                                                    "end_token": 69,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 67,
                                                                            "end_token": 67,
                                                                            "label": "logger"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 69,
                                                                            "end_token": 69,
                                                                            "label": "info"
                                                                        }
                                                                    ],
                                                                    "label": "logger.info"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 70,
                                                                    "end_token": 73,
                                                                    "label": "(f\"Fixing LLM credential inputs on {len(broken_nodes)} nodes\")"
                                                                }
                                                            ],
                                                            "label": "logger.info(f\"Fixing LLM credential inputs on {len(broken_nodes)} nodes\")"
                                                        }
                                                    ],
                                                    "label": "logger.info(f\"Fixing LLM credential inputs on {len(broken_nodes)} nodes\")"
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 76,
                                                    "end_token": 80,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 76,
                                                            "end_token": 76,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 80,
                                                            "end_token": 80,
                                                            "label": "\"\""
                                                        }
                                                    ],
                                                    "label": "user_id: str = \"\""
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 82,
                                                    "end_token": 84,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 82,
                                                            "end_token": 82,
                                                            "label": "user_integrations"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 84,
                                                            "end_token": 84,
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "user_integrations = None"
                                                },
                                                {
                                                    "type": "for_statement",
                                                    "start_token": 86,
                                                    "end_token": 368,
                                                    "children": [
                                                        {
                                                            "type": "for_in_clause",
                                                            "start_token": 86,
                                                            "end_token": 89,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 87,
                                                                    "end_token": 87,
                                                                    "label": "node"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 89,
                                                                    "end_token": 89,
                                                                    "label": "broken_nodes"
                                                                }
                                                            ],
                                                            "label": "for node in broken_nodes"
                                                        },
                                                        {
                                                            "type": "block",
                                                            "start_token": 90,
                                                            "end_token": 368,
                                                            "children": [
                                                                {
                                                                    "type": "if_statement",
                                                                    "start_token": 92,
                                                                    "end_token": 126,
                                                                    "children": [
                                                                        {
                                                                            "type": "comparison_operator",
                                                                            "start_token": 92,
                                                                            "end_token": 100,
                                                                            "children": [
                                                                                {
                                                                                    "type": "subscript",
                                                                                    "start_token": 93,
                                                                                    "end_token": 95,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 93,
                                                                                            "end_token": 93,
                                                                                            "label": "node"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 95,
                                                                                            "end_token": 95,
                                                                                            "label": "\"user_id\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "node[\"user_id\""
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 99,
                                                                                    "end_token": 99,
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "if node[\"user_id\"] != user_id:"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 101,
                                                                            "end_token": 126,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 112,
                                                                                    "end_token": 117,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 112,
                                                                                            "end_token": 112,
                                                                                            "label": "user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "subscript",
                                                                                            "start_token": 114,
                                                                                            "end_token": 116,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 114,
                                                                                                    "end_token": 114,
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 116,
                                                                                                    "end_token": 116,
                                                                                                    "label": "\"user_id\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "node[\"user_id\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "user_id = node[\"user_id\"]"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 119,
                                                                                    "end_token": 125,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 119,
                                                                                            "end_token": 119,
                                                                                            "label": "user_integrations"
                                                                                        },
                                                                                        {
                                                                                            "type": "await",
                                                                                            "start_token": 121,
                                                                                            "end_token": 125,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 122,
                                                                                                    "end_token": 125,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 122,
                                                                                                            "end_token": 122,
                                                                                                            "label": "get_user_integrations"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 123,
                                                                                                            "end_token": 125,
                                                                                                            "label": "(user_id)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "get_user_integrations(user_id)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "await get_user_integrations(user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "user_integrations = await get_user_integrations(user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n"
                                                                        }
                                                                    ],
                                                                    "label": "if node[\"user_id\"] != user_id:\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n"
                                                                },
                                                                {
                                                                    "type": "elif_clause",
                                                                    "start_token": 127,
                                                                    "end_token": 137,
                                                                    "children": [
                                                                        {
                                                                            "type": "not_operator",
                                                                            "start_token": 128,
                                                                            "end_token": 129,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 129,
                                                                                    "end_token": 129,
                                                                                    "label": "user_integrations"
                                                                                }
                                                                            ],
                                                                            "label": "not user_integrations"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 130,
                                                                            "end_token": 137,
                                                                            "children": [
                                                                                {
                                                                                    "type": "raise_statement",
                                                                                    "start_token": 132,
                                                                                    "end_token": 137,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 133,
                                                                                            "end_token": 137,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 133,
                                                                                                    "end_token": 133,
                                                                                                    "label": "RuntimeError"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 134,
                                                                                                    "end_token": 137,
                                                                                                    "label": "(f\"Impossible state while processing node {node}\")"
                                                                                                }
                                                                                            ],
                                                                                            "label": "RuntimeError(f\"Impossible state while processing node {node}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "raise RuntimeError(f\"Impossible state while processing node {node}\")"
                                                                                }
                                                                            ],
                                                                            "label": ":\n            raise RuntimeError(f\"Impossible state while processing node {node}\")"
                                                                        }
                                                                    ],
                                                                    "label": "elif not user_integrations:\n            raise RuntimeError(f\"Impossible state while processing node {node}\")"
                                                                },
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 140,
                                                                    "end_token": 147,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 140,
                                                                            "end_token": 140,
                                                                            "label": "node_id"
                                                                        },
                                                                        {
                                                                            "type": "subscript",
                                                                            "start_token": 144,
                                                                            "end_token": 146,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 144,
                                                                                    "end_token": 144,
                                                                                    "label": "node"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 146,
                                                                                    "end_token": 146,
                                                                                    "label": "\"node_id\""
                                                                                }
                                                                            ],
                                                                            "label": "node[\"node_id\""
                                                                        }
                                                                    ],
                                                                    "label": "node_id: str = node[\"node_id\"]"
                                                                },
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 149,
                                                                    "end_token": 161,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 149,
                                                                            "end_token": 149,
                                                                            "label": "node_preset_input"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 153,
                                                                            "end_token": 161,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 153,
                                                                                    "end_token": 155,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 153,
                                                                                            "end_token": 153,
                                                                                            "label": "json"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 155,
                                                                                            "end_token": 155,
                                                                                            "label": "loads"
                                                                                        }
                                                                                    ],
                                                                                    "label": "json.loads"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 156,
                                                                                    "end_token": 161,
                                                                                    "label": "(node[\"node_preset_input\"])"
                                                                                }
                                                                            ],
                                                                            "label": "json.loads(node[\"node_preset_input\"])"
                                                                        }
                                                                    ],
                                                                    "label": "node_preset_input: dict = json.loads(node[\"node_preset_input\"])"
                                                                },
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 163,
                                                                    "end_token": 170,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 163,
                                                                            "end_token": 163,
                                                                            "label": "credentials_meta"
                                                                        },
                                                                        {
                                                                            "type": "subscript",
                                                                            "start_token": 167,
                                                                            "end_token": 169,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 167,
                                                                                    "end_token": 167,
                                                                                    "label": "node_preset_input"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 169,
                                                                                    "end_token": 169,
                                                                                    "label": "\"credentials\""
                                                                                }
                                                                            ],
                                                                            "label": "node_preset_input[\"credentials\""
                                                                        }
                                                                    ],
                                                                    "label": "credentials_meta: dict = node_preset_input[\"credentials\"]"
                                                                },
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 173,
                                                                    "end_token": 206,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 173,
                                                                            "end_token": 173,
                                                                            "label": "credentials"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 175,
                                                                            "end_token": 206,
                                                                            "children": [
                                                                                {
                                                                                    "type": "next",
                                                                                    "start_token": 175,
                                                                                    "end_token": 206,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "expression_list",
                                                                                            "start_token": 177,
                                                                                            "end_token": 205,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "generator_expression",
                                                                                                    "start_token": 179,
                                                                                                    "end_token": 203,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 180,
                                                                                                            "end_token": 180,
                                                                                                            "label": "c"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "for_in_clause",
                                                                                                            "start_token": 182,
                                                                                                            "end_token": 188,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 183,
                                                                                                                    "end_token": 183,
                                                                                                                    "label": "c"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 185,
                                                                                                                    "end_token": 187,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 185,
                                                                                                                            "end_token": 185,
                                                                                                                            "label": "user_integrations"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 187,
                                                                                                                            "end_token": 187,
                                                                                                                            "label": "credentials"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "user_integrations.credentials"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "for c in user_integrations.credentials\n"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "if_clause",
                                                                                                            "start_token": 189,
                                                                                                            "end_token": 198,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "comparison_operator",
                                                                                                                    "start_token": 189,
                                                                                                                    "end_token": 198,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 190,
                                                                                                                            "end_token": 192,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 190,
                                                                                                                                    "end_token": 190,
                                                                                                                                    "label": "c"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 192,
                                                                                                                                    "end_token": 192,
                                                                                                                                    "label": "id"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "c.id"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "subscript",
                                                                                                                            "start_token": 196,
                                                                                                                            "end_token": 197,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 196,
                                                                                                                                    "end_token": 196,
                                                                                                                                    "label": "["
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "string",
                                                                                                                                    "start_token": 197,
                                                                                                                                    "end_token": 197,
                                                                                                                                    "label": "\"id\""
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "[\"id\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "if c.id == credentials_meta[\"id\"]"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "if c.id == credentials_meta[\"id\"]"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None"
                                                                                                }
                                                                                            ],
                                                                                            "label": "\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n"
                                                                                        },
                                                                                        {
                                                                                            "type": "none",
                                                                                            "start_token": 203,
                                                                                            "end_token": 205,
                                                                                            "label": "None,\n"
                                                                                        }
                                                                                    ],
                                                                                    "label": "next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "credentials = next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )"
                                                                },
                                                                {
                                                                    "type": "if_statement",
                                                                    "start_token": 208,
                                                                    "end_token": 214,
                                                                    "children": [
                                                                        {
                                                                            "type": "not_operator",
                                                                            "start_token": 209,
                                                                            "end_token": 210,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 210,
                                                                                    "end_token": 210,
                                                                                    "label": "credentials"
                                                                                }
                                                                            ],
                                                                            "label": "not credentials"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 211,
                                                                            "end_token": 214,
                                                                            "children": [
                                                                                {
                                                                                    "type": "continue_statement",
                                                                                    "start_token": 213,
                                                                                    "end_token": 213,
                                                                                    "label": "continue"
                                                                                }
                                                                            ],
                                                                            "label": ":\n            continue\n"
                                                                        }
                                                                    ],
                                                                    "label": "if not credentials:\n            continue\n"
                                                                },
                                                                {
                                                                    "type": "if_statement",
                                                                    "start_token": 215,
                                                                    "end_token": 238,
                                                                    "children": [
                                                                        {
                                                                            "type": "comparison_operator",
                                                                            "start_token": 215,
                                                                            "end_token": 221,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 216,
                                                                                    "end_token": 218,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 216,
                                                                                            "end_token": 216,
                                                                                            "label": "credentials"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 218,
                                                                                            "end_token": 218,
                                                                                            "label": "type"
                                                                                        }
                                                                                    ],
                                                                                    "label": "credentials.type"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 222,
                                                                                    "end_token": 222,
                                                                                    "label": ":"
                                                                                }
                                                                            ],
                                                                            "label": "if credentials.type != \"api_key\""
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 223,
                                                                            "end_token": 238,
                                                                            "children": [
                                                                                {
                                                                                    "type": "expression_statement",
                                                                                    "start_token": 224,
                                                                                    "end_token": 235,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 224,
                                                                                            "end_token": 235,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 224,
                                                                                                    "end_token": 226,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 224,
                                                                                                            "end_token": 224,
                                                                                                            "label": "logger"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 226,
                                                                                                            "end_token": 226,
                                                                                                            "label": "warning"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "logger.warning"
                                                                                                },
                                                                                                {
                                                                                                    "type": "concatenated_string",
                                                                                                    "start_token": 227,
                                                                                                    "end_token": 235,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "start_token": 229,
                                                                                                            "end_token": 230,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 230,
                                                                                                                    "end_token": 230,
                                                                                                                    "label": "\"User {user_id} credentials {credentials.id} with provider 'llm' \""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "f\"User {user_id} credentials {credentials.id} with provider 'llm' \""
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "start_token": 232,
                                                                                                            "end_token": 234,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 233,
                                                                                                                    "end_token": 233,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 233,
                                                                                                                            "end_token": 233,
                                                                                                                            "label": "\"has invalid type '{credentials.type}'\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"has invalid type '{credentials.type}'\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "f\"has invalid type '{credentials.type}'\"\n"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )"
                                                                                },
                                                                                {
                                                                                    "type": "continue_statement",
                                                                                    "start_token": 237,
                                                                                    "end_token": 237,
                                                                                    "label": "continue"
                                                                                }
                                                                            ],
                                                                            "label": "\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n"
                                                                        }
                                                                    ],
                                                                    "label": "if credentials.type != \"api_key\":\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n"
                                                                },
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 240,
                                                                    "end_token": 248,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 240,
                                                                            "end_token": 240,
                                                                            "label": "api_key"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 246,
                                                                            "end_token": 248,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 243,
                                                                                    "end_token": 245,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 243,
                                                                                            "end_token": 243,
                                                                                            "label": "."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 245,
                                                                                            "end_token": 245,
                                                                                            "label": "."
                                                                                        }
                                                                                    ],
                                                                                    "label": ".api_key."
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 246,
                                                                                    "end_token": 248,
                                                                                    "label": "get_secret_value()"
                                                                                }
                                                                            ],
                                                                            "label": "get_secret_value()"
                                                                        }
                                                                    ],
                                                                    "label": "api_key = credentials.api_key.get_secret_value()"
                                                                },
                                                                {
                                                                    "type": "if_statement",
                                                                    "start_token": 250,
                                                                    "end_token": 269,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 251,
                                                                            "end_token": 253,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 251,
                                                                                    "end_token": 251,
                                                                                    "label": "api_key"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 253,
                                                                                    "end_token": 253,
                                                                                    "label": "startswith"
                                                                                }
                                                                            ],
                                                                            "label": "api_key.startswith"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 257,
                                                                            "end_token": 269,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 259,
                                                                                    "end_token": 267,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 260,
                                                                                            "end_token": 266,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 260,
                                                                                                    "end_token": 260,
                                                                                                    "label": "."
                                                                                                },
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "start_token": 264,
                                                                                                    "end_token": 265,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 264,
                                                                                                            "end_token": 264,
                                                                                                            "label": "["
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 265,
                                                                                                            "end_token": 265,
                                                                                                            "label": "\"provider\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "[\"provider\""
                                                                                                }
                                                                                            ],
                                                                                            "label": ".provider = credentials_meta[\"provider\"]"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 268,
                                                                                            "end_token": 268,
                                                                                            "label": "\"anthropic\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "credentials.provider = credentials_meta[\"provider\"] ="
                                                                                }
                                                                            ],
                                                                            "label": ":\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n"
                                                                        }
                                                                    ],
                                                                    "label": "if api_key.startswith(\"sk-ant-api03-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n"
                                                                },
                                                                {
                                                                    "type": "elif_clause",
                                                                    "start_token": 270,
                                                                    "end_token": 289,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 271,
                                                                            "end_token": 273,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 271,
                                                                                    "end_token": 271,
                                                                                    "label": "api_key"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 273,
                                                                                    "end_token": 273,
                                                                                    "label": "startswith"
                                                                                }
                                                                            ],
                                                                            "label": "api_key.startswith"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 277,
                                                                            "end_token": 289,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 279,
                                                                                    "end_token": 287,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 280,
                                                                                            "end_token": 286,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 280,
                                                                                                    "end_token": 280,
                                                                                                    "label": "."
                                                                                                },
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "start_token": 284,
                                                                                                    "end_token": 285,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 284,
                                                                                                            "end_token": 284,
                                                                                                            "label": "["
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 285,
                                                                                                            "end_token": 285,
                                                                                                            "label": "\"provider\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "[\"provider\""
                                                                                                }
                                                                                            ],
                                                                                            "label": ".provider = credentials_meta[\"provider\"]"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 288,
                                                                                            "end_token": 288,
                                                                                            "label": "\"openai\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "credentials.provider = credentials_meta[\"provider\"] ="
                                                                                }
                                                                            ],
                                                                            "label": ":\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n"
                                                                        }
                                                                    ],
                                                                    "label": "elif api_key.startswith(\"sk-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n"
                                                                },
                                                                {
                                                                    "type": "elif_clause",
                                                                    "start_token": 290,
                                                                    "end_token": 309,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 291,
                                                                            "end_token": 293,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 291,
                                                                                    "end_token": 291,
                                                                                    "label": "api_key"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 293,
                                                                                    "end_token": 293,
                                                                                    "label": "startswith"
                                                                                }
                                                                            ],
                                                                            "label": "api_key.startswith"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 297,
                                                                            "end_token": 309,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 299,
                                                                                    "end_token": 307,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 300,
                                                                                            "end_token": 306,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 300,
                                                                                                    "end_token": 300,
                                                                                                    "label": "."
                                                                                                },
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "start_token": 304,
                                                                                                    "end_token": 305,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 304,
                                                                                                            "end_token": 304,
                                                                                                            "label": "["
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 305,
                                                                                                            "end_token": 305,
                                                                                                            "label": "\"provider\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "[\"provider\""
                                                                                                }
                                                                                            ],
                                                                                            "label": ".provider = credentials_meta[\"provider\"]"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 308,
                                                                                            "end_token": 308,
                                                                                            "label": "\"groq\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "credentials.provider = credentials_meta[\"provider\"] ="
                                                                                }
                                                                            ],
                                                                            "label": ":\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n"
                                                                        }
                                                                    ],
                                                                    "label": "elif api_key.startswith(\"gsk_\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n"
                                                                },
                                                                {
                                                                    "type": "else_clause",
                                                                    "start_token": 310,
                                                                    "end_token": 322,
                                                                    "children": [
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 311,
                                                                            "end_token": 322,
                                                                            "children": [
                                                                                {
                                                                                    "type": "expression_statement",
                                                                                    "start_token": 313,
                                                                                    "end_token": 321,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 313,
                                                                                            "end_token": 321,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 313,
                                                                                                    "end_token": 315,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 313,
                                                                                                            "end_token": 313,
                                                                                                            "label": "logger"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 315,
                                                                                                            "end_token": 315,
                                                                                                            "label": "warning"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "logger.warning"
                                                                                                },
                                                                                                {
                                                                                                    "type": "concatenated_string",
                                                                                                    "start_token": 317,
                                                                                                    "end_token": 321,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "start_token": 319,
                                                                                                            "end_token": 319,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "slice",
                                                                                                                    "start_token": 319,
                                                                                                                    "end_token": 320,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 319,
                                                                                                                            "end_token": 319,
                                                                                                                            "label": "\"Could not identify provider from key prefix {api_key[:13]}*****\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "integer",
                                                                                                                            "start_token": 320,
                                                                                                                            "end_token": 320,
                                                                                                                            "label": "\n"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"Could not identify provider from key prefix {api_key[:13]}*****\"\n"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"Could not identify provider from key prefix {api_key[:13]}*****\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )"
                                                                                },
                                                                                {
                                                                                    "type": "continue_statement",
                                                                                    "start_token": 323,
                                                                                    "end_token": 323,
                                                                                    "label": "continue"
                                                                                }
                                                                            ],
                                                                            "label": ":\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n"
                                                                        }
                                                                    ],
                                                                    "label": "else:\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n"
                                                                },
                                                                {
                                                                    "type": "expression_statement",
                                                                    "start_token": 326,
                                                                    "end_token": 333,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 326,
                                                                            "end_token": 333,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 326,
                                                                                    "end_token": 328,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 326,
                                                                                            "end_token": 326,
                                                                                            "label": "store"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 328,
                                                                                            "end_token": 328,
                                                                                            "label": "update_creds"
                                                                                        }
                                                                                    ],
                                                                                    "label": "store.update_creds"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 329,
                                                                                    "end_token": 333,
                                                                                    "label": "(user_id, credentials)"
                                                                                }
                                                                            ],
                                                                            "label": "store.update_creds(user_id, credentials)"
                                                                        }
                                                                    ],
                                                                    "label": "store.update_creds(user_id, credentials)"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 335,
                                                                    "end_token": 368,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 336,
                                                                            "end_token": 368,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 336,
                                                                                    "end_token": 344,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 336,
                                                                                            "end_token": 338,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 336,
                                                                                                    "end_token": 336,
                                                                                                    "label": "AgentNode"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 338,
                                                                                                    "end_token": 338,
                                                                                                    "label": "prisma"
                                                                                                }
                                                                                            ],
                                                                                            "label": "AgentNode.prisma"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 344,
                                                                                            "end_token": 344,
                                                                                            "label": "\n"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentNode.prisma().update(\n"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 345,
                                                                                    "end_token": 368,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 346,
                                                                                            "end_token": 351,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 348,
                                                                                                    "end_token": 348,
                                                                                                    "label": "\"id\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 350,
                                                                                                    "end_token": 350,
                                                                                                    "label": "node_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "={\"id\": node_id}"
                                                                                        },
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 355,
                                                                                            "end_token": 364,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 358,
                                                                                                    "end_token": 358,
                                                                                                    "label": ":"
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 360,
                                                                                                    "end_token": 364,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 360,
                                                                                                            "end_token": 362,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 360,
                                                                                                                    "end_token": 360,
                                                                                                                    "label": "."
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 362,
                                                                                                                    "end_token": 362,
                                                                                                                    "label": "("
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": ".dumps("
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 363,
                                                                                                            "end_token": 364,
                                                                                                            "label": "node_preset_input)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ".dumps(node_preset_input)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "={\"constantInput\": json.dumps(node_preset_input)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "await AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )"
                                                                }
                                                            ],
                                                            "label": ":\n        if node[\"user_id\"] != user_id:\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n        elif not user_integrations:\n            raise RuntimeError(f\"Impossible state while processing node {node}\")\n\n        node_id: str = node[\"node_id\"]\n        node_preset_input: dict = json.loads(node[\"node_preset_input\"])\n        credentials_meta: dict = node_preset_input[\"credentials\"]\n\n        credentials = next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )\n        if not credentials:\n            continue\n        if credentials.type != \"api_key\":\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n\n        api_key = credentials.api_key.get_secret_value()\n        if api_key.startswith(\"sk-ant-api03-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n        elif api_key.startswith(\"sk-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n        elif api_key.startswith(\"gsk_\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n        else:\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n            continue\n\n        store.update_creds(user_id, credentials)\n        await AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )"
                                                        }
                                                    ],
                                                    "label": "for node in broken_nodes:\n        if node[\"user_id\"] != user_id:\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n        elif not user_integrations:\n            raise RuntimeError(f\"Impossible state while processing node {node}\")\n\n        node_id: str = node[\"node_id\"]\n        node_preset_input: dict = json.loads(node[\"node_preset_input\"])\n        credentials_meta: dict = node_preset_input[\"credentials\"]\n\n        credentials = next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )\n        if not credentials:\n            continue\n        if credentials.type != \"api_key\":\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n\n        api_key = credentials.api_key.get_secret_value()\n        if api_key.startswith(\"sk-ant-api03-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n        elif api_key.startswith(\"sk-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n        elif api_key.startswith(\"gsk_\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n        else:\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n            continue\n\n        store.update_creds(user_id, credentials)\n        await AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )"
                                                }
                                            ],
                                            "label": "from backend.integrations.credentials_store import IntegrationCredentialsStore\n\n    from .user import get_user_integrations\n\n    store = IntegrationCredentialsStore()\n\n    broken_nodes = await prisma.get_client().query_raw(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )\n    logger.info(f\"Fixing LLM credential inputs on {len(broken_nodes)} nodes\")\n\n    user_id: str = \"\"\n    user_integrations = None\n    for node in broken_nodes:\n        if node[\"user_id\"] != user_id:\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n        elif not user_integrations:\n            raise RuntimeError(f\"Impossible state while processing node {node}\")\n\n        node_id: str = node[\"node_id\"]\n        node_preset_input: dict = json.loads(node[\"node_preset_input\"])\n        credentials_meta: dict = node_preset_input[\"credentials\"]\n\n        credentials = next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )\n        if not credentials:\n            continue\n        if credentials.type != \"api_key\":\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n\n        api_key = credentials.api_key.get_secret_value()\n        if api_key.startswith(\"sk-ant-api03-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n        elif api_key.startswith(\"sk-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n        elif api_key.startswith(\"gsk_\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n        else:\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n            continue\n\n        store.update_creds(user_id, credentials)\n        await AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )\n"
                                        }
                                    ],
                                    "label": "async def fix_llm_provider_credentials():\n    \"\"\"Fix node credentials with provider `llm`\"\"\"\n    from backend.integrations.credentials_store import IntegrationCredentialsStore\n\n    from .user import get_user_integrations\n\n    store = IntegrationCredentialsStore()\n\n    broken_nodes = await prisma.get_client().query_raw(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )\n    logger.info(f\"Fixing LLM credential inputs on {len(broken_nodes)} nodes\")\n\n    user_id: str = \"\"\n    user_integrations = None\n    for node in broken_nodes:\n        if node[\"user_id\"] != user_id:\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n        elif not user_integrations:\n            raise RuntimeError(f\"Impossible state while processing node {node}\")\n\n        node_id: str = node[\"node_id\"]\n        node_preset_input: dict = json.loads(node[\"node_preset_input\"])\n        credentials_meta: dict = node_preset_input[\"credentials\"]\n\n        credentials = next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )\n        if not credentials:\n            continue\n        if credentials.type != \"api_key\":\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n\n        api_key = credentials.api_key.get_secret_value()\n        if api_key.startswith(\"sk-ant-api03-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n        elif api_key.startswith(\"sk-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n        elif api_key.startswith(\"gsk_\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n        else:\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n            continue\n\n        store.update_creds(user_id, credentials)\n        await AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )\n"
                                }
                            ],
                            "label": "async def fix_llm_provider_credentials():\n    \"\"\"Fix node credentials with provider `llm`\"\"\"\n    from backend.integrations.credentials_store import IntegrationCredentialsStore\n\n    from .user import get_user_integrations\n\n    store = IntegrationCredentialsStore()\n\n    broken_nodes = await prisma.get_client().query_raw(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )\n    logger.info(f\"Fixing LLM credential inputs on {len(broken_nodes)} nodes\")\n\n    user_id: str = \"\"\n    user_integrations = None\n    for node in broken_nodes:\n        if node[\"user_id\"] != user_id:\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n        elif not user_integrations:\n            raise RuntimeError(f\"Impossible state while processing node {node}\")\n\n        node_id: str = node[\"node_id\"]\n        node_preset_input: dict = json.loads(node[\"node_preset_input\"])\n        credentials_meta: dict = node_preset_input[\"credentials\"]\n\n        credentials = next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )\n        if not credentials:\n            continue\n        if credentials.type != \"api_key\":\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n\n        api_key = credentials.api_key.get_secret_value()\n        if api_key.startswith(\"sk-ant-api03-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n        elif api_key.startswith(\"sk-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n        elif api_key.startswith(\"gsk_\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n        else:\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n            continue\n\n        store.update_creds(user_id, credentials)\n        await AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )\n"
                        }
                    ],
                    "label": "async def fix_llm_provider_credentials():\n    \"\"\"Fix node credentials with provider `llm`\"\"\"\n    from backend.integrations.credentials_store import IntegrationCredentialsStore\n\n    from .user import get_user_integrations\n\n    store = IntegrationCredentialsStore()\n\n    broken_nodes = await prisma.get_client().query_raw(\n        \"\"\"\n        SELECT    graph.\"userId\"       user_id,\n                  node.id              node_id,\n                  node.\"constantInput\" node_preset_input\n        FROM      platform.\"AgentNode\"  node\n        LEFT JOIN platform.\"AgentGraph\" graph\n        ON        node.\"agentGraphId\" = graph.id\n        WHERE     node.\"constantInput\"::jsonb->'credentials'->>'provider' = 'llm'\n        ORDER BY  graph.\"userId\";\n        \"\"\"\n    )\n    logger.info(f\"Fixing LLM credential inputs on {len(broken_nodes)} nodes\")\n\n    user_id: str = \"\"\n    user_integrations = None\n    for node in broken_nodes:\n        if node[\"user_id\"] != user_id:\n            # Save queries by only fetching once per user\n            user_id = node[\"user_id\"]\n            user_integrations = await get_user_integrations(user_id)\n        elif not user_integrations:\n            raise RuntimeError(f\"Impossible state while processing node {node}\")\n\n        node_id: str = node[\"node_id\"]\n        node_preset_input: dict = json.loads(node[\"node_preset_input\"])\n        credentials_meta: dict = node_preset_input[\"credentials\"]\n\n        credentials = next(\n            (\n                c\n                for c in user_integrations.credentials\n                if c.id == credentials_meta[\"id\"]\n            ),\n            None,\n        )\n        if not credentials:\n            continue\n        if credentials.type != \"api_key\":\n            logger.warning(\n                f\"User {user_id} credentials {credentials.id} with provider 'llm' \"\n                f\"has invalid type '{credentials.type}'\"\n            )\n            continue\n\n        api_key = credentials.api_key.get_secret_value()\n        if api_key.startswith(\"sk-ant-api03-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"anthropic\"\n        elif api_key.startswith(\"sk-\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"openai\"\n        elif api_key.startswith(\"gsk_\"):\n            credentials.provider = credentials_meta[\"provider\"] = \"groq\"\n        else:\n            logger.warning(\n                f\"Could not identify provider from key prefix {api_key[:13]}*****\"\n            )\n            continue\n\n        store.update_creds(user_id, credentials)\n        await AgentNode.prisma().update(\n            where={\"id\": node_id},\n            data={\"constantInput\": json.dumps(node_preset_input)},\n        )\n"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "Link",
            "start_line": 26,
            "end_line": 45,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 33,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 28,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "Link"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "label": "BaseDbModel"
                                        }
                                    ],
                                    "label": "(BaseDbModel)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 6,
                                    "end_token": 28,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "label": "source_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "source_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 11,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "label": "sink_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 13,
                                                    "end_token": 13,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "sink_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 15,
                                            "end_token": 17,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 15,
                                                    "end_token": 15,
                                                    "label": "source_name"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 17,
                                                    "end_token": 17,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "source_name: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 19,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 19,
                                                    "end_token": 19,
                                                    "label": "sink_name"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 21,
                                                    "end_token": 21,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "sink_name: str"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 23,
                                            "end_token": 27,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 23,
                                                    "end_token": 23,
                                                    "label": "is_static"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 25,
                                                    "end_token": 25,
                                                    "label": "bool"
                                                },
                                                {
                                                    "type": "false",
                                                    "start_token": 27,
                                                    "end_token": 27,
                                                    "label": "False"
                                                }
                                            ],
                                            "label": "is_static: bool = False"
                                        }
                                    ],
                                    "label": "\n    source_id: str\n    sink_id: str\n    source_name: str\n    sink_name: str\n    is_static: bool = False\n"
                                }
                            ],
                            "label": "class Link(BaseDbModel):\n    source_id: str\n    sink_id: str\n    source_name: str\n    sink_name: str\n    is_static: bool = False\n"
                        },
                        {
                            "type": "decorated_definition",
                            "start_token": 30,
                            "end_token": 33,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 30,
                                    "end_token": 31,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 31,
                                            "end_token": 31,
                                            "label": "staticmethod"
                                        }
                                    ],
                                    "label": "@staticmethod"
                                }
                            ],
                            "label": "@staticmethod\n\n"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "from_db",
                            "start_line": 34,
                            "end_line": 42,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 56,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 55,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "from_db"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "link"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "AgentNodeLink"
                                                                }
                                                            ],
                                                            "label": "link: AgentNodeLink"
                                                        }
                                                    ],
                                                    "label": "(link: AgentNodeLink)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 8,
                                                    "end_token": 55,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 9,
                                                            "end_token": 55,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 10,
                                                                    "end_token": 55,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 10,
                                                                            "end_token": 10,
                                                                            "children": [],
                                                                            "label": "Link"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 11,
                                                                            "end_token": 55,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 13,
                                                                                    "end_token": 18,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 13,
                                                                                            "end_token": 13,
                                                                                            "children": [],
                                                                                            "label": "id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 15,
                                                                                            "end_token": 17,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 15,
                                                                                                    "end_token": 15,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 17,
                                                                                                    "end_token": 17,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "id=link.id,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 20,
                                                                                    "end_token": 25,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 20,
                                                                                            "end_token": 20,
                                                                                            "children": [],
                                                                                            "label": "source_name"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 22,
                                                                                            "end_token": 24,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 22,
                                                                                                    "end_token": 22,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 24,
                                                                                                    "end_token": 24,
                                                                                                    "children": [],
                                                                                                    "label": "sourceName"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.sourceName"
                                                                                        }
                                                                                    ],
                                                                                    "label": "source_name=link.sourceName,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 27,
                                                                                    "end_token": 32,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 27,
                                                                                            "end_token": 27,
                                                                                            "children": [],
                                                                                            "label": "source_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 29,
                                                                                            "end_token": 31,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 29,
                                                                                                    "end_token": 29,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 31,
                                                                                                    "end_token": 31,
                                                                                                    "children": [],
                                                                                                    "label": "agentNodeSourceId"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.agentNodeSourceId"
                                                                                        }
                                                                                    ],
                                                                                    "label": "source_id=link.agentNodeSourceId,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 34,
                                                                                    "end_token": 39,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 34,
                                                                                            "end_token": 34,
                                                                                            "children": [],
                                                                                            "label": "sink_name"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 36,
                                                                                            "end_token": 38,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 36,
                                                                                                    "end_token": 36,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 38,
                                                                                                    "end_token": 38,
                                                                                                    "children": [],
                                                                                                    "label": "sinkName"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.sinkName"
                                                                                        }
                                                                                    ],
                                                                                    "label": "sink_name=link.sinkName,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 41,
                                                                                    "end_token": 46,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 41,
                                                                                            "end_token": 41,
                                                                                            "children": [],
                                                                                            "label": "sink_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 43,
                                                                                            "end_token": 45,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 43,
                                                                                                    "end_token": 43,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 45,
                                                                                                    "end_token": 45,
                                                                                                    "children": [],
                                                                                                    "label": "agentNodeSinkId"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.agentNodeSinkId"
                                                                                        }
                                                                                    ],
                                                                                    "label": "sink_id=link.agentNodeSinkId,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 48,
                                                                                    "end_token": 53,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 48,
                                                                                            "end_token": 48,
                                                                                            "children": [],
                                                                                            "label": "is_static"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 50,
                                                                                            "end_token": 52,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 50,
                                                                                                    "end_token": 50,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 52,
                                                                                                    "end_token": 52,
                                                                                                    "children": [],
                                                                                                    "label": "isStatic"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.isStatic"
                                                                                        }
                                                                                    ],
                                                                                    "label": "is_static=link.isStatic,"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            id=link.id,\n            source_name=link.sourceName,\n            source_id=link.agentNodeSourceId,\n            sink_name=link.sinkName,\n            sink_id=link.agentNodeSinkId,\n            is_static=link.isStatic,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "Link(\n            id=link.id,\n            source_name=link.sourceName,\n            source_id=link.agentNodeSourceId,\n            sink_name=link.sinkName,\n            sink_id=link.agentNodeSinkId,\n            is_static=link.isStatic,\n        )"
                                                                }
                                                            ],
                                                            "label": "return Link(\n            id=link.id,\n            source_name=link.sourceName,\n            source_id=link.agentNodeSourceId,\n            sink_name=link.sinkName,\n            sink_id=link.agentNodeSinkId,\n            is_static=link.isStatic,\n        )"
                                                        }
                                                    ],
                                                    "label": "\n        return Link(\n            id=link.id,\n            source_name=link.sourceName,\n            source_id=link.agentNodeSourceId,\n            sink_name=link.sinkName,\n            sink_id=link.agentNodeSinkId,\n            is_static=link.isStatic,\n        )"
                                                }
                                            ],
                                            "label": "def from_db(link: AgentNodeLink):\n        return Link(\n            id=link.id,\n            source_name=link.sourceName,\n            source_id=link.agentNodeSourceId,\n            sink_name=link.sinkName,\n            sink_id=link.agentNodeSinkId,\n            is_static=link.isStatic,\n        )"
                                        }
                                    ],
                                    "label": "def from_db(link: AgentNodeLink):\n        return Link(\n            id=link.id,\n            source_name=link.sourceName,\n            source_id=link.agentNodeSourceId,\n            sink_name=link.sinkName,\n            sink_id=link.agentNodeSinkId,\n            is_static=link.isStatic,\n        )\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "__hash__",
                            "start_line": 44,
                            "end_line": 45,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 27,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 27,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "__hash__"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 4,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "self"
                                                        }
                                                    ],
                                                    "label": "(self)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 6,
                                                    "end_token": 27,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 7,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 8,
                                                                    "end_token": 27,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 8,
                                                                            "end_token": 8,
                                                                            "children": [],
                                                                            "label": "hash"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 9,
                                                                            "end_token": 27,
                                                                            "children": [
                                                                                {
                                                                                    "type": "parenthesized_expression",
                                                                                    "start_token": 10,
                                                                                    "end_token": 26,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "tuple",
                                                                                            "start_token": 10,
                                                                                            "end_token": 26,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 11,
                                                                                                    "end_token": 13,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 11,
                                                                                                            "end_token": 11,
                                                                                                            "children": [],
                                                                                                            "label": "self"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 13,
                                                                                                            "end_token": 13,
                                                                                                            "children": [],
                                                                                                            "label": "source_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "self.source_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 15,
                                                                                                    "end_token": 17,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 15,
                                                                                                            "end_token": 15,
                                                                                                            "children": [],
                                                                                                            "label": "self"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 17,
                                                                                                            "end_token": 17,
                                                                                                            "children": [],
                                                                                                            "label": "sink_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "self.sink_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 19,
                                                                                                    "end_token": 21,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 19,
                                                                                                            "end_token": 19,
                                                                                                            "children": [],
                                                                                                            "label": "self"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 21,
                                                                                                            "end_token": 21,
                                                                                                            "children": [],
                                                                                                            "label": "source_name"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "self.source_name"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 23,
                                                                                                    "end_token": 25,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 23,
                                                                                                            "end_token": 23,
                                                                                                            "children": [],
                                                                                                            "label": "self"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 25,
                                                                                                            "end_token": 25,
                                                                                                            "children": [],
                                                                                                            "label": "sink_name"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "self.sink_name"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(self.source_id, self.sink_id, self.source_name, self.sink_name)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(self.source_id, self.sink_id, self.source_name, self.sink_name)"
                                                                                }
                                                                            ],
                                                                            "label": "((self.source_id, self.sink_id, self.source_name, self.sink_name))"
                                                                        }
                                                                    ],
                                                                    "label": "hash((self.source_id, self.sink_id, self.source_name, self.sink_name))"
                                                                }
                                                            ],
                                                            "label": "return hash((self.source_id, self.sink_id, self.source_name, self.sink_name))"
                                                        }
                                                    ],
                                                    "label": "\n        return hash((self.source_id, self.sink_id, self.source_name, self.sink_name))"
                                                }
                                            ],
                                            "label": "def __hash__(self):\n        return hash((self.source_id, self.sink_id, self.source_name, self.sink_name))"
                                        }
                                    ],
                                    "label": "def __hash__(self):\n        return hash((self.source_id, self.sink_id, self.source_name, self.sink_name))"
                                }
                            ]
                        }
                    ],
                    "label": "class Link(BaseDbModel):\n    source_id: str\n    sink_id: str\n    source_name: str\n    sink_name: str\n    is_static: bool = False\n\n    @staticmethod\n\n"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "Node",
            "start_line": 48,
            "end_line": 55,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 65,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 65,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "Node"
                                },
                                {
                                    "type": "inheritance",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "children": [],
                                            "label": "BaseDbModel"
                                        }
                                    ],
                                    "label": "(BaseDbModel)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 6,
                                    "end_token": 65,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "children": [],
                                                    "label": "block_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 8,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": ": str"
                                                }
                                            ],
                                            "label": "block_id: str"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 11,
                                            "end_token": 17,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "children": [],
                                                    "label": "input_default"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 12,
                                                    "end_token": 13,
                                                    "children": [],
                                                    "label": ": BlockInput"
                                                },
                                                {
                                                    "type": "dictionary",
                                                    "start_token": 15,
                                                    "end_token": 16,
                                                    "children": [],
                                                    "label": "{}"
                                                },
                                                {
                                                    "type": "comment",
                                                    "start_token": 17,
                                                    "end_token": 23,
                                                    "children": [],
                                                    "label": "# dict[input_name, default_value]"
                                                }
                                            ],
                                            "label": "input_default: BlockInput = {}  #"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 25,
                                            "end_token": 35,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 25,
                                                    "end_token": 25,
                                                    "children": [],
                                                    "label": "metadata"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 26,
                                                    "end_token": 32,
                                                    "children": [],
                                                    "label": ": dict[str, Any]"
                                                },
                                                {
                                                    "type": "dictionary",
                                                    "start_token": 34,
                                                    "end_token": 35,
                                                    "children": [],
                                                    "label": "{}"
                                                }
                                            ],
                                            "label": "metadata: dict[str, Any] = {}"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 37,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 37,
                                                    "end_token": 37,
                                                    "children": [],
                                                    "label": "input_links"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 39,
                                                    "end_token": 42,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 41,
                                                            "end_token": 41,
                                                            "children": [],
                                                            "label": "Link"
                                                        }
                                                    ],
                                                    "label": "list[Link]"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 44,
                                                    "end_token": 45,
                                                    "children": [],
                                                    "label": "[]"
                                                }
                                            ],
                                            "label": "input_links: list[Link] = []"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 47,
                                            "end_token": 55,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 47,
                                                    "end_token": 47,
                                                    "children": [],
                                                    "label": "output_links"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 49,
                                                    "end_token": 52,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 51,
                                                            "end_token": 51,
                                                            "children": [],
                                                            "label": "Link"
                                                        }
                                                    ],
                                                    "label": "list[Link]"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 54,
                                                    "end_token": 55,
                                                    "children": [],
                                                    "label": "[]"
                                                }
                                            ],
                                            "label": "output_links: list[Link] = []"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 58,
                                            "end_token": 65,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 58,
                                                    "end_token": 58,
                                                    "children": [],
                                                    "label": "webhook_id"
                                                },
                                                {
                                                    "type": "union_type",
                                                    "start_token": 60,
                                                    "end_token": 63,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 62,
                                                            "end_token": 62,
                                                            "children": [],
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "Optional[str]"
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 65,
                                                    "end_token": 65,
                                                    "children": [],
                                                    "label": "None"
                                                }
                                            ],
                                            "label": "webhook_id: Optional[str] = None"
                                        }
                                    ],
                                    "label": "\n    block_id: str\n    input_default: BlockInput = {}  # dict[input_name, default_value]\n    metadata: dict[str, Any] = {}\n    input_links: list[Link] = []\n    output_links: list[Link] = []\n\n    webhook_id: Optional[str] = None"
                                }
                            ],
                            "label": "class Node(BaseDbModel):\n    block_id: str\n    input_default: BlockInput = {}  # dict[input_name, default_value]\n    metadata: dict[str, Any] = {}\n    input_links: list[Link] = []\n    output_links: list[Link] = []\n\n    webhook_id: Optional[str] = None"
                        }
                    ],
                    "label": "class Node(BaseDbModel):\n    block_id: str\n    input_default: BlockInput = {}  # dict[input_name, default_value]\n    metadata: dict[str, Any] = {}\n    input_links: list[Link] = []\n    output_links: list[Link] = []\n\n    webhook_id: Optional[str] = None"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "NodeModel",
            "start_line": 58,
            "end_line": 96,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 29,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 24,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "NodeModel"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "children": [],
                                            "label": "Node"
                                        }
                                    ],
                                    "label": "(Node)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 7,
                                    "end_token": 24,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "children": [],
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "graph_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 11,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "children": [],
                                                    "label": "graph_version"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 13,
                                                    "end_token": 13,
                                                    "children": [],
                                                    "label": "int"
                                                }
                                            ],
                                            "label": "graph_version: int"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 16,
                                            "end_token": 23,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 16,
                                                    "end_token": 16,
                                                    "children": [],
                                                    "label": "webhook"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 18,
                                                    "end_token": 21,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 18,
                                                            "end_token": 18,
                                                            "children": [],
                                                            "label": "Optional"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 20,
                                                            "end_token": 20,
                                                            "children": [],
                                                            "label": "Webhook"
                                                        }
                                                    ],
                                                    "label": "Optional[Webhook]"
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 23,
                                                    "end_token": 23,
                                                    "children": [],
                                                    "label": "None"
                                                }
                                            ],
                                            "label": "webhook: Optional[Webhook] = None"
                                        }
                                    ],
                                    "label": "graph_id: str\n    graph_version: int\n\n    webhook: Optional[Webhook] = None\n"
                                }
                            ],
                            "label": "class NodeModel(Node):\n    graph_id: str\n    graph_version: int\n\n    webhook: Optional[Webhook] = None\n"
                        },
                        {
                            "type": "decorator",
                            "start_token": 26,
                            "end_token": 27,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 27,
                                    "end_token": 27,
                                    "children": [],
                                    "label": "staticmethod"
                                }
                            ],
                            "label": "@staticmethod"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "from_db",
                            "start_line": 65,
                            "end_line": 80,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 173,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 172,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "from_db"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "node"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "AgentNode"
                                                                }
                                                            ],
                                                            "label": "node: AgentNode"
                                                        }
                                                    ],
                                                    "label": "(node: AgentNode)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 8,
                                                    "end_token": 172,
                                                    "children": [
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 9,
                                                            "end_token": 15,
                                                            "children": [
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 10,
                                                                    "end_token": 10,
                                                                    "children": [],
                                                                    "label": "not"
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 11,
                                                                    "end_token": 13,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "children": [],
                                                                            "label": "node"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "children": [],
                                                                            "label": "AgentBlock"
                                                                        }
                                                                    ],
                                                                    "label": "node.AgentBlock"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 16,
                                                                    "end_token": 21,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 17,
                                                                            "end_token": 21,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 17,
                                                                                    "end_token": 17,
                                                                                    "children": [],
                                                                                    "label": "ValueError"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 18,
                                                                                    "end_token": 21,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 19,
                                                                                            "end_token": 20,
                                                                                            "children": [],
                                                                                            "label": "f\"Invalid node {node.id}, invalid AgentBlock.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(f\"Invalid node {node.id}, invalid AgentBlock.\")"
                                                                                }
                                                                            ],
                                                                            "label": "ValueError(f\"Invalid node {node.id}, invalid AgentBlock.\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise ValueError(f\"Invalid node {node.id}, invalid AgentBlock.\")"
                                                                }
                                                            ],
                                                            "label": "if not node.AgentBlock:\n"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 23,
                                                            "end_token": 125,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 23,
                                                                    "end_token": 23,
                                                                    "children": [],
                                                                    "label": "obj"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 25,
                                                                    "end_token": 125,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 25,
                                                                            "end_token": 25,
                                                                            "children": [],
                                                                            "label": "NodeModel"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 26,
                                                                            "end_token": 125,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 28,
                                                                                    "end_token": 33,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 28,
                                                                                            "end_token": 28,
                                                                                            "children": [],
                                                                                            "label": "id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 30,
                                                                                            "end_token": 32,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 30,
                                                                                                    "end_token": 30,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 32,
                                                                                                    "end_token": 32,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "id=node.id,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 35,
                                                                                    "end_token": 42,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "children": [],
                                                                                            "label": "block_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 37,
                                                                                            "end_token": 41,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 37,
                                                                                                    "end_token": 37,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 39,
                                                                                                    "end_token": 41,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 39,
                                                                                                            "end_token": 39,
                                                                                                            "children": [],
                                                                                                            "label": "AgentBlock"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 41,
                                                                                                            "end_token": 41,
                                                                                                            "children": [],
                                                                                                            "label": "id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "AgentBlock.id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.AgentBlock.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "block_id=node.AgentBlock.id,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 44,
                                                                                    "end_token": 62,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 44,
                                                                                            "end_token": 44,
                                                                                            "children": [],
                                                                                            "label": "input_default"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 46,
                                                                                            "end_token": 62,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 46,
                                                                                                    "end_token": 48,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 46,
                                                                                                            "end_token": 46,
                                                                                                            "children": [],
                                                                                                            "label": "json"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 48,
                                                                                                            "end_token": 48,
                                                                                                            "children": [],
                                                                                                            "label": "loads"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "json.loads"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 49,
                                                                                                    "end_token": 62,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 50,
                                                                                                            "end_token": 52,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 50,
                                                                                                                    "end_token": 50,
                                                                                                                    "children": [],
                                                                                                                    "label": "node"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 52,
                                                                                                                    "end_token": 52,
                                                                                                                    "children": [],
                                                                                                                    "label": "constantInput"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "node.constantInput"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 54,
                                                                                                            "end_token": 61,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 54,
                                                                                                                    "end_token": 54,
                                                                                                                    "children": [],
                                                                                                                    "label": "target_type"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "generic_type",
                                                                                                                    "start_token": 56,
                                                                                                                    "end_token": 61,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 56,
                                                                                                                            "end_token": 56,
                                                                                                                            "children": [],
                                                                                                                            "label": "dict"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "list",
                                                                                                                            "start_token": 57,
                                                                                                                            "end_token": 61,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 58,
                                                                                                                                    "end_token": 58,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "str"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 60,
                                                                                                                                    "end_token": 60,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "Any"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "[str, Any]"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "dict[str, Any]"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "target_type=dict[str, Any]"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(node.constantInput, target_type=dict[str, Any])"
                                                                                                }
                                                                                            ],
                                                                                            "label": "json.loads(node.constantInput, target_type=dict[str, Any])"
                                                                                        }
                                                                                    ],
                                                                                    "label": "input_default=json.loads(node.constantInput, target_type=dict[str, Any])"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 65,
                                                                                    "end_token": 83,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 65,
                                                                                            "end_token": 65,
                                                                                            "children": [],
                                                                                            "label": "metadata"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 67,
                                                                                            "end_token": 83,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 67,
                                                                                                    "end_token": 69,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 67,
                                                                                                            "end_token": 67,
                                                                                                            "children": [],
                                                                                                            "label": "json"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 69,
                                                                                                            "end_token": 69,
                                                                                                            "children": [],
                                                                                                            "label": "loads"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "json.loads"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 70,
                                                                                                    "end_token": 83,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 71,
                                                                                                            "end_token": 73,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 71,
                                                                                                                    "end_token": 71,
                                                                                                                    "children": [],
                                                                                                                    "label": "node"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 73,
                                                                                                                    "end_token": 73,
                                                                                                                    "children": [],
                                                                                                                    "label": "metadata"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "node.metadata"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 75,
                                                                                                            "end_token": 82,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 75,
                                                                                                                    "end_token": 75,
                                                                                                                    "children": [],
                                                                                                                    "label": "target_type"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "generic_type",
                                                                                                                    "start_token": 77,
                                                                                                                    "end_token": 82,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 77,
                                                                                                                            "end_token": 77,
                                                                                                                            "children": [],
                                                                                                                            "label": "dict"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "list",
                                                                                                                            "start_token": 78,
                                                                                                                            "end_token": 82,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 79,
                                                                                                                                    "end_token": 79,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "str"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 81,
                                                                                                                                    "end_token": 81,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "Any"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "[str, Any]"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "dict[str, Any]"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "target_type=dict[str, Any]"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(node.metadata, target_type=dict[str, Any])"
                                                                                                }
                                                                                            ],
                                                                                            "label": "json.loads(node.metadata, target_type=dict[str, Any])"
                                                                                        }
                                                                                    ],
                                                                                    "label": "metadata=json.loads(node.metadata, target_type=dict[str, Any])"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 86,
                                                                                    "end_token": 91,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 86,
                                                                                            "end_token": 86,
                                                                                            "children": [],
                                                                                            "label": "graph_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 88,
                                                                                            "end_token": 90,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 88,
                                                                                                    "end_token": 88,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 90,
                                                                                                    "end_token": 90,
                                                                                                    "children": [],
                                                                                                    "label": "agentGraphId"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.agentGraphId"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_id=node.agentGraphId,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 93,
                                                                                    "end_token": 98,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 93,
                                                                                            "end_token": 93,
                                                                                            "children": [],
                                                                                            "label": "graph_version"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 95,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 95,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 97,
                                                                                                    "end_token": 97,
                                                                                                    "children": [],
                                                                                                    "label": "agentGraphVersion"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.agentGraphVersion"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_version=node.agentGraphVersion,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 100,
                                                                                    "end_token": 105,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 100,
                                                                                            "end_token": 100,
                                                                                            "children": [],
                                                                                            "label": "webhook_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 102,
                                                                                            "end_token": 104,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 102,
                                                                                                    "end_token": 102,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 104,
                                                                                                    "end_token": 104,
                                                                                                    "children": [],
                                                                                                    "label": "webhookId"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.webhookId"
                                                                                        }
                                                                                    ],
                                                                                    "label": "webhook_id=node.webhookId,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 107,
                                                                                    "end_token": 123,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 107,
                                                                                            "end_token": 107,
                                                                                            "children": [],
                                                                                            "label": "webhook"
                                                                                        },
                                                                                        {
                                                                                            "type": "conditional_expression",
                                                                                            "start_token": 109,
                                                                                            "end_token": 122,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 109,
                                                                                                    "end_token": 116,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 109,
                                                                                                            "end_token": 111,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 109,
                                                                                                                    "end_token": 109,
                                                                                                                    "children": [],
                                                                                                                    "label": "Webhook"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 111,
                                                                                                                    "end_token": 111,
                                                                                                                    "children": [],
                                                                                                                    "label": "from_db"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "Webhook.from_db"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 112,
                                                                                                            "end_token": 116,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 113,
                                                                                                                    "end_token": 115,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 113,
                                                                                                                            "end_token": 113,
                                                                                                                            "children": [],
                                                                                                                            "label": "node"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 115,
                                                                                                                            "end_token": 115,
                                                                                                                            "children": [],
                                                                                                                            "label": "Webhook"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "node.Webhook"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "(node.Webhook)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "Webhook.from_db(node.Webhook)"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 118,
                                                                                                    "end_token": 120,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 118,
                                                                                                            "end_token": 118,
                                                                                                            "children": [],
                                                                                                            "label": "node"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 120,
                                                                                                            "end_token": 120,
                                                                                                            "children": [],
                                                                                                            "label": "Webhook"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "node.Webhook"
                                                                                                },
                                                                                                {
                                                                                                    "type": "none",
                                                                                                    "start_token": 122,
                                                                                                    "end_token": 122,
                                                                                                    "children": [],
                                                                                                    "label": "None"
                                                                                                }
                                                                                            ],
                                                                                            "label": "Webhook.from_db(node.Webhook) if node.Webhook else None"
                                                                                        }
                                                                                    ],
                                                                                    "label": "webhook=Webhook.from_db(node.Webhook) if node.Webhook else None,"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            id=node.id,\n            block_id=node.AgentBlock.id,\n            input_default=json.loads(node.constantInput, target_type=dict[str, Any]),\n            metadata=json.loads(node.metadata, target_type=dict[str, Any]),\n            graph_id=node.agentGraphId,\n            graph_version=node.agentGraphVersion,\n            webhook_id=node.webhookId,\n            webhook=Webhook.from_db(node.Webhook) if node.Webhook else None,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "NodeModel(\n            id=node.id,\n            block_id=node.AgentBlock.id,\n            input_default=json.loads(node.constantInput, target_type=dict[str, Any]),\n            metadata=json.loads(node.metadata, target_type=dict[str, Any]),\n            graph_id=node.agentGraphId,\n            graph_version=node.agentGraphVersion,\n            webhook_id=node.webhookId,\n            webhook=Webhook.from_db(node.Webhook) if node.Webhook else None,\n        )"
                                                                }
                                                            ],
                                                            "label": "obj = NodeModel(\n            id=node.id,\n            block_id=node.AgentBlock.id,\n            input_default=json.loads(node.constantInput, target_type=dict[str, Any]),\n            metadata=json.loads(node.metadata, target_type=dict[str, Any]),\n            graph_id=node.agentGraphId,\n            graph_version=node.agentGraphVersion,\n            webhook_id=node.webhookId,\n            webhook=Webhook.from_db(node.Webhook) if node.Webhook else None,\n        )"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 127,
                                                            "end_token": 147,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 127,
                                                                    "end_token": 129,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 127,
                                                                            "end_token": 127,
                                                                            "children": [],
                                                                            "label": "obj"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 129,
                                                                            "end_token": 129,
                                                                            "children": [],
                                                                            "label": "input_links"
                                                                        }
                                                                    ],
                                                                    "label": "obj.input_links"
                                                                },
                                                                {
                                                                    "type": "list_comprehension",
                                                                    "start_token": 131,
                                                                    "end_token": 147,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 132,
                                                                            "end_token": 137,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 132,
                                                                                    "end_token": 134,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 132,
                                                                                            "end_token": 132,
                                                                                            "children": [],
                                                                                            "label": "Link"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 134,
                                                                                            "end_token": 134,
                                                                                            "children": [],
                                                                                            "label": "from_db"
                                                                                        }
                                                                                    ],
                                                                                    "label": "Link.from_db"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 135,
                                                                                    "end_token": 137,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 136,
                                                                                            "end_token": 136,
                                                                                            "children": [],
                                                                                            "label": "link"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(link)"
                                                                                }
                                                                            ],
                                                                            "label": "Link.from_db(link)"
                                                                        },
                                                                        {
                                                                            "type": "for_in_clause",
                                                                            "start_token": 138,
                                                                            "end_token": 145,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 139,
                                                                                    "end_token": 139,
                                                                                    "children": [],
                                                                                    "label": "link"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 141,
                                                                                    "end_token": 143,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 141,
                                                                                            "end_token": 141,
                                                                                            "children": [],
                                                                                            "label": "node"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 143,
                                                                                            "end_token": 143,
                                                                                            "children": [],
                                                                                            "label": "Input"
                                                                                        }
                                                                                    ],
                                                                                    "label": "node.Input"
                                                                                },
                                                                                {
                                                                                    "type": "list",
                                                                                    "start_token": 145,
                                                                                    "end_token": 146,
                                                                                    "children": [],
                                                                                    "label": "[]"
                                                                                }
                                                                            ],
                                                                            "label": "for link in node.Input or ["
                                                                        }
                                                                    ],
                                                                    "label": "[Link.from_db(link) for link in node.Input or []]"
                                                                }
                                                            ],
                                                            "label": "obj.input_links = [Link.from_db(link) for link in node.Input or []]"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 149,
                                                            "end_token": 169,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 149,
                                                                    "end_token": 151,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 149,
                                                                            "end_token": 149,
                                                                            "children": [],
                                                                            "label": "obj"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 151,
                                                                            "end_token": 151,
                                                                            "children": [],
                                                                            "label": "output_links"
                                                                        }
                                                                    ],
                                                                    "label": "obj.output_links"
                                                                },
                                                                {
                                                                    "type": "list_comprehension",
                                                                    "start_token": 153,
                                                                    "end_token": 169,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 154,
                                                                            "end_token": 159,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 154,
                                                                                    "end_token": 156,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 154,
                                                                                            "end_token": 154,
                                                                                            "children": [],
                                                                                            "label": "Link"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 156,
                                                                                            "end_token": 156,
                                                                                            "children": [],
                                                                                            "label": "from_db"
                                                                                        }
                                                                                    ],
                                                                                    "label": "Link.from_db"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 157,
                                                                                    "end_token": 159,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 158,
                                                                                            "end_token": 158,
                                                                                            "children": [],
                                                                                            "label": "link"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(link)"
                                                                                }
                                                                            ],
                                                                            "label": "Link.from_db(link)"
                                                                        },
                                                                        {
                                                                            "type": "for_in_clause",
                                                                            "start_token": 160,
                                                                            "end_token": 167,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 161,
                                                                                    "end_token": 161,
                                                                                    "children": [],
                                                                                    "label": "link"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 163,
                                                                                    "end_token": 165,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 163,
                                                                                            "end_token": 163,
                                                                                            "children": [],
                                                                                            "label": "node"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 165,
                                                                                            "end_token": 165,
                                                                                            "children": [],
                                                                                            "label": "Output"
                                                                                        }
                                                                                    ],
                                                                                    "label": "node.Output"
                                                                                },
                                                                                {
                                                                                    "type": "list",
                                                                                    "start_token": 167,
                                                                                    "end_token": 168,
                                                                                    "children": [],
                                                                                    "label": "[]"
                                                                                }
                                                                            ],
                                                                            "label": "for link in node.Output or ["
                                                                        }
                                                                    ],
                                                                    "label": "[Link.from_db(link) for link in node.Output or []]"
                                                                }
                                                            ],
                                                            "label": "obj.output_links = [Link.from_db(link) for link in node.Output or []]"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 171,
                                                            "end_token": 172,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 172,
                                                                    "end_token": 172,
                                                                    "children": [],
                                                                    "label": "obj"
                                                                }
                                                            ],
                                                            "label": "return obj"
                                                        }
                                                    ],
                                                    "label": "\n        if not node.AgentBlock:\n            raise ValueError(f\"Invalid node {node.id}, invalid AgentBlock.\")\n        obj = NodeModel(\n            id=node.id,\n            block_id=node.AgentBlock.id,\n            input_default=json.loads(node.constantInput, target_type=dict[str, Any]),\n            metadata=json.loads(node.metadata, target_type=dict[str, Any]),\n            graph_id=node.agentGraphId,\n            graph_version=node.agentGraphVersion,\n            webhook_id=node.webhookId,\n            webhook=Webhook.from_db(node.Webhook) if node.Webhook else None,\n        )\n        obj.input_links = [Link.from_db(link) for link in node.Input or []]\n        obj.output_links = [Link.from_db(link) for link in node.Output or []]\n        return obj"
                                                }
                                            ],
                                            "label": "def from_db(node: AgentNode):\n        if not node.AgentBlock:\n            raise ValueError(f\"Invalid node {node.id}, invalid AgentBlock.\")\n        obj = NodeModel(\n            id=node.id,\n            block_id=node.AgentBlock.id,\n            input_default=json.loads(node.constantInput, target_type=dict[str, Any]),\n            metadata=json.loads(node.metadata, target_type=dict[str, Any]),\n            graph_id=node.agentGraphId,\n            graph_version=node.agentGraphVersion,\n            webhook_id=node.webhookId,\n            webhook=Webhook.from_db(node.Webhook) if node.Webhook else None,\n        )\n        obj.input_links = [Link.from_db(link) for link in node.Input or []]\n        obj.output_links = [Link.from_db(link) for link in node.Output or []]\n        return obj"
                                        }
                                    ],
                                    "label": "def from_db(node: AgentNode):\n        if not node.AgentBlock:\n            raise ValueError(f\"Invalid node {node.id}, invalid AgentBlock.\")\n        obj = NodeModel(\n            id=node.id,\n            block_id=node.AgentBlock.id,\n            input_default=json.loads(node.constantInput, target_type=dict[str, Any]),\n            metadata=json.loads(node.metadata, target_type=dict[str, Any]),\n            graph_id=node.agentGraphId,\n            graph_version=node.agentGraphVersion,\n            webhook_id=node.webhookId,\n            webhook=Webhook.from_db(node.Webhook) if node.Webhook else None,\n        )\n        obj.input_links = [Link.from_db(link) for link in node.Input or []]\n        obj.output_links = [Link.from_db(link) for link in node.Output or []]\n        return obj\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "is_triggered_by_event_type",
                            "start_line": 82,
                            "end_line": 96,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 119,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 119,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "is_triggered_by_event_type"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 8,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "self"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "event_type"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "children": [],
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "(self, event_type: str)"
                                                },
                                                {
                                                    "type": "union_type",
                                                    "start_token": 10,
                                                    "end_token": 11,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 11,
                                                            "end_token": 11,
                                                            "children": [],
                                                            "label": "bool"
                                                        }
                                                    ],
                                                    "label": "> bool"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 13,
                                                    "end_token": 119,
                                                    "children": [
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 14,
                                                            "end_token": 26,
                                                            "children": [
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 15,
                                                                    "end_token": 26,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 20,
                                                                            "end_token": 25,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 20,
                                                                                    "end_token": 20,
                                                                                    "children": [],
                                                                                    "label": "get_block"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 21,
                                                                                    "end_token": 25,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 22,
                                                                                            "end_token": 24,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 22,
                                                                                                    "end_token": 22,
                                                                                                    "children": [],
                                                                                                    "label": "self"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 24,
                                                                                                    "end_token": 24,
                                                                                                    "children": [],
                                                                                                    "label": "block_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "self.block_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(self.block_id)"
                                                                                }
                                                                            ],
                                                                            "label": "get_block(self.block_id)"
                                                                        }
                                                                    ],
                                                                    "label": "not (block := get_block(self.block_id))"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 29,
                                                                    "end_token": 34,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 30,
                                                                            "end_token": 34,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 30,
                                                                                    "end_token": 30,
                                                                                    "children": [],
                                                                                    "label": "ValueError"
                                                                                },
                                                                                {
                                                                                    "type": "format_specifier",
                                                                                    "start_token": 31,
                                                                                    "end_token": 34,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 33,
                                                                                            "end_token": 33,
                                                                                            "children": [],
                                                                                            "label": "\"Block #{self.block_id} not found for node #{self.id}\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(f\"Block #{self.block_id} not found for node #{self.id}\")"
                                                                                }
                                                                            ],
                                                                            "label": "ValueError(f\"Block #{self.block_id} not found for node #{self.id}\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise ValueError(f\"Block #{self.block_id} not found for node #{self.id}\")"
                                                                }
                                                            ],
                                                            "label": "if not (block := get_block(self.block_id))"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 36,
                                                            "end_token": 41,
                                                            "children": [
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 37,
                                                                    "end_token": 41,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 38,
                                                                            "end_token": 40,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 38,
                                                                                    "end_token": 38,
                                                                                    "children": [],
                                                                                    "label": "block"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 40,
                                                                                    "end_token": 40,
                                                                                    "children": [],
                                                                                    "label": "webhook_config"
                                                                                }
                                                                            ],
                                                                            "label": "block.webhook_config"
                                                                        }
                                                                    ],
                                                                    "label": "not block.webhook_config:"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 43,
                                                                    "end_token": 47,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 44,
                                                                            "end_token": 47,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 44,
                                                                                    "end_token": 44,
                                                                                    "children": [],
                                                                                    "label": "TypeError"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 46,
                                                                                    "end_token": 46,
                                                                                    "children": [],
                                                                                    "label": "\"This method can't be used on non-webhook blocks\""
                                                                                }
                                                                            ],
                                                                            "label": "TypeError(\"This method can't be used on non-webhook blocks\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise TypeError(\"This method can't be used on non-webhook blocks\")"
                                                                }
                                                            ],
                                                            "label": "if not block.webhook_config:"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 49,
                                                            "end_token": 56,
                                                            "children": [
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 50,
                                                                    "end_token": 56,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 51,
                                                                            "end_token": 55,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 51,
                                                                                    "end_token": 51,
                                                                                    "children": [],
                                                                                    "label": "block"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 53,
                                                                                    "end_token": 55,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 53,
                                                                                            "end_token": 53,
                                                                                            "children": [],
                                                                                            "label": "webhook_config"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 55,
                                                                                            "end_token": 55,
                                                                                            "children": [],
                                                                                            "label": "event_filter_input"
                                                                                        }
                                                                                    ],
                                                                                    "label": "webhook_config.event_filter_input"
                                                                                }
                                                                            ],
                                                                            "label": "block.webhook_config.event_filter_input"
                                                                        }
                                                                    ],
                                                                    "label": "not block.webhook_config.event_filter_input:"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 58,
                                                                    "end_token": 59,
                                                                    "children": [
                                                                        {
                                                                            "type": "true",
                                                                            "start_token": 59,
                                                                            "end_token": 59,
                                                                            "children": [],
                                                                            "label": "True"
                                                                        }
                                                                    ],
                                                                    "label": "return True"
                                                                }
                                                            ],
                                                            "label": "if not block.webhook_config.event_filter_input:"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 61,
                                                            "end_token": 74,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 61,
                                                                    "end_token": 61,
                                                                    "children": [],
                                                                    "label": "event_filter"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 67,
                                                                    "end_token": 74,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 66,
                                                                            "end_token": 67,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 63,
                                                                                    "end_token": 65,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 63,
                                                                                            "end_token": 63,
                                                                                            "children": [],
                                                                                            "label": "self"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 65,
                                                                                            "end_token": 65,
                                                                                            "children": [],
                                                                                            "label": "input_default"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.input_default"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 67,
                                                                                    "end_token": 67,
                                                                                    "children": [],
                                                                                    "label": "get"
                                                                                }
                                                                            ],
                                                                            "label": ".get"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 68,
                                                                            "end_token": 74,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 69,
                                                                                    "end_token": 73,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 69,
                                                                                            "end_token": 71,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 69,
                                                                                                    "end_token": 69,
                                                                                                    "children": [],
                                                                                                    "label": "block"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 71,
                                                                                                    "end_token": 71,
                                                                                                    "children": [],
                                                                                                    "label": "webhook_config"
                                                                                                }
                                                                                            ],
                                                                                            "label": "block.webhook_config"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 73,
                                                                                            "end_token": 73,
                                                                                            "children": [],
                                                                                            "label": "event_filter_input"
                                                                                        }
                                                                                    ],
                                                                                    "label": "block.webhook_config.event_filter_input"
                                                                                }
                                                                            ],
                                                                            "label": "(block.webhook_config.event_filter_input)"
                                                                        }
                                                                    ],
                                                                    "label": "get(block.webhook_config.event_filter_input)"
                                                                }
                                                            ],
                                                            "label": "event_filter = self.input_default.get(block.webhook_config.event_filter_input)"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 76,
                                                            "end_token": 79,
                                                            "children": [
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 77,
                                                                    "end_token": 79,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 78,
                                                                            "end_token": 78,
                                                                            "children": [],
                                                                            "label": "event_filter"
                                                                        }
                                                                    ],
                                                                    "label": "not event_filter:"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 81,
                                                                    "end_token": 86,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 82,
                                                                            "end_token": 86,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 82,
                                                                                    "end_token": 82,
                                                                                    "children": [],
                                                                                    "label": "ValueError"
                                                                                },
                                                                                {
                                                                                    "type": "format_specifier",
                                                                                    "start_token": 84,
                                                                                    "end_token": 86,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 85,
                                                                                            "end_token": 85,
                                                                                            "children": [],
                                                                                            "label": "\"Event filter is not configured on node #{self.id}\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "f\"Event filter is not configured on node #{self.id}\")"
                                                                                }
                                                                            ],
                                                                            "label": "ValueError(f\"Event filter is not configured on node #{self.id}\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise ValueError(f\"Event filter is not configured on node #{self.id}\")"
                                                                }
                                                            ],
                                                            "label": "if not event_filter:"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 88,
                                                            "end_token": 119,
                                                            "children": [
                                                                {
                                                                    "type": "binary_operator",
                                                                    "start_token": 89,
                                                                    "end_token": 119,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 89,
                                                                            "end_token": 89,
                                                                            "children": [],
                                                                            "label": "event_type"
                                                                        },
                                                                        {
                                                                            "type": "list_comprehension",
                                                                            "start_token": 90,
                                                                            "end_token": 119,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 90,
                                                                                    "end_token": 104,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 93,
                                                                                            "end_token": 99,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 93,
                                                                                                    "end_token": 95,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 93,
                                                                                                            "end_token": 93,
                                                                                                            "children": [],
                                                                                                            "label": "block"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 95,
                                                                                                            "end_token": 95,
                                                                                                            "children": [],
                                                                                                            "label": "webhook_config"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "block.webhook_config"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 97,
                                                                                                    "end_token": 99,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 97,
                                                                                                            "end_token": 97,
                                                                                                            "children": [],
                                                                                                            "label": "event_format"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 99,
                                                                                                            "end_token": 99,
                                                                                                            "children": [],
                                                                                                            "label": "format"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "event_format.format"
                                                                                                }
                                                                                            ],
                                                                                            "label": "block.webhook_config.event_format.format"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 101,
                                                                                            "end_token": 104,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 101,
                                                                                                    "end_token": 101,
                                                                                                    "children": [],
                                                                                                    "label": "event"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 103,
                                                                                                    "end_token": 103,
                                                                                                    "children": [],
                                                                                                    "label": "k"
                                                                                                }
                                                                                            ],
                                                                                            "label": "event=k)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "in [\n            block.webhook_config.event_format.format(event=k)"
                                                                                },
                                                                                {
                                                                                    "type": "for_in_clause",
                                                                                    "start_token": 106,
                                                                                    "end_token": 109,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 107,
                                                                                            "end_token": 107,
                                                                                            "children": [],
                                                                                            "label": "k"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 109,
                                                                                            "end_token": 109,
                                                                                            "children": [],
                                                                                            "label": "event_filter"
                                                                                        }
                                                                                    ],
                                                                                    "label": "for k in event_filter"
                                                                                },
                                                                                {
                                                                                    "type": "if_clause",
                                                                                    "start_token": 111,
                                                                                    "end_token": 117,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "subscript",
                                                                                            "start_token": 112,
                                                                                            "end_token": 115,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 112,
                                                                                                    "end_token": 113,
                                                                                                    "children": [],
                                                                                                    "label": "event_filter["
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 115,
                                                                                                    "end_token": 115,
                                                                                                    "children": [],
                                                                                                    "label": "]"
                                                                                                }
                                                                                            ],
                                                                                            "label": "event_filter[k]"
                                                                                        },
                                                                                        {
                                                                                            "type": "comparison_operator",
                                                                                            "start_token": 116,
                                                                                            "end_token": 117,
                                                                                            "children": [],
                                                                                            "label": "is True"
                                                                                        },
                                                                                        {
                                                                                            "type": "true",
                                                                                            "start_token": 117,
                                                                                            "end_token": 117,
                                                                                            "children": [],
                                                                                            "label": "True"
                                                                                        }
                                                                                    ],
                                                                                    "label": "if event_filter[k] is True"
                                                                                }
                                                                            ],
                                                                            "label": "in [\n            block.webhook_config.event_format.format(event=k)\n            for k in event_filter\n            if event_filter[k] is True\n        ]"
                                                                        }
                                                                    ],
                                                                    "label": "event_type in [\n            block.webhook_config.event_format.format(event=k)\n            for k in event_filter\n            if event_filter[k] is True\n        ]"
                                                                }
                                                            ],
                                                            "label": "return event_type in [\n            block.webhook_config.event_format.format(event=k)\n            for k in event_filter\n            if event_filter[k] is True\n        ]"
                                                        }
                                                    ],
                                                    "label": "\n        if not (block := get_block(self.block_id)):\n            raise ValueError(f\"Block #{self.block_id} not found for node #{self.id}\")\n        if not block.webhook_config:\n            raise TypeError(\"This method can't be used on non-webhook blocks\")\n        if not block.webhook_config.event_filter_input:\n            return True\n        event_filter = self.input_default.get(block.webhook_config.event_filter_input)\n        if not event_filter:\n            raise ValueError(f\"Event filter is not configured on node #{self.id}\")\n        return event_type in [\n            block.webhook_config.event_format.format(event=k)\n            for k in event_filter\n            if event_filter[k] is True\n        ]"
                                                }
                                            ],
                                            "label": "def is_triggered_by_event_type(self, event_type: str) -> bool:\n        if not (block := get_block(self.block_id)):\n            raise ValueError(f\"Block #{self.block_id} not found for node #{self.id}\")\n        if not block.webhook_config:\n            raise TypeError(\"This method can't be used on non-webhook blocks\")\n        if not block.webhook_config.event_filter_input:\n            return True\n        event_filter = self.input_default.get(block.webhook_config.event_filter_input)\n        if not event_filter:\n            raise ValueError(f\"Event filter is not configured on node #{self.id}\")\n        return event_type in [\n            block.webhook_config.event_format.format(event=k)\n            for k in event_filter\n            if event_filter[k] is True\n        ]"
                                        }
                                    ],
                                    "label": "def is_triggered_by_event_type(self, event_type: str) -> bool:\n        if not (block := get_block(self.block_id)):\n            raise ValueError(f\"Block #{self.block_id} not found for node #{self.id}\")\n        if not block.webhook_config:\n            raise TypeError(\"This method can't be used on non-webhook blocks\")\n        if not block.webhook_config.event_filter_input:\n            return True\n        event_filter = self.input_default.get(block.webhook_config.event_filter_input)\n        if not event_filter:\n            raise ValueError(f\"Event filter is not configured on node #{self.id}\")\n        return event_type in [\n            block.webhook_config.event_format.format(event=k)\n            for k in event_filter\n            if event_filter[k] is True\n        ]"
                                }
                            ]
                        }
                    ],
                    "label": "class NodeModel(Node):\n    graph_id: str\n    graph_version: int\n\n    webhook: Optional[Webhook] = None\n\n    @staticmethod\n\n"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "GraphExecution",
            "start_line": 103,
            "end_line": 139,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 42,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 38,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "GraphExecution"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "label": "BaseDbModel"
                                        }
                                    ],
                                    "label": "(BaseDbModel)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 6,
                                    "end_token": 38,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "label": "execution_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "execution_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 11,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "label": "started_at"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 13,
                                                    "end_token": 13,
                                                    "label": "datetime"
                                                }
                                            ],
                                            "label": "started_at: datetime"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 15,
                                            "end_token": 17,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 15,
                                                    "end_token": 15,
                                                    "label": "ended_at"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 17,
                                                    "end_token": 17,
                                                    "label": "datetime"
                                                }
                                            ],
                                            "label": "ended_at: datetime"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 19,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 19,
                                                    "end_token": 19,
                                                    "label": "duration"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 21,
                                                    "end_token": 21,
                                                    "label": "float"
                                                }
                                            ],
                                            "label": "duration: float"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 23,
                                            "end_token": 25,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 23,
                                                    "end_token": 23,
                                                    "label": "total_run_time"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 25,
                                                    "end_token": 25,
                                                    "label": "float"
                                                }
                                            ],
                                            "label": "total_run_time: float"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 27,
                                            "end_token": 29,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 27,
                                                    "end_token": 27,
                                                    "label": "status"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 29,
                                                    "end_token": 29,
                                                    "label": "ExecutionStatus"
                                                }
                                            ],
                                            "label": "status: ExecutionStatus"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 31,
                                            "end_token": 33,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 31,
                                                    "end_token": 31,
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 33,
                                                    "end_token": 33,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "graph_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 35,
                                            "end_token": 37,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 35,
                                                    "end_token": 35,
                                                    "label": "graph_version"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 37,
                                                    "end_token": 37,
                                                    "label": "int"
                                                }
                                            ],
                                            "label": "graph_version: int"
                                        }
                                    ],
                                    "label": "\n    execution_id: str\n    started_at: datetime\n    ended_at: datetime\n    duration: float\n    total_run_time: float\n    status: ExecutionStatus\n    graph_id: str\n    graph_version: int\n"
                                }
                            ],
                            "label": "class GraphExecution(BaseDbModel):\n    execution_id: str\n    started_at: datetime\n    ended_at: datetime\n    duration: float\n    total_run_time: float\n    status: ExecutionStatus\n    graph_id: str\n    graph_version: int\n"
                        },
                        {
                            "type": "decorated_definition",
                            "start_token": 40,
                            "end_token": 42,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 40,
                                    "end_token": 41,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 41,
                                            "end_token": 41,
                                            "label": "staticmethod"
                                        }
                                    ],
                                    "label": "@staticmethod"
                                }
                            ],
                            "label": "@staticmethod\n"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "from_db",
                            "start_line": 114,
                            "end_line": 139,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 175,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 175,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "from_db"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "execution"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "AgentGraphExecution"
                                                                }
                                                            ],
                                                            "label": "execution: AgentGraphExecution"
                                                        }
                                                    ],
                                                    "label": "(execution: AgentGraphExecution)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 8,
                                                    "end_token": 175,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 9,
                                                            "end_token": 18,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "now"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 11,
                                                                    "end_token": 18,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 11,
                                                                            "end_token": 13,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 11,
                                                                                    "end_token": 11,
                                                                                    "children": [],
                                                                                    "label": "datetime"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 13,
                                                                                    "end_token": 13,
                                                                                    "children": [],
                                                                                    "label": "now"
                                                                                }
                                                                            ],
                                                                            "label": "datetime.now"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 14,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 15,
                                                                                    "end_token": 17,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 15,
                                                                                            "end_token": 15,
                                                                                            "children": [],
                                                                                            "label": "timezone"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "children": [],
                                                                                            "label": "utc"
                                                                                        }
                                                                                    ],
                                                                                    "label": "timezone.utc"
                                                                                }
                                                                            ],
                                                                            "label": "(timezone.utc)"
                                                                        }
                                                                    ],
                                                                    "label": "datetime.now(timezone.utc)"
                                                                }
                                                            ],
                                                            "label": "now = datetime.now(timezone.utc)"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 20,
                                                            "end_token": 28,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 20,
                                                                    "end_token": 20,
                                                                    "children": [],
                                                                    "label": "start_time"
                                                                },
                                                                {
                                                                    "type": "boolean_operator",
                                                                    "start_token": 22,
                                                                    "end_token": 28,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 22,
                                                                            "end_token": 24,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 22,
                                                                                    "end_token": 22,
                                                                                    "children": [],
                                                                                    "label": "execution"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 24,
                                                                                    "end_token": 24,
                                                                                    "children": [],
                                                                                    "label": "startedAt"
                                                                                }
                                                                            ],
                                                                            "label": "execution.startedAt"
                                                                        },
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 26,
                                                                            "end_token": 28,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 26,
                                                                                    "end_token": 26,
                                                                                    "children": [],
                                                                                    "label": "execution"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 28,
                                                                                    "end_token": 28,
                                                                                    "children": [],
                                                                                    "label": "createdAt"
                                                                                }
                                                                            ],
                                                                            "label": "execution.createdAt"
                                                                        }
                                                                    ],
                                                                    "label": "execution.startedAt or execution.createdAt"
                                                                }
                                                            ],
                                                            "label": "start_time = execution.startedAt or execution.createdAt"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 30,
                                                            "end_token": 36,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 30,
                                                                    "end_token": 30,
                                                                    "children": [],
                                                                    "label": "end_time"
                                                                },
                                                                {
                                                                    "type": "boolean_operator",
                                                                    "start_token": 32,
                                                                    "end_token": 36,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 32,
                                                                            "end_token": 34,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 32,
                                                                                    "end_token": 32,
                                                                                    "children": [],
                                                                                    "label": "execution"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 34,
                                                                                    "end_token": 34,
                                                                                    "children": [],
                                                                                    "label": "updatedAt"
                                                                                }
                                                                            ],
                                                                            "label": "execution.updatedAt"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 36,
                                                                            "end_token": 36,
                                                                            "children": [],
                                                                            "label": "now"
                                                                        }
                                                                    ],
                                                                    "label": "execution.updatedAt or now"
                                                                }
                                                            ],
                                                            "label": "end_time = execution.updatedAt or now"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 38,
                                                            "end_token": 48,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 38,
                                                                    "end_token": 38,
                                                                    "children": [],
                                                                    "label": "duration"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 40,
                                                                    "end_token": 48,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 40,
                                                                            "end_token": 46,
                                                                            "children": [
                                                                                {
                                                                                    "type": "binary_operator",
                                                                                    "start_token": 41,
                                                                                    "end_token": 43,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 41,
                                                                                            "end_token": 41,
                                                                                            "children": [],
                                                                                            "label": "end_time"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 43,
                                                                                            "end_token": 43,
                                                                                            "children": [],
                                                                                            "label": "start_time"
                                                                                        }
                                                                                    ],
                                                                                    "label": "end_time - start_time"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 46,
                                                                                    "end_token": 46,
                                                                                    "children": [],
                                                                                    "label": "total_seconds"
                                                                                }
                                                                            ],
                                                                            "label": "(end_time - start_time).total_seconds"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 47,
                                                                            "end_token": 48,
                                                                            "children": [],
                                                                            "label": "()"
                                                                        }
                                                                    ],
                                                                    "label": "(end_time - start_time).total_seconds()"
                                                                }
                                                            ],
                                                            "label": "duration = (end_time - start_time).total_seconds()"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 50,
                                                            "end_token": 53,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 50,
                                                                    "end_token": 50,
                                                                    "children": [],
                                                                    "label": "total_run_time"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 52,
                                                                    "end_token": 52,
                                                                    "children": [],
                                                                    "label": "duration"
                                                                }
                                                            ],
                                                            "label": "total_run_time = duration\n"
                                                        },
                                                        {
                                                            "type": "try_statement",
                                                            "start_token": 55,
                                                            "end_token": 110,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 57,
                                                                    "end_token": 79,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 58,
                                                                            "end_token": 78,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 58,
                                                                                    "end_token": 58,
                                                                                    "children": [],
                                                                                    "label": "stats"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 60,
                                                                                    "end_token": 78,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 60,
                                                                                            "end_token": 62,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 60,
                                                                                                    "end_token": 60,
                                                                                                    "children": [],
                                                                                                    "label": "json"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 62,
                                                                                                    "children": [],
                                                                                                    "label": "loads"
                                                                                                }
                                                                                            ],
                                                                                            "label": "json.loads"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 63,
                                                                                            "end_token": 78,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "boolean_operator",
                                                                                                    "start_token": 64,
                                                                                                    "end_token": 67,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 64,
                                                                                                            "end_token": 66,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 64,
                                                                                                                    "end_token": 64,
                                                                                                                    "children": [],
                                                                                                                    "label": "execution"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 66,
                                                                                                                    "end_token": 66,
                                                                                                                    "children": [],
                                                                                                                    "label": "stats"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "execution.stats"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 68,
                                                                                                            "end_token": 68,
                                                                                                            "children": [],
                                                                                                            "label": "\"{}\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "execution.stats or"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 70,
                                                                                                    "end_token": 77,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 70,
                                                                                                            "end_token": 70,
                                                                                                            "children": [],
                                                                                                            "label": "target_type"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "generic_type",
                                                                                                            "start_token": 72,
                                                                                                            "end_token": 77,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 72,
                                                                                                                    "end_token": 72,
                                                                                                                    "children": [],
                                                                                                                    "label": "dict"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "list",
                                                                                                                    "start_token": 73,
                                                                                                                    "end_token": 77,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 74,
                                                                                                                            "end_token": 74,
                                                                                                                            "children": [],
                                                                                                                            "label": "str"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 76,
                                                                                                                            "end_token": 76,
                                                                                                                            "children": [],
                                                                                                                            "label": "Any"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "[str, Any]"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "dict[str, Any]"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "target_type=dict[str, Any]"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(execution.stats or \"{}\", target_type=dict[str, Any])"
                                                                                        }
                                                                                    ],
                                                                                    "label": "json.loads(execution.stats or \"{}\", target_type=dict[str, Any])"
                                                                                }
                                                                            ],
                                                                            "label": "stats = json.loads(execution.stats or \"{}\", target_type=dict[str, Any])"
                                                                        }
                                                                    ],
                                                                    "label": "\n            stats = json.loads(execution.stats or \"{}\", target_type=dict[str, Any])\n"
                                                                },
                                                                {
                                                                    "type": "except_clause",
                                                                    "start_token": 80,
                                                                    "end_token": 88,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 81,
                                                                            "end_token": 81,
                                                                            "children": [],
                                                                            "label": "ValueError"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 83,
                                                                            "end_token": 88,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 84,
                                                                                    "end_token": 86,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 84,
                                                                                            "end_token": 84,
                                                                                            "children": [],
                                                                                            "label": "stats"
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "start_token": 86,
                                                                                            "end_token": 86,
                                                                                            "children": [],
                                                                                            "label": "{"
                                                                                        }
                                                                                    ],
                                                                                    "label": "stats = {"
                                                                                }
                                                                            ],
                                                                            "label": "\n            stats = {}\n"
                                                                        }
                                                                    ],
                                                                    "label": "except ValueError:\n            stats = {}\n"
                                                                }
                                                            ],
                                                            "label": "try:\n            stats = json.loads(execution.stats or \"{}\", target_type=dict[str, Any])\n        except ValueError:\n            stats = {}\n\n        duration = stats.get(\"walltime\", duration)\n        total_run_time = stats.get(\"nodes_walltime\", total_run_time)"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 90,
                                                            "end_token": 99,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 90,
                                                                    "end_token": 90,
                                                                    "children": [],
                                                                    "label": "duration"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 92,
                                                                    "end_token": 99,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 92,
                                                                            "end_token": 94,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 92,
                                                                                    "end_token": 92,
                                                                                    "children": [],
                                                                                    "label": "stats"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 94,
                                                                                    "end_token": 94,
                                                                                    "children": [],
                                                                                    "label": "get"
                                                                                }
                                                                            ],
                                                                            "label": "stats.get"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 95,
                                                                            "end_token": 99,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 96,
                                                                                    "end_token": 96,
                                                                                    "children": [],
                                                                                    "label": "\"walltime\""
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 98,
                                                                                    "end_token": 98,
                                                                                    "children": [],
                                                                                    "label": "duration"
                                                                                }
                                                                            ],
                                                                            "label": "(\"walltime\", duration)"
                                                                        }
                                                                    ],
                                                                    "label": "stats.get(\"walltime\", duration)"
                                                                }
                                                            ],
                                                            "label": "duration = stats.get(\"walltime\", duration)"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 101,
                                                            "end_token": 110,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 101,
                                                                    "end_token": 101,
                                                                    "children": [],
                                                                    "label": "total_run_time"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 103,
                                                                    "end_token": 110,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 103,
                                                                            "end_token": 105,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 103,
                                                                                    "end_token": 103,
                                                                                    "children": [],
                                                                                    "label": "stats"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 105,
                                                                                    "end_token": 105,
                                                                                    "children": [],
                                                                                    "label": "get"
                                                                                }
                                                                            ],
                                                                            "label": "stats.get"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 106,
                                                                            "end_token": 110,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 107,
                                                                                    "end_token": 107,
                                                                                    "children": [],
                                                                                    "label": "\"nodes_walltime\""
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 109,
                                                                                    "end_token": 109,
                                                                                    "children": [],
                                                                                    "label": "total_run_time"
                                                                                }
                                                                            ],
                                                                            "label": "(\"nodes_walltime\", total_run_time)"
                                                                        }
                                                                    ],
                                                                    "label": "stats.get(\"nodes_walltime\", total_run_time)"
                                                                }
                                                            ],
                                                            "label": "total_run_time = stats.get(\"nodes_walltime\", total_run_time)"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 113,
                                                            "end_token": 175,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 114,
                                                                    "end_token": 175,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 114,
                                                                            "end_token": 114,
                                                                            "children": [],
                                                                            "label": "GraphExecution"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 115,
                                                                            "end_token": 175,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 117,
                                                                                    "end_token": 122,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 117,
                                                                                            "end_token": 117,
                                                                                            "children": [],
                                                                                            "label": "id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 119,
                                                                                            "end_token": 121,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 119,
                                                                                                    "end_token": 119,
                                                                                                    "children": [],
                                                                                                    "label": "execution"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 121,
                                                                                                    "end_token": 121,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "execution.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "id=execution.id,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 124,
                                                                                    "end_token": 129,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 124,
                                                                                            "end_token": 124,
                                                                                            "children": [],
                                                                                            "label": "execution_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 126,
                                                                                            "end_token": 128,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 126,
                                                                                                    "end_token": 126,
                                                                                                    "children": [],
                                                                                                    "label": "execution"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 128,
                                                                                                    "end_token": 128,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "execution.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "execution_id=execution.id,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 131,
                                                                                    "end_token": 134,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 131,
                                                                                            "end_token": 131,
                                                                                            "children": [],
                                                                                            "label": "started_at"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 133,
                                                                                            "end_token": 133,
                                                                                            "children": [],
                                                                                            "label": "start_time"
                                                                                        }
                                                                                    ],
                                                                                    "label": "started_at=start_time,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 136,
                                                                                    "end_token": 139,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 136,
                                                                                            "end_token": 136,
                                                                                            "children": [],
                                                                                            "label": "ended_at"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 138,
                                                                                            "end_token": 138,
                                                                                            "children": [],
                                                                                            "label": "end_time"
                                                                                        }
                                                                                    ],
                                                                                    "label": "ended_at=end_time,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 141,
                                                                                    "end_token": 144,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 141,
                                                                                            "end_token": 141,
                                                                                            "children": [],
                                                                                            "label": "duration"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 143,
                                                                                            "end_token": 143,
                                                                                            "children": [],
                                                                                            "label": "duration"
                                                                                        }
                                                                                    ],
                                                                                    "label": "duration=duration,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 146,
                                                                                    "end_token": 149,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 146,
                                                                                            "end_token": 146,
                                                                                            "children": [],
                                                                                            "label": "total_run_time"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 148,
                                                                                            "end_token": 148,
                                                                                            "children": [],
                                                                                            "label": "total_run_time"
                                                                                        }
                                                                                    ],
                                                                                    "label": "total_run_time=total_run_time,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 151,
                                                                                    "end_token": 158,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 151,
                                                                                            "end_token": 151,
                                                                                            "children": [],
                                                                                            "label": "status"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 153,
                                                                                            "end_token": 158,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 153,
                                                                                                    "end_token": 153,
                                                                                                    "children": [],
                                                                                                    "label": "ExecutionStatus"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 154,
                                                                                                    "end_token": 158,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 155,
                                                                                                            "end_token": 157,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 155,
                                                                                                                    "end_token": 155,
                                                                                                                    "children": [],
                                                                                                                    "label": "execution"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 157,
                                                                                                                    "end_token": 157,
                                                                                                                    "children": [],
                                                                                                                    "label": "executionStatus"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "execution.executionStatus"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(execution.executionStatus)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "ExecutionStatus(execution.executionStatus)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "status=ExecutionStatus(execution.executionStatus)"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 161,
                                                                                    "end_token": 166,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 161,
                                                                                            "end_token": 161,
                                                                                            "children": [],
                                                                                            "label": "graph_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 163,
                                                                                            "end_token": 165,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 163,
                                                                                                    "end_token": 163,
                                                                                                    "children": [],
                                                                                                    "label": "execution"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 165,
                                                                                                    "end_token": 165,
                                                                                                    "children": [],
                                                                                                    "label": "agentGraphId"
                                                                                                }
                                                                                            ],
                                                                                            "label": "execution.agentGraphId"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_id=execution.agentGraphId,"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 168,
                                                                                    "end_token": 173,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 168,
                                                                                            "end_token": 168,
                                                                                            "children": [],
                                                                                            "label": "graph_version"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 170,
                                                                                            "end_token": 172,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 170,
                                                                                                    "end_token": 170,
                                                                                                    "children": [],
                                                                                                    "label": "execution"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 172,
                                                                                                    "end_token": 172,
                                                                                                    "children": [],
                                                                                                    "label": "agentGraphVersion"
                                                                                                }
                                                                                            ],
                                                                                            "label": "execution.agentGraphVersion"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_version=execution.agentGraphVersion,"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            id=execution.id,\n            execution_id=execution.id,\n            started_at=start_time,\n            ended_at=end_time,\n            duration=duration,\n            total_run_time=total_run_time,\n            status=ExecutionStatus(execution.executionStatus),\n            graph_id=execution.agentGraphId,\n            graph_version=execution.agentGraphVersion,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "GraphExecution(\n            id=execution.id,\n            execution_id=execution.id,\n            started_at=start_time,\n            ended_at=end_time,\n            duration=duration,\n            total_run_time=total_run_time,\n            status=ExecutionStatus(execution.executionStatus),\n            graph_id=execution.agentGraphId,\n            graph_version=execution.agentGraphVersion,\n        )"
                                                                }
                                                            ],
                                                            "label": "return GraphExecution(\n            id=execution.id,\n            execution_id=execution.id,\n            started_at=start_time,\n            ended_at=end_time,\n            duration=duration,\n            total_run_time=total_run_time,\n            status=ExecutionStatus(execution.executionStatus),\n            graph_id=execution.agentGraphId,\n            graph_version=execution.agentGraphVersion,\n        )"
                                                        }
                                                    ],
                                                    "label": "\n        now = datetime.now(timezone.utc)\n        start_time = execution.startedAt or execution.createdAt\n        end_time = execution.updatedAt or now\n        duration = (end_time - start_time).total_seconds()\n        total_run_time = duration\n\n        try:\n            stats = json.loads(execution.stats or \"{}\", target_type=dict[str, Any])\n        except ValueError:\n            stats = {}\n\n        duration = stats.get(\"walltime\", duration)\n        total_run_time = stats.get(\"nodes_walltime\", total_run_time)\n\n        return GraphExecution(\n            id=execution.id,\n            execution_id=execution.id,\n            started_at=start_time,\n            ended_at=end_time,\n            duration=duration,\n            total_run_time=total_run_time,\n            status=ExecutionStatus(execution.executionStatus),\n            graph_id=execution.agentGraphId,\n            graph_version=execution.agentGraphVersion,\n        )"
                                                }
                                            ],
                                            "label": "def from_db(execution: AgentGraphExecution):\n        now = datetime.now(timezone.utc)\n        start_time = execution.startedAt or execution.createdAt\n        end_time = execution.updatedAt or now\n        duration = (end_time - start_time).total_seconds()\n        total_run_time = duration\n\n        try:\n            stats = json.loads(execution.stats or \"{}\", target_type=dict[str, Any])\n        except ValueError:\n            stats = {}\n\n        duration = stats.get(\"walltime\", duration)\n        total_run_time = stats.get(\"nodes_walltime\", total_run_time)\n\n        return GraphExecution(\n            id=execution.id,\n            execution_id=execution.id,\n            started_at=start_time,\n            ended_at=end_time,\n            duration=duration,\n            total_run_time=total_run_time,\n            status=ExecutionStatus(execution.executionStatus),\n            graph_id=execution.agentGraphId,\n            graph_version=execution.agentGraphVersion,\n        )"
                                        }
                                    ],
                                    "label": "def from_db(execution: AgentGraphExecution):\n        now = datetime.now(timezone.utc)\n        start_time = execution.startedAt or execution.createdAt\n        end_time = execution.updatedAt or now\n        duration = (end_time - start_time).total_seconds()\n        total_run_time = duration\n\n        try:\n            stats = json.loads(execution.stats or \"{}\", target_type=dict[str, Any])\n        except ValueError:\n            stats = {}\n\n        duration = stats.get(\"walltime\", duration)\n        total_run_time = stats.get(\"nodes_walltime\", total_run_time)\n\n        return GraphExecution(\n            id=execution.id,\n            execution_id=execution.id,\n            started_at=start_time,\n            ended_at=end_time,\n            duration=duration,\n            total_run_time=total_run_time,\n            status=ExecutionStatus(execution.executionStatus),\n            graph_id=execution.agentGraphId,\n            graph_version=execution.agentGraphVersion,\n        )"
                                }
                            ]
                        }
                    ],
                    "label": "class GraphExecution(BaseDbModel):\n    execution_id: str\n    started_at: datetime\n    ended_at: datetime\n    duration: float\n    total_run_time: float\n    status: ExecutionStatus\n    graph_id: str\n    graph_version: int\n\n    @staticmethod\n"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "Graph",
            "start_line": 142,
            "end_line": 204,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 70,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 51,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "Graph"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "generic_type",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "children": [],
                                            "label": "BaseDbModel"
                                        }
                                    ],
                                    "label": "(BaseDbModel)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 6,
                                    "end_token": 51,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 7,
                                            "end_token": 11,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "children": [],
                                                    "label": "version"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": "int"
                                                },
                                                {
                                                    "type": "integer",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "children": [],
                                                    "label": "1"
                                                }
                                            ],
                                            "label": "version: int = 1"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 13,
                                            "end_token": 17,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 13,
                                                    "end_token": 13,
                                                    "children": [],
                                                    "label": "is_active"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 15,
                                                    "end_token": 15,
                                                    "children": [],
                                                    "label": "bool"
                                                },
                                                {
                                                    "type": "true",
                                                    "start_token": 17,
                                                    "end_token": 17,
                                                    "children": [],
                                                    "label": "True"
                                                }
                                            ],
                                            "label": "is_active: bool = True"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 19,
                                            "end_token": 23,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 19,
                                                    "end_token": 19,
                                                    "children": [],
                                                    "label": "is_template"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 21,
                                                    "end_token": 21,
                                                    "children": [],
                                                    "label": "bool"
                                                },
                                                {
                                                    "type": "false",
                                                    "start_token": 23,
                                                    "end_token": 23,
                                                    "children": [],
                                                    "label": "False"
                                                }
                                            ],
                                            "label": "is_template: bool = False"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 25,
                                            "end_token": 27,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 25,
                                                    "end_token": 25,
                                                    "children": [],
                                                    "label": "name"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 27,
                                                    "end_token": 27,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "name: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 29,
                                            "end_token": 31,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 29,
                                                    "end_token": 29,
                                                    "children": [],
                                                    "label": "description"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 31,
                                                    "end_token": 31,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "description: str"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 33,
                                            "end_token": 41,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 33,
                                                    "end_token": 33,
                                                    "children": [],
                                                    "label": "nodes"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 35,
                                                    "end_token": 38,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 37,
                                                            "end_token": 37,
                                                            "children": [],
                                                            "label": "Node"
                                                        }
                                                    ],
                                                    "label": "list[Node]"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 40,
                                                    "end_token": 41,
                                                    "children": [],
                                                    "label": "[]"
                                                }
                                            ],
                                            "label": "nodes: list[Node] = []"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 43,
                                            "end_token": 51,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 43,
                                                    "end_token": 43,
                                                    "children": [],
                                                    "label": "links"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 45,
                                                    "end_token": 48,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 47,
                                                            "end_token": 47,
                                                            "children": [],
                                                            "label": "Link"
                                                        }
                                                    ],
                                                    "label": "list[Link]"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 50,
                                                    "end_token": 51,
                                                    "children": [],
                                                    "label": "[]"
                                                }
                                            ],
                                            "label": "links: list[Link] = []"
                                        }
                                    ],
                                    "label": "\n    version: int = 1\n    is_active: bool = True\n    is_template: bool = False\n    name: str\n    description: str\n    nodes: list[Node] = []\n    links: list[Link] = []"
                                }
                            ],
                            "label": "class Graph(BaseDbModel):\n    version: int = 1\n    is_active: bool = True\n    is_template: bool = False\n    name: str\n    description: str\n    nodes: list[Node] = []\n    links: list[Link] = []"
                        },
                        {
                            "type": "decorator",
                            "start_token": 54,
                            "end_token": 56,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 55,
                                    "end_token": 55,
                                    "children": [],
                                    "label": "computed_field"
                                }
                            ],
                            "label": "@computed_field\n"
                        },
                        {
                            "type": "decorator",
                            "start_token": 57,
                            "end_token": 59,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 58,
                                    "end_token": 58,
                                    "children": [],
                                    "label": "property"
                                }
                            ],
                            "label": "@property\n"
                        },
                        {
                            "type": "decorator",
                            "start_token": 61,
                            "end_token": 63,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 62,
                                    "end_token": 62,
                                    "children": [],
                                    "label": "computed_field"
                                }
                            ],
                            "label": "@computed_field\n"
                        },
                        {
                            "type": "decorator",
                            "start_token": 64,
                            "end_token": 66,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 65,
                                    "end_token": 65,
                                    "children": [],
                                    "label": "property"
                                }
                            ],
                            "label": "@property\n"
                        },
                        {
                            "type": "decorator",
                            "start_token": 68,
                            "end_token": 70,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 69,
                                    "end_token": 69,
                                    "children": [],
                                    "label": "staticmethod"
                                }
                            ],
                            "label": "@staticmethod\n"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "input_schema",
                            "start_line": 153,
                            "end_line": 163,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 73,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 72,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "input_schema"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 4,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "self"
                                                        }
                                                    ],
                                                    "label": "(self)"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 5,
                                                    "end_token": 12,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 7,
                                                            "end_token": 12,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "children": [],
                                                                    "label": "Any"
                                                                }
                                                            ],
                                                            "label": "dict[str, Any]"
                                                        }
                                                    ],
                                                    "label": "-> dict[str, Any]"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 14,
                                                    "end_token": 72,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 15,
                                                            "end_token": 72,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 16,
                                                                    "end_token": 72,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 16,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 16,
                                                                                    "end_token": 16,
                                                                                    "children": [],
                                                                                    "label": "self"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 18,
                                                                                    "end_token": 18,
                                                                                    "children": [],
                                                                                    "label": "_generate_schema"
                                                                                }
                                                                            ],
                                                                            "label": "self._generate_schema"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 19,
                                                                            "end_token": 72,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 21,
                                                                                    "end_token": 23,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 21,
                                                                                            "end_token": 21,
                                                                                            "children": [],
                                                                                            "label": "AgentInputBlock"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 23,
                                                                                            "end_token": 23,
                                                                                            "children": [],
                                                                                            "label": "Input"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentInputBlock.Input"
                                                                                },
                                                                                {
                                                                                    "type": "list_comprehension",
                                                                                    "start_token": 26,
                                                                                    "end_token": 69,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 28,
                                                                                            "end_token": 30,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 28,
                                                                                                    "end_token": 28,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 30,
                                                                                                    "end_token": 30,
                                                                                                    "children": [],
                                                                                                    "label": "input_default"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.input_default"
                                                                                        },
                                                                                        {
                                                                                            "type": "for_in_clause",
                                                                                            "start_token": 32,
                                                                                            "end_token": 38,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 33,
                                                                                                    "end_token": 33,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 35,
                                                                                                    "end_token": 37,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 35,
                                                                                                            "end_token": 35,
                                                                                                            "children": [],
                                                                                                            "label": "self"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 37,
                                                                                                            "end_token": 37,
                                                                                                            "children": [],
                                                                                                            "label": "nodes"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "self.nodes"
                                                                                                }
                                                                                            ],
                                                                                            "label": "for node in self.nodes\n"
                                                                                        },
                                                                                        {
                                                                                            "type": "if_statement",
                                                                                            "start_token": 39,
                                                                                            "end_token": 68,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "comparison_operator",
                                                                                                    "start_token": 40,
                                                                                                    "end_token": 50,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "assignment",
                                                                                                            "start_token": 41,
                                                                                                            "end_token": 44,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 41,
                                                                                                                    "end_token": 41,
                                                                                                                    "children": [],
                                                                                                                    "label": "b"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 44,
                                                                                                                    "end_token": 50,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 44,
                                                                                                                            "end_token": 44,
                                                                                                                            "children": [],
                                                                                                                            "label": "get_block"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "start_token": 45,
                                                                                                                            "end_token": 50,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 46,
                                                                                                                                    "end_token": 48,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 46,
                                                                                                                                            "end_token": 46,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "node"
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 48,
                                                                                                                                            "end_token": 48,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "block_id"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "node.block_id"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "(node.block_id))"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "get_block(node.block_id))"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "b := get_block"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "boolean_operator",
                                                                                                            "start_token": 52,
                                                                                                            "end_token": 60,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 53,
                                                                                                                    "end_token": 55,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 53,
                                                                                                                            "end_token": 53,
                                                                                                                            "children": [],
                                                                                                                            "label": "b"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 55,
                                                                                                                            "end_token": 55,
                                                                                                                            "children": [],
                                                                                                                            "label": "block_type"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "b.block_type"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "and b.block_type == BlockType.INPUT"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "boolean_operator",
                                                                                                            "start_token": 62,
                                                                                                            "end_token": 68,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "comparison_operator",
                                                                                                                    "start_token": 64,
                                                                                                                    "end_token": 67,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 64,
                                                                                                                            "end_token": 64,
                                                                                                                            "children": [],
                                                                                                                            "label": "in"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 66,
                                                                                                                            "end_token": 67,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 66,
                                                                                                                                    "end_token": 66,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "."
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 67,
                                                                                                                                    "end_token": 67,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "input_default"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": ".input_default"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "in node.input_default"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "and \"name\" in node.input_default\n"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(b := get_block(node.block_id))"
                                                                                                }
                                                                                            ],
                                                                                            "label": "if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n"
                                                                                        }
                                                                                    ],
                                                                                    "label": "[\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n            ]"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            AgentInputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "self._generate_schema(\n            AgentInputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                                }
                                                            ],
                                                            "label": "return self._generate_schema(\n            AgentInputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                        }
                                                    ],
                                                    "label": "\n        return self._generate_schema(\n            AgentInputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                }
                                            ],
                                            "label": "def input_schema(self) -> dict[str, Any]:\n        return self._generate_schema(\n            AgentInputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                        }
                                    ],
                                    "label": "def input_schema(self) -> dict[str, Any]:\n        return self._generate_schema(\n            AgentInputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.INPUT\n                and \"name\" in node.input_default\n            ],\n        )\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "output_schema",
                            "start_line": 167,
                            "end_line": 177,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 73,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 72,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 0,
                                                    "end_token": 0,
                                                    "label": "def"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "label": "output_schema"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 4,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "label": "self"
                                                        }
                                                    ],
                                                    "label": "(self)"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 6,
                                                    "end_token": 12,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "label": "dict"
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 8,
                                                            "end_token": 12,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Any"
                                                                }
                                                            ],
                                                            "label": "[str, Any]"
                                                        }
                                                    ],
                                                    "label": "> dict[str, Any]"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 14,
                                                    "end_token": 72,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 15,
                                                            "end_token": 72,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 16,
                                                                    "end_token": 72,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 16,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 16,
                                                                                    "end_token": 16,
                                                                                    "label": "self"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 18,
                                                                                    "end_token": 18,
                                                                                    "label": "_generate_schema"
                                                                                }
                                                                            ],
                                                                            "label": "self._generate_schema"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 19,
                                                                            "end_token": 72,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 21,
                                                                                    "end_token": 23,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 21,
                                                                                            "end_token": 21,
                                                                                            "label": "AgentOutputBlock"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 23,
                                                                                            "end_token": 23,
                                                                                            "label": "Input"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentOutputBlock.Input"
                                                                                },
                                                                                {
                                                                                    "type": "list_comprehension",
                                                                                    "start_token": 26,
                                                                                    "end_token": 69,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 28,
                                                                                            "end_token": 30,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 28,
                                                                                                    "end_token": 28,
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 30,
                                                                                                    "end_token": 30,
                                                                                                    "label": "input_default"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.input_default"
                                                                                        },
                                                                                        {
                                                                                            "type": "for_in_clause",
                                                                                            "start_token": 32,
                                                                                            "end_token": 38,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 33,
                                                                                                    "end_token": 33,
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 35,
                                                                                                    "end_token": 35,
                                                                                                    "label": "self"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 36,
                                                                                                    "end_token": 37,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 36,
                                                                                                            "end_token": 36,
                                                                                                            "label": "."
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 37,
                                                                                                            "end_token": 37,
                                                                                                            "label": "nodes"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ".nodes"
                                                                                                }
                                                                                            ],
                                                                                            "label": "for node in self.nodes\n"
                                                                                        },
                                                                                        {
                                                                                            "type": "conditional_expression",
                                                                                            "start_token": 39,
                                                                                            "end_token": 62,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "boolean_operator",
                                                                                                    "start_token": 40,
                                                                                                    "end_token": 61,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "named_expression",
                                                                                                            "start_token": 41,
                                                                                                            "end_token": 50,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 41,
                                                                                                                    "end_token": 41,
                                                                                                                    "label": "b"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 44,
                                                                                                                    "end_token": 49,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 44,
                                                                                                                            "end_token": 44,
                                                                                                                            "label": "get_block"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 46,
                                                                                                                            "end_token": 48,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 46,
                                                                                                                                    "end_token": 46,
                                                                                                                                    "label": "node"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 48,
                                                                                                                                    "end_token": 48,
                                                                                                                                    "label": "block_id"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "node.block_id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "get_block(node.block_id)"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "b := get_block(node.block_id))"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "comparison_operator",
                                                                                                            "start_token": 52,
                                                                                                            "end_token": 60,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 52,
                                                                                                                    "end_token": 52,
                                                                                                                    "label": "and"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 55,
                                                                                                                    "end_token": 60,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 55,
                                                                                                                            "end_token": 55,
                                                                                                                            "label": "block_type"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 59,
                                                                                                                            "end_token": 60,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 59,
                                                                                                                                    "end_token": 59,
                                                                                                                                    "label": "."
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 60,
                                                                                                                                    "end_token": 60,
                                                                                                                                    "label": "OUTPUT"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": ".OUTPUT"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "block_type == BlockType.OUTPUT"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "and b.block_type == BlockType.OUTPUT"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n"
                                                                                                },
                                                                                                {
                                                                                                    "type": "boolean_operator",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 62,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "comparison_operator",
                                                                                                            "start_token": 63,
                                                                                                            "end_token": 67,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 63,
                                                                                                                    "end_token": 63,
                                                                                                                    "label": "\"name\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 65,
                                                                                                                    "end_token": 67,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 65,
                                                                                                                            "end_token": 65,
                                                                                                                            "label": "node"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 67,
                                                                                                                            "end_token": 67,
                                                                                                                            "label": "input_default"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "node.input_default"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"name\" in node.input_default"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "and"
                                                                                                }
                                                                                            ],
                                                                                            "label": "if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and"
                                                                                        }
                                                                                    ],
                                                                                    "label": "[\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and \"name\" in node.input_default\n            ]"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            AgentOutputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "self._generate_schema(\n            AgentOutputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                                }
                                                            ],
                                                            "label": "return self._generate_schema(\n            AgentOutputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                        }
                                                    ],
                                                    "label": "\n        return self._generate_schema(\n            AgentOutputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                                }
                                            ],
                                            "label": "def output_schema(self) -> dict[str, Any]:\n        return self._generate_schema(\n            AgentOutputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and \"name\" in node.input_default\n            ],\n        )"
                                        }
                                    ],
                                    "label": "def output_schema(self) -> dict[str, Any]:\n        return self._generate_schema(\n            AgentOutputBlock.Input,\n            [\n                node.input_default\n                for node in self.nodes\n                if (b := get_block(node.block_id))\n                and b.block_type == BlockType.OUTPUT\n                and \"name\" in node.input_default\n            ],\n        )\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "_generate_schema",
                            "start_line": 180,
                            "end_line": 204,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 197,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 196,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "_generate_schema"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 29,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 4,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 4,
                                                                    "end_token": 4,
                                                                    "children": [],
                                                                    "label": "type_class"
                                                                },
                                                                {
                                                                    "type": "union_type",
                                                                    "start_token": 6,
                                                                    "end_token": 18,
                                                                    "children": [
                                                                        {
                                                                            "type": "generic_type",
                                                                            "start_token": 6,
                                                                            "end_token": 11,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 8,
                                                                                    "end_token": 10,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 8,
                                                                                            "end_token": 8,
                                                                                            "children": [],
                                                                                            "label": "AgentInputBlock"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 10,
                                                                                            "end_token": 10,
                                                                                            "children": [],
                                                                                            "label": "Input"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentInputBlock.Input"
                                                                                }
                                                                            ],
                                                                            "label": "Type[AgentInputBlock.Input]"
                                                                        },
                                                                        {
                                                                            "type": "generic_type",
                                                                            "start_token": 13,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 15,
                                                                                    "end_token": 17,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 15,
                                                                                            "end_token": 15,
                                                                                            "children": [],
                                                                                            "label": "AgentOutputBlock"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "children": [],
                                                                                            "label": "Input"
                                                                                        }
                                                                                    ],
                                                                                    "label": "AgentOutputBlock.Input"
                                                                                }
                                                                            ],
                                                                            "label": "Type[AgentOutputBlock.Input]"
                                                                        }
                                                                    ],
                                                                    "label": "Type[AgentInputBlock.Input] | Type[AgentOutputBlock.Input]"
                                                                }
                                                            ],
                                                            "label": "type_class: Type[AgentInputBlock.Input] | Type[AgentOutputBlock.Input],"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 21,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 21,
                                                                    "end_token": 21,
                                                                    "children": [],
                                                                    "label": "data"
                                                                },
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 23,
                                                                    "end_token": 26,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 25,
                                                                            "end_token": 25,
                                                                            "children": [],
                                                                            "label": "dict"
                                                                        }
                                                                    ],
                                                                    "label": "list[dict]"
                                                                }
                                                            ],
                                                            "label": "data: list[dict],"
                                                        }
                                                    ],
                                                    "label": "(\n        type_class: Type[AgentInputBlock.Input] | Type[AgentOutputBlock.Input],\n        data: list[dict],\n    )"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 32,
                                                    "end_token": 37,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 32,
                                                            "end_token": 32,
                                                            "children": [],
                                                            "label": "dict"
                                                        }
                                                    ],
                                                    "label": "dict[str, Any]"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 38,
                                                    "end_token": 196,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 40,
                                                            "end_token": 43,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 40,
                                                                    "end_token": 40,
                                                                    "children": [],
                                                                    "label": "props"
                                                                }
                                                            ],
                                                            "label": "props = []"
                                                        },
                                                        {
                                                            "type": "for_statement",
                                                            "start_token": 45,
                                                            "end_token": 78,
                                                            "children": [
                                                                {
                                                                    "type": "for_in_clause",
                                                                    "start_token": 45,
                                                                    "end_token": 48,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 46,
                                                                            "end_token": 46,
                                                                            "children": [],
                                                                            "label": "p"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 48,
                                                                            "end_token": 48,
                                                                            "children": [],
                                                                            "label": "data"
                                                                        }
                                                                    ],
                                                                    "label": "for p in data"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 50,
                                                                    "end_token": 78,
                                                                    "children": [
                                                                        {
                                                                            "type": "try_statement",
                                                                            "start_token": 51,
                                                                            "end_token": 78,
                                                                            "children": [
                                                                                {
                                                                                    "type": "block",
                                                                                    "start_token": 53,
                                                                                    "end_token": 64,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 54,
                                                                                            "end_token": 64,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 54,
                                                                                                    "end_token": 56,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 54,
                                                                                                            "end_token": 54,
                                                                                                            "children": [],
                                                                                                            "label": "props"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 56,
                                                                                                            "end_token": 56,
                                                                                                            "children": [],
                                                                                                            "label": "append"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "props.append"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 57,
                                                                                                    "end_token": 64,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 58,
                                                                                                            "end_token": 63,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 58,
                                                                                                                    "end_token": 58,
                                                                                                                    "children": [],
                                                                                                                    "label": "type_class"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "start_token": 59,
                                                                                                                    "end_token": 63,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "dictionary_splat",
                                                                                                                            "start_token": 60,
                                                                                                                            "end_token": 62,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 62,
                                                                                                                                    "end_token": 62,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "p"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "**p"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "(**p)"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "type_class(**p)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(type_class(**p))"
                                                                                                }
                                                                                            ],
                                                                                            "label": "props.append(type_class(**p))"
                                                                                        }
                                                                                    ],
                                                                                    "label": "\n                props.append(type_class(**p))"
                                                                                },
                                                                                {
                                                                                    "type": "except_clause",
                                                                                    "start_token": 66,
                                                                                    "end_token": 78,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 67,
                                                                                            "end_token": 67,
                                                                                            "children": [],
                                                                                            "label": "Exception"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 69,
                                                                                            "end_token": 69,
                                                                                            "children": [],
                                                                                            "label": "e"
                                                                                        },
                                                                                        {
                                                                                            "type": "block",
                                                                                            "start_token": 70,
                                                                                            "end_token": 78,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 78,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 72,
                                                                                                            "end_token": 74,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 72,
                                                                                                                    "end_token": 72,
                                                                                                                    "children": [],
                                                                                                                    "label": "logger"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 74,
                                                                                                                    "end_token": 74,
                                                                                                                    "children": [],
                                                                                                                    "label": "warning"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "logger.warning"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 75,
                                                                                                            "end_token": 78,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 76,
                                                                                                                    "end_token": 77,
                                                                                                                    "children": [],
                                                                                                                    "label": "f\"Invalid {type_class}: {p}, {e}\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "(f\"Invalid {type_class}: {p}, {e}\")"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "logger.warning(f\"Invalid {type_class}: {p}, {e}\")"
                                                                                                }
                                                                                            ],
                                                                                            "label": ":\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "except Exception as e:\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")"
                                                                                }
                                                                            ],
                                                                            "label": "try:\n                props.append(type_class(**p))\n            except Exception as e:\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")"
                                                                        }
                                                                    ],
                                                                    "label": "\n            try:\n                props.append(type_class(**p))\n            except Exception as e:\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")"
                                                                }
                                                            ],
                                                            "label": "for p in data:\n            try:\n                props.append(type_class(**p))\n            except Exception as e:\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 81,
                                                            "end_token": 196,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 82,
                                                                    "end_token": 196,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 84,
                                                                            "end_token": 87,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 84,
                                                                                    "end_token": 84,
                                                                                    "children": [],
                                                                                    "label": "\"type\""
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 86,
                                                                                    "end_token": 86,
                                                                                    "children": [],
                                                                                    "label": "\"object\""
                                                                                }
                                                                            ],
                                                                            "label": "\"type\": \"object\","
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 89,
                                                                            "end_token": 174,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 89,
                                                                                    "end_token": 89,
                                                                                    "children": [],
                                                                                    "label": "\"properties\""
                                                                                },
                                                                                {
                                                                                    "type": "dictionary_comprehension",
                                                                                    "start_token": 91,
                                                                                    "end_token": 174,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 93,
                                                                                            "end_token": 167,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 93,
                                                                                                    "end_token": 95,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 93,
                                                                                                            "end_token": 93,
                                                                                                            "children": [],
                                                                                                            "label": "p"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 95,
                                                                                                            "end_token": 95,
                                                                                                            "children": [],
                                                                                                            "label": "name"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "p.name"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 97,
                                                                                                    "end_token": 167,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 99,
                                                                                                            "end_token": 104,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 99,
                                                                                                                    "end_token": 99,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"secret\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 101,
                                                                                                                    "end_token": 103,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 101,
                                                                                                                            "end_token": 101,
                                                                                                                            "children": [],
                                                                                                                            "label": "p"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 103,
                                                                                                                            "end_token": 103,
                                                                                                                            "children": [],
                                                                                                                            "label": "secret"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "p.secret"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"secret\": p.secret,"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 106,
                                                                                                            "end_token": 111,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 106,
                                                                                                                    "end_token": 106,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"advanced\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 108,
                                                                                                                    "end_token": 110,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 108,
                                                                                                                            "end_token": 108,
                                                                                                                            "children": [],
                                                                                                                            "label": "p"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 110,
                                                                                                                            "end_token": 110,
                                                                                                                            "children": [],
                                                                                                                            "label": "advanced"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "p.advanced"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"advanced\": p.advanced,"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 113,
                                                                                                            "end_token": 122,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 113,
                                                                                                                    "end_token": 113,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"title\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "conditional_expression",
                                                                                                                    "start_token": 115,
                                                                                                                    "end_token": 121,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 115,
                                                                                                                            "end_token": 117,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 115,
                                                                                                                                    "end_token": 115,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "p"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 117,
                                                                                                                                    "end_token": 117,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "title"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "p.title"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 119,
                                                                                                                            "end_token": 121,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 119,
                                                                                                                                    "end_token": 119,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "p"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 121,
                                                                                                                                    "end_token": 121,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "name"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "p.name"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "p.title or p.name"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"title\": p.title or p.name,"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "dictionary_splat",
                                                                                                            "start_token": 124,
                                                                                                            "end_token": 141,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "conditional_expression",
                                                                                                                    "start_token": 127,
                                                                                                                    "end_token": 140,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "pair",
                                                                                                                            "start_token": 128,
                                                                                                                            "end_token": 132,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "string",
                                                                                                                                    "start_token": 128,
                                                                                                                                    "end_token": 128,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "\"description\""
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 130,
                                                                                                                                    "end_token": 132,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 130,
                                                                                                                                            "end_token": 130,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "p"
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 132,
                                                                                                                                            "end_token": 132,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "description"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "p.description"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "\"description\": p.description"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "none",
                                                                                                                            "start_token": 139,
                                                                                                                            "end_token": 140,
                                                                                                                            "children": [],
                                                                                                                            "label": "{}"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "{\"description\": p.description} if p.description else {}"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "**({\"description\": p.description} if p.description else {})"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "dictionary_splat",
                                                                                                            "start_token": 144,
                                                                                                            "end_token": 164,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "conditional_expression",
                                                                                                                    "start_token": 147,
                                                                                                                    "end_token": 163,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "pair",
                                                                                                                            "start_token": 148,
                                                                                                                            "end_token": 152,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "string",
                                                                                                                                    "start_token": 148,
                                                                                                                                    "end_token": 148,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "\"default\""
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 150,
                                                                                                                                    "end_token": 152,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 150,
                                                                                                                                            "end_token": 150,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "p"
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 152,
                                                                                                                                            "end_token": 152,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "value"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "p.value"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "\"default\": p.value"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "none",
                                                                                                                            "start_token": 162,
                                                                                                                            "end_token": 163,
                                                                                                                            "children": [],
                                                                                                                            "label": "{}"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "{\"default\": p.value} if p.value is not None else {}"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "**({\"default\": p.value} if p.value is not None else {})"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }"
                                                                                                }
                                                                                            ],
                                                                                            "label": "p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }"
                                                                                        },
                                                                                        {
                                                                                            "type": "for_in_clause",
                                                                                            "start_token": 169,
                                                                                            "end_token": 172,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 170,
                                                                                                    "end_token": 170,
                                                                                                    "children": [],
                                                                                                    "label": "p"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 172,
                                                                                                    "end_token": 172,
                                                                                                    "children": [],
                                                                                                    "label": "props"
                                                                                                }
                                                                                            ],
                                                                                            "label": "for p in props"
                                                                                        }
                                                                                    ],
                                                                                    "label": "{\n                p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }\n                for p in props\n            }"
                                                                                }
                                                                            ],
                                                                            "label": "\"properties\": {\n                p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }\n                for p in props\n            }"
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 177,
                                                                            "end_token": 193,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 177,
                                                                                    "end_token": 177,
                                                                                    "children": [],
                                                                                    "label": "\"required\""
                                                                                },
                                                                                {
                                                                                    "type": "list_comprehension",
                                                                                    "start_token": 179,
                                                                                    "end_token": 193,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 180,
                                                                                            "end_token": 182,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 180,
                                                                                                    "end_token": 180,
                                                                                                    "children": [],
                                                                                                    "label": "p"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 182,
                                                                                                    "end_token": 182,
                                                                                                    "children": [],
                                                                                                    "label": "name"
                                                                                                }
                                                                                            ],
                                                                                            "label": "p.name"
                                                                                        },
                                                                                        {
                                                                                            "type": "for_in_clause",
                                                                                            "start_token": 183,
                                                                                            "end_token": 186,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 184,
                                                                                                    "end_token": 184,
                                                                                                    "children": [],
                                                                                                    "label": "p"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 186,
                                                                                                    "end_token": 186,
                                                                                                    "children": [],
                                                                                                    "label": "props"
                                                                                                }
                                                                                            ],
                                                                                            "label": "for p in props"
                                                                                        },
                                                                                        {
                                                                                            "type": "comparison_operator",
                                                                                            "start_token": 187,
                                                                                            "end_token": 192,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 188,
                                                                                                    "end_token": 190,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 188,
                                                                                                            "end_token": 188,
                                                                                                            "children": [],
                                                                                                            "label": "p"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 190,
                                                                                                            "end_token": 190,
                                                                                                            "children": [],
                                                                                                            "label": "value"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "p.value"
                                                                                                },
                                                                                                {
                                                                                                    "type": "none",
                                                                                                    "start_token": 192,
                                                                                                    "end_token": 192,
                                                                                                    "children": [],
                                                                                                    "label": "None"
                                                                                                }
                                                                                            ],
                                                                                            "label": "if p.value is None"
                                                                                        }
                                                                                    ],
                                                                                    "label": "[p.name for p in props if p.value is None]"
                                                                                }
                                                                            ],
                                                                            "label": "\"required\": [p.name for p in props if p.value is None]"
                                                                        }
                                                                    ],
                                                                    "label": "{\n            \"type\": \"object\",\n            \"properties\": {\n                p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }\n                for p in props\n            },\n            \"required\": [p.name for p in props if p.value is None],\n        }"
                                                                }
                                                            ],
                                                            "label": "return {\n            \"type\": \"object\",\n            \"properties\": {\n                p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }\n                for p in props\n            },\n            \"required\": [p.name for p in props if p.value is None],\n        }"
                                                        }
                                                    ],
                                                    "label": ":\n        props = []\n        for p in data:\n            try:\n                props.append(type_class(**p))\n            except Exception as e:\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")\n\n        return {\n            \"type\": \"object\",\n            \"properties\": {\n                p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }\n                for p in props\n            },\n            \"required\": [p.name for p in props if p.value is None],\n        }"
                                                }
                                            ],
                                            "label": "def _generate_schema(\n        type_class: Type[AgentInputBlock.Input] | Type[AgentOutputBlock.Input],\n        data: list[dict],\n    ) -> dict[str, Any]:\n        props = []\n        for p in data:\n            try:\n                props.append(type_class(**p))\n            except Exception as e:\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")\n\n        return {\n            \"type\": \"object\",\n            \"properties\": {\n                p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }\n                for p in props\n            },\n            \"required\": [p.name for p in props if p.value is None],\n        }"
                                        }
                                    ],
                                    "label": "def _generate_schema(\n        type_class: Type[AgentInputBlock.Input] | Type[AgentOutputBlock.Input],\n        data: list[dict],\n    ) -> dict[str, Any]:\n        props = []\n        for p in data:\n            try:\n                props.append(type_class(**p))\n            except Exception as e:\n                logger.warning(f\"Invalid {type_class}: {p}, {e}\")\n\n        return {\n            \"type\": \"object\",\n            \"properties\": {\n                p.name: {\n                    \"secret\": p.secret,\n                    \"advanced\": p.advanced,\n                    \"title\": p.title or p.name,\n                    **({\"description\": p.description} if p.description else {}),\n                    **({\"default\": p.value} if p.value is not None else {}),\n                }\n                for p in props\n            },\n            \"required\": [p.name for p in props if p.value is None],\n        }\n"
                                }
                            ]
                        }
                    ],
                    "label": "class Graph(BaseDbModel):\n    version: int = 1\n    is_active: bool = True\n    is_template: bool = False\n    name: str\n    description: str\n    nodes: list[Node] = []\n    links: list[Link] = []\n\n    @computed_field\n    @property\n\n    @computed_field\n    @property\n\n    @staticmethod\n"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "GraphModel",
            "start_line": 207,
            "end_line": 391,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 29,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 24,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "GraphModel"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "children": [],
                                            "label": "Graph"
                                        }
                                    ],
                                    "label": "(Graph)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 6,
                                    "end_token": 24,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 8,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": ": str"
                                                }
                                            ],
                                            "label": "user_id: str"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 11,
                                            "end_token": 19,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "children": [],
                                                    "label": "nodes"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 12,
                                                    "end_token": 16,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 13,
                                                            "end_token": 13,
                                                            "children": [],
                                                            "label": "list"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 15,
                                                            "end_token": 15,
                                                            "children": [],
                                                            "label": "NodeModel"
                                                        }
                                                    ],
                                                    "label": ": list[NodeModel]"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 18,
                                                    "end_token": 19,
                                                    "children": [],
                                                    "label": "[]"
                                                }
                                            ],
                                            "label": "nodes: list[NodeModel] = []"
                                        },
                                        {
                                            "type": "comment",
                                            "start_token": 20,
                                            "end_token": 23,
                                            "children": [],
                                            "label": "# type: ignore"
                                        }
                                    ],
                                    "label": "\n    user_id: str\n    nodes: list[NodeModel] = []  # type: ignore\n"
                                }
                            ],
                            "label": "class GraphModel(Graph):\n    user_id: str\n    nodes: list[NodeModel] = []  # type: ignore\n"
                        },
                        {
                            "type": "decorator",
                            "start_token": 26,
                            "end_token": 27,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 27,
                                    "end_token": 27,
                                    "children": [],
                                    "label": "property"
                                }
                            ],
                            "label": "@property"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "starting_nodes",
                            "start_line": 212,
                            "end_line": 223,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 92,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 92,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 0,
                                                    "end_token": 0,
                                                    "label": "def"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 4,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "label": "self"
                                                        }
                                                    ],
                                                    "label": "(self)"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 6,
                                                    "end_token": 10,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "label": "list"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "label": "Node"
                                                        }
                                                    ],
                                                    "label": "> list[Node]"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 12,
                                                    "end_token": 92,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 13,
                                                            "end_token": 25,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 13,
                                                                    "end_token": 13,
                                                                    "label": "outbound_nodes"
                                                                },
                                                                {
                                                                    "type": "dictionary_comprehension",
                                                                    "start_token": 15,
                                                                    "end_token": 25,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 16,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 16,
                                                                                    "end_token": 16,
                                                                                    "label": "link"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 18,
                                                                                    "end_token": 18,
                                                                                    "label": "sink_id"
                                                                                }
                                                                            ],
                                                                            "label": "link.sink_id"
                                                                        },
                                                                        {
                                                                            "type": "for_in_clause",
                                                                            "start_token": 19,
                                                                            "end_token": 24,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 20,
                                                                                    "end_token": 20,
                                                                                    "label": "link"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 22,
                                                                                    "end_token": 24,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 22,
                                                                                            "end_token": 22,
                                                                                            "label": "self"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 24,
                                                                                            "end_token": 24,
                                                                                            "label": "links"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.links"
                                                                                }
                                                                            ],
                                                                            "label": "for link in self.links"
                                                                        }
                                                                    ],
                                                                    "label": "{link.sink_id for link in self.links}"
                                                                }
                                                            ],
                                                            "label": "outbound_nodes = {link.sink_id for link in self.links}"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 27,
                                                            "end_token": 64,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 27,
                                                                    "end_token": 27,
                                                                    "label": "input_nodes"
                                                                },
                                                                {
                                                                    "type": "dictionary_comprehension",
                                                                    "start_token": 29,
                                                                    "end_token": 64,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 31,
                                                                            "end_token": 33,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 31,
                                                                                    "end_token": 31,
                                                                                    "label": "v"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 33,
                                                                                    "end_token": 33,
                                                                                    "label": "id"
                                                                                }
                                                                            ],
                                                                            "label": "v.id"
                                                                        },
                                                                        {
                                                                            "type": "for_in_clause",
                                                                            "start_token": 35,
                                                                            "end_token": 41,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 36,
                                                                                    "end_token": 36,
                                                                                    "label": "v"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 38,
                                                                                    "end_token": 40,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 38,
                                                                                            "end_token": 38,
                                                                                            "label": "self"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 40,
                                                                                            "end_token": 40,
                                                                                            "label": "nodes"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.nodes"
                                                                                }
                                                                            ],
                                                                            "label": "for v in self.nodes\n"
                                                                        },
                                                                        {
                                                                            "type": "conditional_expression",
                                                                            "start_token": 42,
                                                                            "end_token": 62,
                                                                            "children": [
                                                                                {
                                                                                    "type": "named_expression",
                                                                                    "start_token": 44,
                                                                                    "end_token": 52,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 44,
                                                                                            "end_token": 44,
                                                                                            "label": "b"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 47,
                                                                                            "end_token": 52,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 47,
                                                                                                    "end_token": 47,
                                                                                                    "label": "get_block"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 48,
                                                                                                    "end_token": 50,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 49,
                                                                                                            "end_token": 51,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 49,
                                                                                                                    "end_token": 49,
                                                                                                                    "label": "v"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 51,
                                                                                                                    "end_token": 51,
                                                                                                                    "label": "block_id"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "v.block_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(v."
                                                                                                }
                                                                                            ],
                                                                                            "label": "get_block(v.block_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "b := get_block(v.block_id)"
                                                                                },
                                                                                {
                                                                                    "type": "boolean_operator",
                                                                                    "start_token": 54,
                                                                                    "end_token": 62,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "comparison_operator",
                                                                                            "start_token": 55,
                                                                                            "end_token": 62,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 55,
                                                                                                    "end_token": 57,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 55,
                                                                                                            "end_token": 55,
                                                                                                            "label": "b"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 57,
                                                                                                            "end_token": 57,
                                                                                                            "label": "block_type"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "b.block_type"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 60,
                                                                                                    "end_token": 62,
                                                                                                    "label": "BlockType.INPUT"
                                                                                                }
                                                                                            ],
                                                                                            "label": "b.block_type == BlockType.INPUT"
                                                                                        }
                                                                                    ],
                                                                                    "label": "and b.block_type == BlockType.INPUT"
                                                                                }
                                                                            ],
                                                                            "label": "if (b := get_block(v.block_id)) and b.block_type == BlockType.INPUT"
                                                                        }
                                                                    ],
                                                                    "label": "{\n            v.id\n            for v in self.nodes\n            if (b := get_block(v.block_id)) and b.block_type == BlockType.INPUT\n        }"
                                                                }
                                                            ],
                                                            "label": "input_nodes = {\n            v.id\n            for v in self.nodes\n            if (b := get_block(v.block_id)) and b.block_type == BlockType.INPUT\n        }"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 66,
                                                            "end_token": 92,
                                                            "children": [
                                                                {
                                                                    "type": "list_comprehension",
                                                                    "start_token": 67,
                                                                    "end_token": 92,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 69,
                                                                            "end_token": 69,
                                                                            "label": "node"
                                                                        },
                                                                        {
                                                                            "type": "for_in_clause",
                                                                            "start_token": 71,
                                                                            "end_token": 76,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 72,
                                                                                    "end_token": 72,
                                                                                    "label": "node"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 74,
                                                                                    "end_token": 76,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 74,
                                                                                            "end_token": 74,
                                                                                            "label": "self"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 76,
                                                                                            "end_token": 76,
                                                                                            "label": "nodes"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.nodes"
                                                                                }
                                                                            ],
                                                                            "label": "for node in self.nodes"
                                                                        },
                                                                        {
                                                                            "type": "boolean_operator",
                                                                            "start_token": 78,
                                                                            "end_token": 90,
                                                                            "children": [
                                                                                {
                                                                                    "type": "not_operator",
                                                                                    "start_token": 78,
                                                                                    "end_token": 84,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 79,
                                                                                            "end_token": 81,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 79,
                                                                                                    "end_token": 79,
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 81,
                                                                                                    "end_token": 81,
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.id"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 83,
                                                                                            "end_token": 84,
                                                                                            "label": "in outbound_nodes"
                                                                                        }
                                                                                    ],
                                                                                    "label": "if node.id not in outbound_nodes"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 86,
                                                                                    "end_token": 90,
                                                                                    "label": "node.id in input_nodes"
                                                                                }
                                                                            ],
                                                                            "label": "if node.id not in outbound_nodes or node.id in input_nodes"
                                                                        }
                                                                    ],
                                                                    "label": "[\n            node\n            for node in self.nodes\n            if node.id not in outbound_nodes or node.id in input_nodes\n        ]"
                                                                }
                                                            ],
                                                            "label": "return [\n            node\n            for node in self.nodes\n            if node.id not in outbound_nodes or node.id in input_nodes\n        ]"
                                                        }
                                                    ],
                                                    "label": "\n        outbound_nodes = {link.sink_id for link in self.links}\n        input_nodes = {\n            v.id\n            for v in self.nodes\n            if (b := get_block(v.block_id)) and b.block_type == BlockType.INPUT\n        }\n        return [\n            node\n            for node in self.nodes\n            if node.id not in outbound_nodes or node.id in input_nodes\n        ]"
                                                }
                                            ],
                                            "label": "def starting_nodes(self) -> list[Node]:\n        outbound_nodes = {link.sink_id for link in self.links}\n        input_nodes = {\n            v.id\n            for v in self.nodes\n            if (b := get_block(v.block_id)) and b.block_type == BlockType.INPUT\n        }\n        return [\n            node\n            for node in self.nodes\n            if node.id not in outbound_nodes or node.id in input_nodes\n        ]"
                                        }
                                    ],
                                    "label": "def starting_nodes(self) -> list[Node]:\n        outbound_nodes = {link.sink_id for link in self.links}\n        input_nodes = {\n            v.id\n            for v in self.nodes\n            if (b := get_block(v.block_id)) and b.block_type == BlockType.INPUT\n        }\n        return [\n            node\n            for node in self.nodes\n            if node.id not in outbound_nodes or node.id in input_nodes\n        ]"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "reassign_ids",
                            "start_line": 225,
                            "end_line": 252,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 187,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 186,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "reassign_ids"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 14,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "self"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 5,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "user_id"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "user_id: str"
                                                        },
                                                        {
                                                            "type": "typed_default_parameter",
                                                            "start_token": 9,
                                                            "end_token": 13,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "reassign_graph_id"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "children": [],
                                                                    "label": "bool"
                                                                },
                                                                {
                                                                    "type": "false",
                                                                    "start_token": 13,
                                                                    "end_token": 13,
                                                                    "children": [],
                                                                    "label": "False"
                                                                }
                                                            ],
                                                            "label": "reassign_graph_id: bool = False"
                                                        }
                                                    ],
                                                    "label": "(self, user_id: str, reassign_graph_id: bool = False)"
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 17,
                                                    "end_token": 19,
                                                    "children": [],
                                                    "label": "\"\"\"\n        Reassigns all IDs in the graph to new UUIDs.\n        This method can be used before storing a new graph to the database.\n        \"\"\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 22,
                                                    "end_token": 186,
                                                    "children": [
                                                        {
                                                            "type": "comment",
                                                            "start_token": 22,
                                                            "end_token": 26,
                                                            "children": [],
                                                            "label": "# Reassign Graph ID\n"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 27,
                                                            "end_token": 48,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 27,
                                                                    "end_token": 27,
                                                                    "children": [],
                                                                    "label": "id_map"
                                                                },
                                                                {
                                                                    "type": "dictionary_comprehension",
                                                                    "start_token": 29,
                                                                    "end_token": 48,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 30,
                                                                            "end_token": 41,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 30,
                                                                                    "end_token": 32,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 30,
                                                                                            "end_token": 30,
                                                                                            "children": [],
                                                                                            "label": "node"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 32,
                                                                                            "end_token": 32,
                                                                                            "children": [],
                                                                                            "label": "id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "node.id"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 34,
                                                                                    "end_token": 41,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 36,
                                                                                            "end_token": 38,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 36,
                                                                                                    "end_token": 36,
                                                                                                    "children": [],
                                                                                                    "label": "uuid"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 38,
                                                                                                    "end_token": 38,
                                                                                                    "children": [],
                                                                                                    "label": "uuid4"
                                                                                                }
                                                                                            ],
                                                                                            "label": "uuid.uuid4"
                                                                                        }
                                                                                    ],
                                                                                    "label": "str(uuid.uuid4())"
                                                                                }
                                                                            ],
                                                                            "label": "node.id: str(uuid.uuid4())"
                                                                        },
                                                                        {
                                                                            "type": "for_in_clause",
                                                                            "start_token": 42,
                                                                            "end_token": 48,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 43,
                                                                                    "end_token": 43,
                                                                                    "children": [],
                                                                                    "label": "node"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 45,
                                                                                    "end_token": 47,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 45,
                                                                                            "end_token": 45,
                                                                                            "children": [],
                                                                                            "label": "self"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 47,
                                                                                            "end_token": 47,
                                                                                            "children": [],
                                                                                            "label": "nodes"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.nodes"
                                                                                }
                                                                            ],
                                                                            "label": "for node in self.nodes}"
                                                                        }
                                                                    ],
                                                                    "label": "{node.id: str(uuid.uuid4()) for node in self.nodes}"
                                                                }
                                                            ],
                                                            "label": "id_map = {node.id: str(uuid.uuid4()) for node in self.nodes}"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 50,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 51,
                                                                    "end_token": 51,
                                                                    "children": [],
                                                                    "label": "reassign_graph_id"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 52,
                                                                    "end_token": 65,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 54,
                                                                            "end_token": 65,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 54,
                                                                                    "end_token": 56,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 54,
                                                                                            "end_token": 54,
                                                                                            "children": [],
                                                                                            "label": "self"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 56,
                                                                                            "end_token": 56,
                                                                                            "children": [],
                                                                                            "label": "id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.id"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 58,
                                                                                    "end_token": 65,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 60,
                                                                                            "end_token": 62,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 60,
                                                                                                    "end_token": 60,
                                                                                                    "children": [],
                                                                                                    "label": "uuid"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 62,
                                                                                                    "children": [],
                                                                                                    "label": "uuid4"
                                                                                                }
                                                                                            ],
                                                                                            "label": "uuid.uuid4"
                                                                                        }
                                                                                    ],
                                                                                    "label": "str(uuid.uuid4())"
                                                                                }
                                                                            ],
                                                                            "label": "self.id = str(uuid.uuid4())"
                                                                        }
                                                                    ],
                                                                    "label": ":\n            self.id = str(uuid.uuid4())"
                                                                }
                                                            ],
                                                            "label": "if reassign_graph_id:\n            self.id = str(uuid.uuid4())"
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "start_token": 68,
                                                            "end_token": 72,
                                                            "children": [],
                                                            "label": "# Reassign Node IDs\n"
                                                        },
                                                        {
                                                            "type": "for_statement",
                                                            "start_token": 73,
                                                            "end_token": 91,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 74,
                                                                    "end_token": 74,
                                                                    "children": [],
                                                                    "label": "node"
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 76,
                                                                    "end_token": 78,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 76,
                                                                            "end_token": 76,
                                                                            "children": [],
                                                                            "label": "self"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 78,
                                                                            "end_token": 78,
                                                                            "children": [],
                                                                            "label": "nodes"
                                                                        }
                                                                    ],
                                                                    "label": "self.nodes"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 79,
                                                                    "end_token": 91,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 81,
                                                                            "end_token": 90,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 81,
                                                                                    "end_token": 83,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 81,
                                                                                            "end_token": 81,
                                                                                            "children": [],
                                                                                            "label": "node"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 83,
                                                                                            "end_token": 83,
                                                                                            "children": [],
                                                                                            "label": "id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "node.id"
                                                                                },
                                                                                {
                                                                                    "type": "subscript",
                                                                                    "start_token": 85,
                                                                                    "end_token": 90,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 85,
                                                                                            "end_token": 85,
                                                                                            "children": [],
                                                                                            "label": "id_map"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 87,
                                                                                            "end_token": 89,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 87,
                                                                                                    "end_token": 87,
                                                                                                    "children": [],
                                                                                                    "label": "node"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 89,
                                                                                                    "end_token": 89,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "id_map[node.id]"
                                                                                }
                                                                            ],
                                                                            "label": "node.id = id_map[node.id]"
                                                                        }
                                                                    ],
                                                                    "label": ":\n            node.id = id_map[node.id]\n"
                                                                }
                                                            ],
                                                            "label": "for node in self.nodes:\n            node.id = id_map[node.id]\n"
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "start_token": 93,
                                                            "end_token": 97,
                                                            "children": [],
                                                            "label": "# Reassign Link IDs\n"
                                                        },
                                                        {
                                                            "type": "for_statement",
                                                            "start_token": 98,
                                                            "end_token": 126,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 99,
                                                                    "end_token": 99,
                                                                    "children": [],
                                                                    "label": "link"
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 101,
                                                                    "end_token": 103,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 101,
                                                                            "end_token": 101,
                                                                            "children": [],
                                                                            "label": "self"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 103,
                                                                            "end_token": 103,
                                                                            "children": [],
                                                                            "label": "links"
                                                                        }
                                                                    ],
                                                                    "label": "self.links"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 104,
                                                                    "end_token": 126,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 106,
                                                                            "end_token": 115,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 106,
                                                                                    "end_token": 108,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 106,
                                                                                            "end_token": 106,
                                                                                            "children": [],
                                                                                            "label": "link"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 108,
                                                                                            "end_token": 108,
                                                                                            "children": [],
                                                                                            "label": "source_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "link.source_id"
                                                                                },
                                                                                {
                                                                                    "type": "subscript",
                                                                                    "start_token": 110,
                                                                                    "end_token": 115,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 110,
                                                                                            "end_token": 110,
                                                                                            "children": [],
                                                                                            "label": "id_map"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 112,
                                                                                            "end_token": 114,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 112,
                                                                                                    "end_token": 112,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 114,
                                                                                                    "end_token": 114,
                                                                                                    "children": [],
                                                                                                    "label": "source_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.source_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "id_map[link.source_id]"
                                                                                }
                                                                            ],
                                                                            "label": "link.source_id = id_map[link.source_id]"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 117,
                                                                            "end_token": 126,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 117,
                                                                                    "end_token": 119,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 117,
                                                                                            "end_token": 117,
                                                                                            "children": [],
                                                                                            "label": "link"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 119,
                                                                                            "end_token": 119,
                                                                                            "children": [],
                                                                                            "label": "sink_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "link.sink_id"
                                                                                },
                                                                                {
                                                                                    "type": "subscript",
                                                                                    "start_token": 121,
                                                                                    "end_token": 126,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 121,
                                                                                            "end_token": 121,
                                                                                            "children": [],
                                                                                            "label": "id_map"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 123,
                                                                                            "end_token": 125,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 123,
                                                                                                    "end_token": 123,
                                                                                                    "children": [],
                                                                                                    "label": "link"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 125,
                                                                                                    "end_token": 125,
                                                                                                    "children": [],
                                                                                                    "label": "sink_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "link.sink_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "id_map[link.sink_id]"
                                                                                }
                                                                            ],
                                                                            "label": "link.sink_id = id_map[link.sink_id]"
                                                                        }
                                                                    ],
                                                                    "label": ":\n            link.source_id = id_map[link.source_id]\n            link.sink_id = id_map[link.sink_id]"
                                                                }
                                                            ],
                                                            "label": "for link in self.links:\n            link.source_id = id_map[link.source_id]\n            link.sink_id = id_map[link.sink_id]"
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "start_token": 129,
                                                            "end_token": 132,
                                                            "children": [],
                                                            "label": "# Reassign User IDs"
                                                        },
                                                        {
                                                            "type": "for_statement",
                                                            "start_token": 133,
                                                            "end_token": 179,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 134,
                                                                    "end_token": 134,
                                                                    "children": [],
                                                                    "label": "agent"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 135,
                                                                    "end_token": 135,
                                                                    "children": [],
                                                                    "label": "blocks"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 136,
                                                                    "end_token": 179,
                                                                    "children": [
                                                                        {
                                                                            "type": "for_statement",
                                                                            "start_token": 137,
                                                                            "end_token": 179,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 138,
                                                                                    "end_token": 138,
                                                                                    "children": [],
                                                                                    "label": "node"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 140,
                                                                                    "end_token": 142,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 140,
                                                                                            "end_token": 140,
                                                                                            "children": [],
                                                                                            "label": "self"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 142,
                                                                                            "end_token": 142,
                                                                                            "children": [],
                                                                                            "label": "nodes"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.nodes"
                                                                                },
                                                                                {
                                                                                    "type": "block",
                                                                                    "start_token": 143,
                                                                                    "end_token": 179,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "if_statement",
                                                                                            "start_token": 145,
                                                                                            "end_token": 158,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "binary_operator",
                                                                                                    "start_token": 146,
                                                                                                    "end_token": 156,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 146,
                                                                                                            "end_token": 148,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 146,
                                                                                                                    "end_token": 146,
                                                                                                                    "children": [],
                                                                                                                    "label": "node"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 148,
                                                                                                                    "end_token": 148,
                                                                                                                    "children": [],
                                                                                                                    "label": "block_id"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "node.block_id"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 151,
                                                                                                            "end_token": 156,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 151,
                                                                                                                    "end_token": 155,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 151,
                                                                                                                            "end_token": 151,
                                                                                                                            "children": [],
                                                                                                                            "label": "AgentExecutorBlock"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 155,
                                                                                                                            "end_token": 155,
                                                                                                                            "children": [],
                                                                                                                            "label": "id"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "AgentExecutorBlock().id"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "AgentExecutorBlock().id:"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "node.block_id != AgentExecutorBlock().id:"
                                                                                                },
                                                                                                {
                                                                                                    "type": "continue_statement",
                                                                                                    "start_token": 158,
                                                                                                    "end_token": 158,
                                                                                                    "children": [],
                                                                                                    "label": "continue"
                                                                                                }
                                                                                            ],
                                                                                            "label": "if node.block_id != AgentExecutorBlock().id:\n                continue"
                                                                                        },
                                                                                        {
                                                                                            "type": "assignment",
                                                                                            "start_token": 160,
                                                                                            "end_token": 167,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "start_token": 160,
                                                                                                    "end_token": 165,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 160,
                                                                                                            "end_token": 162,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 160,
                                                                                                                    "end_token": 160,
                                                                                                                    "children": [],
                                                                                                                    "label": "node"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 162,
                                                                                                                    "end_token": 162,
                                                                                                                    "children": [],
                                                                                                                    "label": "input_default"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "node.input_default"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 164,
                                                                                                            "end_token": 164,
                                                                                                            "children": [],
                                                                                                            "label": "\"user_id\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "node.input_default[\"user_id\"]"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 167,
                                                                                                    "end_token": 167,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "node.input_default[\"user_id\"] = user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 170,
                                                                                            "end_token": 179,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 170,
                                                                                                    "end_token": 172,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 170,
                                                                                                            "end_token": 170,
                                                                                                            "children": [],
                                                                                                            "label": "."
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 172,
                                                                                                            "end_token": 172,
                                                                                                            "children": [],
                                                                                                            "label": "."
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ".input_default."
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 174,
                                                                                                    "end_token": 175,
                                                                                                    "children": [],
                                                                                                    "label": "(\"data\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 177,
                                                                                                    "end_token": 178,
                                                                                                    "children": [],
                                                                                                    "label": "{}"
                                                                                                }
                                                                                            ],
                                                                                            "label": ".input_default.setdefault(\"data\", {})"
                                                                                        }
                                                                                    ],
                                                                                    "label": ":\n            if node.block_id != AgentExecutorBlock().id:\n                continue\n            node.input_default[\"user_id\"] = user_id\n            node.input_default.setdefault(\"data\", {})"
                                                                                }
                                                                            ],
                                                                            "label": "for node in self.nodes:\n            if node.block_id != AgentExecutorBlock().id:\n                continue\n            node.input_default[\"user_id\"] = user_id\n            node.input_default.setdefault(\"data\", {})"
                                                                        }
                                                                    ],
                                                                    "label": "\n        for node in self.nodes:\n            if node.block_id != AgentExecutorBlock().id:\n                continue\n            node.input_default[\"user_id\"] = user_id\n            node.input_default.setdefault(\"data\", {})"
                                                                }
                                                            ],
                                                            "label": "for agent blocks\n        for node in self.nodes:\n            if node.block_id != AgentExecutorBlock().id:\n                continue\n            node.input_default[\"user_id\"] = user_id\n            node.input_default.setdefault(\"data\", {})"
                                                        },
                                                        {
                                                            "type": "expression_statement",
                                                            "start_token": 182,
                                                            "end_token": 186,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 182,
                                                                    "end_token": 186,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 182,
                                                                            "end_token": 184,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 182,
                                                                                    "end_token": 182,
                                                                                    "children": [],
                                                                                    "label": "self"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 184,
                                                                                    "end_token": 184,
                                                                                    "children": [],
                                                                                    "label": "validate_graph"
                                                                                }
                                                                            ],
                                                                            "label": "self.validate_graph"
                                                                        }
                                                                    ],
                                                                    "label": "self.validate_graph()"
                                                                }
                                                            ],
                                                            "label": "self.validate_graph()"
                                                        }
                                                    ],
                                                    "label": "# Reassign Graph ID\n        id_map = {node.id: str(uuid.uuid4()) for node in self.nodes}\n        if reassign_graph_id:\n            self.id = str(uuid.uuid4())\n\n        # Reassign Node IDs\n        for node in self.nodes:\n            node.id = id_map[node.id]\n\n        # Reassign Link IDs\n        for link in self.links:\n            link.source_id = id_map[link.source_id]\n            link.sink_id = id_map[link.sink_id]\n\n        # Reassign User IDs for agent blocks\n        for node in self.nodes:\n            if node.block_id != AgentExecutorBlock().id:\n                continue\n            node.input_default[\"user_id\"] = user_id\n            node.input_default.setdefault(\"data\", {})\n\n        self.validate_graph()"
                                                }
                                            ],
                                            "label": "def reassign_ids(self, user_id: str, reassign_graph_id: bool = False):\n        \"\"\"\n        Reassigns all IDs in the graph to new UUIDs.\n        This method can be used before storing a new graph to the database.\n        \"\"\"\n\n        # Reassign Graph ID\n        id_map = {node.id: str(uuid.uuid4()) for node in self.nodes}\n        if reassign_graph_id:\n            self.id = str(uuid.uuid4())\n\n        # Reassign Node IDs\n        for node in self.nodes:\n            node.id = id_map[node.id]\n\n        # Reassign Link IDs\n        for link in self.links:\n            link.source_id = id_map[link.source_id]\n            link.sink_id = id_map[link.sink_id]\n\n        # Reassign User IDs for agent blocks\n        for node in self.nodes:\n            if node.block_id != AgentExecutorBlock().id:\n                continue\n            node.input_default[\"user_id\"] = user_id\n            node.input_default.setdefault(\"data\", {})\n\n        self.validate_graph()"
                                        }
                                    ],
                                    "label": "def reassign_ids(self, user_id: str, reassign_graph_id: bool = False):\n        \"\"\"\n        Reassigns all IDs in the graph to new UUIDs.\n        This method can be used before storing a new graph to the database.\n        \"\"\"\n\n        # Reassign Graph ID\n        id_map = {node.id: str(uuid.uuid4()) for node in self.nodes}\n        if reassign_graph_id:\n            self.id = str(uuid.uuid4())\n\n        # Reassign Node IDs\n        for node in self.nodes:\n            node.id = id_map[node.id]\n\n        # Reassign Link IDs\n        for link in self.links:\n            link.source_id = id_map[link.source_id]\n            link.sink_id = id_map[link.sink_id]\n\n        # Reassign User IDs for agent blocks\n        for node in self.nodes:\n            if node.block_id != AgentExecutorBlock().id:\n                continue\n            node.input_default[\"user_id\"] = user_id\n            node.input_default.setdefault(\"data\", {})\n\n        self.validate_graph()\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "validate_graph",
                            "start_line": 254,
                            "end_line": 370,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 870,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 11,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "validate_graph"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 10,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "self"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "for_run"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 8,
                                                            "end_token": 9,
                                                            "children": [
                                                                {
                                                                    "type": "false",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "False"
                                                                }
                                                            ],
                                                            "label": "= False"
                                                        }
                                                    ],
                                                    "label": "(self, for_run: bool = False)"
                                                }
                                            ],
                                            "label": "def validate_graph(self, for_run: bool = False):"
                                        },
                                        {
                                            "type": "function_definition",
                                            "start_token": 13,
                                            "end_token": 19,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 14,
                                                    "end_token": 14,
                                                    "children": [],
                                                    "label": "sanitize"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 15,
                                                    "end_token": 18,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 16,
                                                            "end_token": 16,
                                                            "children": [],
                                                            "label": "name"
                                                        }
                                                    ],
                                                    "label": "(name):"
                                                }
                                            ],
                                            "label": "def sanitize(name):\n"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 20,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 21,
                                                    "end_token": 29,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 21,
                                                            "end_token": 22,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 21,
                                                                    "end_token": 21,
                                                                    "children": [],
                                                                    "label": "name"
                                                                }
                                                            ],
                                                            "label": "name."
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 24,
                                                            "end_token": 25,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 25,
                                                                    "end_token": 25,
                                                                    "children": [],
                                                                    "label": "\"_#_\""
                                                                }
                                                            ],
                                                            "label": "(\"_#_\""
                                                        }
                                                    ],
                                                    "label": "name.split(\"_#_\")[0]"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 30,
                                                    "end_token": 37,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 30,
                                                            "end_token": 31,
                                                            "children": [],
                                                            "label": ".split"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 32,
                                                            "end_token": 33,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 33,
                                                                    "end_token": 33,
                                                                    "children": [],
                                                                    "label": "\"_@_\""
                                                                }
                                                            ],
                                                            "label": "(\"_@_\""
                                                        }
                                                    ],
                                                    "label": ".split(\"_@_\")[0]"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 38,
                                                    "end_token": 45,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 38,
                                                            "end_token": 39,
                                                            "children": [],
                                                            "label": ".split"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 40,
                                                            "end_token": 41,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 41,
                                                                    "end_token": 41,
                                                                    "children": [],
                                                                    "label": "\"_$_\""
                                                                }
                                                            ],
                                                            "label": "(\"_$_\""
                                                        }
                                                    ],
                                                    "label": ".split(\"_$_\")[0]"
                                                }
                                            ],
                                            "label": "return name.split(\"_#_\")[0].split(\"_@_\")[0].split(\"_$_\")[0]"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 48,
                                            "end_token": 53,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 48,
                                                    "end_token": 48,
                                                    "children": [],
                                                    "label": "input_links"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 50,
                                                    "end_token": 53,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 50,
                                                            "end_token": 50,
                                                            "children": [],
                                                            "label": "defaultdict"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 51,
                                                            "end_token": 52,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 52,
                                                                    "end_token": 52,
                                                                    "children": [],
                                                                    "label": "list"
                                                                }
                                                            ],
                                                            "label": "(list"
                                                        }
                                                    ],
                                                    "label": "defaultdict(list)"
                                                }
                                            ],
                                            "label": "input_links = defaultdict(list)"
                                        },
                                        {
                                            "type": "for_statement",
                                            "start_token": 55,
                                            "end_token": 73,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 56,
                                                    "end_token": 56,
                                                    "children": [],
                                                    "label": "link"
                                                },
                                                {
                                                    "type": "attribute",
                                                    "start_token": 58,
                                                    "end_token": 59,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 58,
                                                            "end_token": 58,
                                                            "children": [],
                                                            "label": "self"
                                                        }
                                                    ],
                                                    "label": "self."
                                                }
                                            ],
                                            "label": "for link in self.links:\n            input_links[link.sink_id].append(link)"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 63,
                                            "end_token": 73,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "start_token": 63,
                                                    "end_token": 68,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 63,
                                                            "end_token": 63,
                                                            "children": [],
                                                            "label": "input_links"
                                                        },
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 66,
                                                            "end_token": 67,
                                                            "children": [],
                                                            "label": ".sink_id"
                                                        }
                                                    ],
                                                    "label": "input_links[link.sink_id]"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 70,
                                                    "end_token": 73,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 70,
                                                            "end_token": 70,
                                                            "children": [],
                                                            "label": "append"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 71,
                                                            "end_token": 72,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 72,
                                                                    "end_token": 72,
                                                                    "children": [],
                                                                    "label": "link"
                                                                }
                                                            ],
                                                            "label": "(link"
                                                        }
                                                    ],
                                                    "label": "append(link)"
                                                }
                                            ],
                                            "label": "input_links[link.sink_id].append(link)"
                                        },
                                        {
                                            "type": "for_statement",
                                            "start_token": 90,
                                            "end_token": 268,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 91,
                                                    "end_token": 91,
                                                    "children": [],
                                                    "label": "node"
                                                },
                                                {
                                                    "type": "attribute",
                                                    "start_token": 93,
                                                    "end_token": 94,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 93,
                                                            "end_token": 93,
                                                            "children": [],
                                                            "label": "self"
                                                        }
                                                    ],
                                                    "label": "self."
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 98,
                                                    "end_token": 269,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 98,
                                                            "end_token": 105,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 98,
                                                                    "end_token": 98,
                                                                    "children": [],
                                                                    "label": "block"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 100,
                                                                    "end_token": 105,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 100,
                                                                            "end_token": 100,
                                                                            "children": [],
                                                                            "label": "get_block"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 101,
                                                                            "end_token": 104,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 102,
                                                                                    "end_token": 103,
                                                                                    "children": [],
                                                                                    "label": "node."
                                                                                }
                                                                            ],
                                                                            "label": "(node.block_id"
                                                                        }
                                                                    ],
                                                                    "label": "get_block(node.block_id)"
                                                                }
                                                            ],
                                                            "label": "block = get_block(node.block_id)"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 107,
                                                            "end_token": 118,
                                                            "children": [
                                                                {
                                                                    "type": "binary_operator",
                                                                    "start_token": 108,
                                                                    "end_token": 111,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 108,
                                                                            "end_token": 108,
                                                                            "children": [],
                                                                            "label": "block"
                                                                        },
                                                                        {
                                                                            "type": "none",
                                                                            "start_token": 110,
                                                                            "end_token": 110,
                                                                            "children": [],
                                                                            "label": "None"
                                                                        }
                                                                    ],
                                                                    "label": "block is None:"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 113,
                                                                    "end_token": 118,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 114,
                                                                            "end_token": 117,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 113,
                                                                                    "end_token": 113,
                                                                                    "children": [],
                                                                                    "label": "raise"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 115,
                                                                                    "end_token": 116,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 116,
                                                                                            "end_token": 116,
                                                                                            "children": [],
                                                                                            "label": "f"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(f"
                                                                                }
                                                                            ],
                                                                            "label": "ValueError(f\"Invalid block {node.block_id} for node #{node.id}\""
                                                                        }
                                                                    ],
                                                                    "label": "raise ValueError(f\"Invalid block {node.block_id} for node #{node.id}\")"
                                                                }
                                                            ],
                                                            "label": "if block is None:\n                raise ValueError(f\"Invalid block {node.block_id} for node #{node.id}\")"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 121,
                                                            "end_token": 162,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 121,
                                                                    "end_token": 121,
                                                                    "children": [],
                                                                    "label": "provided_inputs"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 123,
                                                                    "end_token": 162,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 123,
                                                                            "end_token": 123,
                                                                            "children": [],
                                                                            "label": "set"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 124,
                                                                            "end_token": 161,
                                                                            "children": [
                                                                                {
                                                                                    "type": "list",
                                                                                    "start_token": 126,
                                                                                    "end_token": 138,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 127,
                                                                                            "end_token": 130,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 127,
                                                                                                    "end_token": 127,
                                                                                                    "children": [],
                                                                                                    "label": "sanitize"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 128,
                                                                                                    "end_token": 129,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 128,
                                                                                                            "end_token": 128,
                                                                                                            "children": [],
                                                                                                            "label": "("
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(name"
                                                                                                }
                                                                                            ],
                                                                                            "label": "sanitize(name)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "[sanitize(name) for name in node.input_default]\n"
                                                                                },
                                                                                {
                                                                                    "type": "list",
                                                                                    "start_token": 140,
                                                                                    "end_token": 161,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 141,
                                                                                            "end_token": 146,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 141,
                                                                                                    "end_token": 141,
                                                                                                    "children": [],
                                                                                                    "label": "sanitize"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 142,
                                                                                                    "end_token": 145,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 144,
                                                                                                            "end_token": 145,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 144,
                                                                                                                    "end_token": 144,
                                                                                                                    "children": [],
                                                                                                                    "label": "."
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": ".sink_name"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(link.sink_name"
                                                                                                }
                                                                                            ],
                                                                                            "label": "sanitize(link.sink_name)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "[sanitize(link.sink_name) for link in input_links.get(node.id, [])]"
                                                                                }
                                                                            ],
                                                                            "label": "(\n                [sanitize(name) for name in node.input_default]\n                + [sanitize(link.sink_name) for link in input_links.get(node.id, [])]"
                                                                        }
                                                                    ],
                                                                    "label": "set(\n                [sanitize(name) for name in node.input_default]\n                + [sanitize(link.sink_name) for link in input_links.get(node.id, [])]\n"
                                                                }
                                                            ],
                                                            "label": "provided_inputs = set(\n                [sanitize(name) for name in node.input_default]\n                + [sanitize(link.sink_name) for link in input_links.get(node.id, [])]\n"
                                                        },
                                                        {
                                                            "type": "for_statement",
                                                            "start_token": 165,
                                                            "end_token": 270,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 166,
                                                                    "end_token": 166,
                                                                    "children": [],
                                                                    "label": "name"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 168,
                                                                    "end_token": 174,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 167,
                                                                            "end_token": 173,
                                                                            "children": [],
                                                                            "label": "in block.input_schema.get_required_fields("
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 173,
                                                                            "end_token": 174,
                                                                            "children": [],
                                                                            "label": "()"
                                                                        }
                                                                    ],
                                                                    "label": "block.input_schema.get_required_fields()"
                                                                },
                                                                {
                                                                    "type": "if_statement",
                                                                    "start_token": 177,
                                                                    "end_token": 269,
                                                                    "children": [
                                                                        {
                                                                            "type": "binary_operator",
                                                                            "start_token": 180,
                                                                            "end_token": 194,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 180,
                                                                                    "end_token": 180,
                                                                                    "children": [],
                                                                                    "label": "name"
                                                                                },
                                                                                {
                                                                                    "type": "not_operator",
                                                                                    "start_token": 181,
                                                                                    "end_token": 181,
                                                                                    "children": [],
                                                                                    "label": "not"
                                                                                },
                                                                                {
                                                                                    "type": "in_operator",
                                                                                    "start_token": 182,
                                                                                    "end_token": 183,
                                                                                    "children": [],
                                                                                    "label": "in provided_inputs"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 184,
                                                                                    "end_token": 184,
                                                                                    "children": [],
                                                                                    "label": "\n"
                                                                                }
                                                                            ],
                                                                            "label": "name not in provided_inputs\n                    and not (\n                        name == \"payload\"\n                        and"
                                                                        }
                                                                    ],
                                                                    "label": "if (\n                    name not in provided_inputs\n                    and not (\n                        name == \"payload\"\n                        and block.block_type\n                        in (BlockType.WEBHOOK, BlockType.WEBHOOK_MANUAL)\n                    )\n                    and (\n                        for_run  # Skip input completion validation, unless when executing.\n                        or block.block_type == BlockType.INPUT\n                        or block.block_type == BlockType.OUTPUT\n                        or block.block_type == BlockType.AGENT\n                    )\n                ):\n                    raise ValueError(\n                        f\"Node {block.name} #{node.id} required input missing: `{name}`\"\n                    )"
                                                                }
                                                            ],
                                                            "label": "for name in block.input_schema.get_required_fields():\n                if (\n                    name not in provided_inputs\n                    and not (\n                        name == \"payload\"\n                        and block.block_type\n                        in (BlockType.WEBHOOK, BlockType.WEBHOOK_MANUAL)\n                    )\n                    and (\n                        for_run  # Skip input completion validation, unless when executing.\n                        or block.block_type == BlockType.INPUT\n                        or block.block_type == BlockType.OUTPUT\n                        or block.block_type == BlockType.AGENT\n                    )\n                ):\n                    raise ValueError(\n                        f\"Node {block.name} #{node.id} required input missing: `{name}`\"\n                    )\n"
                                                        }
                                                    ],
                                                    "label": "block = get_block(node.block_id)\n            if block is None:\n                raise ValueError(f\"Invalid block {node.block_id} for node #{node.id}\")\n\n            provided_inputs = set(\n                [sanitize(name) for name in node.input_default]\n                + [sanitize(link.sink_name) for link in input_links.get(node.id, [])]\n            )\n            for name in block.input_schema.get_required_fields():\n                if (\n                    name not in provided_inputs\n                    and not (\n                        name == \"payload\"\n                        and block.block_type\n                        in (BlockType.WEBHOOK, BlockType.WEBHOOK_MANUAL)\n                    )\n                    and (\n                        for_run  # Skip input completion validation, unless when executing.\n                        or block.block_type == BlockType.INPUT\n                        or block.block_type == BlockType.OUTPUT\n                        or block.block_type == BlockType.AGENT\n                    )\n                ):\n                    raise ValueError(\n                        f\"Node {block.name} #{node.id} required input missing: `{name}`\"\n                    )"
                                                }
                                            ],
                                            "label": "for node in self.nodes:\n            block = get_block(node.block_id)\n            if block is None:\n                raise ValueError(f\"Invalid block {node.block_id} for node #{node.id}\")\n\n            provided_inputs = set(\n                [sanitize(name) for name in node.input_default]\n                + [sanitize(link.sink_name) for link in input_links.get(node.id, [])]\n            )\n            for name in block.input_schema.get_required_fields():\n                if (\n                    name not in provided_inputs\n                    and not (\n                        name == \"payload\"\n                        and block.block_type\n                        in (BlockType.WEBHOOK, BlockType.WEBHOOK_MANUAL)\n                    )\n                    and (\n                        for_run  # Skip input completion validation, unless when executing.\n                        or block.block_type == BlockType.INPUT\n                        or block.block_type == BlockType.OUTPUT\n                        or block.block_type == BlockType.AGENT\n                    )\n                ):\n                    raise ValueError(\n                        f\"Node {block.name} #{node.id} required input missing: `{name}`\"\n"
                                        }
                                    ],
                                    "label": "def validate_graph(self, for_run: bool = False):\n        def sanitize(name):\n            return name.split(\"_#_\")[0].split(\"_@_\")[0].split(\"_$_\")[0]\n\n        input_links = defaultdict(list)\n        for link in self.links:\n            input_links[link.sink_id].append(link)\n\n        # Nodes: required fields are filled or connected and dependencies are satisfied\n        for node in self.nodes:\n            block = get_block(node.block_id)\n            if block is None:\n                raise ValueError(f\"Invalid block {node.block_id} for node #{node.id}\")\n\n            provided_inputs = set(\n                [sanitize(name) for name in node.input_default]\n                + [sanitize(link.sink_name) for link in input_links.get(node.id, [])]\n            )\n            for name in block.input_schema.get_required_fields():\n                if (\n                    name not in provided_inputs\n                    and not (\n                        name == \"payload\"\n                        and block.block_type\n                        in (BlockType.WEBHOOK, BlockType.WEBHOOK_MANUAL)\n                    )\n                    and (\n                        for_run  # Skip input completion validation, unless when executing.\n                        or block.block_type == BlockType.INPUT\n                        or block.block_type == BlockType.OUTPUT\n                        or block.block_type == BlockType.AGENT\n                    )\n                ):\n                    raise ValueError(\n                        f\"Node {block.name} #{node.id} required input missing: `{name}`\"\n                    )\n\n            # Get input schema properties and check dependencies\n            input_schema = block.input_schema.model_fields\n            required_fields = block.input_schema.get_required_fields()\n\n            def has_value(name):\n                return (\n                    node is not None\n                    and name in node.input_default\n                    and node.input_default[name] is not None\n                    and str(node.input_default[name]).strip() != \"\"\n                ) or (name in input_schema and input_schema[name].default is not None)\n\n            # Validate dependencies between fields\n            for field_name, field_info in input_schema.items():\n                # Apply input dependency validation only on run & field with depends_on\n                json_schema_extra = field_info.json_schema_extra or {}\n                dependencies = json_schema_extra.get(\"depends_on\", [])\n                if not for_run or not dependencies:\n                    continue\n\n                # Check if dependent field has value in input_default\n                field_has_value = has_value(field_name)\n                field_is_required = field_name in required_fields\n\n                # Check for missing dependencies when dependent field is present\n                missing_deps = [dep for dep in dependencies if not has_value(dep)]\n                if missing_deps and (field_has_value or field_is_required):\n                    raise ValueError(\n                        f\"Node {block.name} #{node.id}: Field `{field_name}` requires [{', '.join(missing_deps)}] to be set\"\n                    )\n\n        node_map = {v.id: v for v in self.nodes}\n\n        def is_static_output_block(nid: str) -> bool:\n            bid = node_map[nid].block_id\n            b = get_block(bid)\n            return b.static_output if b else False\n\n        # Links: links are connected and the connected pin data type are compatible.\n        for link in self.links:\n            source = (link.source_id, link.source_name)\n            sink = (link.sink_id, link.sink_name)\n            suffix = f\"Link {source} <-> {sink}\"\n\n            for i, (node_id, name) in enumerate([source, sink]):\n                node = node_map.get(node_id)\n                if not node:\n                    raise ValueError(\n                        f\"{suffix}, {node_id} is invalid node id, available nodes: {node_map.keys()}\"\n                    )\n\n                block = get_block(node.block_id)\n                if not block:\n                    blocks = {v().id: v().name for v in get_blocks().values()}\n                    raise ValueError(\n                        f\"{suffix}, {node.block_id} is invalid block id, available blocks: {blocks}\"\n                    )\n\n                sanitized_name = sanitize(name)\n                vals = node.input_default\n                if i == 0:\n                    fields = (\n                        block.output_schema.get_fields()\n                        if block.block_type != BlockType.AGENT\n                        else vals.get(\"output_schema\", {}).get(\"properties\", {}).keys()\n                    )\n                else:\n                    fields = (\n                        block.input_schema.get_fields()\n                        if block.block_type != BlockType.AGENT\n                        else vals.get(\"input_schema\", {}).get(\"properties\", {}).keys()\n                    )\n                if sanitized_name not in fields:\n                    fields_msg = f\"Allowed fields: {fields}\"\n                    raise ValueError(f\"{suffix}, `{name}` invalid, {fields_msg}\")\n\n            if is_static_output_block(link.source_id):\n                link.is_static = True  # Each value block output should be static.\n\n    @staticmethod\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "from_db",
                            "start_line": 371,
                            "end_line": 391,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 154,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 154,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "from_db"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 12,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "graph"
                                                                },
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 5,
                                                                            "end_token": 5,
                                                                            "children": [],
                                                                            "label": "AgentGraph"
                                                                        }
                                                                    ],
                                                                    "label": "AgentGraph"
                                                                }
                                                            ],
                                                            "label": "graph: AgentGraph"
                                                        },
                                                        {
                                                            "type": "typed_default_parameter",
                                                            "start_token": 7,
                                                            "end_token": 11,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "for_export"
                                                                },
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 9,
                                                                            "end_token": 9,
                                                                            "children": [],
                                                                            "label": "bool"
                                                                        }
                                                                    ],
                                                                    "label": "bool"
                                                                },
                                                                {
                                                                    "type": "false",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "children": [],
                                                                    "label": "False"
                                                                }
                                                            ],
                                                            "label": "for_export: bool = False"
                                                        }
                                                    ],
                                                    "label": "(graph: AgentGraph, for_export: bool = False)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 14,
                                                    "end_token": 154,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 15,
                                                            "end_token": 153,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 16,
                                                                    "end_token": 153,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 16,
                                                                            "end_token": 16,
                                                                            "children": [],
                                                                            "label": "GraphModel"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 17,
                                                                            "end_token": 153,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 19,
                                                                                    "end_token": 24,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 19,
                                                                                            "end_token": 19,
                                                                                            "children": [],
                                                                                            "label": "id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 21,
                                                                                            "end_token": 23,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 21,
                                                                                                    "end_token": 21,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 23,
                                                                                                    "end_token": 23,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "id=graph.id,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 26,
                                                                                    "end_token": 31,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 26,
                                                                                            "end_token": 26,
                                                                                            "children": [],
                                                                                            "label": "user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 28,
                                                                                            "end_token": 30,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 28,
                                                                                                    "end_token": 28,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 30,
                                                                                                    "end_token": 30,
                                                                                                    "children": [],
                                                                                                    "label": "userId"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.userId"
                                                                                        }
                                                                                    ],
                                                                                    "label": "user_id=graph.userId,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 33,
                                                                                    "end_token": 38,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 33,
                                                                                            "end_token": 33,
                                                                                            "children": [],
                                                                                            "label": "version"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 35,
                                                                                            "end_token": 37,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 35,
                                                                                                    "end_token": 35,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 37,
                                                                                                    "end_token": 37,
                                                                                                    "children": [],
                                                                                                    "label": "version"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.version"
                                                                                        }
                                                                                    ],
                                                                                    "label": "version=graph.version,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 40,
                                                                                    "end_token": 45,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 40,
                                                                                            "end_token": 40,
                                                                                            "children": [],
                                                                                            "label": "is_active"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 42,
                                                                                            "end_token": 44,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 42,
                                                                                                    "end_token": 42,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 44,
                                                                                                    "end_token": 44,
                                                                                                    "children": [],
                                                                                                    "label": "isActive"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.isActive"
                                                                                        }
                                                                                    ],
                                                                                    "label": "is_active=graph.isActive,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 47,
                                                                                    "end_token": 52,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 47,
                                                                                            "end_token": 47,
                                                                                            "children": [],
                                                                                            "label": "is_template"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 49,
                                                                                            "end_token": 51,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 49,
                                                                                                    "end_token": 49,
                                                                                                    "children": [],
                                                                                                    "label": "graph"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 51,
                                                                                                    "end_token": 51,
                                                                                                    "children": [],
                                                                                                    "label": "isTemplate"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.isTemplate"
                                                                                        }
                                                                                    ],
                                                                                    "label": "is_template=graph.isTemplate,"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 54,
                                                                                    "end_token": 60,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 54,
                                                                                            "end_token": 54,
                                                                                            "children": [],
                                                                                            "label": "name"
                                                                                        },
                                                                                        {
                                                                                            "type": "boolean_operator",
                                                                                            "start_token": 56,
                                                                                            "end_token": 60,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 58,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 56,
                                                                                                            "end_token": 56,
                                                                                                            "children": [],
                                                                                                            "label": "graph"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 58,
                                                                                                            "end_token": 58,
                                                                                                            "children": [],
                                                                                                            "label": "name"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "graph.name"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 60,
                                                                                                    "end_token": 60,
                                                                                                    "children": [],
                                                                                                    "label": "\"\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.name or \"\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "name=graph.name or \"\""
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 63,
                                                                                    "end_token": 69,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 63,
                                                                                            "end_token": 63,
                                                                                            "children": [],
                                                                                            "label": "description"
                                                                                        },
                                                                                        {
                                                                                            "type": "boolean_operator",
                                                                                            "start_token": 65,
                                                                                            "end_token": 69,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 65,
                                                                                                    "end_token": 67,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 65,
                                                                                                            "end_token": 65,
                                                                                                            "children": [],
                                                                                                            "label": "graph"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 67,
                                                                                                            "end_token": 67,
                                                                                                            "children": [],
                                                                                                            "label": "description"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "graph.description"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 69,
                                                                                                    "end_token": 69,
                                                                                                    "children": [],
                                                                                                    "label": "\"\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph.description or \"\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "description=graph.description or \"\""
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 72,
                                                                                    "end_token": 100,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 72,
                                                                                            "end_token": 72,
                                                                                            "children": [],
                                                                                            "label": "nodes"
                                                                                        },
                                                                                        {
                                                                                            "type": "list_comprehension",
                                                                                            "start_token": 74,
                                                                                            "end_token": 100,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 76,
                                                                                                    "end_token": 88,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 76,
                                                                                                            "end_token": 78,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 76,
                                                                                                                    "end_token": 76,
                                                                                                                    "children": [],
                                                                                                                    "label": "NodeModel"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 78,
                                                                                                                    "end_token": 78,
                                                                                                                    "children": [],
                                                                                                                    "label": "from_db"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "NodeModel.from_db"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 79,
                                                                                                            "end_token": 87,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 80,
                                                                                                                    "end_token": 86,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 80,
                                                                                                                            "end_token": 82,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 80,
                                                                                                                                    "end_token": 80,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "GraphModel"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 82,
                                                                                                                                    "end_token": 82,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "_process_node"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "GraphModel._process_node"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "start_token": 83,
                                                                                                                            "end_token": 85,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 84,
                                                                                                                                    "end_token": 84,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "node"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 86,
                                                                                                                                    "end_token": 86,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "for_export"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "(node,"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "GraphModel._process_node(node, for_export"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "(GraphModel._process_node(node, for_export)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "NodeModel.from_db(GraphModel._process_node(node, for_export))"
                                                                                                },
                                                                                                {
                                                                                                    "type": "for_in_clause",
                                                                                                    "start_token": 90,
                                                                                                    "end_token": 98,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 91,
                                                                                                            "end_token": 91,
                                                                                                            "children": [],
                                                                                                            "label": "node"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "boolean_operator",
                                                                                                            "start_token": 93,
                                                                                                            "end_token": 97,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 93,
                                                                                                                    "end_token": 95,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 93,
                                                                                                                            "end_token": 93,
                                                                                                                            "children": [],
                                                                                                                            "label": "graph"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 95,
                                                                                                                            "end_token": 95,
                                                                                                                            "children": [],
                                                                                                                            "label": "AgentNodes"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "graph.AgentNodes"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "list",
                                                                                                                    "start_token": 97,
                                                                                                                    "end_token": 98,
                                                                                                                    "children": [],
                                                                                                                    "label": "[]"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "graph.AgentNodes or ["
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "for node in graph.AgentNodes or []"
                                                                                                }
                                                                                            ],
                                                                                            "label": "[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ]"
                                                                                        }
                                                                                    ],
                                                                                    "label": "nodes=[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ]"
                                                                                },
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 103,
                                                                                    "end_token": 151,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 103,
                                                                                            "end_token": 103,
                                                                                            "children": [],
                                                                                            "label": "links"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 105,
                                                                                            "end_token": 150,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 105,
                                                                                                    "end_token": 105,
                                                                                                    "children": [],
                                                                                                    "label": "list"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 106,
                                                                                                    "end_token": 150,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "dictionary_comprehension",
                                                                                                            "start_token": 108,
                                                                                                            "end_token": 149,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 110,
                                                                                                                    "end_token": 115,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 110,
                                                                                                                            "end_token": 112,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 110,
                                                                                                                                    "end_token": 110,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "Link"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 112,
                                                                                                                                    "end_token": 112,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "from_db"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "Link.from_db"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "start_token": 113,
                                                                                                                            "end_token": 115,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 114,
                                                                                                                                    "end_token": 114,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "link"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "(link)"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "Link.from_db(link)"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "for_in_clause",
                                                                                                                    "start_token": 117,
                                                                                                                    "end_token": 126,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 118,
                                                                                                                            "end_token": 118,
                                                                                                                            "children": [],
                                                                                                                            "label": "node"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "boolean_operator",
                                                                                                                            "start_token": 120,
                                                                                                                            "end_token": 124,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 120,
                                                                                                                                    "end_token": 122,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 120,
                                                                                                                                            "end_token": 120,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "graph"
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 122,
                                                                                                                                            "end_token": 122,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "AgentNodes"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "graph.AgentNodes"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "list",
                                                                                                                                    "start_token": 124,
                                                                                                                                    "end_token": 125,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "[]"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "graph.AgentNodes or ["
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "for node in graph.AgentNodes or []\n"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "for_in_clause",
                                                                                                                    "start_token": 127,
                                                                                                                    "end_token": 147,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 128,
                                                                                                                            "end_token": 128,
                                                                                                                            "children": [],
                                                                                                                            "label": "link"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "binary_operator",
                                                                                                                            "start_token": 130,
                                                                                                                            "end_token": 146,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "boolean_operator",
                                                                                                                                    "start_token": 130,
                                                                                                                                    "end_token": 135,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "attribute",
                                                                                                                                            "start_token": 130,
                                                                                                                                            "end_token": 132,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 130,
                                                                                                                                                    "end_token": 130,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "("
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 132,
                                                                                                                                                    "end_token": 132,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "."
                                                                                                                                                }
                                                                                                                                            ],
                                                                                                                                            "label": "(node."
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "list",
                                                                                                                                            "start_token": 134,
                                                                                                                                            "end_token": 135,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "or ["
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "(node.Input or ["
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "boolean_operator",
                                                                                                                                    "start_token": 139,
                                                                                                                                    "end_token": 145,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "attribute",
                                                                                                                                            "start_token": 139,
                                                                                                                                            "end_token": 141,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 139,
                                                                                                                                                    "end_token": 139,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "("
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 141,
                                                                                                                                                    "end_token": 141,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "."
                                                                                                                                                }
                                                                                                                                            ],
                                                                                                                                            "label": "(node."
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "list",
                                                                                                                                            "start_token": 143,
                                                                                                                                            "end_token": 144,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "or ["
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "(node.Output or []"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "(node.Input or []) + (node.Output or [])"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "for link in (node.Input or []) + (node.Output or [])\n"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "{\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            )"
                                                                                                }
                                                                                            ],
                                                                                            "label": "list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "links=list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            ),"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            id=graph.id,\n            user_id=graph.userId,\n            version=graph.version,\n            is_active=graph.isActive,\n            is_template=graph.isTemplate,\n            name=graph.name or \"\",\n            description=graph.description or \"\",\n            nodes=[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ],\n            links=list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            ),\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "GraphModel(\n            id=graph.id,\n            user_id=graph.userId,\n            version=graph.version,\n            is_active=graph.isActive,\n            is_template=graph.isTemplate,\n            name=graph.name or \"\",\n            description=graph.description or \"\",\n            nodes=[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ],\n            links=list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            ),\n        )"
                                                                }
                                                            ],
                                                            "label": "return GraphModel(\n            id=graph.id,\n            user_id=graph.userId,\n            version=graph.version,\n            is_active=graph.isActive,\n            is_template=graph.isTemplate,\n            name=graph.name or \"\",\n            description=graph.description or \"\",\n            nodes=[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ],\n            links=list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            ),\n        )"
                                                        }
                                                    ],
                                                    "label": "\n        return GraphModel(\n            id=graph.id,\n            user_id=graph.userId,\n            version=graph.version,\n            is_active=graph.isActive,\n            is_template=graph.isTemplate,\n            name=graph.name or \"\",\n            description=graph.description or \"\",\n            nodes=[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ],\n            links=list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            ),\n        )\n"
                                                }
                                            ],
                                            "label": "def from_db(graph: AgentGraph, for_export: bool = False):\n        return GraphModel(\n            id=graph.id,\n            user_id=graph.userId,\n            version=graph.version,\n            is_active=graph.isActive,\n            is_template=graph.isTemplate,\n            name=graph.name or \"\",\n            description=graph.description or \"\",\n            nodes=[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ],\n            links=list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            ),\n        )\n"
                                        }
                                    ],
                                    "label": "def from_db(graph: AgentGraph, for_export: bool = False):\n        return GraphModel(\n            id=graph.id,\n            user_id=graph.userId,\n            version=graph.version,\n            is_active=graph.isActive,\n            is_template=graph.isTemplate,\n            name=graph.name or \"\",\n            description=graph.description or \"\",\n            nodes=[\n                NodeModel.from_db(GraphModel._process_node(node, for_export))\n                for node in graph.AgentNodes or []\n            ],\n            links=list(\n                {\n                    Link.from_db(link)\n                    for node in graph.AgentNodes or []\n                    for link in (node.Input or []) + (node.Output or [])\n                }\n            ),\n        )\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "_process_node",
                            "start_line": 394,
                            "end_line": 408,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 96,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 96,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "_process_node"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 10,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "node"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "AgentNode"
                                                                }
                                                            ],
                                                            "label": "node: AgentNode"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 7,
                                                            "end_token": 9,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "for_export"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "bool"
                                                                }
                                                            ],
                                                            "label": "for_export: bool"
                                                        }
                                                    ],
                                                    "label": "(node: AgentNode, for_export: bool)"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 13,
                                                    "end_token": 13,
                                                    "children": [],
                                                    "label": "AgentNode"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 15,
                                                    "end_token": 96,
                                                    "children": [
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 16,
                                                            "end_token": 73,
                                                            "children": [
                                                                {
                                                                    "type": "if_clause",
                                                                    "start_token": 16,
                                                                    "end_token": 18,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 17,
                                                                            "end_token": 17,
                                                                            "children": [],
                                                                            "label": "for_export"
                                                                        }
                                                                    ],
                                                                    "label": "if for_export:"
                                                                },
                                                                {
                                                                    "type": "comment",
                                                                    "start_token": 20,
                                                                    "end_token": 26,
                                                                    "children": [],
                                                                    "label": "# Remove credentials from node input\n"
                                                                },
                                                                {
                                                                    "type": "if_statement",
                                                                    "start_token": 27,
                                                                    "end_token": 73,
                                                                    "children": [
                                                                        {
                                                                            "type": "if_clause",
                                                                            "start_token": 27,
                                                                            "end_token": 31,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 28,
                                                                                    "end_token": 30,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 28,
                                                                                            "end_token": 28,
                                                                                            "children": [],
                                                                                            "label": "node"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 30,
                                                                                            "end_token": 30,
                                                                                            "children": [],
                                                                                            "label": "constantInput"
                                                                                        }
                                                                                    ],
                                                                                    "label": "node.constantInput"
                                                                                }
                                                                            ],
                                                                            "label": "if node.constantInput:"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 33,
                                                                            "end_token": 51,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 33,
                                                                                    "end_token": 33,
                                                                                    "children": [],
                                                                                    "label": "constant_input"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 35,
                                                                                    "end_token": 51,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 35,
                                                                                            "end_token": 37,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 35,
                                                                                                    "end_token": 35,
                                                                                                    "children": [],
                                                                                                    "label": "json"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 37,
                                                                                                    "end_token": 37,
                                                                                                    "children": [],
                                                                                                    "label": "loads"
                                                                                                }
                                                                                            ],
                                                                                            "label": "json.loads"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 38,
                                                                                            "end_token": 51,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 40,
                                                                                                    "end_token": 42,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 40,
                                                                                                            "end_token": 40,
                                                                                                            "children": [],
                                                                                                            "label": "node"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 42,
                                                                                                            "end_token": 42,
                                                                                                            "children": [],
                                                                                                            "label": "constantInput"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "node.constantInput"
                                                                                                },
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 44,
                                                                                                    "end_token": 51,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 44,
                                                                                                            "end_token": 44,
                                                                                                            "children": [],
                                                                                                            "label": "target_type"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "generic_type",
                                                                                                            "start_token": 46,
                                                                                                            "end_token": 51,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 46,
                                                                                                                    "end_token": 46,
                                                                                                                    "children": [],
                                                                                                                    "label": "dict"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "type_parameter",
                                                                                                                    "start_token": 48,
                                                                                                                    "end_token": 50,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "type",
                                                                                                                            "start_token": 48,
                                                                                                                            "end_token": 48,
                                                                                                                            "children": [],
                                                                                                                            "label": "str"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "type",
                                                                                                                            "start_token": 50,
                                                                                                                            "end_token": 50,
                                                                                                                            "children": [],
                                                                                                                            "label": "Any"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "str, Any"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "dict[str, Any]"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "target_type=dict[str, Any]"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n                    node.constantInput, target_type=dict[str, Any]"
                                                                                        }
                                                                                    ],
                                                                                    "label": "json.loads(\n                    node.constantInput, target_type=dict[str, Any]"
                                                                                }
                                                                            ],
                                                                            "label": "constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 55,
                                                                            "end_token": 73,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 64,
                                                                                    "end_token": 66,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 64,
                                                                                            "end_token": 64,
                                                                                            "children": [],
                                                                                            "label": "node"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 66,
                                                                                            "end_token": 66,
                                                                                            "children": [],
                                                                                            "label": "constantInput"
                                                                                        }
                                                                                    ],
                                                                                    "label": "node.constantInput"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 68,
                                                                                    "end_token": 73,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 68,
                                                                                            "end_token": 70,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 68,
                                                                                                    "end_token": 68,
                                                                                                    "children": [],
                                                                                                    "label": "json"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 70,
                                                                                                    "end_token": 70,
                                                                                                    "children": [],
                                                                                                    "label": "dumps"
                                                                                                }
                                                                                            ],
                                                                                            "label": "json.dumps"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 71,
                                                                                            "end_token": 73,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 72,
                                                                                                    "children": [],
                                                                                                    "label": "constant_input"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(constant_input)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "json.dumps(constant_input)"
                                                                                }
                                                                            ],
                                                                            "label": "constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)"
                                                                        }
                                                                    ],
                                                                    "label": "if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)"
                                                                }
                                                            ],
                                                            "label": "if for_export:\n            # Remove credentials from node input\n            if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)"
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "start_token": 76,
                                                            "end_token": 80,
                                                            "children": [],
                                                            "label": "# Remove webhook info\n"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 81,
                                                            "end_token": 85,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 81,
                                                                    "end_token": 83,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 81,
                                                                            "end_token": 81,
                                                                            "children": [],
                                                                            "label": "node"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 83,
                                                                            "end_token": 83,
                                                                            "children": [],
                                                                            "label": "webhookId"
                                                                        }
                                                                    ],
                                                                    "label": "node.webhookId"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 85,
                                                                    "end_token": 85,
                                                                    "children": [],
                                                                    "label": "None"
                                                                }
                                                            ],
                                                            "label": "node.webhookId = None"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 87,
                                                            "end_token": 91,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 87,
                                                                    "end_token": 89,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 87,
                                                                            "end_token": 87,
                                                                            "children": [],
                                                                            "label": "node"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 89,
                                                                            "end_token": 89,
                                                                            "children": [],
                                                                            "label": "Webhook"
                                                                        }
                                                                    ],
                                                                    "label": "node.Webhook"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 91,
                                                                    "end_token": 91,
                                                                    "children": [],
                                                                    "label": "None"
                                                                }
                                                            ],
                                                            "label": "node.Webhook = None"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 94,
                                                            "end_token": 95,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 95,
                                                                    "end_token": 95,
                                                                    "children": [],
                                                                    "label": "node"
                                                                }
                                                            ],
                                                            "label": "return node"
                                                        }
                                                    ],
                                                    "label": "\n        if for_export:\n            # Remove credentials from node input\n            if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)\n\n            # Remove webhook info\n            node.webhookId = None\n            node.Webhook = None\n\n        return node\n"
                                                }
                                            ],
                                            "label": "def _process_node(node: AgentNode, for_export: bool) -> AgentNode:\n        if for_export:\n            # Remove credentials from node input\n            if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)\n\n            # Remove webhook info\n            node.webhookId = None\n            node.Webhook = None\n\n        return node\n"
                                        }
                                    ],
                                    "label": "def _process_node(node: AgentNode, for_export: bool) -> AgentNode:\n        if for_export:\n            # Remove credentials from node input\n            if node.constantInput:\n                constant_input = json.loads(\n                    node.constantInput, target_type=dict[str, Any]\n                )\n                constant_input = GraphModel._hide_node_input_credentials(constant_input)\n                node.constantInput = json.dumps(constant_input)\n\n            # Remove webhook info\n            node.webhookId = None\n            node.Webhook = None\n\n        return node\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "_hide_node_input_credentials",
                            "start_line": 411,
                            "end_line": 424,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 124,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 124,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "label": "_hide_node_input_credentials"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 11,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 10,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "label": "input_data"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 10,
                                                                    "children": [
                                                                        {
                                                                            "type": "generic_type",
                                                                            "start_token": 5,
                                                                            "end_token": 10,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 5,
                                                                                    "end_token": 5,
                                                                                    "label": "dict"
                                                                                },
                                                                                {
                                                                                    "type": "type_parameter",
                                                                                    "start_token": 6,
                                                                                    "end_token": 10,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 7,
                                                                                            "end_token": 7,
                                                                                            "label": "str"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 9,
                                                                                            "end_token": 9,
                                                                                            "label": "Any"
                                                                                        }
                                                                                    ],
                                                                                    "label": "[str, Any]"
                                                                                }
                                                                            ],
                                                                            "label": "dict[str, Any]"
                                                                        }
                                                                    ],
                                                                    "label": "dict[str, Any]"
                                                                }
                                                            ],
                                                            "label": "input_data: dict[str, Any]"
                                                        }
                                                    ],
                                                    "label": "(input_data: dict[str, Any])"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 14,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 14,
                                                            "end_token": 14,
                                                            "label": "dict"
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "start_token": 15,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 16,
                                                                    "end_token": 16,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 18,
                                                                    "end_token": 18,
                                                                    "label": "Any"
                                                                }
                                                            ],
                                                            "label": "[str, Any]"
                                                        }
                                                    ],
                                                    "label": "dict[str, Any]"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 21,
                                                    "end_token": 124,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 22,
                                                            "end_token": 34,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 22,
                                                                    "end_token": 22,
                                                                    "label": "sensitive_keys"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 24,
                                                                    "end_token": 34,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 25,
                                                                            "end_token": 25,
                                                                            "label": "\"credentials\""
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 27,
                                                                            "end_token": 27,
                                                                            "label": "\"api_key\""
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 29,
                                                                            "end_token": 29,
                                                                            "label": "\"password\""
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 31,
                                                                            "end_token": 31,
                                                                            "label": "\"token\""
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 33,
                                                                            "end_token": 33,
                                                                            "label": "\"secret\""
                                                                        }
                                                                    ],
                                                                    "label": "[\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]"
                                                                }
                                                            ],
                                                            "label": "sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 36,
                                                            "end_token": 39,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 36,
                                                                    "end_token": 36,
                                                                    "label": "result"
                                                                },
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 38,
                                                                    "end_token": 39,
                                                                    "label": "{}"
                                                                }
                                                            ],
                                                            "label": "result = {}"
                                                        },
                                                        {
                                                            "type": "for_statement",
                                                            "start_token": 41,
                                                            "end_token": 124,
                                                            "children": [
                                                                {
                                                                    "type": "for_in_clause",
                                                                    "start_token": 41,
                                                                    "end_token": 50,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 42,
                                                                            "end_token": 42,
                                                                            "label": "key"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 44,
                                                                            "end_token": 44,
                                                                            "label": "value"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 46,
                                                                            "end_token": 50,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 46,
                                                                                    "end_token": 48,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 46,
                                                                                            "end_token": 46,
                                                                                            "label": "input_data"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 48,
                                                                                            "end_token": 48,
                                                                                            "label": "items"
                                                                                        }
                                                                                    ],
                                                                                    "label": "input_data.items"
                                                                                }
                                                                            ],
                                                                            "label": "input_data.items()"
                                                                        }
                                                                    ],
                                                                    "label": "for key, value in input_data.items()"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 51,
                                                                    "end_token": 124,
                                                                    "children": [
                                                                        {
                                                                            "type": "if_statement",
                                                                            "start_token": 53,
                                                                            "end_token": 60,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 54,
                                                                                    "end_token": 59,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 54,
                                                                                            "end_token": 54,
                                                                                            "label": "isinstance"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 55,
                                                                                            "end_token": 59,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 56,
                                                                                                    "label": "value"
                                                                                                },
                                                                                                {
                                                                                                    "type": "generic_type",
                                                                                                    "start_token": 58,
                                                                                                    "end_token": 58,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 58,
                                                                                                            "end_token": 58,
                                                                                                            "label": "dict"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "dict"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(value, dict)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "isinstance(value, dict)"
                                                                                },
                                                                                {
                                                                                    "type": "block",
                                                                                    "start_token": 60,
                                                                                    "end_token": 73,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "assignment",
                                                                                            "start_token": 62,
                                                                                            "end_token": 72,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 65,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 62,
                                                                                                            "end_token": 62,
                                                                                                            "label": "result"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 64,
                                                                                                            "end_token": 64,
                                                                                                            "label": "key"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "result[key]"
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 67,
                                                                                                    "end_token": 72,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 67,
                                                                                                            "end_token": 69,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 67,
                                                                                                                    "end_token": 67,
                                                                                                                    "label": "GraphModel"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 69,
                                                                                                                    "end_token": 69,
                                                                                                                    "label": "_hide_node_input_credentials"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "GraphModel._hide_node_input_credentials"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 70,
                                                                                                            "end_token": 71,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 71,
                                                                                                                    "end_token": 71,
                                                                                                                    "label": "value"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "(value"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "GraphModel._hide_node_input_credentials(value)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "result[key] = GraphModel._hide_node_input_credentials(value)"
                                                                                        }
                                                                                    ],
                                                                                    "label": ":\n                result[key] = GraphModel._hide_node_input_credentials(value)\n"
                                                                                }
                                                                            ],
                                                                            "label": "if isinstance(value, dict):"
                                                                        },
                                                                        {
                                                                            "type": "elif_clause",
                                                                            "start_token": 74,
                                                                            "end_token": 98,
                                                                            "children": [
                                                                                {
                                                                                    "type": "boolean_operator",
                                                                                    "start_token": 75,
                                                                                    "end_token": 97,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 75,
                                                                                            "end_token": 80,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 75,
                                                                                                    "end_token": 75,
                                                                                                    "label": "isinstance"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 76,
                                                                                                    "end_token": 79,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 77,
                                                                                                            "end_token": 77,
                                                                                                            "label": "value"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "generic_type",
                                                                                                            "start_token": 79,
                                                                                                            "end_token": 79,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 79,
                                                                                                                    "end_token": 79,
                                                                                                                    "label": "str"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "str"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(value, str"
                                                                                                }
                                                                                            ],
                                                                                            "label": "isinstance(value, str)"
                                                                                        },
                                                                                        {
                                                                                            "type": "generator_expression",
                                                                                            "start_token": 82,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "comparison_operator",
                                                                                                    "start_token": 85,
                                                                                                    "end_token": 87,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 85,
                                                                                                            "end_token": 85,
                                                                                                            "label": "sensitive_key"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 87,
                                                                                                            "end_token": 91,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 87,
                                                                                                                    "end_token": 89,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 87,
                                                                                                                            "end_token": 87,
                                                                                                                            "label": "key"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 89,
                                                                                                                            "end_token": 89,
                                                                                                                            "label": "lower"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "key.lower"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "key.lower()"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "sensitive_key in key"
                                                                                                },
                                                                                                {
                                                                                                    "type": "for_in_clause",
                                                                                                    "start_token": 92,
                                                                                                    "end_token": 95,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 93,
                                                                                                            "end_token": 93,
                                                                                                            "label": "sensitive_key"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 95,
                                                                                                            "end_token": 95,
                                                                                                            "label": "sensitive_keys"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "for sensitive_key in sensitive_keys"
                                                                                                }
                                                                                            ],
                                                                                            "label": "any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            )"
                                                                                },
                                                                                {
                                                                                    "type": "block",
                                                                                    "start_token": 98,
                                                                                    "end_token": 111,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "comment",
                                                                                            "start_token": 100,
                                                                                            "end_token": 109,
                                                                                            "label": "# Skip this key-value pair in the result"
                                                                                        },
                                                                                        {
                                                                                            "type": "continue_statement",
                                                                                            "start_token": 111,
                                                                                            "end_token": 111,
                                                                                            "label": "continue"
                                                                                        }
                                                                                    ],
                                                                                    "label": ":\n                # Skip this key-value pair in the result\n                continue"
                                                                                }
                                                                            ],
                                                                            "label": "elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):"
                                                                        },
                                                                        {
                                                                            "type": "else_clause",
                                                                            "start_token": 113,
                                                                            "end_token": 122,
                                                                            "children": [
                                                                                {
                                                                                    "type": "block",
                                                                                    "start_token": 114,
                                                                                    "end_token": 122,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "assignment",
                                                                                            "start_token": 116,
                                                                                            "end_token": 121,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "start_token": 116,
                                                                                                    "end_token": 119,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 116,
                                                                                                            "end_token": 116,
                                                                                                            "label": "result"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 118,
                                                                                                            "end_token": 118,
                                                                                                            "label": "key"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "result[key]"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 121,
                                                                                                    "end_token": 121,
                                                                                                    "label": "value"
                                                                                                }
                                                                                            ],
                                                                                            "label": "result[key] = value"
                                                                                        }
                                                                                    ],
                                                                                    "label": ":\n                result[key] = value\n"
                                                                                }
                                                                            ],
                                                                            "label": "else:\n                result[key] = value\n"
                                                                        }
                                                                    ],
                                                                    "label": ":\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result"
                                                                }
                                                            ],
                                                            "label": "for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 123,
                                                            "end_token": 124,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 124,
                                                                    "end_token": 124,
                                                                    "label": "result"
                                                                }
                                                            ],
                                                            "label": "return result"
                                                        }
                                                    ],
                                                    "label": "\n        sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]\n        result = {}\n        for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result"
                                                }
                                            ],
                                            "label": "def _hide_node_input_credentials(input_data: dict[str, Any]) -> dict[str, Any]:\n        sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]\n        result = {}\n        for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result"
                                        }
                                    ],
                                    "label": "def _hide_node_input_credentials(input_data: dict[str, Any]) -> dict[str, Any]:\n        sensitive_keys = [\"credentials\", \"api_key\", \"password\", \"token\", \"secret\"]\n        result = {}\n        for key, value in input_data.items():\n            if isinstance(value, dict):\n                result[key] = GraphModel._hide_node_input_credentials(value)\n            elif isinstance(value, str) and any(\n                sensitive_key in key.lower() for sensitive_key in sensitive_keys\n            ):\n                # Skip this key-value pair in the result\n                continue\n            else:\n                result[key] = value\n        return result"
                                }
                            ]
                        }
                    ],
                    "label": "class GraphModel(Graph):\n    user_id: str\n    nodes: list[NodeModel] = []  # type: ignore\n\n    @property\n\n"
                }
            ]
        }
    ],
    "label": ""
}