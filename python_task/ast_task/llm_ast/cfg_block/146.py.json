{
    "type": "module",
    "start_token": 0,
    "end_token": 1187,
    "children": [
        {
            "type": "import_statement",
            "start_token": 0,
            "end_token": 1,
            "children": [],
            "label": "import logging"
        },
        {
            "type": "import_statement",
            "start_token": 3,
            "end_token": 4,
            "children": [],
            "label": "import typing"
        },
        {
            "type": "import_statement",
            "start_token": 6,
            "end_token": 9,
            "children": [],
            "label": "import urllib.parse"
        },
        {
            "type": "import_statement",
            "start_token": 12,
            "end_token": 17,
            "children": [],
            "label": "import autogpt_libs.auth.depends"
        },
        {
            "type": "import_statement",
            "start_token": 19,
            "end_token": 24,
            "children": [],
            "label": "import autogpt_libs.auth.middleware"
        },
        {
            "type": "import_statement",
            "start_token": 26,
            "end_token": 27,
            "children": [],
            "label": "import fastapi"
        },
        {
            "type": "import_statement",
            "start_token": 29,
            "end_token": 32,
            "children": [],
            "label": "import fastapi.responses"
        },
        {
            "type": "import_statement",
            "start_token": 35,
            "end_token": 40,
            "children": [],
            "label": "import backend.data.graph"
        },
        {
            "type": "import_statement",
            "start_token": 42,
            "end_token": 51,
            "children": [],
            "label": "import backend.server.v2.store.db"
        },
        {
            "type": "import_statement",
            "start_token": 53,
            "end_token": 62,
            "children": [],
            "label": "import backend.server.v2.store.image_gen"
        },
        {
            "type": "import_statement",
            "start_token": 64,
            "end_token": 73,
            "children": [],
            "label": "import backend.server.v2.store.media"
        },
        {
            "type": "import_statement",
            "start_token": 75,
            "end_token": 84,
            "children": [],
            "label": "import backend.server.v2.store.model"
        },
        {
            "type": "assignment",
            "start_token": 87,
            "end_token": 94,
            "children": [
                {
                    "type": "identifier",
                    "start_token": 87,
                    "end_token": 87,
                    "children": [],
                    "label": "logger"
                },
                {
                    "type": "call",
                    "start_token": 89,
                    "end_token": 94,
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 89,
                            "end_token": 91,
                            "children": [],
                            "label": "logging.getLogger"
                        },
                        {
                            "type": "argument_list",
                            "start_token": 92,
                            "end_token": 94,
                            "children": [],
                            "label": "(__name__)"
                        }
                    ],
                    "label": "logging.getLogger(__name__)"
                }
            ],
            "label": "logger = logging.getLogger(__name__)"
        },
        {
            "type": "assignment",
            "start_token": 97,
            "end_token": 103,
            "children": [
                {
                    "type": "identifier",
                    "start_token": 97,
                    "end_token": 97,
                    "children": [],
                    "label": "router"
                },
                {
                    "type": "call",
                    "start_token": 99,
                    "end_token": 103,
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 99,
                            "end_token": 101,
                            "children": [],
                            "label": "fastapi.APIRouter"
                        },
                        {
                            "type": "argument_list",
                            "start_token": 102,
                            "end_token": 103,
                            "children": [],
                            "label": "()"
                        }
                    ],
                    "label": "fastapi.APIRouter()"
                }
            ],
            "label": "router = fastapi.APIRouter()"
        },
        {
            "type": "decorated_definition",
            "start_token": 233,
            "end_token": 266,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 233,
                    "end_token": 266,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 233,
                            "end_token": 266,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 234,
                                    "end_token": 236,
                                    "children": [],
                                    "label": "router.get"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 237,
                                    "end_token": 266,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 239,
                                            "end_token": 239,
                                            "children": [],
                                            "label": "\"/profile\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 242,
                                            "end_token": 248,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 245,
                                                    "end_token": 248,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 245,
                                                            "end_token": 245,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 246,
                                                            "end_token": 246,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"private\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"private\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 251,
                                            "end_token": 263,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 253,
                                                    "end_token": 263,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.ProfileDetails"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.ProfileDetails"
                                        }
                                    ],
                                    "label": "(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)"
                                }
                            ],
                            "label": "@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)"
                        }
                    ],
                    "label": "@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)"
                }
            ],
            "label": "@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 270,
            "end_token": 321,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 270,
                    "end_token": 321,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 271,
                            "end_token": 321,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 272,
                                    "end_token": 273,
                                    "children": [],
                                    "label": ".post"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 274,
                                    "end_token": 321,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 276,
                                            "end_token": 276,
                                            "children": [],
                                            "label": "\"/profile\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 279,
                                            "end_token": 285,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 282,
                                                    "end_token": 285,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 282,
                                                            "end_token": 282,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 283,
                                                            "end_token": 283,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"private\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"private\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 288,
                                            "end_token": 303,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 291,
                                                    "end_token": 303,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 292,
                                                            "end_token": 302,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 293,
                                                                    "end_token": 301,
                                                                    "children": [],
                                                                    "label": "Depends(autogpt_libs.auth.middleware.auth_middleware"
                                                                }
                                                            ],
                                                            "label": ".Depends(autogpt_libs.auth.middleware.auth_middleware)"
                                                        }
                                                    ],
                                                    "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                                }
                                            ],
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 306,
                                            "end_token": 318,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 308,
                                                    "end_token": 318,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.CreatorDetails"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.CreatorDetails"
                                        }
                                    ],
                                    "label": "(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
                                }
                            ],
                            "label": "router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
                        }
                    ],
                    "label": "@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
                }
            ],
            "label": "@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 453,
            "end_token": 486,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 453,
                    "end_token": 486,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 454,
                            "end_token": 486,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 455,
                                    "end_token": 456,
                                    "children": [],
                                    "label": ".get"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 457,
                                    "end_token": 486,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 459,
                                            "end_token": 459,
                                            "children": [],
                                            "label": "\"/agents\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 462,
                                            "end_token": 468,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 465,
                                                    "end_token": 468,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 465,
                                                            "end_token": 465,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 466,
                                                            "end_token": 466,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"public\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"public\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 471,
                                            "end_token": 483,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 473,
                                                    "end_token": 483,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.StoreAgentsResponse"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.StoreAgentsResponse"
                                        }
                                    ],
                                    "label": "(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)"
                                }
                            ],
                            "label": "router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)"
                        }
                    ],
                    "label": "@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)"
                }
            ],
            "label": "@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 490,
            "end_token": 523,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 490,
                    "end_token": 523,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 491,
                            "end_token": 523,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 492,
                                    "end_token": 493,
                                    "children": [],
                                    "label": ".get"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 494,
                                    "end_token": 523,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 496,
                                            "end_token": 496,
                                            "children": [],
                                            "label": "\"/agents/{username}/{agent_name}\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 499,
                                            "end_token": 505,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 502,
                                                    "end_token": 505,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 502,
                                                            "end_token": 502,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 503,
                                                            "end_token": 503,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"public\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"public\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 508,
                                            "end_token": 520,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 510,
                                                    "end_token": 520,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.StoreAgentDetails"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.StoreAgentDetails"
                                        }
                                    ],
                                    "label": "(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)"
                                }
                            ],
                            "label": "router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)"
                        }
                    ],
                    "label": "@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)"
                }
            ],
            "label": "@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 527,
            "end_token": 576,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 527,
                    "end_token": 576,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 528,
                            "end_token": 576,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 529,
                                    "end_token": 530,
                                    "children": [],
                                    "label": ".post"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 531,
                                    "end_token": 576,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 533,
                                            "end_token": 533,
                                            "children": [],
                                            "label": "\"/agents/{username}/{agent_name}/review\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 536,
                                            "end_token": 540,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 539,
                                                    "end_token": 540,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 539,
                                                            "end_token": 539,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        }
                                                    ],
                                                    "label": "\"store\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 543,
                                            "end_token": 558,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 546,
                                                    "end_token": 558,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 547,
                                                            "end_token": 557,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 548,
                                                                    "end_token": 556,
                                                                    "children": [],
                                                                    "label": "Depends(autogpt_libs.auth.middleware.auth_middleware"
                                                                }
                                                            ],
                                                            "label": ".Depends(autogpt_libs.auth.middleware.auth_middleware)"
                                                        }
                                                    ],
                                                    "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                                }
                                            ],
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 561,
                                            "end_token": 573,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 563,
                                                    "end_token": 573,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.StoreReview"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.StoreReview"
                                        }
                                    ],
                                    "label": "(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)"
                                }
                            ],
                            "label": "router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)"
                        }
                    ],
                    "label": "@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)"
                }
            ],
            "label": "@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 705,
            "end_token": 738,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 705,
                    "end_token": 738,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 706,
                            "end_token": 738,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 707,
                                    "end_token": 708,
                                    "children": [],
                                    "label": ".get"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 709,
                                    "end_token": 738,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 711,
                                            "end_token": 711,
                                            "children": [],
                                            "label": "\"/creators\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 714,
                                            "end_token": 720,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 717,
                                                    "end_token": 720,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 717,
                                                            "end_token": 717,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 718,
                                                            "end_token": 718,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"public\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"public\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 723,
                                            "end_token": 735,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 725,
                                                    "end_token": 735,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.CreatorsResponse"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.CreatorsResponse"
                                        }
                                    ],
                                    "label": "(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)"
                                }
                            ],
                            "label": "router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)"
                        }
                    ],
                    "label": "@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)"
                }
            ],
            "label": "@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 742,
            "end_token": 775,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 742,
                    "end_token": 775,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 743,
                            "end_token": 775,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 744,
                                    "end_token": 745,
                                    "children": [],
                                    "label": ".get"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 746,
                                    "end_token": 775,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 748,
                                            "end_token": 748,
                                            "children": [],
                                            "label": "\"/creator/{username}\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 751,
                                            "end_token": 757,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 754,
                                                    "end_token": 757,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 754,
                                                            "end_token": 754,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 755,
                                                            "end_token": 755,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"public\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"public\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 760,
                                            "end_token": 772,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 762,
                                                    "end_token": 772,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.CreatorDetails"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.CreatorDetails"
                                        }
                                    ],
                                    "label": "(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
                                }
                            ],
                            "label": "router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
                        }
                    ],
                    "label": "@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
                }
            ],
            "label": "@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 900,
            "end_token": 951,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 900,
                    "end_token": 951,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 901,
                            "end_token": 951,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 902,
                                    "end_token": 903,
                                    "children": [],
                                    "label": ".get"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 904,
                                    "end_token": 951,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 906,
                                            "end_token": 906,
                                            "children": [],
                                            "label": "\"/myagents\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 909,
                                            "end_token": 915,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 912,
                                                    "end_token": 915,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 912,
                                                            "end_token": 912,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 913,
                                                            "end_token": 913,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"private\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"private\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 918,
                                            "end_token": 933,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 921,
                                                    "end_token": 933,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 922,
                                                            "end_token": 932,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 923,
                                                                    "end_token": 931,
                                                                    "children": [],
                                                                    "label": "Depends(autogpt_libs.auth.middleware.auth_middleware"
                                                                }
                                                            ],
                                                            "label": ".Depends(autogpt_libs.auth.middleware.auth_middleware)"
                                                        }
                                                    ],
                                                    "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                                }
                                            ],
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 936,
                                            "end_token": 948,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 938,
                                                    "end_token": 948,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.MyAgentsResponse"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.MyAgentsResponse"
                                        }
                                    ],
                                    "label": "(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)"
                                }
                            ],
                            "label": "router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)"
                        }
                    ],
                    "label": "@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)"
                }
            ],
            "label": "@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 1000,
            "end_token": 1051,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 1000,
                    "end_token": 1051,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 1001,
                            "end_token": 1051,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1002,
                                    "end_token": 1003,
                                    "children": [],
                                    "label": ".get"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 1004,
                                    "end_token": 1051,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 1006,
                                            "end_token": 1006,
                                            "children": [],
                                            "label": "\"/submissions\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 1009,
                                            "end_token": 1015,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 1012,
                                                    "end_token": 1015,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 1012,
                                                            "end_token": 1012,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1013,
                                                            "end_token": 1013,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"private\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"private\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 1018,
                                            "end_token": 1033,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 1021,
                                                    "end_token": 1033,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 1022,
                                                            "end_token": 1032,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 1023,
                                                                    "end_token": 1031,
                                                                    "children": [],
                                                                    "label": "Depends(autogpt_libs.auth.middleware.auth_middleware"
                                                                }
                                                            ],
                                                            "label": ".Depends(autogpt_libs.auth.middleware.auth_middleware)"
                                                        }
                                                    ],
                                                    "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                                }
                                            ],
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 1036,
                                            "end_token": 1048,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 1038,
                                                    "end_token": 1048,
                                                    "children": [],
                                                    "label": "backend.server.v2.store.model.StoreSubmissionsResponse"
                                                }
                                            ],
                                            "label": "response_model=backend.server.v2.store.model.StoreSubmissionsResponse"
                                        }
                                    ],
                                    "label": "(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)"
                                }
                            ],
                            "label": "router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)"
                        }
                    ],
                    "label": "@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)"
                }
            ],
            "label": "@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)"
        },
        {
            "type": "decorated_definition",
            "start_token": 1150,
            "end_token": 1186,
            "children": [
                {
                    "type": "decorator",
                    "start_token": 1150,
                    "end_token": 1186,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 1151,
                            "end_token": 1186,
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1152,
                                    "end_token": 1153,
                                    "children": [],
                                    "label": ".post"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 1154,
                                    "end_token": 1186,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 1156,
                                            "end_token": 1156,
                                            "children": [],
                                            "label": "\"/submissions/generate_image\""
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 1159,
                                            "end_token": 1165,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 1162,
                                                    "end_token": 1165,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 1162,
                                                            "end_token": 1162,
                                                            "children": [],
                                                            "label": "\"store\""
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1163,
                                                            "end_token": 1163,
                                                            "children": [],
                                                            "label": ","
                                                        }
                                                    ],
                                                    "label": "\"store\", \"private\"]"
                                                }
                                            ],
                                            "label": "tags=[\"store\", \"private\"]"
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "start_token": 1168,
                                            "end_token": 1183,
                                            "children": [
                                                {
                                                    "type": "list",
                                                    "start_token": 1171,
                                                    "end_token": 1183,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 1172,
                                                            "end_token": 1182,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 1173,
                                                                    "end_token": 1181,
                                                                    "children": [],
                                                                    "label": "Depends(autogpt_libs.auth.middleware.auth_middleware"
                                                                }
                                                            ],
                                                            "label": ".Depends(autogpt_libs.auth.middleware.auth_middleware)"
                                                        }
                                                    ],
                                                    "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                                }
                                            ],
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]"
                                        }
                                    ],
                                    "label": "(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)"
                                }
                            ],
                            "label": "router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)"
                        }
                    ],
                    "label": "@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)"
                }
            ],
            "label": "@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)"
        },
        {
            "type": "function_placeholder",
            "name": "get_profile",
            "start_line": 31,
            "end_line": 47,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 93,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 93,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "async"
                                },
                                {
                                    "type": "function_definition",
                                    "start_token": 1,
                                    "end_token": 93,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "children": [],
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "children": [],
                                            "label": "get_profile"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 29,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 27,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 7,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 7,
                                                                    "end_token": 9,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 7,
                                                                            "end_token": 7,
                                                                            "children": [],
                                                                            "label": "typing"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 9,
                                                                            "end_token": 9,
                                                                            "children": [],
                                                                            "label": "Annotated"
                                                                        }
                                                                    ],
                                                                    "label": "typing.Annotated"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 10,
                                                                    "end_token": 27,
                                                                    "children": [
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 12,
                                                                            "end_token": 12,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 14,
                                                                            "end_token": 25,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 14,
                                                                                    "end_token": 24,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 14,
                                                                                            "end_token": 14,
                                                                                            "children": [],
                                                                                            "label": "fastapi"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 16,
                                                                                            "end_token": 16,
                                                                                            "children": [],
                                                                                            "label": "Depends"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 18,
                                                                                            "end_token": 18,
                                                                                            "children": [],
                                                                                            "label": "autogpt_libs"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 20,
                                                                                            "end_token": 20,
                                                                                            "children": [],
                                                                                            "label": "auth"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 22,
                                                                                            "end_token": 22,
                                                                                            "children": [],
                                                                                            "label": "depends"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 24,
                                                                                            "end_token": 24,
                                                                                            "children": [],
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                                }
                                                            ],
                                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                }
                                            ],
                                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n)"
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 32,
                                            "end_token": 34,
                                            "children": [],
                                            "label": "\"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\""
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 35,
                                            "end_token": 93,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 36,
                                                    "end_token": 93,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 39,
                                                            "end_token": 59,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 39,
                                                                    "end_token": 55,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 39,
                                                                            "end_token": 39,
                                                                            "children": [],
                                                                            "label": "profile"
                                                                        },
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 41,
                                                                            "end_token": 55,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 42,
                                                                                    "end_token": 55,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 42,
                                                                                            "end_token": 52,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 42,
                                                                                                    "end_token": 42,
                                                                                                    "children": [],
                                                                                                    "label": "backend"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 44,
                                                                                                    "end_token": 44,
                                                                                                    "children": [],
                                                                                                    "label": "server"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 46,
                                                                                                    "end_token": 46,
                                                                                                    "children": [],
                                                                                                    "label": "v2"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 48,
                                                                                                    "end_token": 48,
                                                                                                    "children": [],
                                                                                                    "label": "store"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 50,
                                                                                                    "end_token": 50,
                                                                                                    "children": [],
                                                                                                    "label": "db"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 52,
                                                                                                    "end_token": 52,
                                                                                                    "children": [],
                                                                                                    "label": "get_user_profile"
                                                                                                }
                                                                                            ],
                                                                                            "label": "backend.server.v2.store.db.get_user_profile"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 53,
                                                                                            "end_token": 55,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 54,
                                                                                                    "end_token": 54,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.server.v2.store.db.get_user_profile(user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "await backend.server.v2.store.db.get_user_profile(user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 57,
                                                                    "end_token": 58,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 58,
                                                                            "end_token": 58,
                                                                            "children": [],
                                                                            "label": "profile"
                                                                        }
                                                                    ],
                                                                    "label": "return profile"
                                                                }
                                                            ],
                                                            "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 60,
                                                            "end_token": 93,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 61,
                                                                    "end_token": 61,
                                                                    "children": [],
                                                                    "label": "Exception"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 63,
                                                                    "end_token": 93,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 64,
                                                                            "end_token": 69,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 64,
                                                                                    "end_token": 66,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 64,
                                                                                            "end_token": 64,
                                                                                            "children": [],
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 66,
                                                                                            "end_token": 66,
                                                                                            "children": [],
                                                                                            "label": "exception"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 67,
                                                                                    "end_token": 69,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 68,
                                                                                            "end_token": 68,
                                                                                            "children": [],
                                                                                            "label": "\"Exception occurred whilst getting user profile\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\"Exception occurred whilst getting user profile\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occurred whilst getting user profile\")"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 71,
                                                                            "end_token": 93,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 72,
                                                                                    "end_token": 93,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 72,
                                                                                            "end_token": 76,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 72,
                                                                                                    "children": [],
                                                                                                    "label": "fastapi"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 74,
                                                                                                    "end_token": 74,
                                                                                                    "children": [],
                                                                                                    "label": "responses"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 76,
                                                                                                    "end_token": 76,
                                                                                                    "children": [],
                                                                                                    "label": "JSONResponse"
                                                                                                }
                                                                                            ],
                                                                                            "label": "fastapi.responses.JSONResponse"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 77,
                                                                                            "end_token": 93,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 79,
                                                                                                    "end_token": 81,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 79,
                                                                                                            "end_token": 79,
                                                                                                            "children": [],
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 81,
                                                                                                            "end_token": 81,
                                                                                                            "children": [],
                                                                                                            "label": "500"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=500"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 83,
                                                                                                    "end_token": 91,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 84,
                                                                                                            "end_token": 84,
                                                                                                            "children": [],
                                                                                                            "label": "content"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "dictionary",
                                                                                                            "start_token": 86,
                                                                                                            "end_token": 91,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 87,
                                                                                                                    "end_token": 89,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 87,
                                                                                                                            "end_token": 87,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"detail\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 89,
                                                                                                                            "end_token": 89,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"An error occurred while retrieving the user profile\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the user profile\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the user profile\"},"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                                                }
                                                            ],
                                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                                }
                                            ],
                                            "label": "\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                        }
                                    ],
                                    "label": "def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                                }
                            ],
                            "label": "async def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                        }
                    ],
                    "label": "async def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "update_or_create_profile",
            "start_line": 56,
            "end_line": 85,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 117,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 117,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 46,
                                    "children": [
                                        {
                                            "type": "async",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "children": [],
                                            "label": "async"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "children": [],
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "children": [],
                                            "label": "update_or_create_profile"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 18,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "profile"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 17,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 7,
                                                                    "end_token": 17,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 7,
                                                                            "end_token": 7,
                                                                            "children": [],
                                                                            "label": "backend"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 9,
                                                                            "end_token": 9,
                                                                            "children": [],
                                                                            "label": "server"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "children": [],
                                                                            "label": "v2"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "children": [],
                                                                            "label": "store"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 15,
                                                                            "end_token": 15,
                                                                            "children": [],
                                                                            "label": "model"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 17,
                                                                            "end_token": 17,
                                                                            "children": [],
                                                                            "label": "Profile"
                                                                        }
                                                                    ],
                                                                    "label": "backend.server.v2.store.model.Profile"
                                                                }
                                                            ],
                                                            "label": ": backend.server.v2.store.model.Profile"
                                                        }
                                                    ],
                                                    "label": "profile: backend.server.v2.store.model.Profile,"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 20,
                                                    "end_token": 43,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 20,
                                                            "end_token": 20,
                                                            "children": [],
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 22,
                                                            "end_token": 42,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 22,
                                                                    "end_token": 24,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 22,
                                                                            "end_token": 22,
                                                                            "children": [],
                                                                            "label": "typing"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 24,
                                                                            "end_token": 24,
                                                                            "children": [],
                                                                            "label": "Annotated"
                                                                        }
                                                                    ],
                                                                    "label": "typing.Annotated"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 25,
                                                                    "end_token": 42,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 27,
                                                                            "end_token": 27,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 29,
                                                                            "end_token": 40,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 29,
                                                                                    "end_token": 39,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 29,
                                                                                            "end_token": 29,
                                                                                            "children": [],
                                                                                            "label": "fastapi"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 31,
                                                                                            "end_token": 31,
                                                                                            "children": [],
                                                                                            "label": "Depends"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 33,
                                                                                            "end_token": 33,
                                                                                            "children": [],
                                                                                            "label": "autogpt_libs"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "children": [],
                                                                                            "label": "auth"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 37,
                                                                                            "end_token": 37,
                                                                                            "children": [],
                                                                                            "label": "depends"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 39,
                                                                                            "end_token": 39,
                                                                                            "children": [],
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                                }
                                                            ],
                                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],"
                                                }
                                            ],
                                            "label": "(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)"
                                        }
                                    ],
                                    "label": "async def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):"
                                },
                                {
                                    "type": "block",
                                    "start_token": 47,
                                    "end_token": 117,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 48,
                                            "end_token": 50,
                                            "children": [],
                                            "label": "\"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\""
                                        },
                                        {
                                            "type": "try_statement",
                                            "start_token": 52,
                                            "end_token": 117,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 53,
                                                    "end_token": 83,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 55,
                                                            "end_token": 79,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 55,
                                                                    "end_token": 55,
                                                                    "children": [],
                                                                    "label": "updated_profile"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 57,
                                                                    "end_token": 79,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 58,
                                                                            "end_token": 79,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 58,
                                                                                    "end_token": 68,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 58,
                                                                                            "end_token": 58,
                                                                                            "children": [],
                                                                                            "label": "backend"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 60,
                                                                                            "end_token": 60,
                                                                                            "children": [],
                                                                                            "label": "server"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 62,
                                                                                            "end_token": 62,
                                                                                            "children": [],
                                                                                            "label": "v2"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 64,
                                                                                            "end_token": 64,
                                                                                            "children": [],
                                                                                            "label": "store"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 66,
                                                                                            "end_token": 66,
                                                                                            "children": [],
                                                                                            "label": "db"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 68,
                                                                                            "end_token": 68,
                                                                                            "children": [],
                                                                                            "label": "update_or_create_profile"
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.server.v2.store.db.update_or_create_profile"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 69,
                                                                                    "end_token": 79,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 71,
                                                                                            "end_token": 74,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 71,
                                                                                                    "end_token": 71,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 73,
                                                                                                    "end_token": 73,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id,"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 75,
                                                                                            "end_token": 77,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 75,
                                                                                                    "end_token": 75,
                                                                                                    "children": [],
                                                                                                    "label": "profile"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 77,
                                                                                                    "end_token": 77,
                                                                                                    "children": [],
                                                                                                    "label": "profile"
                                                                                                }
                                                                                            ],
                                                                                            "label": "profile=profile"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            user_id=user_id, profile=profile\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )"
                                                                }
                                                            ],
                                                            "label": "updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 81,
                                                            "end_token": 82,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 82,
                                                                    "end_token": 82,
                                                                    "children": [],
                                                                    "label": "updated_profile"
                                                                }
                                                            ],
                                                            "label": "return updated_profile"
                                                        }
                                                    ],
                                                    "label": ":\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 84,
                                                    "end_token": 117,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 85,
                                                            "end_token": 85,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 85,
                                                                    "end_token": 85,
                                                                    "children": [],
                                                                    "label": "Exception"
                                                                }
                                                            ],
                                                            "label": "Exception"
                                                        },
                                                        {
                                                            "type": "block",
                                                            "start_token": 86,
                                                            "end_token": 117,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "start_token": 88,
                                                                    "end_token": 93,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 88,
                                                                            "end_token": 93,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 88,
                                                                                    "end_token": 90,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 88,
                                                                                            "end_token": 88,
                                                                                            "children": [],
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 90,
                                                                                            "end_token": 90,
                                                                                            "children": [],
                                                                                            "label": "exception"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 91,
                                                                                    "end_token": 93,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 92,
                                                                                            "end_token": 92,
                                                                                            "children": [],
                                                                                            "label": "\"Exception occurred whilst updating profile\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\"Exception occurred whilst updating profile\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occurred whilst updating profile\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.exception(\"Exception occurred whilst updating profile\")"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 95,
                                                                    "end_token": 117,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 96,
                                                                            "end_token": 117,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 96,
                                                                                    "end_token": 100,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 96,
                                                                                            "end_token": 96,
                                                                                            "children": [],
                                                                                            "label": "fastapi"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 98,
                                                                                            "end_token": 98,
                                                                                            "children": [],
                                                                                            "label": "responses"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 100,
                                                                                            "end_token": 100,
                                                                                            "children": [],
                                                                                            "label": "JSONResponse"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 101,
                                                                                    "end_token": 117,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 103,
                                                                                            "end_token": 105,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 103,
                                                                                                    "end_token": 103,
                                                                                                    "children": [],
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 105,
                                                                                                    "end_token": 105,
                                                                                                    "children": [],
                                                                                                    "label": "500"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=500"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 108,
                                                                                            "end_token": 114,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 108,
                                                                                                    "end_token": 108,
                                                                                                    "children": [],
                                                                                                    "label": "content"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 110,
                                                                                                    "end_token": 114,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 111,
                                                                                                            "end_token": 113,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 111,
                                                                                                                    "end_token": 111,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"detail\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 113,
                                                                                                                    "end_token": 113,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"An error occurred while updating the user profile\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"detail\": \"An error occurred while updating the user profile\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\"detail\": \"An error occurred while updating the user profile\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "content={\"detail\": \"An error occurred while updating the user profile\"}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                                                                }
                                                            ],
                                                            "label": ":\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                                                }
                                            ],
                                            "label": "try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                                        }
                                    ],
                                    "label": "\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                                }
                            ],
                            "label": "async def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                        }
                    ],
                    "label": "async def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_agents",
            "start_line": 98,
            "end_line": 159,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 211,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 211,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 211,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "get_agents"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 62,
                                            "children": [
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 5,
                                                    "end_token": 10,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 5,
                                                            "end_token": 7,
                                                            "label": "featured: bool"
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "label": "False"
                                                        }
                                                    ],
                                                    "label": "featured: bool = False,"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 12,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "union_type",
                                                            "start_token": 12,
                                                            "end_token": 16,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 14,
                                                                    "end_token": 14,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 16,
                                                                    "end_token": 16,
                                                                    "label": "None"
                                                                }
                                                            ],
                                                            "label": "creator: str | None"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 18,
                                                            "end_token": 18,
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "creator: str | None = None,"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 21,
                                                    "end_token": 28,
                                                    "children": [
                                                        {
                                                            "type": "union_type",
                                                            "start_token": 21,
                                                            "end_token": 25,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 23,
                                                                    "end_token": 23,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 25,
                                                                    "end_token": 25,
                                                                    "label": "None"
                                                                }
                                                            ],
                                                            "label": "sorted_by: str | None"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 27,
                                                            "end_token": 27,
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "sorted_by: str | None = None,"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 30,
                                                    "end_token": 37,
                                                    "children": [
                                                        {
                                                            "type": "union_type",
                                                            "start_token": 30,
                                                            "end_token": 34,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 32,
                                                                    "end_token": 32,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 34,
                                                                    "end_token": 34,
                                                                    "label": "None"
                                                                }
                                                            ],
                                                            "label": "search_query: str | None"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 36,
                                                            "end_token": 36,
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "search_query: str | None = None,"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 39,
                                                    "end_token": 46,
                                                    "children": [
                                                        {
                                                            "type": "union_type",
                                                            "start_token": 39,
                                                            "end_token": 43,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 41,
                                                                    "end_token": 41,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 43,
                                                                    "end_token": 43,
                                                                    "label": "None"
                                                                }
                                                            ],
                                                            "label": "category: str | None"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 45,
                                                            "end_token": 45,
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "category: str | None = None,"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 48,
                                                    "end_token": 53,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 48,
                                                            "end_token": 50,
                                                            "label": "page: int"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 52,
                                                            "end_token": 52,
                                                            "label": "1"
                                                        }
                                                    ],
                                                    "label": "page: int = 1,"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 55,
                                                    "end_token": 60,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 55,
                                                            "end_token": 57,
                                                            "label": "page_size: int"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 59,
                                                            "end_token": 59,
                                                            "label": "20"
                                                        }
                                                    ],
                                                    "label": "page_size: int = 20,"
                                                }
                                            ],
                                            "label": "(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n)"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 64,
                                            "end_token": 211,
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 65,
                                                    "end_token": 71,
                                                    "label": "\"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\""
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 73,
                                                    "end_token": 93,
                                                    "children": [
                                                        {
                                                            "type": "comparison_operator",
                                                            "start_token": 74,
                                                            "end_token": 76,
                                                            "label": "page < 1"
                                                        },
                                                        {
                                                            "type": "block",
                                                            "start_token": 77,
                                                            "end_token": 93,
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 79,
                                                                    "end_token": 93,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 80,
                                                                            "end_token": 93,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 80,
                                                                                    "end_token": 82,
                                                                                    "label": "fastapi.HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 83,
                                                                                    "end_token": 93,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 85,
                                                                                            "end_token": 88,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 85,
                                                                                                    "end_token": 85,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 87,
                                                                                                    "end_token": 87,
                                                                                                    "label": "422"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=422,"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 89,
                                                                                            "end_token": 92,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 89,
                                                                                                    "end_token": 89,
                                                                                                    "label": "detail"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 91,
                                                                                                    "end_token": 91,
                                                                                                    "label": "\"Page must be greater than 0\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "detail=\"Page must be greater than 0\"\n"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                                }
                                                            ],
                                                            "label": ":\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                        }
                                                    ],
                                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 96,
                                                    "end_token": 116,
                                                    "children": [
                                                        {
                                                            "type": "comparison_operator",
                                                            "start_token": 97,
                                                            "end_token": 99,
                                                            "label": "page_size < 1"
                                                        },
                                                        {
                                                            "type": "block",
                                                            "start_token": 100,
                                                            "end_token": 116,
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 102,
                                                                    "end_token": 116,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 103,
                                                                            "end_token": 116,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 103,
                                                                                    "end_token": 105,
                                                                                    "label": "fastapi.HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 106,
                                                                                    "end_token": 116,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 108,
                                                                                            "end_token": 111,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 108,
                                                                                                    "end_token": 108,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 110,
                                                                                                    "end_token": 110,
                                                                                                    "label": "422"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=422,"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 112,
                                                                                            "end_token": 115,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 112,
                                                                                                    "end_token": 112,
                                                                                                    "label": "detail"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 114,
                                                                                                    "end_token": 114,
                                                                                                    "label": "\"Page size must be greater than 0\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "detail=\"Page size must be greater than 0\"\n"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                                }
                                                            ],
                                                            "label": ":\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                        }
                                                    ],
                                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                },
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 119,
                                                    "end_token": 211,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 121,
                                                            "end_token": 176,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 122,
                                                                    "end_token": 171,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 122,
                                                                            "end_token": 122,
                                                                            "label": "agents"
                                                                        },
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 124,
                                                                            "end_token": 173,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 124,
                                                                                    "end_token": 173,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 125,
                                                                                            "end_token": 135,
                                                                                            "label": "backend.server.v2.store.db.get_store_agents"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 136,
                                                                                            "end_token": 173,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 138,
                                                                                                    "end_token": 141,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 138,
                                                                                                            "end_token": 138,
                                                                                                            "label": "featured"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 140,
                                                                                                            "end_token": 140,
                                                                                                            "label": "featured"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "featured=featured,"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 143,
                                                                                                    "end_token": 146,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 143,
                                                                                                            "end_token": 143,
                                                                                                            "label": "creator"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 145,
                                                                                                            "end_token": 145,
                                                                                                            "label": "creator"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "creator=creator,"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 148,
                                                                                                    "end_token": 151,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 148,
                                                                                                            "end_token": 148,
                                                                                                            "label": "sorted_by"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 150,
                                                                                                            "end_token": 150,
                                                                                                            "label": "sorted_by"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "sorted_by=sorted_by,"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 154,
                                                                                                    "end_token": 157,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 154,
                                                                                                            "end_token": 154,
                                                                                                            "label": "="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 156,
                                                                                                            "end_token": 156,
                                                                                                            "label": ","
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "=search_query,\n"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 159,
                                                                                                    "end_token": 162,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 159,
                                                                                                            "end_token": 159,
                                                                                                            "label": "="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 161,
                                                                                                            "end_token": 161,
                                                                                                            "label": ","
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "=category,\n"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 164,
                                                                                                    "end_token": 167,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 164,
                                                                                                            "end_token": 164,
                                                                                                            "label": "="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 166,
                                                                                                            "end_token": 166,
                                                                                                            "label": ","
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "=page,\n"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 169,
                                                                                                    "end_token": 172,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 169,
                                                                                                            "end_token": 169,
                                                                                                            "label": "="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 171,
                                                                                                            "end_token": 171,
                                                                                                            "label": ","
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "=page_size,\n"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 175,
                                                                    "end_token": 176,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 176,
                                                                            "end_token": 176,
                                                                            "label": "agents"
                                                                        }
                                                                    ],
                                                                    "label": "return agents"
                                                                }
                                                            ],
                                                            "label": "\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 178,
                                                            "end_token": 211,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 180,
                                                                    "end_token": 211,
                                                                    "children": [
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "start_token": 182,
                                                                            "end_token": 187,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 182,
                                                                                    "end_token": 187,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 182,
                                                                                            "end_token": 184,
                                                                                            "label": "logger.exception"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 185,
                                                                                            "end_token": 187,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 186,
                                                                                                    "end_token": 186,
                                                                                                    "label": "\"Exception occured whilst getting store agents\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\"Exception occured whilst getting store agents\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.exception(\"Exception occured whilst getting store agents\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occured whilst getting store agents\")"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 189,
                                                                            "end_token": 211,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 190,
                                                                                    "end_token": 211,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 190,
                                                                                            "end_token": 193,
                                                                                            "label": "fastapi.responses."
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 194,
                                                                                            "end_token": 211,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 197,
                                                                                                    "end_token": 199,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 197,
                                                                                                            "end_token": 197,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 199,
                                                                                                            "end_token": 199,
                                                                                                            "label": "500"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=500"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 202,
                                                                                                    "end_token": 208,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 202,
                                                                                                            "end_token": 202,
                                                                                                            "label": "content"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "dictionary",
                                                                                                            "start_token": 204,
                                                                                                            "end_token": 208,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 205,
                                                                                                                    "end_token": 207,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 205,
                                                                                                                            "end_token": 205,
                                                                                                                            "label": "\"detail\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 207,
                                                                                                                            "end_token": 207,
                                                                                                                            "label": "\"An error occurred while retrieving the store agents\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store agents\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the store agents\"}"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the store agents\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": ":\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                                                }
                                                            ],
                                                            "label": "except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                                }
                                            ],
                                            "label": "\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                        }
                                    ],
                                    "label": "async def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                                }
                            ],
                            "label": "async def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                        }
                    ],
                    "label": "async def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_agent",
            "start_line": 167,
            "end_line": 188,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 129,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 129,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "get_agent"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 11,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "username"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "username: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 8,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "children": [],
                                                    "label": "agent_name"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "agent_name: str"
                                        }
                                    ],
                                    "label": "(username: str, agent_name: str)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 13,
                                    "end_token": 129,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 14,
                                            "end_token": 16,
                                            "children": [
                                                {
                                                    "type": "string_content",
                                                    "start_token": 15,
                                                    "end_token": 15,
                                                    "children": [],
                                                    "label": "\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \""
                                                }
                                            ],
                                            "label": "\"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\""
                                        },
                                        {
                                            "type": "try_statement",
                                            "start_token": 18,
                                            "end_token": 129,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 20,
                                                    "end_token": 93,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 21,
                                                            "end_token": 34,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 21,
                                                                    "end_token": 21,
                                                                    "children": [],
                                                                    "label": "username"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 23,
                                                                    "end_token": 34,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 23,
                                                                            "end_token": 27,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 23,
                                                                                    "end_token": 25,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 23,
                                                                                            "end_token": 23,
                                                                                            "children": [],
                                                                                            "label": "urllib"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 25,
                                                                                            "end_token": 25,
                                                                                            "children": [],
                                                                                            "label": "parse"
                                                                                        }
                                                                                    ],
                                                                                    "label": "urllib.parse"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 27,
                                                                                    "end_token": 27,
                                                                                    "children": [],
                                                                                    "label": "unquote"
                                                                                }
                                                                            ],
                                                                            "label": "urllib.parse.unquote"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 28,
                                                                            "end_token": 30,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 29,
                                                                                    "end_token": 29,
                                                                                    "children": [],
                                                                                    "label": "username"
                                                                                }
                                                                            ],
                                                                            "label": "(username)"
                                                                        },
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 31,
                                                                            "end_token": 32,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 31,
                                                                                    "end_token": 31,
                                                                                    "children": [],
                                                                                    "label": "."
                                                                                }
                                                                            ],
                                                                            "label": ".lower"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 33,
                                                                            "end_token": 34,
                                                                            "children": [],
                                                                            "label": "()"
                                                                        }
                                                                    ],
                                                                    "label": "urllib.parse.unquote(username).lower()"
                                                                }
                                                            ],
                                                            "label": "username = urllib.parse.unquote(username).lower()"
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "start_token": 36,
                                                            "end_token": 49,
                                                            "children": [],
                                                            "label": "# URL decode the agent name since it comes from the URL path\n"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 50,
                                                            "end_token": 63,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 50,
                                                                    "end_token": 50,
                                                                    "children": [],
                                                                    "label": "agent_name"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 52,
                                                                    "end_token": 63,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 52,
                                                                            "end_token": 56,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 52,
                                                                                    "end_token": 54,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 52,
                                                                                            "end_token": 52,
                                                                                            "children": [],
                                                                                            "label": "urllib"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 54,
                                                                                            "end_token": 54,
                                                                                            "children": [],
                                                                                            "label": "parse"
                                                                                        }
                                                                                    ],
                                                                                    "label": "urllib.parse"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 56,
                                                                                    "end_token": 56,
                                                                                    "children": [],
                                                                                    "label": "unquote"
                                                                                }
                                                                            ],
                                                                            "label": "urllib.parse.unquote"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 57,
                                                                            "end_token": 59,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 58,
                                                                                    "end_token": 58,
                                                                                    "children": [],
                                                                                    "label": "agent_name"
                                                                                }
                                                                            ],
                                                                            "label": "(agent_name)"
                                                                        },
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 60,
                                                                            "end_token": 61,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 60,
                                                                                    "end_token": 60,
                                                                                    "children": [],
                                                                                    "label": "."
                                                                                }
                                                                            ],
                                                                            "label": ".lower"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 62,
                                                                            "end_token": 63,
                                                                            "children": [],
                                                                            "label": "()"
                                                                        }
                                                                    ],
                                                                    "label": "urllib.parse.unquote(agent_name).lower()"
                                                                }
                                                            ],
                                                            "label": "agent_name = urllib.parse.unquote(agent_name).lower()"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 65,
                                                            "end_token": 89,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 65,
                                                                    "end_token": 65,
                                                                    "children": [],
                                                                    "label": "agent"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 67,
                                                                    "end_token": 89,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 68,
                                                                            "end_token": 89,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 68,
                                                                                    "end_token": 78,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 68,
                                                                                            "end_token": 76,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 68,
                                                                                                    "end_token": 68,
                                                                                                    "children": [],
                                                                                                    "label": "backend"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 70,
                                                                                                    "end_token": 70,
                                                                                                    "children": [],
                                                                                                    "label": "server"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 72,
                                                                                                    "children": [],
                                                                                                    "label": "v2"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 74,
                                                                                                    "end_token": 74,
                                                                                                    "children": [],
                                                                                                    "label": "store"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 76,
                                                                                                    "end_token": 76,
                                                                                                    "children": [],
                                                                                                    "label": "db"
                                                                                                }
                                                                                            ],
                                                                                            "label": "backend.server.v2.store.db"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 78,
                                                                                            "end_token": 78,
                                                                                            "children": [],
                                                                                            "label": "get_store_agent_details"
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.server.v2.store.db.get_store_agent_details"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 79,
                                                                                    "end_token": 89,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 81,
                                                                                            "end_token": 83,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 81,
                                                                                                    "end_token": 81,
                                                                                                    "children": [],
                                                                                                    "label": "username"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 83,
                                                                                                    "end_token": 83,
                                                                                                    "children": [],
                                                                                                    "label": "username"
                                                                                                }
                                                                                            ],
                                                                                            "label": "username=username"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 85,
                                                                                            "end_token": 87,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 85,
                                                                                                    "end_token": 85,
                                                                                                    "children": [],
                                                                                                    "label": "agent_name"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 87,
                                                                                                    "end_token": 87,
                                                                                                    "children": [],
                                                                                                    "label": "agent_name"
                                                                                                }
                                                                                            ],
                                                                                            "label": "agent_name=agent_name"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            username=username, agent_name=agent_name\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )"
                                                                }
                                                            ],
                                                            "label": "agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 91,
                                                            "end_token": 92,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 92,
                                                                    "end_token": 92,
                                                                    "children": [],
                                                                    "label": "agent"
                                                                }
                                                            ],
                                                            "label": "return agent"
                                                        }
                                                    ],
                                                    "label": "\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 94,
                                                    "end_token": 129,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 97,
                                                            "end_token": 129,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "start_token": 98,
                                                                    "end_token": 103,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 98,
                                                                            "end_token": 103,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 98,
                                                                                    "end_token": 100,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 98,
                                                                                            "end_token": 98,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 98,
                                                                                                    "end_token": 98,
                                                                                                    "children": [],
                                                                                                    "label": "logger"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 100,
                                                                                            "end_token": 100,
                                                                                            "children": [],
                                                                                            "label": "exception"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 101,
                                                                                    "end_token": 102,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 102,
                                                                                            "end_token": 102,
                                                                                            "children": [],
                                                                                            "label": "\"Exception occurred whilst getting store agent details\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\"Exception occurred whilst getting store agent details\""
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occurred whilst getting store agent details\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store agent details\")"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 105,
                                                                    "end_token": 129,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 106,
                                                                            "end_token": 129,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 106,
                                                                                    "end_token": 110,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 106,
                                                                                            "end_token": 110,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 106,
                                                                                                    "end_token": 106,
                                                                                                    "children": [],
                                                                                                    "label": "fastapi"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 108,
                                                                                                    "end_token": 108,
                                                                                                    "children": [],
                                                                                                    "label": "responses"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 110,
                                                                                                    "end_token": 110,
                                                                                                    "children": [],
                                                                                                    "label": "JSONResponse"
                                                                                                }
                                                                                            ],
                                                                                            "label": "fastapi.responses.JSONResponse"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 111,
                                                                                    "end_token": 129,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 113,
                                                                                            "end_token": 115,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 113,
                                                                                                    "end_token": 113,
                                                                                                    "children": [],
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 115,
                                                                                                    "end_token": 115,
                                                                                                    "children": [],
                                                                                                    "label": "500"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=500"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 118,
                                                                                            "end_token": 126,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 118,
                                                                                                    "end_token": 118,
                                                                                                    "children": [],
                                                                                                    "label": "content"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 120,
                                                                                                    "end_token": 126,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 122,
                                                                                                            "end_token": 124,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 122,
                                                                                                                    "end_token": 122,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"detail\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 124,
                                                                                                                    "end_token": 124,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"An error occurred while retrieving the store agent details\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"detail\": \"An error occurred while retrieving the store agent details\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            }"
                                                                                                }
                                                                                            ],
                                                                                            "label": "content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            }"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                                                                }
                                                            ],
                                                            "label": "\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                                                        }
                                                    ],
                                                    "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                                                }
                                            ],
                                            "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                                        }
                                    ],
                                    "label": "\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                                }
                            ],
                            "label": "async def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                        }
                    ],
                    "label": "async def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "create_review",
            "start_line": 197,
            "end_line": 234,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 178,
                    "children": [
                        {
                            "type": "parameters",
                            "start_token": 3,
                            "end_token": 55,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "start_token": 5,
                                    "end_token": 8,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 5,
                                            "end_token": 5,
                                            "label": "username"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 7,
                                            "end_token": 7,
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "str"
                                        }
                                    ],
                                    "label": "username: str,"
                                },
                                {
                                    "type": "typed_parameter",
                                    "start_token": 10,
                                    "end_token": 13,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 10,
                                            "end_token": 10,
                                            "label": "agent_name"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 12,
                                            "end_token": 12,
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 12,
                                                    "end_token": 12,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "str"
                                        }
                                    ],
                                    "label": "agent_name: str,"
                                },
                                {
                                    "type": "typed_parameter",
                                    "start_token": 15,
                                    "end_token": 28,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 15,
                                            "end_token": 15,
                                            "label": "review"
                                        },
                                        {
                                            "type": "dotted_name",
                                            "start_token": 17,
                                            "end_token": 27,
                                            "label": "backend.server.v2.store.model.StoreReviewCreate"
                                        }
                                    ],
                                    "label": "review: backend.server.v2.store.model.StoreReviewCreate,"
                                },
                                {
                                    "type": "typed_parameter",
                                    "start_token": 30,
                                    "end_token": 53,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 30,
                                            "end_token": 30,
                                            "label": "user_id"
                                        },
                                        {
                                            "type": "generic_type",
                                            "start_token": 32,
                                            "end_token": 52,
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 32,
                                                    "end_token": 34,
                                                    "label": "typing.Annotated"
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 37,
                                                    "end_token": 37,
                                                    "label": "str"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 39,
                                                    "end_token": 51,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 39,
                                                            "end_token": 41,
                                                            "label": "fastapi.Depends"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 43,
                                                            "end_token": 50,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 43,
                                                                    "end_token": 49,
                                                                    "label": "autogpt_libs.auth.depends.get_user_id"
                                                                }
                                                            ],
                                                            "label": "autogpt_libs.auth.depends.get_user_id)"
                                                        }
                                                    ],
                                                    "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n"
                                                }
                                            ],
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                        }
                                    ],
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],"
                                }
                            ],
                            "label": "(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)"
                        },
                        {
                            "type": "block",
                            "start_token": 56,
                            "end_token": 178,
                            "children": [
                                {
                                    "type": "string",
                                    "start_token": 58,
                                    "end_token": 60,
                                    "children": [
                                        {
                                            "type": "string_content",
                                            "start_token": 59,
                                            "end_token": 59,
                                            "label": "\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \""
                                        }
                                    ],
                                    "label": "\"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\""
                                },
                                {
                                    "type": "try_statement",
                                    "start_token": 62,
                                    "end_token": 177,
                                    "children": [
                                        {
                                            "type": "block",
                                            "start_token": 64,
                                            "end_token": 138,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 65,
                                                    "end_token": 78,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 65,
                                                            "end_token": 65,
                                                            "label": "username"
                                                        },
                                                        {
                                                            "type": "await",
                                                            "start_token": 67,
                                                            "end_token": 77,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 67,
                                                                    "end_token": 75,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 67,
                                                                            "end_token": 71,
                                                                            "label": "urllib.parse.unquote"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 73,
                                                                            "end_token": 74,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 73,
                                                                                    "end_token": 73,
                                                                                    "label": "username"
                                                                                }
                                                                            ],
                                                                            "label": "username)"
                                                                        }
                                                                    ],
                                                                    "label": "urllib.parse.unquote(username)."
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 75,
                                                                    "end_token": 77,
                                                                    "label": ".lower("
                                                                }
                                                            ],
                                                            "label": "urllib.parse.unquote(username).lower("
                                                        }
                                                    ],
                                                    "label": "username = urllib.parse.unquote(username).lower()"
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 80,
                                                    "end_token": 90,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 80,
                                                            "end_token": 80,
                                                            "label": "agent_name"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 82,
                                                            "end_token": 89,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 82,
                                                                    "end_token": 86,
                                                                    "label": "urllib.parse.unquote"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 87,
                                                                    "end_token": 88,
                                                                    "label": "(agent_name"
                                                                }
                                                            ],
                                                            "label": "urllib.parse.unquote(agent_name)"
                                                        }
                                                    ],
                                                    "label": "agent_name = urllib.parse.unquote(agent_name)\n"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 97,
                                                    "end_token": 137,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 97,
                                                            "end_token": 137,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 97,
                                                                    "end_token": 97,
                                                                    "label": "="
                                                                },
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 99,
                                                                    "end_token": 109,
                                                                    "label": "backend.server.v2.store.db.create_store_review"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 110,
                                                                    "end_token": 137,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 112,
                                                                            "end_token": 115,
                                                                            "label": "user_id=user_id,"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 117,
                                                                            "end_token": 122,
                                                                            "label": "store_listing_version_id=review.store_listing_version_id,"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 124,
                                                                            "end_token": 129,
                                                                            "label": "score=review.score,"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 131,
                                                                            "end_token": 136,
                                                                            "label": "comments=review.comments,"
                                                                        }
                                                                    ],
                                                                    "label": "(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n"
                                                                }
                                                            ],
                                                            "label": "= await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n"
                                                        }
                                                    ],
                                                    "label": "= await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n"
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 141,
                                                    "end_token": 142,
                                                    "label": "return created_review"
                                                }
                                            ],
                                            "label": "\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )"
                                        },
                                        {
                                            "type": "except_clause",
                                            "start_token": 144,
                                            "end_token": 177,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 145,
                                                    "end_token": 145,
                                                    "label": "Exception"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 147,
                                                    "end_token": 177,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 148,
                                                            "end_token": 153,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 148,
                                                                    "end_token": 150,
                                                                    "label": "logger.exception"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 151,
                                                                    "end_token": 152,
                                                                    "label": "(\"Exception occurred whilst creating store review\""
                                                                }
                                                            ],
                                                            "label": "logger.exception(\"Exception occurred whilst creating store review\")"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 155,
                                                            "end_token": 177,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 156,
                                                                    "end_token": 177,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 156,
                                                                            "end_token": 160,
                                                                            "label": "fastapi.responses.JSONResponse"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 161,
                                                                            "end_token": 177,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 163,
                                                                                    "end_token": 166,
                                                                                    "label": "status_code=500,"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 168,
                                                                                    "end_token": 174,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "start_token": 170,
                                                                                            "end_token": 174,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 171,
                                                                                                    "end_token": 173,
                                                                                                    "label": "\"detail\": \"An error occurred while creating the store review\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "{\"detail\": \"An error occurred while creating the store review\"}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "content={\"detail\": \"An error occurred while creating the store review\"}"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )"
                                                                }
                                                            ],
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )"
                                                }
                                            ],
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )"
                                        }
                                    ],
                                    "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )"
                                }
                            ],
                            "label": ":\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )\n"
                        }
                    ],
                    "label": "async def create_review(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_creators",
            "start_line": 247,
            "end_line": 290,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 179,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 179,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "get_creators"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 44,
                                    "children": [
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 5,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "featured"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "label": ": bool"
                                                },
                                                {
                                                    "type": "false",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "False"
                                                }
                                            ],
                                            "label": "featured: bool = False"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 12,
                                            "end_token": 18,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 12,
                                                    "end_token": 12,
                                                    "label": "search_query"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 13,
                                                    "end_token": 14,
                                                    "label": ": str"
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 18,
                                                    "end_token": 18,
                                                    "label": "None"
                                                }
                                            ],
                                            "label": "search_query: str | None = None"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 21,
                                            "end_token": 27,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 21,
                                                    "end_token": 21,
                                                    "label": "sorted_by"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 22,
                                                    "end_token": 23,
                                                    "label": ": str"
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 27,
                                                    "end_token": 27,
                                                    "label": "None"
                                                }
                                            ],
                                            "label": "sorted_by: str | None = None"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 30,
                                            "end_token": 34,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 30,
                                                    "end_token": 30,
                                                    "label": "page"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 31,
                                                    "end_token": 32,
                                                    "label": ": int"
                                                },
                                                {
                                                    "type": "integer",
                                                    "start_token": 34,
                                                    "end_token": 34,
                                                    "label": "1"
                                                }
                                            ],
                                            "label": "page: int = 1"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 37,
                                            "end_token": 41,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 37,
                                                    "end_token": 37,
                                                    "label": "page_size"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 38,
                                                    "end_token": 39,
                                                    "label": ": int"
                                                },
                                                {
                                                    "type": "integer",
                                                    "start_token": 41,
                                                    "end_token": 41,
                                                    "label": "20"
                                                }
                                            ],
                                            "label": "page_size: int = 20"
                                        }
                                    ],
                                    "label": "(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 46,
                                    "end_token": 179,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 47,
                                            "end_token": 49,
                                            "label": "\"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\""
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 51,
                                            "end_token": 71,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "start_token": 52,
                                                    "end_token": 54,
                                                    "label": "page < 1"
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "start_token": 57,
                                                    "end_token": 71,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 58,
                                                            "end_token": 71,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 58,
                                                                    "end_token": 60,
                                                                    "label": "fastapi.HTTPException"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 61,
                                                                    "end_token": 71,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 63,
                                                                            "end_token": 65,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 63,
                                                                                    "end_token": 63,
                                                                                    "label": "status_code"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 65,
                                                                                    "end_token": 65,
                                                                                    "label": "422"
                                                                                }
                                                                            ],
                                                                            "label": "status_code=422"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 67,
                                                                            "end_token": 69,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 67,
                                                                                    "end_token": 67,
                                                                                    "label": "detail"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 69,
                                                                                    "end_token": 69,
                                                                                    "label": "\"Page must be greater than 0\""
                                                                                }
                                                                            ],
                                                                            "label": "detail=\"Page must be greater than 0\""
                                                                        }
                                                                    ],
                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                                }
                                                            ],
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                        }
                                                    ],
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                }
                                            ],
                                            "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 74,
                                            "end_token": 94,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "start_token": 75,
                                                    "end_token": 77,
                                                    "label": "page_size < 1"
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "start_token": 80,
                                                    "end_token": 94,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 81,
                                                            "end_token": 94,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 81,
                                                                    "end_token": 83,
                                                                    "label": "fastapi.HTTPException"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 84,
                                                                    "end_token": 94,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 86,
                                                                            "end_token": 88,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 86,
                                                                                    "end_token": 86,
                                                                                    "label": "status_code"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 88,
                                                                                    "end_token": 88,
                                                                                    "label": "422"
                                                                                }
                                                                            ],
                                                                            "label": "status_code=422"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 90,
                                                                            "end_token": 92,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 90,
                                                                                    "end_token": 90,
                                                                                    "label": "detail"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 92,
                                                                                    "end_token": 92,
                                                                                    "label": "\"Page size must be greater than 0\""
                                                                                }
                                                                            ],
                                                                            "label": "detail=\"Page size must be greater than 0\""
                                                                        }
                                                                    ],
                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                                }
                                                            ],
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                        }
                                                    ],
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                }
                                            ],
                                            "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                        },
                                        {
                                            "type": "try_statement",
                                            "start_token": 97,
                                            "end_token": 179,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 98,
                                                    "end_token": 145,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 100,
                                                            "end_token": 141,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 100,
                                                                    "end_token": 100,
                                                                    "label": "creators"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 102,
                                                                    "end_token": 141,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 103,
                                                                            "end_token": 141,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 103,
                                                                                    "end_token": 113,
                                                                                    "label": "backend.server.v2.store.db.get_store_creators"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 114,
                                                                                    "end_token": 141,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 116,
                                                                                            "end_token": 118,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 116,
                                                                                                    "end_token": 116,
                                                                                                    "label": "featured"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 118,
                                                                                                    "end_token": 118,
                                                                                                    "label": "featured"
                                                                                                }
                                                                                            ],
                                                                                            "label": "featured=featured"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 121,
                                                                                            "end_token": 123,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 121,
                                                                                                    "end_token": 121,
                                                                                                    "label": "search_query"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 123,
                                                                                                    "end_token": 123,
                                                                                                    "label": "search_query"
                                                                                                }
                                                                                            ],
                                                                                            "label": "search_query=search_query"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 126,
                                                                                            "end_token": 128,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 126,
                                                                                                    "end_token": 126,
                                                                                                    "label": "sorted_by"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 128,
                                                                                                    "end_token": 128,
                                                                                                    "label": "sorted_by"
                                                                                                }
                                                                                            ],
                                                                                            "label": "sorted_by=sorted_by"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 131,
                                                                                            "end_token": 133,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 131,
                                                                                                    "end_token": 131,
                                                                                                    "label": "page"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 133,
                                                                                                    "end_token": 133,
                                                                                                    "label": "page"
                                                                                                }
                                                                                            ],
                                                                                            "label": "page=page"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 136,
                                                                                            "end_token": 138,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 136,
                                                                                                    "end_token": 136,
                                                                                                    "label": "page_size"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 138,
                                                                                                    "end_token": 138,
                                                                                                    "label": "page_size"
                                                                                                }
                                                                                            ],
                                                                                            "label": "page_size=page_size"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )"
                                                                }
                                                            ],
                                                            "label": "creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 143,
                                                            "end_token": 145,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 144,
                                                                    "end_token": 144,
                                                                    "label": "creators"
                                                                }
                                                            ],
                                                            "label": "return creators\n"
                                                        }
                                                    ],
                                                    "label": ":\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 146,
                                                    "end_token": 179,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 148,
                                                            "end_token": 179,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "start_token": 150,
                                                                    "end_token": 155,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 150,
                                                                            "end_token": 155,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 150,
                                                                                    "end_token": 152,
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 153,
                                                                                    "end_token": 155,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 154,
                                                                                            "end_token": 154,
                                                                                            "label": "\"Exception occurred whilst getting store creators\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\"Exception occurred whilst getting store creators\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occurred whilst getting store creators\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store creators\")"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 157,
                                                                    "end_token": 179,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 158,
                                                                            "end_token": 179,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 158,
                                                                                    "end_token": 160,
                                                                                    "label": "fastapi.responses"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 161,
                                                                                    "end_token": 179,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 165,
                                                                                            "end_token": 167,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 165,
                                                                                                    "end_token": 165,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 167,
                                                                                                    "end_token": 167,
                                                                                                    "label": "500"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=500"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 170,
                                                                                            "end_token": 176,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 170,
                                                                                                    "end_token": 170,
                                                                                                    "label": "content"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 172,
                                                                                                    "end_token": 176,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 173,
                                                                                                            "end_token": 175,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 173,
                                                                                                                    "end_token": 173,
                                                                                                                    "label": "\"detail\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 175,
                                                                                                                    "end_token": 175,
                                                                                                                    "label": "\"An error occurred while retrieving the store creators\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"detail\": \"An error occurred while retrieving the store creators\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\"detail\": \"An error occurred while retrieving the store creators\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "content={\"detail\": \"An error occurred while retrieving the store creators\"}"
                                                                                        }
                                                                                    ],
                                                                                    "label": ".JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                                                                }
                                                            ],
                                                            "label": ":\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                                                }
                                            ],
                                            "label": "try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                                        }
                                    ],
                                    "label": "\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                                }
                            ],
                            "label": "async def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                        }
                    ],
                    "label": "async def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_creator",
            "start_line": 298,
            "end_line": 318,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 99,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 99,
                            "children": [
                                {
                                    "type": "decorated_definition",
                                    "start_token": 0,
                                    "end_token": 99,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 2,
                                            "label": "def get_creator"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "username"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "username: str"
                                                }
                                            ],
                                            "label": "(\n    username: str,\n)"
                                        }
                                    ],
                                    "label": "async def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                },
                                {
                                    "type": "string",
                                    "start_token": 13,
                                    "end_token": 15,
                                    "label": "\"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\""
                                },
                                {
                                    "type": "block",
                                    "start_token": 16,
                                    "end_token": 99,
                                    "children": [
                                        {
                                            "type": "try_statement",
                                            "start_token": 17,
                                            "end_token": 99,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 19,
                                                    "end_token": 63,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 20,
                                                            "end_token": 33,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 20,
                                                                    "end_token": 20,
                                                                    "label": "username"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 22,
                                                                    "end_token": 33,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 22,
                                                                            "end_token": 26,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 22,
                                                                                    "end_token": 24,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 22,
                                                                                            "end_token": 22,
                                                                                            "label": "urllib"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 24,
                                                                                            "end_token": 24,
                                                                                            "label": "parse"
                                                                                        }
                                                                                    ],
                                                                                    "label": "urllib.parse"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 26,
                                                                                    "end_token": 26,
                                                                                    "label": "unquote"
                                                                                }
                                                                            ],
                                                                            "label": "urllib.parse.unquote"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 27,
                                                                            "end_token": 29,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 28,
                                                                                    "end_token": 28,
                                                                                    "label": "username"
                                                                                }
                                                                            ],
                                                                            "label": "(username)"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 30,
                                                                            "end_token": 33,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 30,
                                                                                    "end_token": 31,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 30,
                                                                                            "end_token": 30,
                                                                                            "label": "."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 31,
                                                                                            "end_token": 31,
                                                                                            "label": "lower"
                                                                                        }
                                                                                    ],
                                                                                    "label": ".lower"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 32,
                                                                                    "end_token": 33,
                                                                                    "label": "()"
                                                                                }
                                                                            ],
                                                                            "label": ".lower()"
                                                                        }
                                                                    ],
                                                                    "label": "urllib.parse.unquote(username).lower()"
                                                                }
                                                            ],
                                                            "label": "username = urllib.parse.unquote(username).lower()"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 35,
                                                            "end_token": 59,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 35,
                                                                    "end_token": 35,
                                                                    "label": "creator"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 37,
                                                                    "end_token": 59,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 38,
                                                                            "end_token": 59,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 38,
                                                                                    "end_token": 48,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 38,
                                                                                            "end_token": 40,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 38,
                                                                                                    "end_token": 39,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 38,
                                                                                                            "end_token": 38,
                                                                                                            "label": "backend"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 39,
                                                                                                            "end_token": 39,
                                                                                                            "label": "."
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "backend."
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 40,
                                                                                                    "end_token": 40,
                                                                                                    "label": "server"
                                                                                                }
                                                                                            ],
                                                                                            "label": "backend.server"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 42,
                                                                                            "end_token": 44,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 42,
                                                                                                    "end_token": 42,
                                                                                                    "label": "v2"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 44,
                                                                                                    "end_token": 44,
                                                                                                    "label": "store"
                                                                                                }
                                                                                            ],
                                                                                            "label": "v2.store"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 46,
                                                                                            "end_token": 48,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 46,
                                                                                                    "end_token": 46,
                                                                                                    "label": "db"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 48,
                                                                                                    "end_token": 48,
                                                                                                    "label": "get_store_creator_details"
                                                                                                }
                                                                                            ],
                                                                                            "label": "db.get_store_creator_details"
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.server.v2.store.db.get_store_creator_details"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 49,
                                                                                    "end_token": 59,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 51,
                                                                                            "end_token": 57,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 51,
                                                                                                    "end_token": 51,
                                                                                                    "label": "username"
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 53,
                                                                                                    "end_token": 57,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 53,
                                                                                                            "end_token": 55,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 53,
                                                                                                                    "end_token": 53,
                                                                                                                    "label": "username"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 55,
                                                                                                                    "end_token": 55,
                                                                                                                    "label": "lower"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "username.lower"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 56,
                                                                                                            "end_token": 57,
                                                                                                            "label": "()"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "username.lower()"
                                                                                                }
                                                                                            ],
                                                                                            "label": "username=username.lower()"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            username=username.lower()\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )"
                                                                }
                                                            ],
                                                            "label": "creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 61,
                                                            "end_token": 62,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 62,
                                                                    "end_token": 62,
                                                                    "label": "creator"
                                                                }
                                                            ],
                                                            "label": "return creator"
                                                        }
                                                    ],
                                                    "label": "\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 64,
                                                    "end_token": 99,
                                                    "children": [
                                                        {
                                                            "type": "expression_list",
                                                            "start_token": 65,
                                                            "end_token": 65,
                                                            "label": "Exception"
                                                        },
                                                        {
                                                            "type": "block",
                                                            "start_token": 67,
                                                            "end_token": 99,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 68,
                                                                    "end_token": 73,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 68,
                                                                            "end_token": 70,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 68,
                                                                                    "end_token": 68,
                                                                                    "label": "logger"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 70,
                                                                                    "end_token": 70,
                                                                                    "label": "exception"
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 71,
                                                                            "end_token": 73,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 72,
                                                                                    "end_token": 72,
                                                                                    "label": "\"Exception occurred whilst getting creator details\""
                                                                                }
                                                                            ],
                                                                            "label": "(\"Exception occurred whilst getting creator details\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.exception(\"Exception occurred whilst getting creator details\")"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 75,
                                                                    "end_token": 99,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 76,
                                                                            "end_token": 99,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 76,
                                                                                    "end_token": 80,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 76,
                                                                                            "end_token": 78,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 76,
                                                                                                    "end_token": 76,
                                                                                                    "label": "fastapi"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 78,
                                                                                                    "end_token": 78,
                                                                                                    "label": "responses"
                                                                                                }
                                                                                            ],
                                                                                            "label": "fastapi.responses"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 80,
                                                                                            "end_token": 80,
                                                                                            "label": "JSONResponse"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 81,
                                                                                    "end_token": 99,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 83,
                                                                                            "end_token": 85,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 83,
                                                                                                    "end_token": 83,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 85,
                                                                                                    "end_token": 85,
                                                                                                    "label": "500"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=500"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 88,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 88,
                                                                                                    "end_token": 88,
                                                                                                    "label": "content"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 90,
                                                                                                    "end_token": 96,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 92,
                                                                                                            "end_token": 94,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 92,
                                                                                                                    "end_token": 92,
                                                                                                                    "label": "\"detail\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 94,
                                                                                                                    "end_token": 94,
                                                                                                                    "label": "\"An error occurred while retrieving the creator details\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"detail\": \"An error occurred while retrieving the creator details\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            }"
                                                                                                }
                                                                                            ],
                                                                                            "label": "content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                                                }
                                                            ],
                                                            "label": "\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                                        }
                                                    ],
                                                    "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                                }
                                            ],
                                            "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                        }
                                    ],
                                    "label": "\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                                }
                            ],
                            "label": "async def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                        }
                    ],
                    "label": "async def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_my_agents",
            "start_line": 330,
            "end_line": 343,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 89,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 89,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "def get_my_agents"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 29,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 24,
                                            "children": [
                                                {
                                                    "type": "type",
                                                    "start_token": 7,
                                                    "end_token": 27,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 9,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 7,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "typing.Annotated"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 10,
                                                                    "end_token": 27,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 12,
                                                                            "end_token": 13,
                                                                            "children": [],
                                                                            "label": "str,"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 15,
                                                                            "end_token": 25,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 14,
                                                                                    "end_token": 24,
                                                                                    "children": [],
                                                                                    "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": ".Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                                }
                                                            ],
                                                            "label": "Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                }
                                            ],
                                            "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id"
                                        }
                                    ],
                                    "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 30,
                                    "end_token": 89,
                                    "children": [
                                        {
                                            "type": "try_statement",
                                            "start_token": 32,
                                            "end_token": 89,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 34,
                                                    "end_token": 55,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 35,
                                                            "end_token": 51,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 35,
                                                                    "end_token": 35,
                                                                    "children": [],
                                                                    "label": "agents"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 37,
                                                                    "end_token": 51,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 38,
                                                                            "end_token": 51,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 38,
                                                                                    "end_token": 48,
                                                                                    "children": [],
                                                                                    "label": "backend.server.v2.store.db.get_my_agents"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 49,
                                                                                    "end_token": 51,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 50,
                                                                                            "end_token": 50,
                                                                                            "children": [],
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.db.get_my_agents(user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "await backend.server.v2.store.db.get_my_agents(user_id)"
                                                                }
                                                            ],
                                                            "label": "agents = await backend.server.v2.store.db.get_my_agents(user_id)"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 53,
                                                            "end_token": 54,
                                                            "children": [],
                                                            "label": "return agents"
                                                        }
                                                    ],
                                                    "label": "\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 56,
                                                    "end_token": 89,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 60,
                                                            "end_token": 62,
                                                            "children": [],
                                                            "label": "logger.exception"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 63,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 64,
                                                                    "end_token": 64,
                                                                    "children": [],
                                                                    "label": "\"Exception occurred whilst getting my agents\""
                                                                }
                                                            ],
                                                            "label": "(\"Exception occurred whilst getting my agents\")"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 67,
                                                            "end_token": 89,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 68,
                                                                    "end_token": 89,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 68,
                                                                            "end_token": 72,
                                                                            "children": [],
                                                                            "label": "fastapi.responses.JSONResponse"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 73,
                                                                            "end_token": 89,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 75,
                                                                                    "end_token": 77,
                                                                                    "children": [],
                                                                                    "label": "status_code=500"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 80,
                                                                                    "end_token": 86,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "start_token": 82,
                                                                                            "end_token": 86,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 83,
                                                                                                    "end_token": 86,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 83,
                                                                                                            "end_token": 83,
                                                                                                            "children": [],
                                                                                                            "label": "\"detail\""
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 85,
                                                                                                            "end_token": 85,
                                                                                                            "children": [],
                                                                                                            "label": "\"An error occurred while retrieving the my agents\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the my agents\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the my agents\"}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the my agents\"}"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                                                                }
                                                            ],
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                                                }
                                            ],
                                            "label": "try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                                        }
                                    ],
                                    "label": ":\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                                }
                            ],
                            "label": "async def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                        }
                    ],
                    "label": "async def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "delete_submission",
            "start_line": 352,
            "end_line": 379,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 110,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 109,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "label": "async"
                                        }
                                    ],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 2,
                                    "label": "def delete_submission"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 35,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 25,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 6,
                                                    "end_token": 27,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 7,
                                                            "end_token": 9,
                                                            "label": "typing.Annotated"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 10,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 12,
                                                                    "end_token": 12,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 13,
                                                                    "end_token": 25,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 14,
                                                                            "end_token": 24,
                                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": ", fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                }
                                                            ],
                                                            "label": "[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": ": typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                }
                                            ],
                                            "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 30,
                                            "end_token": 32,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 30,
                                                    "end_token": 30,
                                                    "label": "submission_id"
                                                },
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 31,
                                                    "end_token": 32,
                                                    "label": ": str"
                                                }
                                            ],
                                            "label": "submission_id: str"
                                        }
                                    ],
                                    "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n)"
                                },
                                {
                                    "type": "string",
                                    "start_token": 38,
                                    "end_token": 40,
                                    "label": "\"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\""
                                },
                                {
                                    "type": "block",
                                    "start_token": 41,
                                    "end_token": 109,
                                    "children": [
                                        {
                                            "type": "try_statement",
                                            "start_token": 42,
                                            "end_token": 109,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 43,
                                                    "end_token": 75,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 45,
                                                            "end_token": 74,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 45,
                                                                    "end_token": 45,
                                                                    "label": "result"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 47,
                                                                    "end_token": 74,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 48,
                                                                            "end_token": 69,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 48,
                                                                                    "end_token": 58,
                                                                                    "label": "backend.server.v2.store.db.delete_store_submission"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 59,
                                                                                    "end_token": 69,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 61,
                                                                                            "end_token": 64,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 61,
                                                                                                    "end_token": 61,
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 63,
                                                                                                    "end_token": 63,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id,"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 66,
                                                                                            "end_token": 68,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 66,
                                                                                                    "end_token": 66,
                                                                                                    "label": "submission_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 68,
                                                                                                    "end_token": 68,
                                                                                                    "label": "submission_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "submission_id=submission_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            user_id=user_id,\n            submission_id=submission_id,"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,"
                                                                        }
                                                                    ],
                                                                    "label": "await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result"
                                                                }
                                                            ],
                                                            "label": "result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 73,
                                                            "end_token": 74,
                                                            "label": "return result"
                                                        }
                                                    ],
                                                    "label": ":\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 76,
                                                    "end_token": 109,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 78,
                                                            "end_token": 109,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "start_token": 80,
                                                                    "end_token": 85,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 80,
                                                                            "end_token": 85,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 80,
                                                                                    "end_token": 82,
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 83,
                                                                                    "end_token": 85,
                                                                                    "label": "(\"Exception occurred whilst deleting store submission\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occurred whilst deleting store submission\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.exception(\"Exception occurred whilst deleting store submission\")"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 87,
                                                                    "end_token": 109,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 88,
                                                                            "end_token": 109,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 88,
                                                                                    "end_token": 92,
                                                                                    "label": "fastapi.responses.JSONResponse"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 93,
                                                                                    "end_token": 109,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 95,
                                                                                            "end_token": 97,
                                                                                            "label": "status_code=500"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 100,
                                                                                            "end_token": 106,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 102,
                                                                                                    "end_token": 106,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 103,
                                                                                                            "end_token": 105,
                                                                                                            "label": "\"detail\": \"An error occurred while deleting the store submission\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\"detail\": \"An error occurred while deleting the store submission\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "content={\"detail\": \"An error occurred while deleting the store submission\"}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                                                                }
                                                            ],
                                                            "label": ":\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                                                }
                                            ],
                                            "label": "try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                                        }
                                    ],
                                    "label": "\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                                }
                            ],
                            "label": "async def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )"
                        }
                    ],
                    "label": "async def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_submissions",
            "start_line": 388,
            "end_line": 432,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 170,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 170,
                            "children": [
                                {
                                    "type": "decorated_definition",
                                    "start_token": 0,
                                    "end_token": 170,
                                    "children": [
                                        {
                                            "type": "keyword_separator",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "children": [],
                                            "label": "async"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "children": [],
                                            "label": "def"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 2,
                                            "end_token": 44,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 25,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 9,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 12,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 7,
                                                                            "end_token": 9,
                                                                            "children": [],
                                                                            "label": "typing.Annotated"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 12,
                                                                            "end_token": 12,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        }
                                                                    ],
                                                                    "label": "typing.Annotated[\n        str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 16,
                                                                    "end_token": 25,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 14,
                                                                            "end_token": 24,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 14,
                                                                                    "end_token": 16,
                                                                                    "children": [],
                                                                                    "label": "fastapi.Depends"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 18,
                                                                                    "end_token": 22,
                                                                                    "children": [],
                                                                                    "label": "autogpt_libs.auth.depends"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 24,
                                                                                    "end_token": 24,
                                                                                    "children": [],
                                                                                    "label": "get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 30,
                                                    "end_token": 34,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 30,
                                                            "end_token": 30,
                                                            "children": [],
                                                            "label": "page"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 32,
                                                            "end_token": 34,
                                                            "children": [],
                                                            "label": "int = 1"
                                                        }
                                                    ],
                                                    "label": "page: int = 1"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 37,
                                                    "end_token": 41,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 37,
                                                            "end_token": 37,
                                                            "children": [],
                                                            "label": "page_size"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 39,
                                                            "end_token": 41,
                                                            "children": [],
                                                            "label": "int = 20"
                                                        }
                                                    ],
                                                    "label": "page_size: int = 20"
                                                }
                                            ],
                                            "label": "get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n)"
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 47,
                                            "end_token": 49,
                                            "children": [
                                                {
                                                    "type": "string_content",
                                                    "start_token": 48,
                                                    "end_token": 48,
                                                    "children": [],
                                                    "label": "\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \""
                                                }
                                            ],
                                            "label": "\"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\""
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 51,
                                            "end_token": 170,
                                            "children": [
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 51,
                                                    "end_token": 71,
                                                    "children": [
                                                        {
                                                            "type": "comparison_operator",
                                                            "start_token": 52,
                                                            "end_token": 54,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 52,
                                                                    "end_token": 52,
                                                                    "children": [],
                                                                    "label": "page"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "start_token": 54,
                                                                    "end_token": 54,
                                                                    "children": [],
                                                                    "label": "1"
                                                                }
                                                            ],
                                                            "label": "page < 1"
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 57,
                                                            "end_token": 71,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 58,
                                                                    "end_token": 71,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 58,
                                                                            "end_token": 60,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 58,
                                                                                    "end_token": 58,
                                                                                    "children": [],
                                                                                    "label": "fastapi"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 60,
                                                                                    "end_token": 60,
                                                                                    "children": [],
                                                                                    "label": "HTTPException"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 63,
                                                                            "end_token": 65,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 63,
                                                                                    "end_token": 63,
                                                                                    "children": [],
                                                                                    "label": "status_code"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 65,
                                                                                    "end_token": 65,
                                                                                    "children": [],
                                                                                    "label": "422"
                                                                                }
                                                                            ],
                                                                            "label": "status_code=422"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 67,
                                                                            "end_token": 69,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 67,
                                                                                    "end_token": 67,
                                                                                    "children": [],
                                                                                    "label": "detail"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 69,
                                                                                    "end_token": 69,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "start_token": 69,
                                                                                            "end_token": 69,
                                                                                            "children": [],
                                                                                            "label": "\"Page must be greater than 0\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"Page must be greater than 0\""
                                                                                }
                                                                            ],
                                                                            "label": "detail=\"Page must be greater than 0\""
                                                                        }
                                                                    ],
                                                                    "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                                }
                                                            ],
                                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                        }
                                                    ],
                                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )"
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 74,
                                                    "end_token": 94,
                                                    "children": [
                                                        {
                                                            "type": "comparison_operator",
                                                            "start_token": 75,
                                                            "end_token": 77,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 75,
                                                                    "end_token": 75,
                                                                    "children": [],
                                                                    "label": "page_size"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "start_token": 77,
                                                                    "end_token": 77,
                                                                    "children": [],
                                                                    "label": "1"
                                                                }
                                                            ],
                                                            "label": "page_size < 1"
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 80,
                                                            "end_token": 94,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 81,
                                                                    "end_token": 94,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 81,
                                                                            "end_token": 83,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 81,
                                                                                    "end_token": 81,
                                                                                    "children": [],
                                                                                    "label": "fastapi"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 83,
                                                                                    "end_token": 83,
                                                                                    "children": [],
                                                                                    "label": "HTTPException"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 86,
                                                                            "end_token": 88,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 86,
                                                                                    "end_token": 86,
                                                                                    "children": [],
                                                                                    "label": "status_code"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 88,
                                                                                    "end_token": 88,
                                                                                    "children": [],
                                                                                    "label": "422"
                                                                                }
                                                                            ],
                                                                            "label": "status_code=422"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 90,
                                                                            "end_token": 92,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 90,
                                                                                    "end_token": 90,
                                                                                    "children": [],
                                                                                    "label": "detail"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 92,
                                                                                    "end_token": 92,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "start_token": 92,
                                                                                            "end_token": 92,
                                                                                            "children": [],
                                                                                            "label": "\"Page size must be greater than 0\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"Page size must be greater than 0\""
                                                                                }
                                                                            ],
                                                                            "label": "detail=\"Page size must be greater than 0\""
                                                                        }
                                                                    ],
                                                                    "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                                }
                                                            ],
                                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                        }
                                                    ],
                                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )"
                                                },
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 96,
                                                    "end_token": 170,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 99,
                                                            "end_token": 134,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 99,
                                                                    "end_token": 130,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 99,
                                                                            "end_token": 99,
                                                                            "children": [],
                                                                            "label": "listings"
                                                                        },
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 101,
                                                                            "end_token": 130,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 102,
                                                                                    "end_token": 130,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 102,
                                                                                            "end_token": 112,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 102,
                                                                                                    "end_token": 112,
                                                                                                    "children": [],
                                                                                                    "label": "backend.server.v2.store.db.get_store_submissions"
                                                                                                }
                                                                                            ],
                                                                                            "label": "backend.server.v2.store.db.get_store_submissions"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 115,
                                                                                            "end_token": 117,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 115,
                                                                                                    "end_token": 115,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 117,
                                                                                                    "end_token": 117,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 120,
                                                                                            "end_token": 122,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 120,
                                                                                                    "end_token": 120,
                                                                                                    "children": [],
                                                                                                    "label": "page"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 122,
                                                                                                    "end_token": 122,
                                                                                                    "children": [],
                                                                                                    "label": "page"
                                                                                                }
                                                                                            ],
                                                                                            "label": "page=page"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 125,
                                                                                            "end_token": 127,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 125,
                                                                                                    "end_token": 125,
                                                                                                    "children": [],
                                                                                                    "label": "page_size"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 127,
                                                                                                    "end_token": 127,
                                                                                                    "children": [],
                                                                                                    "label": "page_size"
                                                                                                }
                                                                                            ],
                                                                                            "label": "page_size=page_size"
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 132,
                                                                    "end_token": 134,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 133,
                                                                            "end_token": 133,
                                                                            "children": [],
                                                                            "label": "listings"
                                                                        }
                                                                    ],
                                                                    "label": "return listings\n"
                                                                }
                                                            ],
                                                            "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 135,
                                                            "end_token": 170,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 138,
                                                                    "end_token": 170,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 139,
                                                                            "end_token": 144,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 139,
                                                                                    "end_token": 141,
                                                                                    "children": [],
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 143,
                                                                                    "end_token": 143,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "start_token": 143,
                                                                                            "end_token": 143,
                                                                                            "children": [],
                                                                                            "label": "\"Exception occurred whilst getting store submissions\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"Exception occurred whilst getting store submissions\""
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occurred whilst getting store submissions\")"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 146,
                                                                            "end_token": 170,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 147,
                                                                                    "end_token": 170,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 147,
                                                                                            "end_token": 151,
                                                                                            "children": [],
                                                                                            "label": "fastapi.responses.JSONResponse"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 154,
                                                                                            "end_token": 156,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 154,
                                                                                                    "end_token": 154,
                                                                                                    "children": [],
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 156,
                                                                                                    "end_token": 156,
                                                                                                    "children": [],
                                                                                                    "label": "500"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=500"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 159,
                                                                                            "end_token": 167,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 159,
                                                                                                    "end_token": 159,
                                                                                                    "children": [],
                                                                                                    "label": "content"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 161,
                                                                                                    "end_token": 167,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 163,
                                                                                                            "end_token": 165,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 163,
                                                                                                                    "end_token": 163,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string_content",
                                                                                                                            "start_token": 163,
                                                                                                                            "end_token": 163,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"detail\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"detail\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 165,
                                                                                                                    "end_token": 165,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string_content",
                                                                                                                            "start_token": 165,
                                                                                                                            "end_token": 165,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"An error occurred while retrieving the store submissions\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"An error occurred while retrieving the store submissions\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"detail\": \"An error occurred while retrieving the store submissions\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            }"
                                                                                                }
                                                                                            ],
                                                                                            "label": "content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            }"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                                                                }
                                                            ],
                                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                                                        }
                                                    ],
                                                    "label": "try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                                                }
                                            ],
                                            "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                                        }
                                    ],
                                    "label": "async def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                                }
                            ],
                            "label": "async def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                        }
                    ],
                    "label": "async def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "create_submission",
            "start_line": 441,
            "end_line": 479,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 177,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 175,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 175,
                                    "children": [
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 17,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "submission_request"
                                                        },
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 7,
                                                            "end_token": 17,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "label": "backend"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "label": "server"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "v2"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 13,
                                                                    "end_token": 13,
                                                                    "label": "store"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 15,
                                                                    "end_token": 15,
                                                                    "label": "model"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 17,
                                                                    "end_token": 17,
                                                                    "label": "StoreSubmissionRequest"
                                                                }
                                                            ],
                                                            "label": "backend.server.v2.store.model.StoreSubmissionRequest"
                                                        }
                                                    ],
                                                    "label": "submission_request: backend.server.v2.store.model.StoreSubmissionRequest"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 20,
                                                    "end_token": 42,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 20,
                                                            "end_token": 20,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 22,
                                                            "end_token": 42,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 22,
                                                                    "end_token": 24,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 22,
                                                                            "end_token": 22,
                                                                            "label": "typing"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 24,
                                                                            "end_token": 24,
                                                                            "label": "Annotated"
                                                                        }
                                                                    ],
                                                                    "label": "typing.Annotated"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 25,
                                                                    "end_token": 42,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 27,
                                                                            "end_token": 27,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 29,
                                                                            "end_token": 40,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 29,
                                                                                    "end_token": 37,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 29,
                                                                                            "end_token": 29,
                                                                                            "label": "fastapi"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 31,
                                                                                            "end_token": 31,
                                                                                            "label": "Depends"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 33,
                                                                                            "end_token": 33,
                                                                                            "label": "autogpt_libs"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "label": "auth"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 37,
                                                                                            "end_token": 37,
                                                                                            "label": "depends"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.Depends(autogpt_libs.auth.depends"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                                }
                                                            ],
                                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                }
                                            ],
                                            "label": "(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 51,
                                            "end_token": 175,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 52,
                                                    "end_token": 177,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 54,
                                                            "end_token": 142,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 55,
                                                                    "end_token": 142,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 55,
                                                                            "end_token": 55,
                                                                            "label": "submission"
                                                                        },
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 57,
                                                                            "end_token": 139,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 58,
                                                                                    "end_token": 139,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 58,
                                                                                            "end_token": 68,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 58,
                                                                                                    "end_token": 58,
                                                                                                    "label": "backend"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 60,
                                                                                                    "end_token": 60,
                                                                                                    "label": "server"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 62,
                                                                                                    "label": "v2"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 64,
                                                                                                    "end_token": 64,
                                                                                                    "label": "store"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 66,
                                                                                                    "end_token": 66,
                                                                                                    "label": "db"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 68,
                                                                                                    "end_token": 68,
                                                                                                    "label": "create_store_submission"
                                                                                                }
                                                                                            ],
                                                                                            "label": "backend.server.v2.store.db.create_store_submission"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 69,
                                                                                            "end_token": 139,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 71,
                                                                                                    "end_token": 73,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 71,
                                                                                                            "end_token": 71,
                                                                                                            "label": "user_id"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 73,
                                                                                                            "end_token": 73,
                                                                                                            "label": "user_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "user_id=user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 76,
                                                                                                    "end_token": 80,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 76,
                                                                                                            "end_token": 76,
                                                                                                            "label": "agent_id"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 78,
                                                                                                            "end_token": 80,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 78,
                                                                                                                    "end_token": 78,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 80,
                                                                                                                    "end_token": 80,
                                                                                                                    "label": "agent_id"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.agent_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "agent_id=submission_request.agent_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 83,
                                                                                                    "end_token": 87,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 83,
                                                                                                            "end_token": 83,
                                                                                                            "label": "agent_version"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 85,
                                                                                                            "end_token": 87,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 85,
                                                                                                                    "end_token": 85,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 87,
                                                                                                                    "end_token": 87,
                                                                                                                    "label": "agent_version"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.agent_version"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "agent_version=submission_request.agent_version"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 90,
                                                                                                    "end_token": 94,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 90,
                                                                                                            "end_token": 90,
                                                                                                            "label": "slug"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 92,
                                                                                                            "end_token": 94,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 92,
                                                                                                                    "end_token": 92,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 94,
                                                                                                                    "end_token": 94,
                                                                                                                    "label": "slug"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.slug"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "slug=submission_request.slug"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 97,
                                                                                                    "end_token": 101,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 97,
                                                                                                            "end_token": 97,
                                                                                                            "label": "name"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 99,
                                                                                                            "end_token": 101,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 99,
                                                                                                                    "end_token": 99,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 101,
                                                                                                                    "end_token": 101,
                                                                                                                    "label": "name"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.name"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "name=submission_request.name"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 104,
                                                                                                    "end_token": 108,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 104,
                                                                                                            "end_token": 104,
                                                                                                            "label": "video_url"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 106,
                                                                                                            "end_token": 108,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 106,
                                                                                                                    "end_token": 106,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 108,
                                                                                                                    "end_token": 108,
                                                                                                                    "label": "video_url"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.video_url"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "video_url=submission_request.video_url"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 111,
                                                                                                    "end_token": 115,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 111,
                                                                                                            "end_token": 111,
                                                                                                            "label": "image_urls"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 113,
                                                                                                            "end_token": 115,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 113,
                                                                                                                    "end_token": 113,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 115,
                                                                                                                    "end_token": 115,
                                                                                                                    "label": "image_urls"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.image_urls"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "image_urls=submission_request.image_urls"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 118,
                                                                                                    "end_token": 122,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 118,
                                                                                                            "end_token": 118,
                                                                                                            "label": "description"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 120,
                                                                                                            "end_token": 122,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 120,
                                                                                                                    "end_token": 120,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 122,
                                                                                                                    "end_token": 122,
                                                                                                                    "label": "description"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.description"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "description=submission_request.description"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 125,
                                                                                                    "end_token": 129,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 125,
                                                                                                            "end_token": 125,
                                                                                                            "label": "sub_heading"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 127,
                                                                                                            "end_token": 129,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 127,
                                                                                                                    "end_token": 127,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 129,
                                                                                                                    "end_token": 129,
                                                                                                                    "label": "sub_heading"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.sub_heading"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "sub_heading=submission_request.sub_heading"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 132,
                                                                                                    "end_token": 136,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 132,
                                                                                                            "end_token": 132,
                                                                                                            "label": "categories"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 134,
                                                                                                            "end_token": 136,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 134,
                                                                                                                    "end_token": 134,
                                                                                                                    "label": "submission_request"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 136,
                                                                                                                    "end_token": 136,
                                                                                                                    "label": "categories"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "submission_request.categories"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "categories=submission_request.categories"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 141,
                                                                    "end_token": 142,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 142,
                                                                            "end_token": 142,
                                                                            "label": "submission"
                                                                        }
                                                                    ],
                                                                    "label": "return submission"
                                                                }
                                                            ],
                                                            "label": "\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 144,
                                                            "end_token": 177,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 147,
                                                                    "end_token": 177,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 148,
                                                                            "end_token": 153,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 148,
                                                                                    "end_token": 150,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 148,
                                                                                            "end_token": 148,
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 150,
                                                                                            "end_token": 150,
                                                                                            "label": "exception"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 151,
                                                                                    "end_token": 152,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 152,
                                                                                            "end_token": 152,
                                                                                            "label": "\"Exception occurred whilst creating store submission\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\"Exception occurred whilst creating store submission\""
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception(\"Exception occurred whilst creating store submission\")"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 155,
                                                                            "end_token": 177,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 156,
                                                                                    "end_token": 177,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 156,
                                                                                            "end_token": 160,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 156,
                                                                                                    "end_token": 156,
                                                                                                    "label": "fastapi"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 158,
                                                                                                    "end_token": 158,
                                                                                                    "label": "responses"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 160,
                                                                                                    "end_token": 160,
                                                                                                    "label": "JSONResponse"
                                                                                                }
                                                                                            ],
                                                                                            "label": "fastapi.responses.JSONResponse"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 161,
                                                                                            "end_token": 177,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 163,
                                                                                                    "end_token": 165,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 163,
                                                                                                            "end_token": 163,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 165,
                                                                                                            "end_token": 165,
                                                                                                            "label": "500"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=500"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 168,
                                                                                                    "end_token": 174,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 168,
                                                                                                            "end_token": 168,
                                                                                                            "label": "content"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "dictionary",
                                                                                                            "start_token": 170,
                                                                                                            "end_token": 174,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "pair",
                                                                                                                    "start_token": 171,
                                                                                                                    "end_token": 173,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 171,
                                                                                                                            "end_token": 171,
                                                                                                                            "label": "\"detail\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "string",
                                                                                                                            "start_token": 173,
                                                                                                                            "end_token": 173,
                                                                                                                            "label": "\"An error occurred while creating the store submission\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"detail\": \"An error occurred while creating the store submission\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "{\"detail\": \"An error occurred while creating the store submission\"}"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "content={\"detail\": \"An error occurred while creating the store submission\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )"
                                                                }
                                                            ],
                                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )"
                                                }
                                            ],
                                            "label": "\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},"
                                        }
                                    ],
                                    "label": "async def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},"
                                }
                            ],
                            "label": "async def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},"
                        }
                    ],
                    "label": "async def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "upload_submission_media",
            "start_line": 487,
            "end_line": 516,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 110,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 109,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "upload_submission_media"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 37,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 10,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "file"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 9,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 7,
                                                            "end_token": 9,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "label": "fastapi"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "label": "UploadFile"
                                                                }
                                                            ],
                                                            "label": "fastapi.UploadFile"
                                                        }
                                                    ],
                                                    "label": ": fastapi.UploadFile"
                                                }
                                            ],
                                            "label": "file: fastapi.UploadFile,"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 12,
                                            "end_token": 35,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 12,
                                                    "end_token": 12,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 13,
                                                    "end_token": 34,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 14,
                                                            "end_token": 16,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 14,
                                                                    "end_token": 15,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 14,
                                                                            "end_token": 14,
                                                                            "label": "typing"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 15,
                                                                            "end_token": 15,
                                                                            "label": "."
                                                                        }
                                                                    ],
                                                                    "label": "typing."
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 16,
                                                                    "end_token": 16,
                                                                    "label": "Annotated"
                                                                }
                                                            ],
                                                            "label": "typing.Annotated"
                                                        },
                                                        {
                                                            "type": "parameters",
                                                            "start_token": 17,
                                                            "end_token": 34,
                                                            "children": [
                                                                {
                                                                    "type": "union_type",
                                                                    "start_token": 19,
                                                                    "end_token": 33,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 19,
                                                                            "end_token": 19,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 21,
                                                                            "end_token": 32,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 21,
                                                                                    "end_token": 23,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 21,
                                                                                            "end_token": 22,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 21,
                                                                                                    "end_token": 21,
                                                                                                    "label": "fastapi"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 22,
                                                                                                    "end_token": 22,
                                                                                                    "label": "."
                                                                                                }
                                                                                            ],
                                                                                            "label": "fastapi."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 23,
                                                                                            "end_token": 23,
                                                                                            "label": "Depends"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 24,
                                                                                    "end_token": 32,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 25,
                                                                                            "end_token": 31,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "dotted_name",
                                                                                                    "start_token": 25,
                                                                                                    "end_token": 30,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "dotted_name",
                                                                                                            "start_token": 25,
                                                                                                            "end_token": 29,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "dotted_name",
                                                                                                                    "start_token": 25,
                                                                                                                    "end_token": 28,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "dotted_name",
                                                                                                                            "start_token": 25,
                                                                                                                            "end_token": 27,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 25,
                                                                                                                                    "end_token": 25,
                                                                                                                                    "label": "autogpt_libs"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 27,
                                                                                                                                    "end_token": 27,
                                                                                                                                    "label": "auth"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "autogpt_libs.auth"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 28,
                                                                                                                            "end_token": 28,
                                                                                                                            "label": "."
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "autogpt_libs.auth."
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 29,
                                                                                                                    "end_token": 29,
                                                                                                                    "label": "depends"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "autogpt_libs.auth.depends"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 30,
                                                                                                            "end_token": 30,
                                                                                                            "label": "."
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "autogpt_libs.auth.depends."
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 31,
                                                                                                    "end_token": 31,
                                                                                                    "label": "get_user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "autogpt_libs.auth.depends.get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n"
                                                                }
                                                            ],
                                                            "label": "[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": ": typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                }
                                            ],
                                            "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],"
                                        }
                                    ],
                                    "label": "(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 38,
                                    "end_token": 109,
                                    "children": [
                                        {
                                            "type": "string",
                                            "start_token": 40,
                                            "end_token": 42,
                                            "children": [],
                                            "label": "\"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\""
                                        },
                                        {
                                            "type": "try_statement",
                                            "start_token": 44,
                                            "end_token": 109,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 45,
                                                    "end_token": 75,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 47,
                                                            "end_token": 70,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 47,
                                                                    "end_token": 47,
                                                                    "label": "media_url"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 49,
                                                                    "end_token": 49,
                                                                    "label": "await"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 50,
                                                                    "end_token": 70,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 50,
                                                                            "end_token": 60,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 50,
                                                                                    "end_token": 59,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 50,
                                                                                            "end_token": 58,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "dotted_name",
                                                                                                    "start_token": 50,
                                                                                                    "end_token": 57,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "dotted_name",
                                                                                                            "start_token": 50,
                                                                                                            "end_token": 56,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "dotted_name",
                                                                                                                    "start_token": 50,
                                                                                                                    "end_token": 55,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "dotted_name",
                                                                                                                            "start_token": 50,
                                                                                                                            "end_token": 54,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "dotted_name",
                                                                                                                                    "start_token": 50,
                                                                                                                                    "end_token": 53,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "dotted_name",
                                                                                                                                            "start_token": 50,
                                                                                                                                            "end_token": 52,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "dotted_name",
                                                                                                                                                    "start_token": 50,
                                                                                                                                                    "end_token": 51,
                                                                                                                                                    "children": [
                                                                                                                                                        {
                                                                                                                                                            "type": "identifier",
                                                                                                                                                            "start_token": 50,
                                                                                                                                                            "end_token": 50,
                                                                                                                                                            "label": "backend"
                                                                                                                                                        },
                                                                                                                                                        {
                                                                                                                                                            "type": "identifier",
                                                                                                                                                            "start_token": 51,
                                                                                                                                                            "end_token": 51,
                                                                                                                                                            "label": "."
                                                                                                                                                        }
                                                                                                                                                    ],
                                                                                                                                                    "label": "backend."
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 52,
                                                                                                                                                    "end_token": 52,
                                                                                                                                                    "label": "server"
                                                                                                                                                }
                                                                                                                                            ],
                                                                                                                                            "label": "backend.server"
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 53,
                                                                                                                                            "end_token": 53,
                                                                                                                                            "label": "."
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "backend.server."
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 54,
                                                                                                                                    "end_token": 54,
                                                                                                                                    "label": "v2"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "backend.server.v2"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 55,
                                                                                                                            "end_token": 55,
                                                                                                                            "label": "."
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "backend.server.v2."
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 56,
                                                                                                                    "end_token": 56,
                                                                                                                    "label": "store"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "backend.server.v2.store"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 57,
                                                                                                            "end_token": 57,
                                                                                                            "label": "."
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "backend.server.v2.store."
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 58,
                                                                                                    "end_token": 58,
                                                                                                    "label": "media"
                                                                                                }
                                                                                            ],
                                                                                            "label": "backend.server.v2.store.media"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 59,
                                                                                            "end_token": 59,
                                                                                            "label": "."
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.server.v2.store.media."
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 60,
                                                                                    "end_token": 60,
                                                                                    "label": "upload_media"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.media.upload_media"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 61,
                                                                            "end_token": 70,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 63,
                                                                                    "end_token": 65,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 63,
                                                                                            "end_token": 63,
                                                                                            "label": "user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 65,
                                                                                            "end_token": 65,
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "user_id=user_id"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 67,
                                                                                    "end_token": 69,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 67,
                                                                                            "end_token": 67,
                                                                                            "label": "file"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 69,
                                                                                            "end_token": 69,
                                                                                            "label": "file"
                                                                                        }
                                                                                    ],
                                                                                    "label": "file=file"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            user_id=user_id, file=file\n"
                                                                        }
                                                                    ],
                                                                    "label": "backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n"
                                                                }
                                                            ],
                                                            "label": "media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 73,
                                                            "end_token": 74,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 74,
                                                                    "end_token": 74,
                                                                    "label": "media_url"
                                                                }
                                                            ],
                                                            "label": "return media_url"
                                                        }
                                                    ],
                                                    "label": ":\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 76,
                                                    "end_token": 109,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 78,
                                                            "end_token": 109,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 80,
                                                                    "end_token": 85,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 80,
                                                                            "end_token": 82,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 80,
                                                                                    "end_token": 81,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 80,
                                                                                            "end_token": 80,
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 81,
                                                                                            "end_token": 81,
                                                                                            "label": "."
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger."
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 82,
                                                                                    "end_token": 82,
                                                                                    "label": "exception"
                                                                                }
                                                                            ],
                                                                            "label": "logger.exception"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 83,
                                                                            "end_token": 85,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 84,
                                                                                    "end_token": 84,
                                                                                    "children": [],
                                                                                    "label": "\"Exception occurred whilst uploading submission media\""
                                                                                }
                                                                            ],
                                                                            "label": "(\"Exception occurred whilst uploading submission media\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.exception(\"Exception occurred whilst uploading submission media\")"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 87,
                                                                    "end_token": 109,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 88,
                                                                            "end_token": 109,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 88,
                                                                                    "end_token": 92,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 88,
                                                                                            "end_token": 91,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "dotted_name",
                                                                                                    "start_token": 88,
                                                                                                    "end_token": 90,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 88,
                                                                                                            "end_token": 88,
                                                                                                            "label": "fastapi"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 90,
                                                                                                            "end_token": 90,
                                                                                                            "label": "responses"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "fastapi.responses"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 91,
                                                                                                    "end_token": 91,
                                                                                                    "label": "."
                                                                                                }
                                                                                            ],
                                                                                            "label": "fastapi.responses."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 92,
                                                                                            "end_token": 92,
                                                                                            "label": "JSONResponse"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 93,
                                                                                    "end_token": 109,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 95,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 95,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 97,
                                                                                                    "end_token": 97,
                                                                                                    "label": "500"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=500"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 100,
                                                                                            "end_token": 106,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 100,
                                                                                                    "end_token": 100,
                                                                                                    "label": "content"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 102,
                                                                                                    "end_token": 106,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 103,
                                                                                                            "end_token": 105,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 103,
                                                                                                                    "end_token": 103,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"detail\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 105,
                                                                                                                    "end_token": 105,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"An error occurred while uploading the media file\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"detail\": \"An error occurred while uploading the media file\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "{\"detail\": \"An error occurred while uploading the media file\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "content={\"detail\": \"An error occurred while uploading the media file\"}"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                                                                }
                                                            ],
                                                            "label": ":\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                                                }
                                            ],
                                            "label": "try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                                        }
                                    ],
                                    "label": ":\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                                }
                            ],
                            "label": "async def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )"
                        }
                    ],
                    "label": "async def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "generate_image",
            "start_line": 524,
            "end_line": 577,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 302,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 302,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 302,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "children": [],
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "children": [],
                                            "label": "generate_image"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 35,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "agent_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "agent_id: str"
                                                },
                                                {
                                                    "type": "default_parameter",
                                                    "start_token": 10,
                                                    "end_token": 34,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "children": [],
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 12,
                                                            "end_token": 32,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 12,
                                                                    "end_token": 14,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 12,
                                                                            "end_token": 12,
                                                                            "children": [],
                                                                            "label": "typing"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 14,
                                                                            "end_token": 14,
                                                                            "children": [],
                                                                            "label": "Annotated"
                                                                        }
                                                                    ],
                                                                    "label": "typing.Annotated"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 15,
                                                                    "end_token": 32,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 17,
                                                                            "end_token": 17,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 19,
                                                                            "end_token": 30,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 19,
                                                                                    "end_token": 21,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 19,
                                                                                            "end_token": 19,
                                                                                            "children": [],
                                                                                            "label": "fastapi"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 21,
                                                                                            "end_token": 21,
                                                                                            "children": [],
                                                                                            "label": "Depends"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.Depends"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 22,
                                                                                    "end_token": 30,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 23,
                                                                                            "end_token": 29,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 23,
                                                                                                    "end_token": 23,
                                                                                                    "children": [],
                                                                                                    "label": "autogpt_libs"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 25,
                                                                                                    "end_token": 25,
                                                                                                    "children": [],
                                                                                                    "label": "auth"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 27,
                                                                                                    "end_token": 29,
                                                                                                    "children": [],
                                                                                                    "label": "depends.get_user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "autogpt_libs.auth.depends.get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                                }
                                                            ],
                                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]"
                                                        }
                                                    ],
                                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n"
                                                }
                                            ],
                                            "label": "(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 36,
                                            "end_token": 42,
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 38,
                                                    "end_token": 41,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 38,
                                                            "end_token": 38,
                                                            "children": [],
                                                            "label": "fastapi"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 40,
                                                            "end_token": 41,
                                                            "children": [],
                                                            "label": "responses."
                                                        }
                                                    ],
                                                    "label": "fastapi.responses."
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 42,
                                                    "end_token": 42,
                                                    "children": [],
                                                    "label": "Response"
                                                }
                                            ],
                                            "label": "-> fastapi.responses.Response"
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 45,
                                            "end_token": 47,
                                            "children": [],
                                            "label": "\"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\""
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 49,
                                            "end_token": 301,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 49,
                                                    "end_token": 301,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 50,
                                                            "end_token": 267,
                                                            "children": [
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 52,
                                                                    "end_token": 68,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 54,
                                                                            "end_token": 68,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 55,
                                                                                    "end_token": 61,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 55,
                                                                                            "end_token": 55,
                                                                                            "children": [],
                                                                                            "label": "backend"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 57,
                                                                                            "end_token": 57,
                                                                                            "children": [],
                                                                                            "label": "data"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 59,
                                                                                            "end_token": 61,
                                                                                            "children": [],
                                                                                            "label": "graph.get_graph"
                                                                                        }
                                                                                    ],
                                                                                    "label": "backend.data.graph.get_graph"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 62,
                                                                                    "end_token": 68,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 63,
                                                                                            "end_token": 63,
                                                                                            "children": [],
                                                                                            "label": "agent_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "default_parameter",
                                                                                            "start_token": 65,
                                                                                            "end_token": 67,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 65,
                                                                                                    "end_token": 65,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 67,
                                                                                                    "end_token": 67,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(agent_id, user_id=user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "await backend.data.graph.get_graph(agent_id, user_id=user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 71,
                                                                    "end_token": 91,
                                                                    "children": [
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 76,
                                                                            "end_token": 91,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 79,
                                                                                    "end_token": 91,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 77,
                                                                                            "end_token": 79,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 77,
                                                                                                    "end_token": 77,
                                                                                                    "children": [],
                                                                                                    "label": "fastapi"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 79,
                                                                                                    "end_token": 79,
                                                                                                    "children": [],
                                                                                                    "label": "HTTPException"
                                                                                                }
                                                                                            ],
                                                                                            "label": "fastapi.HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 80,
                                                                                            "end_token": 91,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "default_parameter",
                                                                                                    "start_token": 82,
                                                                                                    "end_token": 84,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 82,
                                                                                                            "end_token": 82,
                                                                                                            "children": [],
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 84,
                                                                                                            "end_token": 84,
                                                                                                            "children": [],
                                                                                                            "label": "404"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=404"
                                                                                                },
                                                                                                {
                                                                                                    "type": "default_parameter",
                                                                                                    "start_token": 86,
                                                                                                    "end_token": 89,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 86,
                                                                                                            "end_token": 86,
                                                                                                            "children": [],
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "start_token": 88,
                                                                                                            "end_token": 89,
                                                                                                            "children": [],
                                                                                                            "label": "f\"Agent with ID {agent_id} not found\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "detail=f\"Agent with ID {agent_id} not found\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )"
                                                                                }
                                                                            ],
                                                                            "label": "raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )"
                                                                        }
                                                                    ],
                                                                    "label": "if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )"
                                                                },
                                                                {
                                                                    "type": "boolean_operator",
                                                                    "start_token": 133,
                                                                    "end_token": 135,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 134,
                                                                            "end_token": 134,
                                                                            "children": [],
                                                                            "label": "existing_url"
                                                                        }
                                                                    ],
                                                                    "label": "if existing_url:"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 136,
                                                                    "end_token": 146,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 138,
                                                                            "end_token": 143,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 137,
                                                                                    "end_token": 139,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 137,
                                                                                            "end_token": 137,
                                                                                            "children": [],
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 139,
                                                                                            "end_token": 139,
                                                                                            "children": [],
                                                                                            "label": "info"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.info"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 141,
                                                                                    "end_token": 141,
                                                                                    "children": [],
                                                                                    "label": "f"
                                                                                }
                                                                            ],
                                                                            "label": ".info(f\"Using existing image for agent {agent_id}\")"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 145,
                                                                            "end_token": 159,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 146,
                                                                                    "end_token": 159,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 147,
                                                                                            "end_token": 150,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 147,
                                                                                                    "end_token": 147,
                                                                                                    "children": [],
                                                                                                    "label": "."
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 149,
                                                                                                    "end_token": 150,
                                                                                                    "children": [],
                                                                                                    "label": ".JSONResponse"
                                                                                                }
                                                                                            ],
                                                                                            "label": ".responses.JSONResponse"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 151,
                                                                                            "end_token": 159,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 153,
                                                                                                    "end_token": 157,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 153,
                                                                                                            "end_token": 153,
                                                                                                            "children": [],
                                                                                                            "label": "="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 157,
                                                                                                            "end_token": 157,
                                                                                                            "children": [],
                                                                                                            "label": "existing_url"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "={\"image_url\": existing_url"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(content={\"image_url\": existing_url})"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse(content={\"image_url\": existing_url})"
                                                                                }
                                                                            ],
                                                                            "label": "return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})"
                                                                        }
                                                                    ],
                                                                    "label": "\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 169,
                                                                    "end_token": 188,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 171,
                                                                            "end_token": 188,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 172,
                                                                                    "end_token": 181,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 172,
                                                                                            "end_token": 172,
                                                                                            "children": [],
                                                                                            "label": "."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 174,
                                                                                            "end_token": 174,
                                                                                            "children": [],
                                                                                            "label": "."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 176,
                                                                                            "end_token": 181,
                                                                                            "children": [],
                                                                                            "label": ".store.image_gen.generate_agent_image"
                                                                                        }
                                                                                    ],
                                                                                    "label": ".server.v2.store.image_gen.generate_agent_image"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 182,
                                                                                    "end_token": 188,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "default_parameter",
                                                                                            "start_token": 184,
                                                                                            "end_token": 186,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 184,
                                                                                                    "end_token": 184,
                                                                                                    "children": [],
                                                                                                    "label": "agent"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 186,
                                                                                                    "end_token": 186,
                                                                                                    "children": [],
                                                                                                    "label": "agent"
                                                                                                }
                                                                                            ],
                                                                                            "label": "agent=agent"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            agent=agent\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "= await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )"
                                                                },
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 201,
                                                                    "end_token": 218,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 201,
                                                                            "end_token": 201,
                                                                            "children": [],
                                                                            "label": "image_file"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 203,
                                                                            "end_token": 218,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 203,
                                                                                    "end_token": 205,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 203,
                                                                                            "end_token": 203,
                                                                                            "children": [],
                                                                                            "label": "fastapi"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 205,
                                                                                            "end_token": 205,
                                                                                            "children": [],
                                                                                            "label": "UploadFile"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.UploadFile"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 206,
                                                                                    "end_token": 218,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 208,
                                                                                            "end_token": 210,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 208,
                                                                                                    "end_token": 208,
                                                                                                    "children": [],
                                                                                                    "label": "file"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 210,
                                                                                                    "end_token": 210,
                                                                                                    "children": [],
                                                                                                    "label": "image"
                                                                                                }
                                                                                            ],
                                                                                            "label": "file=image"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 213,
                                                                                            "end_token": 215,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 213,
                                                                                                    "end_token": 213,
                                                                                                    "children": [],
                                                                                                    "label": "filename"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 215,
                                                                                                    "end_token": 215,
                                                                                                    "children": [],
                                                                                                    "label": "filename"
                                                                                                }
                                                                                            ],
                                                                                            "label": "filename=filename"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            file=image,\n            filename=filename,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 222,
                                                                    "end_token": 249,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 224,
                                                                            "end_token": 249,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 225,
                                                                                    "end_token": 234,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 225,
                                                                                            "end_token": 225,
                                                                                            "children": [],
                                                                                            "label": "."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 227,
                                                                                            "end_token": 227,
                                                                                            "children": [],
                                                                                            "label": "."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 229,
                                                                                            "end_token": 234,
                                                                                            "children": [],
                                                                                            "label": ".store.media.upload_media"
                                                                                        }
                                                                                    ],
                                                                                    "label": ".server.v2.store.media.upload_media"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 235,
                                                                                    "end_token": 249,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 237,
                                                                                            "end_token": 239,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 237,
                                                                                                    "end_token": 237,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 239,
                                                                                                    "end_token": 239,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 241,
                                                                                            "end_token": 243,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 241,
                                                                                                    "end_token": 241,
                                                                                                    "children": [],
                                                                                                    "label": "file"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 243,
                                                                                                    "end_token": 243,
                                                                                                    "children": [],
                                                                                                    "label": "image_file"
                                                                                                }
                                                                                            ],
                                                                                            "label": "file=image_file"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 245,
                                                                                            "end_token": 247,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 245,
                                                                                                    "end_token": 245,
                                                                                                    "children": [],
                                                                                                    "label": "use_file_name"
                                                                                                },
                                                                                                {
                                                                                                    "type": "true",
                                                                                                    "start_token": 247,
                                                                                                    "end_token": 247,
                                                                                                    "children": [],
                                                                                                    "label": "True"
                                                                                                }
                                                                                            ],
                                                                                            "label": "use_file_name=True"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            user_id=user_id, file=image_file, use_file_name=True\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "= await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 252,
                                                                    "end_token": 266,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 253,
                                                                            "end_token": 266,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 254,
                                                                                    "end_token": 257,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 254,
                                                                                            "end_token": 254,
                                                                                            "children": [],
                                                                                            "label": "."
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 256,
                                                                                            "end_token": 257,
                                                                                            "children": [],
                                                                                            "label": ".JSONResponse"
                                                                                        }
                                                                                    ],
                                                                                    "label": ".responses.JSONResponse"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 258,
                                                                                    "end_token": 266,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 260,
                                                                                            "end_token": 264,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 260,
                                                                                                    "end_token": 260,
                                                                                                    "children": [],
                                                                                                    "label": "="
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 264,
                                                                                                    "end_token": 264,
                                                                                                    "children": [],
                                                                                                    "label": "image_url"
                                                                                                }
                                                                                            ],
                                                                                            "label": "={\"image_url\": image_url"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(content={\"image_url\": image_url})"
                                                                                }
                                                                            ],
                                                                            "label": "fastapi.responses.JSONResponse(content={\"image_url\": image_url})"
                                                                        }
                                                                    ],
                                                                    "label": "return fastapi.responses.JSONResponse(content={\"image_url\": image_url})"
                                                                }
                                                            ],
                                                            "label": ":\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 268,
                                                            "end_token": 301,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 270,
                                                                    "end_token": 301,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 273,
                                                                            "end_token": 277,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 272,
                                                                                    "end_token": 274,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 272,
                                                                                            "end_token": 272,
                                                                                            "children": [],
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 274,
                                                                                            "end_token": 274,
                                                                                            "children": [],
                                                                                            "label": "exception"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.exception"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 276,
                                                                                    "end_token": 276,
                                                                                    "children": [],
                                                                                    "label": "\"Exception occurred whilst generating submission image\""
                                                                                }
                                                                            ],
                                                                            "label": ".exception(\"Exception occurred whilst generating submission image\")"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 279,
                                                                            "end_token": 301,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 280,
                                                                                    "end_token": 301,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "dotted_name",
                                                                                            "start_token": 281,
                                                                                            "end_token": 284,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 281,
                                                                                                    "end_token": 281,
                                                                                                    "children": [],
                                                                                                    "label": "."
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 283,
                                                                                                    "end_token": 284,
                                                                                                    "children": [],
                                                                                                    "label": ".JSONResponse"
                                                                                                }
                                                                                            ],
                                                                                            "label": ".responses.JSONResponse"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 285,
                                                                                            "end_token": 301,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "default_parameter",
                                                                                                    "start_token": 287,
                                                                                                    "end_token": 289,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 289,
                                                                                                            "end_token": 289,
                                                                                                            "children": [],
                                                                                                            "label": "500"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=500"
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "start_token": 291,
                                                                                                    "end_token": 298,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 295,
                                                                                                            "end_token": 297,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 295,
                                                                                                                    "end_token": 295,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"detail\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 297,
                                                                                                                    "end_token": 297,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"An error occurred while generating the image\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"detail\": \"An error occurred while generating the image\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\n            content={\"detail\": \"An error occurred while generating the image\"}"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )"
                                                                        }
                                                                    ],
                                                                    "label": ":\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )"
                                                                }
                                                            ],
                                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )"
                                                        }
                                                    ],
                                                    "label": "try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )"
                                                }
                                            ],
                                            "label": "try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )"
                                        }
                                    ],
                                    "label": "async def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )\n"
                                }
                            ],
                            "label": "async def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )\n"
                        }
                    ],
                    "label": "async def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )\n"
                }
            ]
        }
    ],
    "label": "import logging\nimport typing\nimport urllib.parse\n\nimport autogpt_libs.auth.depends\nimport autogpt_libs.auth.middleware\nimport fastapi\nimport fastapi.responses\n\nimport backend.data.graph\nimport backend.server.v2.store.db\nimport backend.server.v2.store.image_gen\nimport backend.server.v2.store.media\nimport backend.server.v2.store.model\n\nlogger = logging.getLogger(__name__)\n\nrouter = fastapi.APIRouter()\n\n\n##############################################\n############### Profile Endpoints ############\n##############################################\n\n\n@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)\n\n\n@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\n\n\n##############################################\n############### Agent Endpoints ##############\n##############################################\n\n\n@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)\n\n\n@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)\n\n\n@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)\n\n\n##############################################\n############# Creator Endpoints #############\n##############################################\n\n\n@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)\n\n\n@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\n\n\n############################################\n############# Store Submissions ###############\n############################################\n@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)\n\n\n@router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)\n\n\n@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)\n\n\n@router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)\n\n\n@router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\n\n\n@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\n"
}