{
    "type": "module",
    "start_token": 0,
    "end_token": 2665,
    "children": [
        {
            "type": "import_statement",
            "start_token": 0,
            "end_token": 1,
            "label": "import asyncio"
        },
        {
            "type": "import_statement",
            "start_token": 3,
            "end_token": 4,
            "label": "import logging"
        },
        {
            "type": "import_from_statement",
            "start_token": 6,
            "end_token": 9,
            "label": "from collections import defaultdict"
        },
        {
            "type": "import_from_statement",
            "start_token": 11,
            "end_token": 20,
            "label": "from typing import TYPE_CHECKING, Annotated, Any, Sequence"
        },
        {
            "type": "import_statement",
            "start_token": 23,
            "end_token": 24,
            "label": "import pydantic"
        },
        {
            "type": "import_from_statement",
            "start_token": 26,
            "end_token": 33,
            "label": "from autogpt_libs.auth.middleware import auth_middleware"
        },
        {
            "type": "import_from_statement",
            "start_token": 35,
            "end_token": 42,
            "label": "from autogpt_libs.feature_flag.client import feature_flag"
        },
        {
            "type": "import_from_statement",
            "start_token": 44,
            "end_token": 51,
            "label": "from autogpt_libs.utils.cache import thread_cached"
        },
        {
            "type": "import_from_statement",
            "start_token": 53,
            "end_token": 60,
            "label": "from fastapi import APIRouter, Depends, HTTPException"
        },
        {
            "type": "import_from_statement",
            "start_token": 62,
            "end_token": 68,
            "label": "from typing_extensions import Optional, TypedDict\n"
        },
        {
            "type": "import_statement",
            "start_token": 70,
            "end_token": 75,
            "label": "import backend.data.block"
        },
        {
            "type": "import_statement",
            "start_token": 77,
            "end_token": 84,
            "label": "import backend.server.integrations.router"
        },
        {
            "type": "import_statement",
            "start_token": 86,
            "end_token": 93,
            "label": "import backend.server.routers.analytics"
        },
        {
            "type": "import_from_statement",
            "start_token": 95,
            "end_token": 102,
            "label": "from backend.data import execution as execution_db"
        },
        {
            "type": "import_from_statement",
            "start_token": 104,
            "end_token": 111,
            "label": "from backend.data import graph as graph_db"
        },
        {
            "type": "import_from_statement",
            "start_token": 113,
            "end_token": 152,
            "label": "from backend.data.api_key import (\n    APIKeyError,\n    APIKeyNotFoundError,\n    APIKeyPermissionError,\n    APIKeyWithoutHash,\n    generate_api_key,\n    get_api_key_by_id,\n    list_user_api_keys,\n    revoke_api_key,\n    suspend_api_key,\n    update_api_key_permissions,\n)"
        },
        {
            "type": "import_from_statement",
            "start_token": 154,
            "end_token": 164,
            "label": "from backend.data.block import BlockInput, CompletedBlockOutput\n"
        },
        {
            "type": "import_from_statement",
            "start_token": 165,
            "end_token": 175,
            "label": "from backend.data.credit import get_block_costs, get_user_credit_model\n"
        },
        {
            "type": "import_from_statement",
            "start_token": 176,
            "end_token": 184,
            "label": "from backend.data.user import get_or_create_user\n"
        },
        {
            "type": "import_from_statement",
            "start_token": 185,
            "end_token": 195,
            "label": "from backend.executor import ExecutionManager, ExecutionScheduler, scheduler\n"
        },
        {
            "type": "import_from_statement",
            "start_token": 196,
            "end_token": 203,
            "label": "from backend.integrations.creds_manager import IntegrationCredentialsManager"
        },
        {
            "type": "import_from_statement",
            "start_token": 205,
            "end_token": 222,
            "label": "from backend.integrations.webhooks.graph_lifecycle_hooks import (\n    on_graph_activate,\n    on_graph_deactivate,\n)"
        },
        {
            "type": "import_from_statement",
            "start_token": 224,
            "end_token": 248,
            "label": "from backend.server.model import (\n    CreateAPIKeyRequest,\n    CreateAPIKeyResponse,\n    CreateGraph,\n    SetGraphActiveVersion,\n    UpdatePermissionsRequest,\n)"
        },
        {
            "type": "import_from_statement",
            "start_token": 250,
            "end_token": 258,
            "label": "from backend.server.utils import get_user_id\n"
        },
        {
            "type": "import_from_statement",
            "start_token": 259,
            "end_token": 267,
            "label": "from backend.util.service import get_service_client\n"
        },
        {
            "type": "import_from_statement",
            "start_token": 268,
            "end_token": 275,
            "label": "from backend.util.settings import Settings"
        },
        {
            "type": "if_statement",
            "start_token": 278,
            "end_token": 290,
            "children": [
                {
                    "type": "import_from_statement",
                    "start_token": 282,
                    "end_token": 289,
                    "label": "from backend.data.model import Credentials"
                }
            ],
            "label": "if TYPE_CHECKING:\n    from backend.data.model import Credentials\n"
        },
        {
            "type": "decorator",
            "start_token": 293,
            "end_token": 294,
            "label": "@thread_cached"
        },
        {
            "type": "decorator",
            "start_token": 298,
            "end_token": 299,
            "label": "@thread_cached"
        },
        {
            "type": "assignment",
            "start_token": 303,
            "end_token": 307,
            "label": "settings = Settings()"
        },
        {
            "type": "assignment",
            "start_token": 309,
            "end_token": 316,
            "label": "logger = logging.getLogger(__name__)"
        },
        {
            "type": "assignment",
            "start_token": 318,
            "end_token": 322,
            "label": "integration_creds_manager = IntegrationCredentialsManager()"
        },
        {
            "type": "block",
            "start_token": 334,
            "end_token": 374,
            "children": [
                {
                    "type": "assignment",
                    "start_token": 339,
                    "end_token": 343,
                    "label": "v1_router = APIRouter()"
                },
                {
                    "type": "call",
                    "start_token": 345,
                    "end_token": 374,
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 346,
                            "end_token": 360,
                            "label": "v1_router.include_router(\n    backend.server.integrations.router.router,"
                        },
                        {
                            "type": "keyword_argument",
                            "start_token": 362,
                            "end_token": 371,
                            "label": "prefix=\"/integrations\",\n    tags=[\"integrations\"]"
                        }
                    ],
                    "label": "\nv1_router.include_router(\n    backend.server.integrations.router.router,\n    prefix=\"/integrations\",\n    tags=[\"integrations\"],\n)"
                }
            ],
            "label": "Define the API routes\nv1_router = APIRouter()\n\nv1_router.include_router(\n    backend.server.integrations.router.router,\n    prefix=\"/integrations\",\n    tags=[\"integrations\"],\n)"
        },
        {
            "type": "block",
            "start_token": 376,
            "end_token": 417,
            "children": [
                {
                    "type": "assignment",
                    "start_token": 377,
                    "end_token": 414,
                    "label": "v1_router.include_router(\n    backend.server.routers.analytics.router,\n    prefix=\"/analytics\",\n    tags=[\"analytics\"],\n    dependencies=[Depends(auth_middleware)],\n"
                }
            ],
            "label": "\nv1_router.include_router(\n    backend.server.routers.analytics.router,\n    prefix=\"/analytics\",\n    tags=[\"analytics\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n"
        },
        {
            "type": "block",
            "start_token": 612,
            "end_token": 802,
            "children": [
                {
                    "type": "block",
                    "start_token": 777,
                    "end_token": 801,
                    "children": [
                        {
                            "type": "call",
                            "start_token": 778,
                            "end_token": 791,
                            "children": [
                                {
                                    "type": "path",
                                    "start_token": 779,
                                    "end_token": 791,
                                    "label": "v1_router.get(path=\"/blocks\", tags=[\"blocks\"]"
                                }
                            ],
                            "label": "@v1_router.get(path=\"/blocks\", tags=[\"blocks\"]"
                        }
                    ],
                    "label": "\n@v1_router.get(path=\"/blocks\", tags=[\"blocks\"], dependencies=[Depends(auth_middleware)])"
                }
            ],
            "label": "########################################################\n##################### Blocks ###########################\n########################################################\n\n\n@v1_router.get(path=\"/blocks\", tags=[\"blocks\"], dependencies=[Depends(auth_middleware)])\n"
        },
        {
            "type": "block",
            "start_token": 1002,
            "end_token": 2664,
            "children": [],
            "label": "@v1_router.get(path=\"/credits\", dependencies=[Depends(auth_middleware)])\n\n\n########################################################\n##################### Graphs ###########################\n########################################################\n\n\n\n\n@v1_router.get(path=\"/graphs\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)])\n\n\n@v1_router.get(\n    path=\"/graphs/{graph_id}\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n@v1_router.get(\n    path=\"/graphs/{graph_id}/versions/{version}\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/graphs/{graph_id}/versions\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@v1_router.get(\n    path=\"/templates/{graph_id}/versions\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/graphs\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n\n\n\n\n@v1_router.delete(\n    path=\"/graphs/{graph_id}\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n\n\n@v1_router.put(\n    path=\"/graphs/{graph_id}\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n@v1_router.put(\n    path=\"/templates/{graph_id}\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.put(\n    path=\"/graphs/{graph_id}/versions/active\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/graphs/{graph_id}/execute\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/graphs/{graph_id}/executions/{graph_exec_id}/stop\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/executions\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/graphs/{graph_id}/executions/{graph_exec_id}\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n##################### Templates ########################\n########################################################\n\n\n@v1_router.get(\n    path=\"/templates\",\n    tags=[\"graphs\", \"templates\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/templates/{graph_id}\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/templates\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n##################### Schedules ########################\n########################################################\n\n\n\n\n@v1_router.post(\n    path=\"/schedules\",\n    tags=[\"schedules\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.delete(\n    path=\"/schedules/{schedule_id}\",\n    tags=[\"schedules\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/schedules\",\n    tags=[\"schedules\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n#####################  API KEY ##############################\n########################################################\n\n\n@v1_router.post(\n    \"/api-keys\",\n    response_model=list[CreateAPIKeyResponse] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n\n\n@v1_router.get(\n    \"/api-keys\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n        raise HTTPException(status_code=400, detail=str(e))\n\n\n@v1_router.get(\n    \"/api-keys/{key_id}\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to get API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))\n\n\n@v1_router.delete(\n    \"/api-keys/{key_id}\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n\n\n@v1_router.post(\n    \"/api-keys/{key_id}/suspend\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n\n\n@v1_router.put(\n    \"/api-keys/{key_id}/permissions\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")"
        },
        {
            "type": "function_placeholder",
            "name": "execution_manager_client",
            "start_line": 55,
            "end_line": 56,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 13,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 13,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "execution_manager_client"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 3,
                                    "children": [],
                                    "label": "()"
                                },
                                {
                                    "type": "type",
                                    "start_token": 5,
                                    "end_token": 6,
                                    "children": [],
                                    "label": "> ExecutionManager"
                                },
                                {
                                    "type": "block",
                                    "start_token": 8,
                                    "end_token": 13,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 9,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 10,
                                                    "end_token": 13,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "children": [],
                                                            "label": "get_service_client"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 11,
                                                            "end_token": 13,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 12,
                                                                    "end_token": 12,
                                                                    "children": [],
                                                                    "label": "ExecutionManager"
                                                                }
                                                            ],
                                                            "label": "(ExecutionManager)"
                                                        }
                                                    ],
                                                    "label": "get_service_client(ExecutionManager)"
                                                }
                                            ],
                                            "label": "return get_service_client(ExecutionManager)"
                                        }
                                    ],
                                    "label": "\n    return get_service_client(ExecutionManager)"
                                }
                            ],
                            "label": "def execution_manager_client() -> ExecutionManager:\n    return get_service_client(ExecutionManager)"
                        }
                    ],
                    "label": "def execution_manager_client() -> ExecutionManager:\n    return get_service_client(ExecutionManager)"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "execution_scheduler_client",
            "start_line": 60,
            "end_line": 61,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 14,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 14,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "execution_scheduler_client"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 3,
                                    "children": [
                                        {
                                            "type": "argument_list",
                                            "start_token": 2,
                                            "end_token": 3,
                                            "label": "()"
                                        }
                                    ],
                                    "label": "()"
                                },
                                {
                                    "type": "type",
                                    "start_token": 5,
                                    "end_token": 6,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 6,
                                            "end_token": 6,
                                            "label": "ExecutionScheduler"
                                        }
                                    ],
                                    "label": "> ExecutionScheduler"
                                },
                                {
                                    "type": "block",
                                    "start_token": 8,
                                    "end_token": 14,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 9,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 10,
                                                    "end_token": 13,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "label": "get_service_client"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 11,
                                                            "end_token": 13,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 12,
                                                                    "end_token": 12,
                                                                    "label": "ExecutionScheduler"
                                                                }
                                                            ],
                                                            "label": "(ExecutionScheduler)"
                                                        }
                                                    ],
                                                    "label": "get_service_client(ExecutionScheduler)"
                                                }
                                            ],
                                            "label": "return get_service_client(ExecutionScheduler)"
                                        }
                                    ],
                                    "label": "\n    return get_service_client(ExecutionScheduler)\n"
                                }
                            ],
                            "label": "def execution_scheduler_client() -> ExecutionScheduler:\n    return get_service_client(ExecutionScheduler)\n"
                        }
                    ],
                    "label": "def execution_scheduler_client() -> ExecutionScheduler:\n    return get_service_client(ExecutionScheduler)\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_or_create_user_route",
            "start_line": 94,
            "end_line": 96,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 28,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 28,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 8,
                                    "end_token": 11,
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 8,
                                            "end_token": 11,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "children": [],
                                                    "label": "Depends"
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 9,
                                                    "end_token": 11,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "children": [],
                                                            "label": "auth_middleware"
                                                        }
                                                    ],
                                                    "label": "(auth_middleware)"
                                                }
                                            ],
                                            "label": "Depends(auth_middleware)"
                                        }
                                    ],
                                    "label": "Depends(auth_middleware)"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 12,
                                    "children": [
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 4,
                                            "end_token": 11,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "user_data"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "dict"
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 7,
                                                    "end_token": 11,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 8,
                                                            "end_token": 11,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 8,
                                                                    "end_token": 8,
                                                                    "children": [],
                                                                    "label": "Depends"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 9,
                                                                    "end_token": 11,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 10,
                                                                            "end_token": 10,
                                                                            "children": [],
                                                                            "label": "auth_middleware"
                                                                        }
                                                                    ],
                                                                    "label": "(auth_middleware)"
                                                                }
                                                            ],
                                                            "label": "Depends(auth_middleware)"
                                                        }
                                                    ],
                                                    "label": "= Depends(auth_middleware)"
                                                }
                                            ],
                                            "label": "user_data: dict = Depends(auth_middleware)"
                                        }
                                    ],
                                    "label": "(user_data: dict = Depends(auth_middleware))"
                                },
                                {
                                    "type": "block",
                                    "start_token": 14,
                                    "end_token": 28,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 15,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 15,
                                                    "end_token": 15,
                                                    "children": [],
                                                    "label": "user"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 17,
                                                    "end_token": 21,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 17,
                                                            "end_token": 21,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 18,
                                                                    "end_token": 18,
                                                                    "children": [],
                                                                    "label": "get_or_create_user"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 19,
                                                                    "end_token": 21,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 20,
                                                                            "end_token": 20,
                                                                            "children": [],
                                                                            "label": "user_data"
                                                                        }
                                                                    ],
                                                                    "label": "(user_data)"
                                                                }
                                                            ],
                                                            "label": "await get_or_create_user(user_data)"
                                                        }
                                                    ],
                                                    "label": "await get_or_create_user(user_data)"
                                                }
                                            ],
                                            "label": "user = await get_or_create_user(user_data)"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 23,
                                            "end_token": 28,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 24,
                                                    "end_token": 28,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 24,
                                                            "end_token": 26,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 24,
                                                                    "end_token": 24,
                                                                    "children": [],
                                                                    "label": "user"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 26,
                                                                    "end_token": 26,
                                                                    "children": [],
                                                                    "label": "model_dump"
                                                                }
                                                            ],
                                                            "label": "user.model_dump"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 27,
                                                            "end_token": 28,
                                                            "children": [],
                                                            "label": "()"
                                                        }
                                                    ],
                                                    "label": "user.model_dump()"
                                                }
                                            ],
                                            "label": "return user.model_dump()"
                                        }
                                    ],
                                    "label": "\n    user = await get_or_create_user(user_data)\n    return user.model_dump()"
                                }
                            ],
                            "label": "async def get_or_create_user_route(user_data: dict = Depends(auth_middleware)):\n    user = await get_or_create_user(user_data)\n    return user.model_dump()"
                        }
                    ],
                    "label": "async def get_or_create_user_route(user_data: dict = Depends(auth_middleware)):\n    user = await get_or_create_user(user_data)\n    return user.model_dump()"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graph_blocks",
            "start_line": 105,
            "end_line": 108,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 76,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 76,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "get_graph_blocks"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 3,
                                    "children": [],
                                    "label": "()"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 6,
                                    "end_token": 14,
                                    "children": [
                                        {
                                            "type": "dotted_name",
                                            "start_token": 6,
                                            "end_token": 6,
                                            "children": [],
                                            "label": "Sequence"
                                        },
                                        {
                                            "type": "generic_type",
                                            "start_token": 8,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 8,
                                                    "end_token": 8,
                                                    "children": [],
                                                    "label": "dict"
                                                },
                                                {
                                                    "type": "tuple",
                                                    "start_token": 9,
                                                    "end_token": 13,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "children": [],
                                                            "label": "Any"
                                                        },
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 12,
                                                            "end_token": 12,
                                                            "children": [],
                                                            "label": "Any"
                                                        }
                                                    ],
                                                    "label": "[Any, Any]"
                                                }
                                            ],
                                            "label": "dict[Any, Any]"
                                        }
                                    ],
                                    "label": "Sequence[dict[Any, Any]]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 16,
                                    "end_token": 76,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 17,
                                            "end_token": 39,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 17,
                                                    "end_token": 17,
                                                    "children": [],
                                                    "label": "blocks"
                                                },
                                                {
                                                    "type": "list_comprehension",
                                                    "start_token": 19,
                                                    "end_token": 39,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 20,
                                                            "end_token": 22,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 20,
                                                                    "end_token": 20,
                                                                    "children": [],
                                                                    "label": "block"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 21,
                                                                    "end_token": 22,
                                                                    "children": [],
                                                                    "label": "()"
                                                                }
                                                            ],
                                                            "label": "block()"
                                                        },
                                                        {
                                                            "type": "for_in_clause",
                                                            "start_token": 23,
                                                            "end_token": 36,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 24,
                                                                    "end_token": 24,
                                                                    "children": [],
                                                                    "label": "block"
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 25,
                                                                    "end_token": 36,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 26,
                                                                            "end_token": 29,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 26,
                                                                                    "end_token": 26,
                                                                                    "children": [],
                                                                                    "label": "backend"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 28,
                                                                                    "end_token": 28,
                                                                                    "children": [],
                                                                                    "label": "data"
                                                                                }
                                                                            ],
                                                                            "label": "backend.data."
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 30,
                                                                            "end_token": 34,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 30,
                                                                                    "end_token": 30,
                                                                                    "children": [],
                                                                                    "label": "block"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 33,
                                                                                    "end_token": 34,
                                                                                    "children": [],
                                                                                    "label": "()"
                                                                                }
                                                                            ],
                                                                            "label": "block.get_blocks()"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 35,
                                                                            "end_token": 36,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 35,
                                                                                    "end_token": 35,
                                                                                    "children": [],
                                                                                    "label": "."
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 37,
                                                                                    "end_token": 38,
                                                                                    "children": [],
                                                                                    "label": "()"
                                                                                }
                                                                            ],
                                                                            "label": ".values"
                                                                        }
                                                                    ],
                                                                    "label": "in backend.data.block.get_blocks().values"
                                                                }
                                                            ],
                                                            "label": "for block in backend.data.block.get_blocks().values"
                                                        }
                                                    ],
                                                    "label": "[block() for block in backend.data.block.get_blocks().values()]"
                                                }
                                            ],
                                            "label": "blocks = [block() for block in backend.data.block.get_blocks().values()]"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 41,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 41,
                                                    "end_token": 41,
                                                    "children": [],
                                                    "label": "costs"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 43,
                                                    "end_token": 45,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 43,
                                                            "end_token": 43,
                                                            "children": [],
                                                            "label": "get_block_costs"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 44,
                                                            "end_token": 45,
                                                            "children": [],
                                                            "label": "()"
                                                        }
                                                    ],
                                                    "label": "get_block_costs()"
                                                }
                                            ],
                                            "label": "costs = get_block_costs()"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 47,
                                            "end_token": 76,
                                            "children": [
                                                {
                                                    "type": "list_comprehension",
                                                    "start_token": 48,
                                                    "end_token": 76,
                                                    "children": [
                                                        {
                                                            "type": "dictionary_comprehension",
                                                            "start_token": 49,
                                                            "end_token": 71,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary_splat",
                                                                    "start_token": 50,
                                                                    "end_token": 52,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 52,
                                                                            "end_token": 56,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 52,
                                                                                    "end_token": 52,
                                                                                    "children": [],
                                                                                    "label": "b"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 54,
                                                                                    "end_token": 56,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 54,
                                                                                            "end_token": 54,
                                                                                            "children": [],
                                                                                            "label": "to_dict"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 55,
                                                                                            "end_token": 56,
                                                                                            "children": [],
                                                                                            "label": "()"
                                                                                        }
                                                                                    ],
                                                                                    "label": "to_dict()"
                                                                                }
                                                                            ],
                                                                            "label": "b.to_dict()"
                                                                        }
                                                                    ],
                                                                    "label": "**b"
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 58,
                                                                    "end_token": 70,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 58,
                                                                            "end_token": 58,
                                                                            "children": [],
                                                                            "label": "\"costs\""
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 60,
                                                                            "end_token": 70,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 60,
                                                                                    "end_token": 62,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 60,
                                                                                            "end_token": 60,
                                                                                            "children": [],
                                                                                            "label": "costs"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 62,
                                                                                            "end_token": 62,
                                                                                            "children": [],
                                                                                            "label": "get"
                                                                                        }
                                                                                    ],
                                                                                    "label": "costs.get"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 63,
                                                                                    "end_token": 70,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 64,
                                                                                            "end_token": 66,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 64,
                                                                                                    "end_token": 64,
                                                                                                    "children": [],
                                                                                                    "label": "b"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 66,
                                                                                                    "end_token": 66,
                                                                                                    "children": [],
                                                                                                    "label": "id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "b.id"
                                                                                        },
                                                                                        {
                                                                                            "type": "list",
                                                                                            "start_token": 68,
                                                                                            "end_token": 69,
                                                                                            "children": [],
                                                                                            "label": "[]"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(b.id, [])"
                                                                                }
                                                                            ],
                                                                            "label": "costs.get(b.id, [])"
                                                                        }
                                                                    ],
                                                                    "label": "\"costs\": costs.get(b.id, [])"
                                                                }
                                                            ],
                                                            "label": "{**b.to_dict(), \"costs\": costs.get(b.id, [])}"
                                                        },
                                                        {
                                                            "type": "for_in_clause",
                                                            "start_token": 72,
                                                            "end_token": 75,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 73,
                                                                    "end_token": 73,
                                                                    "children": [],
                                                                    "label": "b"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 75,
                                                                    "end_token": 75,
                                                                    "children": [],
                                                                    "label": "blocks"
                                                                }
                                                            ],
                                                            "label": "for b in blocks"
                                                        }
                                                    ],
                                                    "label": "[{**b.to_dict(), \"costs\": costs.get(b.id, [])} for b in blocks]"
                                                }
                                            ],
                                            "label": "return [{**b.to_dict(), \"costs\": costs.get(b.id, [])} for b in blocks]"
                                        }
                                    ],
                                    "label": "\n    blocks = [block() for block in backend.data.block.get_blocks().values()]\n    costs = get_block_costs()\n    return [{**b.to_dict(), \"costs\": costs.get(b.id, [])} for b in blocks]"
                                }
                            ],
                            "label": "def get_graph_blocks() -> Sequence[dict[Any, Any]]:\n    blocks = [block() for block in backend.data.block.get_blocks().values()]\n    costs = get_block_costs()\n    return [{**b.to_dict(), \"costs\": costs.get(b.id, [])} for b in blocks]"
                        }
                    ],
                    "label": "def get_graph_blocks() -> Sequence[dict[Any, Any]]:\n    blocks = [block() for block in backend.data.block.get_blocks().values()]\n    costs = get_block_costs()\n    return [{**b.to_dict(), \"costs\": costs.get(b.id, [])} for b in blocks]"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "execute_graph_block",
            "start_line": 116,
            "end_line": 124,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 79,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 79,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "execute_graph_block"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 10,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 3,
                                            "end_token": 5,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 3,
                                                    "end_token": 3,
                                                    "label": "block_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "block_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "label": "data"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "BlockInput"
                                                }
                                            ],
                                            "label": "data: BlockInput"
                                        }
                                    ],
                                    "label": "(block_id: str, data: BlockInput)"
                                },
                                {
                                    "type": "type",
                                    "start_token": 12,
                                    "end_token": 13,
                                    "label": "> CompletedBlockOutput"
                                },
                                {
                                    "type": "block",
                                    "start_token": 15,
                                    "end_token": 79,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 16,
                                            "end_token": 27,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 16,
                                                    "end_token": 16,
                                                    "label": "obj"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 18,
                                                    "end_token": 27,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 18,
                                                            "end_token": 24,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 18,
                                                                    "end_token": 22,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 18,
                                                                            "end_token": 20,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 18,
                                                                                    "end_token": 18,
                                                                                    "label": "backend"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 20,
                                                                                    "end_token": 20,
                                                                                    "label": "data"
                                                                                }
                                                                            ],
                                                                            "label": "backend.data"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 22,
                                                                            "end_token": 22,
                                                                            "label": "block"
                                                                        }
                                                                    ],
                                                                    "label": "backend.data.block"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 24,
                                                                    "end_token": 24,
                                                                    "label": "get_block"
                                                                }
                                                            ],
                                                            "label": "backend.data.block.get_block"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 25,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 26,
                                                                    "end_token": 26,
                                                                    "label": "block_id"
                                                                }
                                                            ],
                                                            "label": "(block_id)"
                                                        }
                                                    ],
                                                    "label": "backend.data.block.get_block(block_id)"
                                                }
                                            ],
                                            "label": "obj = backend.data.block.get_block(block_id)"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 29,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "start_token": 30,
                                                    "end_token": 31,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 31,
                                                            "end_token": 31,
                                                            "label": "obj"
                                                        }
                                                    ],
                                                    "label": "not obj"
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "start_token": 34,
                                                    "end_token": 45,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 35,
                                                            "end_token": 45,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 35,
                                                                    "end_token": 35,
                                                                    "label": "HTTPException"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 36,
                                                                    "end_token": 45,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 37,
                                                                            "end_token": 39,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 37,
                                                                                    "end_token": 37,
                                                                                    "label": "status_code"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 39,
                                                                                    "end_token": 39,
                                                                                    "label": "404"
                                                                                }
                                                                            ],
                                                                            "label": "status_code=404"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 41,
                                                                            "end_token": 44,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 41,
                                                                                    "end_token": 41,
                                                                                    "label": "detail"
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "start_token": 43,
                                                                                    "end_token": 44,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 44,
                                                                                            "end_token": 44,
                                                                                            "label": "\"Block #{block_id} not found.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "f\"Block #{block_id} not found.\""
                                                                                }
                                                                            ],
                                                                            "label": "detail=f\"Block #{block_id} not found.\""
                                                                        }
                                                                    ],
                                                                    "label": "(status_code=404, detail=f\"Block #{block_id} not found.\")"
                                                                }
                                                            ],
                                                            "label": "HTTPException(status_code=404, detail=f\"Block #{block_id} not found.\")"
                                                        }
                                                    ],
                                                    "label": "raise HTTPException(status_code=404, detail=f\"Block #{block_id} not found.\")"
                                                }
                                            ],
                                            "label": "if not obj:\n        raise HTTPException(status_code=404, detail=f\"Block #{block_id} not found.\")"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 48,
                                            "end_token": 53,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 48,
                                                    "end_token": 48,
                                                    "label": "output"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 50,
                                                    "end_token": 53,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 50,
                                                            "end_token": 50,
                                                            "label": "defaultdict"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 51,
                                                            "end_token": 53,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 52,
                                                                    "end_token": 52,
                                                                    "label": "list"
                                                                }
                                                            ],
                                                            "label": "(list)"
                                                        }
                                                    ],
                                                    "label": "defaultdict(list)"
                                                }
                                            ],
                                            "label": "output = defaultdict(list)"
                                        },
                                        {
                                            "type": "for_statement",
                                            "start_token": 55,
                                            "end_token": 76,
                                            "children": [
                                                {
                                                    "type": "for_in_clause",
                                                    "start_token": 55,
                                                    "end_token": 60,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 56,
                                                            "end_token": 56,
                                                            "label": "name"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 58,
                                                            "end_token": 58,
                                                            "label": "data"
                                                        },
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 60,
                                                            "end_token": 62,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 60,
                                                                    "end_token": 60,
                                                                    "label": "obj"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 62,
                                                                    "end_token": 62,
                                                                    "label": "execute"
                                                                }
                                                            ],
                                                            "label": "obj.execute"
                                                        }
                                                    ],
                                                    "label": "for name, data in obj"
                                                },
                                                {
                                                    "type": "call",
                                                    "start_token": 63,
                                                    "end_token": 65,
                                                    "children": [
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 64,
                                                            "end_token": 64,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 64,
                                                                    "end_token": 64,
                                                                    "label": "data"
                                                                }
                                                            ],
                                                            "label": "data"
                                                        }
                                                    ],
                                                    "label": "(data)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 66,
                                                    "end_token": 76,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 68,
                                                            "end_token": 76,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 68,
                                                                    "end_token": 73,
                                                                    "children": [
                                                                        {
                                                                            "type": "subscript",
                                                                            "start_token": 68,
                                                                            "end_token": 71,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 68,
                                                                                    "end_token": 68,
                                                                                    "label": "output"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 70,
                                                                                    "end_token": 70,
                                                                                    "label": "name"
                                                                                }
                                                                            ],
                                                                            "label": "output[name]"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 73,
                                                                            "end_token": 73,
                                                                            "label": "append"
                                                                        }
                                                                    ],
                                                                    "label": "output[name].append"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 74,
                                                                    "end_token": 76,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 75,
                                                                            "end_token": 75,
                                                                            "label": "data"
                                                                        }
                                                                    ],
                                                                    "label": "(data)"
                                                                }
                                                            ],
                                                            "label": "output[name].append(data)"
                                                        }
                                                    ],
                                                    "label": ":\n        output[name].append(data)"
                                                }
                                            ],
                                            "label": "for name, data in obj.execute(data):\n        output[name].append(data)"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 78,
                                            "end_token": 79,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 79,
                                                    "end_token": 79,
                                                    "label": "output"
                                                }
                                            ],
                                            "label": "return output"
                                        }
                                    ],
                                    "label": "\n    obj = backend.data.block.get_block(block_id)\n    if not obj:\n        raise HTTPException(status_code=404, detail=f\"Block #{block_id} not found.\")\n\n    output = defaultdict(list)\n    for name, data in obj.execute(data):\n        output[name].append(data)\n    return output"
                                }
                            ],
                            "label": "def execute_graph_block(block_id: str, data: BlockInput) -> CompletedBlockOutput:\n    obj = backend.data.block.get_block(block_id)\n    if not obj:\n        raise HTTPException(status_code=404, detail=f\"Block #{block_id} not found.\")\n\n    output = defaultdict(list)\n    for name, data in obj.execute(data):\n        output[name].append(data)\n    return output"
                        }
                    ],
                    "label": "def execute_graph_block(block_id: str, data: BlockInput) -> CompletedBlockOutput:\n    obj = backend.data.block.get_block(block_id)\n    if not obj:\n        raise HTTPException(status_code=404, detail=f\"Block #{block_id} not found.\")\n\n    output = defaultdict(list)\n    for name, data in obj.execute(data):\n        output[name].append(data)\n    return output"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_user_credits",
            "start_line": 133,
            "end_line": 137,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 65,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 65,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 65,
                                    "children": [
                                        {
                                            "type": "async",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "children": [],
                                            "label": "async"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "children": [],
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "children": [],
                                            "label": "get_user_credits"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 18,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 15,
                                                            "children": [
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 7,
                                                                    "end_token": 15,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 7,
                                                                            "end_token": 7,
                                                                            "children": [],
                                                                            "label": "Annotated"
                                                                        },
                                                                        {
                                                                            "type": "generic_type",
                                                                            "start_token": 8,
                                                                            "end_token": 15,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 9,
                                                                                    "end_token": 9,
                                                                                    "children": [],
                                                                                    "label": "str"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 11,
                                                                                    "end_token": 14,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 11,
                                                                                            "end_token": 11,
                                                                                            "children": [],
                                                                                            "label": "Depends"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 12,
                                                                                            "end_token": 14,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 13,
                                                                                                    "end_token": 13,
                                                                                                    "children": [],
                                                                                                    "label": "get_user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(get_user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "Depends(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "[str, Depends(get_user_id)]"
                                                                        }
                                                                    ],
                                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": ": Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 19,
                                            "end_token": 26,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 21,
                                                    "end_token": 26,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 21,
                                                            "end_token": 21,
                                                            "children": [],
                                                            "label": "dict"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 23,
                                                            "end_token": 23,
                                                            "children": [],
                                                            "label": "str"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 25,
                                                            "end_token": 25,
                                                            "children": [],
                                                            "label": "int"
                                                        }
                                                    ],
                                                    "label": "dict[str, int]"
                                                }
                                            ],
                                            "label": "-> dict[str, int]"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 28,
                                            "end_token": 65,
                                            "children": [
                                                {
                                                    "type": "comment",
                                                    "start_token": 29,
                                                    "end_token": 47,
                                                    "children": [],
                                                    "label": "# Credits can go negative, so ensure it's at least 0 for user to see."
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 49,
                                                    "end_token": 65,
                                                    "children": [
                                                        {
                                                            "type": "dictionary",
                                                            "start_token": 50,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 51,
                                                                    "end_token": 64,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 51,
                                                                            "end_token": 51,
                                                                            "children": [],
                                                                            "label": "\"credits\""
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 53,
                                                                            "end_token": 64,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 53,
                                                                                    "end_token": 53,
                                                                                    "children": [],
                                                                                    "label": "max"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 54,
                                                                                    "end_token": 64,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "await",
                                                                                            "start_token": 55,
                                                                                            "end_token": 61,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 61,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 56,
                                                                                                            "end_token": 58,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 56,
                                                                                                                    "end_token": 56,
                                                                                                                    "children": [],
                                                                                                                    "label": "_user_credit_model"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 58,
                                                                                                                    "end_token": 58,
                                                                                                                    "children": [],
                                                                                                                    "label": "get_or_refill_credit"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "_user_credit_model.get_or_refill_credit"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 59,
                                                                                                            "end_token": 61,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 60,
                                                                                                                    "end_token": 60,
                                                                                                                    "children": [],
                                                                                                                    "label": "user_id"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "(user_id)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "_user_credit_model.get_or_refill_credit(user_id)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "await _user_credit_model.get_or_refill_credit(user_id)"
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "start_token": 63,
                                                                                            "end_token": 63,
                                                                                            "children": [],
                                                                                            "label": "0"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(await _user_credit_model.get_or_refill_credit(user_id), 0)"
                                                                                }
                                                                            ],
                                                                            "label": "max(await _user_credit_model.get_or_refill_credit(user_id), 0)"
                                                                        }
                                                                    ],
                                                                    "label": "\"credits\": max(await _user_credit_model.get_or_refill_credit(user_id), 0)"
                                                                }
                                                            ],
                                                            "label": "{\"credits\": max(await _user_credit_model.get_or_refill_credit(user_id), 0)}"
                                                        }
                                                    ],
                                                    "label": "return {\"credits\": max(await _user_credit_model.get_or_refill_credit(user_id), 0)}"
                                                }
                                            ],
                                            "label": "\n    # Credits can go negative, so ensure it's at least 0 for user to see.\n    return {\"credits\": max(await _user_credit_model.get_or_refill_credit(user_id), 0)}"
                                        }
                                    ],
                                    "label": "async def get_user_credits(\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> dict[str, int]:\n    # Credits can go negative, so ensure it's at least 0 for user to see.\n    return {\"credits\": max(await _user_credit_model.get_or_refill_credit(user_id), 0)}"
                                }
                            ],
                            "label": "async def get_user_credits(\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> dict[str, int]:\n    # Credits can go negative, so ensure it's at least 0 for user to see.\n    return {\"credits\": max(await _user_credit_model.get_or_refill_credit(user_id), 0)}"
                        }
                    ],
                    "label": "async def get_user_credits(\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> dict[str, int]:\n    # Credits can go negative, so ensure it's at least 0 for user to see.\n    return {\"credits\": max(await _user_credit_model.get_or_refill_credit(user_id), 0)}"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graphs",
            "start_line": 150,
            "end_line": 153,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 42,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 42,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "get_graphs"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 17,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 15,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 7,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "label": "Annotated"
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "label": "str"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 11,
                                                            "end_token": 14,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Depends"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 12,
                                                                    "end_token": 14,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "label": "get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Depends(get_user_id)"
                                                        }
                                                    ],
                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    user_id: Annotated[str, Depends(get_user_id)]\n)"
                                },
                                {
                                    "type": "union_type",
                                    "start_token": 18,
                                    "end_token": 25,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 20,
                                            "end_token": 20,
                                            "label": "Sequence"
                                        },
                                        {
                                            "type": "generic_type",
                                            "start_token": 21,
                                            "end_token": 25,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 22,
                                                    "end_token": 24,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 22,
                                                            "end_token": 22,
                                                            "label": "graph_db"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 24,
                                                            "end_token": 24,
                                                            "label": "GraphModel"
                                                        }
                                                    ],
                                                    "label": "graph_db.GraphModel"
                                                }
                                            ],
                                            "label": "[graph_db.GraphModel]"
                                        }
                                    ],
                                    "label": "-> Sequence[graph_db.GraphModel]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 26,
                                    "end_token": 42,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 28,
                                            "end_token": 41,
                                            "children": [
                                                {
                                                    "type": "await",
                                                    "start_token": 29,
                                                    "end_token": 41,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 30,
                                                            "end_token": 41,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 30,
                                                                    "end_token": 32,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 30,
                                                                            "end_token": 30,
                                                                            "label": "graph_db"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 32,
                                                                            "end_token": 32,
                                                                            "label": "get_graphs"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.get_graphs"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 33,
                                                                    "end_token": 41,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 34,
                                                                            "end_token": 36,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 34,
                                                                                    "end_token": 34,
                                                                                    "label": "filter_by"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 36,
                                                                                    "end_token": 36,
                                                                                    "label": "\"active\""
                                                                                }
                                                                            ],
                                                                            "label": "filter_by=\"active\""
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 38,
                                                                            "end_token": 40,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 38,
                                                                                    "end_token": 38,
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 40,
                                                                                    "end_token": 40,
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "user_id=user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(filter_by=\"active\", user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graphs(filter_by=\"active\", user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "await graph_db.get_graphs(filter_by=\"active\", user_id=user_id)"
                                                }
                                            ],
                                            "label": "return await graph_db.get_graphs(filter_by=\"active\", user_id=user_id)"
                                        }
                                    ],
                                    "label": ":\n    return await graph_db.get_graphs(filter_by=\"active\", user_id=user_id)\n"
                                }
                            ],
                            "label": "async def get_graphs(\n    user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[graph_db.GraphModel]:\n    return await graph_db.get_graphs(filter_by=\"active\", user_id=user_id)\n"
                        }
                    ],
                    "label": "async def get_graphs(\n    user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[graph_db.GraphModel]:\n    return await graph_db.get_graphs(filter_by=\"active\", user_id=user_id)\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graph",
            "start_line": 164,
            "end_line": 175,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 88,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 88,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 88,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "label": "def"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 39,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "graph_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "graph_id: str"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 10,
                                                    "end_token": 20,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 12,
                                                            "end_token": 20,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 12,
                                                                    "end_token": 12,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "type_parameter",
                                                                    "start_token": 13,
                                                                    "end_token": 19,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 14,
                                                                            "end_token": 14,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 16,
                                                                            "end_token": 19,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 16,
                                                                                    "end_token": 16,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 17,
                                                                                    "end_token": 18,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 18,
                                                                                            "end_token": 18,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 23,
                                                    "end_token": 29,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 23,
                                                            "end_token": 23,
                                                            "label": "version"
                                                        },
                                                        {
                                                            "type": "union_type",
                                                            "start_token": 24,
                                                            "end_token": 27,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 25,
                                                                    "end_token": 25,
                                                                    "label": "int"
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 27,
                                                                    "end_token": 27,
                                                                    "label": "None"
                                                                }
                                                            ],
                                                            "label": ": int | None"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 29,
                                                            "end_token": 29,
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "version: int | None = None"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 32,
                                                    "end_token": 36,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 32,
                                                            "end_token": 32,
                                                            "label": "hide_credentials"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 34,
                                                            "end_token": 34,
                                                            "label": "bool"
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 36,
                                                            "end_token": 36,
                                                            "label": "False"
                                                        }
                                                    ],
                                                    "label": "hide_credentials: bool = False"
                                                }
                                            ],
                                            "label": "(\n    graph_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n    version: int | None = None,\n    hide_credentials: bool = False,\n)"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 46,
                                            "end_token": 88,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 47,
                                                    "end_token": 65,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 47,
                                                            "end_token": 47,
                                                            "label": "graph"
                                                        },
                                                        {
                                                            "type": "await",
                                                            "start_token": 49,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 50,
                                                                    "end_token": 65,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 50,
                                                                            "end_token": 52,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 50,
                                                                                    "end_token": 50,
                                                                                    "label": "graph_db"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 52,
                                                                                    "end_token": 52,
                                                                                    "label": "get_graph"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.get_graph"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 53,
                                                                            "end_token": 65,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 55,
                                                                                    "end_token": 55,
                                                                                    "label": "graph_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 57,
                                                                                    "end_token": 57,
                                                                                    "label": "version"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 59,
                                                                                    "end_token": 61,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 59,
                                                                                            "end_token": 59,
                                                                                            "label": "user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 61,
                                                                                            "end_token": 61,
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "user_id=user_id"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 63,
                                                                                    "end_token": 65,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 63,
                                                                                            "end_token": 63,
                                                                                            "label": "for_export"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 65,
                                                                                            "end_token": 65,
                                                                                            "label": "hide_credentials"
                                                                                        }
                                                                                    ],
                                                                                    "label": "for_export=hide_credentials"
                                                                                }
                                                                            ],
                                                                            "label": "(\n        graph_id, version, user_id=user_id, for_export=hide_credentials"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.get_graph(\n        graph_id, version, user_id=user_id, for_export=hide_credentials"
                                                                }
                                                            ],
                                                            "label": "await graph_db.get_graph(\n        graph_id, version, user_id=user_id, for_export=hide_credentials"
                                                        }
                                                    ],
                                                    "label": "graph = await graph_db.get_graph(\n        graph_id, version, user_id=user_id, for_export=hide_credentials"
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 69,
                                                    "end_token": 85,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "start_token": 70,
                                                            "end_token": 71,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 71,
                                                                    "end_token": 71,
                                                                    "label": "graph"
                                                                }
                                                            ],
                                                            "label": "not graph"
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 74,
                                                            "end_token": 85,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 75,
                                                                    "end_token": 85,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 75,
                                                                            "end_token": 75,
                                                                            "label": "HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 76,
                                                                            "end_token": 85,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 77,
                                                                                    "end_token": 79,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 77,
                                                                                            "end_token": 77,
                                                                                            "label": "status_code"
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "start_token": 79,
                                                                                            "end_token": 79,
                                                                                            "label": "404"
                                                                                        }
                                                                                    ],
                                                                                    "label": "status_code=404"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 81,
                                                                                    "end_token": 84,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 81,
                                                                                            "end_token": 81,
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "concatenated_string",
                                                                                            "start_token": 83,
                                                                                            "end_token": 84,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "start_token": 83,
                                                                                                    "end_token": 83,
                                                                                                    "label": "f"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "start_token": 84,
                                                                                                    "end_token": 84,
                                                                                                    "label": "\"Graph #{graph_id} not found.\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "start_token": 84,
                                                                                                    "end_token": 84,
                                                                                                    "label": "\"Graph #{graph_id} not found.\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "f\"Graph #{graph_id} not found.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=f\"Graph #{graph_id} not found.\""
                                                                                }
                                                                            ],
                                                                            "label": "(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                                        }
                                                                    ],
                                                                    "label": "HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                                }
                                                            ],
                                                            "label": "raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                        }
                                                    ],
                                                    "label": "if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 87,
                                                    "end_token": 88,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 88,
                                                            "end_token": 88,
                                                            "label": "graph"
                                                        }
                                                    ],
                                                    "label": "return graph"
                                                }
                                            ],
                                            "label": "\n    graph = await graph_db.get_graph(\n        graph_id, version, user_id=user_id, for_export=hide_credentials\n    )\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n    return graph"
                                        }
                                    ],
                                    "label": "async def get_graph(\n    graph_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n    version: int | None = None,\n    hide_credentials: bool = False,\n) -> graph_db.GraphModel:\n    graph = await graph_db.get_graph(\n        graph_id, version, user_id=user_id, for_export=hide_credentials\n    )\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n    return graph"
                                }
                            ],
                            "label": "async def get_graph(\n    graph_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n    version: int | None = None,\n    hide_credentials: bool = False,\n) -> graph_db.GraphModel:\n    graph = await graph_db.get_graph(\n        graph_id, version, user_id=user_id, for_export=hide_credentials\n    )\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n    return graph"
                        }
                    ],
                    "label": "async def get_graph(\n    graph_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n    version: int | None = None,\n    hide_credentials: bool = False,\n) -> graph_db.GraphModel:\n    graph = await graph_db.get_graph(\n        graph_id, version, user_id=user_id, for_export=hide_credentials\n    )\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n    return graph"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graph_all_versions",
            "start_line": 188,
            "end_line": 194,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 65,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 65,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "get_graph_all_versions"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 21,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 7,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "label": ": str"
                                                }
                                            ],
                                            "label": "graph_id: str"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 9,
                                            "end_token": 19,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 12,
                                                                    "end_token": 19,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 15,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 16,
                                                                                    "end_token": 18,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": ": Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    graph_id: str, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 23,
                                    "end_token": 29,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 24,
                                            "end_token": 24,
                                            "label": "Sequence"
                                        },
                                        {
                                            "type": "list",
                                            "start_token": 25,
                                            "end_token": 29,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 26,
                                                    "end_token": 28,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 26,
                                                            "end_token": 26,
                                                            "label": "graph_db"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 28,
                                                            "end_token": 28,
                                                            "label": "GraphModel"
                                                        }
                                                    ],
                                                    "label": "graph_db.GraphModel"
                                                }
                                            ],
                                            "label": "[graph_db.GraphModel]"
                                        }
                                    ],
                                    "label": "> Sequence[graph_db.GraphModel]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 31,
                                    "end_token": 65,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 32,
                                            "end_token": 44,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 32,
                                                    "end_token": 32,
                                                    "label": "graphs"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 34,
                                                    "end_token": 44,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 35,
                                                            "end_token": 44,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 35,
                                                                    "end_token": 37,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 35,
                                                                            "end_token": 35,
                                                                            "label": "graph_db"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 37,
                                                                            "end_token": 37,
                                                                            "label": "get_graph_all_versions"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.get_graph_all_versions"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 38,
                                                                    "end_token": 44,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 39,
                                                                            "end_token": 39,
                                                                            "label": "graph_id"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 41,
                                                                            "end_token": 43,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 41,
                                                                                    "end_token": 41,
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 43,
                                                                                    "end_token": 43,
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "user_id=user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(graph_id, user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graph_all_versions(graph_id, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "await graph_db.get_graph_all_versions(graph_id, user_id=user_id)"
                                                }
                                            ],
                                            "label": "graphs = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 46,
                                            "end_token": 62,
                                            "children": [
                                                {
                                                    "type": "if_clause",
                                                    "start_token": 46,
                                                    "end_token": 49,
                                                    "children": [
                                                        {
                                                            "type": "boolean_operator",
                                                            "start_token": 47,
                                                            "end_token": 48,
                                                            "children": [
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 47,
                                                                    "end_token": 47,
                                                                    "label": "not"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 48,
                                                                    "end_token": 48,
                                                                    "label": "graphs"
                                                                }
                                                            ],
                                                            "label": "not graphs"
                                                        }
                                                    ],
                                                    "label": "if not graphs:"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 50,
                                                    "end_token": 62,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 51,
                                                            "end_token": 62,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 52,
                                                                    "end_token": 62,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 52,
                                                                            "end_token": 52,
                                                                            "label": "HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 53,
                                                                            "end_token": 62,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 54,
                                                                                    "end_token": 56,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 54,
                                                                                            "end_token": 54,
                                                                                            "label": "status_code"
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "start_token": 56,
                                                                                            "end_token": 56,
                                                                                            "label": "404"
                                                                                        }
                                                                                    ],
                                                                                    "label": "status_code=404"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 58,
                                                                                    "end_token": 61,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 58,
                                                                                            "end_token": 58,
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "start_token": 60,
                                                                                            "end_token": 61,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 60,
                                                                                                    "end_token": 61,
                                                                                                    "label": "f\"Graph #{graph_id} not found.\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "f\"Graph #{graph_id} not found.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=f\"Graph #{graph_id} not found.\""
                                                                                }
                                                                            ],
                                                                            "label": "(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                                        }
                                                                    ],
                                                                    "label": "HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                                }
                                                            ],
                                                            "label": "raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                        }
                                                    ],
                                                    "label": "\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                }
                                            ],
                                            "label": "if not graphs:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 64,
                                            "end_token": 65,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 65,
                                                    "end_token": 65,
                                                    "label": "graphs"
                                                }
                                            ],
                                            "label": "return graphs"
                                        }
                                    ],
                                    "label": "\n    graphs = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not graphs:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n    return graphs"
                                }
                            ],
                            "label": "async def get_graph_all_versions(\n    graph_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[graph_db.GraphModel]:\n    graphs = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not graphs:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n    return graphs"
                        }
                    ],
                    "label": "async def get_graph_all_versions(\n    graph_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[graph_db.GraphModel]:\n    graphs = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not graphs:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n    return graphs"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "create_new_graph",
            "start_line": 200,
            "end_line": 203,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 42,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 42,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 27,
                                    "children": [
                                        {
                                            "type": "async",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "children": [],
                                            "label": "async"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "children": [],
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "children": [],
                                            "label": "create_new_graph"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "create_graph"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "CreateGraph"
                                                                }
                                                            ],
                                                            "label": ": CreateGraph"
                                                        }
                                                    ],
                                                    "label": "create_graph: CreateGraph"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 9,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "children": [],
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "children": [],
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 12,
                                                                    "end_token": 14,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        }
                                                                    ],
                                                                    "label": "[str,"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 15,
                                                                    "end_token": 18,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 15,
                                                                            "end_token": 15,
                                                                            "children": [],
                                                                            "label": "Depends"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 16,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 17,
                                                                                    "end_token": 17,
                                                                                    "children": [],
                                                                                    "label": "get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "Depends(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    create_graph: CreateGraph, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                        },
                                        {
                                            "type": "union_type",
                                            "start_token": 23,
                                            "end_token": 26,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 24,
                                                    "end_token": 24,
                                                    "children": [],
                                                    "label": "graph_db"
                                                },
                                                {
                                                    "type": "attribute",
                                                    "start_token": 25,
                                                    "end_token": 26,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 26,
                                                            "end_token": 26,
                                                            "children": [],
                                                            "label": "GraphModel"
                                                        }
                                                    ],
                                                    "label": ".GraphModel"
                                                }
                                            ],
                                            "label": "> graph_db.GraphModel"
                                        }
                                    ],
                                    "label": "async def create_new_graph(\n    create_graph: CreateGraph, user_id: Annotated[str, Depends(get_user_id)]\n) -> graph_db.GraphModel:"
                                },
                                {
                                    "type": "block",
                                    "start_token": 28,
                                    "end_token": 42,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 29,
                                            "end_token": 42,
                                            "children": [
                                                {
                                                    "type": "await",
                                                    "start_token": 30,
                                                    "end_token": 42,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 31,
                                                            "end_token": 42,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 31,
                                                                    "end_token": 31,
                                                                    "children": [],
                                                                    "label": "do_create_graph"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 32,
                                                                    "end_token": 42,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 33,
                                                                            "end_token": 33,
                                                                            "children": [],
                                                                            "label": "create_graph"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 35,
                                                                            "end_token": 37,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 35,
                                                                                    "end_token": 35,
                                                                                    "children": [],
                                                                                    "label": "is_template"
                                                                                },
                                                                                {
                                                                                    "type": "false",
                                                                                    "start_token": 37,
                                                                                    "end_token": 37,
                                                                                    "children": [],
                                                                                    "label": "False"
                                                                                }
                                                                            ],
                                                                            "label": "is_template=False"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 39,
                                                                            "end_token": 41,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 39,
                                                                                    "end_token": 39,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 41,
                                                                                    "end_token": 41,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "user_id=user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(create_graph, is_template=False, user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "do_create_graph(create_graph, is_template=False, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "await do_create_graph(create_graph, is_template=False, user_id=user_id)"
                                                }
                                            ],
                                            "label": "return await do_create_graph(create_graph, is_template=False, user_id=user_id)"
                                        }
                                    ],
                                    "label": "\n    return await do_create_graph(create_graph, is_template=False, user_id=user_id)"
                                }
                            ],
                            "label": "async def create_new_graph(\n    create_graph: CreateGraph, user_id: Annotated[str, Depends(get_user_id)]\n) -> graph_db.GraphModel:\n    return await do_create_graph(create_graph, is_template=False, user_id=user_id)"
                        }
                    ],
                    "label": "async def create_new_graph(\n    create_graph: CreateGraph, user_id: Annotated[str, Depends(get_user_id)]\n) -> graph_db.GraphModel:\n    return await do_create_graph(create_graph, is_template=False, user_id=user_id)"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "do_create_graph",
            "start_line": 206,
            "end_line": 242,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 214,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 214,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "label": "async"
                                },
                                {
                                    "type": "dotted_name",
                                    "start_token": 1,
                                    "end_token": 3,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "do_create_graph"
                                        }
                                    ],
                                    "label": "def do_create_graph("
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 31,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 8,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "create_graph"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "label": ": CreateGraph"
                                                }
                                            ],
                                            "label": "\n    create_graph: CreateGraph,"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 10,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "label": "is_template"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 11,
                                                    "end_token": 12,
                                                    "label": ": bool"
                                                }
                                            ],
                                            "label": "is_template: bool,"
                                        },
                                        {
                                            "type": "comment",
                                            "start_token": 15,
                                            "end_token": 24,
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 16,
                                                    "end_token": 21,
                                                    "label": "user_id doesn't have to be annotated like on other endpoints,\n    # because create_graph isn't used directly"
                                                }
                                            ],
                                            "label": "# user_id doesn't have to be annotated like on other endpoints,\n    # because create_graph isn't used directly as an endpoint"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 26,
                                            "end_token": 29,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 26,
                                                    "end_token": 26,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 28,
                                                    "end_token": 28,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "user_id: str,"
                                        }
                                    ],
                                    "label": "(\n    create_graph: CreateGraph,\n    is_template: bool,\n    # user_id doesn't have to be annotated like on other endpoints,\n    # because create_graph isn't used directly as an endpoint\n    user_id: str,\n)"
                                },
                                {
                                    "type": "type",
                                    "start_token": 32,
                                    "end_token": 37,
                                    "label": "-> graph_db.GraphModel:"
                                },
                                {
                                    "type": "block",
                                    "start_token": 38,
                                    "end_token": 214,
                                    "children": [
                                        {
                                            "type": "if_statement",
                                            "start_token": 39,
                                            "end_token": 56,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 40,
                                                    "end_token": 42,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 40,
                                                            "end_token": 40,
                                                            "label": "create_graph"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 42,
                                                            "end_token": 42,
                                                            "label": "graph"
                                                        }
                                                    ],
                                                    "label": "create_graph.graph"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 43,
                                                    "end_token": 56,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 45,
                                                            "end_token": 56,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 45,
                                                                    "end_token": 45,
                                                                    "label": "graph"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 47,
                                                                    "end_token": 56,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 47,
                                                                            "end_token": 49,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 47,
                                                                                    "end_token": 47,
                                                                                    "label": "graph_db"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 49,
                                                                                    "end_token": 49,
                                                                                    "label": "make_graph_model"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.make_graph_model"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 50,
                                                                            "end_token": 56,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 51,
                                                                                    "end_token": 54,
                                                                                    "label": "create_graph.graph,"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 55,
                                                                                    "end_token": 55,
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "(create_graph.graph, user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.make_graph_model(create_graph.graph, user_id)"
                                                                }
                                                            ],
                                                            "label": "graph = graph_db.make_graph_model(create_graph.graph, user_id)"
                                                        }
                                                    ],
                                                    "label": ":\n        graph = graph_db.make_graph_model(create_graph.graph, user_id)"
                                                }
                                            ],
                                            "label": "if create_graph.graph:\n        graph = graph_db.make_graph_model(create_graph.graph, user_id)"
                                        },
                                        {
                                            "type": "elif_clause",
                                            "start_token": 58,
                                            "end_token": 101,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 59,
                                                    "end_token": 61,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 59,
                                                            "end_token": 59,
                                                            "label": "create_graph"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 61,
                                                            "end_token": 61,
                                                            "label": "template_id"
                                                        }
                                                    ],
                                                    "label": "create_graph.template_id"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 62,
                                                    "end_token": 101,
                                                    "children": [
                                                        {
                                                            "type": "comment",
                                                            "start_token": 64,
                                                            "end_token": 71,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 65,
                                                                    "end_token": 71,
                                                                    "label": "Create a new graph from a template"
                                                                }
                                                            ],
                                                            "label": "# Create a new graph from a template"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 73,
                                                            "end_token": 101,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 73,
                                                                    "end_token": 73,
                                                                    "label": "graph"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 75,
                                                                    "end_token": 101,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 76,
                                                                            "end_token": 101,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 76,
                                                                                    "end_token": 78,
                                                                                    "label": "graph_db.get_graph"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 79,
                                                                                    "end_token": 101,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 81,
                                                                                            "end_token": 83,
                                                                                            "label": "create_graph.template_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 86,
                                                                                            "end_token": 88,
                                                                                            "label": "create_graph.template_version"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 91,
                                                                                            "end_token": 93,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 92,
                                                                                                    "end_token": 92,
                                                                                                    "label": "="
                                                                                                }
                                                                                            ],
                                                                                            "label": "template=True"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 96,
                                                                                            "end_token": 98,
                                                                                            "label": "user_id=user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "await graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )"
                                                                }
                                                            ],
                                                            "label": "graph = await graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )"
                                                        }
                                                    ],
                                                    "label": ":\n        # Create a new graph from a template\n        graph = await graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )"
                                                }
                                            ],
                                            "label": "elif create_graph.template_id:\n        # Create a new graph from a template\n        graph = await graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 103,
                                            "end_token": 119,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "start_token": 104,
                                                    "end_token": 105,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 105,
                                                            "end_token": 105,
                                                            "label": "graph"
                                                        }
                                                    ],
                                                    "label": "not graph"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 106,
                                                    "end_token": 119,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 108,
                                                            "end_token": 119,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 109,
                                                                    "end_token": 119,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 109,
                                                                            "end_token": 109,
                                                                            "label": "HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 110,
                                                                            "end_token": 118,
                                                                            "children": [
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 112,
                                                                                    "end_token": 112,
                                                                                    "label": "400"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 114,
                                                                                    "end_token": 117,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 114,
                                                                                            "end_token": 114,
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "concatenated_string",
                                                                                            "start_token": 116,
                                                                                            "end_token": 116,
                                                                                            "label": "f"
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=f\"Template #{create_graph.template_id} not found\""
                                                                                }
                                                                            ],
                                                                            "label": "(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n"
                                                                        }
                                                                    ],
                                                                    "label": "HTTPException(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n            )"
                                                                }
                                                            ],
                                                            "label": "raise HTTPException(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n            )"
                                                        }
                                                    ],
                                                    "label": ":\n            raise HTTPException(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n            )"
                                                }
                                            ],
                                            "label": "if not graph:\n            raise HTTPException(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n            )"
                                        },
                                        {
                                            "type": "else_clause",
                                            "start_token": 127,
                                            "end_token": 142,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "start_token": 130,
                                                    "end_token": 142,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 131,
                                                            "end_token": 142,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 131,
                                                                    "end_token": 131,
                                                                    "label": "HTTPException"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 132,
                                                                    "end_token": 141,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 134,
                                                                            "end_token": 137,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 134,
                                                                                    "end_token": 134,
                                                                                    "label": "status_code"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 136,
                                                                                    "end_token": 136,
                                                                                    "label": "400"
                                                                                }
                                                                            ],
                                                                            "label": "status_code=400,"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 138,
                                                                            "end_token": 140,
                                                                            "label": "detail=\"Either graph or template_id must be provided.\""
                                                                        }
                                                                    ],
                                                                    "label": "(\n            status_code=400, detail=\"Either graph or template_id must be provided.\"\n"
                                                                }
                                                            ],
                                                            "label": "HTTPException(\n            status_code=400, detail=\"Either graph or template_id must be provided.\"\n        )"
                                                        }
                                                    ],
                                                    "label": "raise HTTPException(\n            status_code=400, detail=\"Either graph or template_id must be provided.\"\n        )"
                                                }
                                            ],
                                            "label": "else:\n        raise HTTPException(\n            status_code=400, detail=\"Either graph or template_id must be provided.\"\n        )"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 145,
                                            "end_token": 149,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 145,
                                                    "end_token": 147,
                                                    "label": "graph.is_template"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 149,
                                                    "end_token": 149,
                                                    "label": "is_template"
                                                }
                                            ],
                                            "label": "graph.is_template = is_template"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 151,
                                            "end_token": 156,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 151,
                                                    "end_token": 153,
                                                    "label": "graph.is_active"
                                                },
                                                {
                                                    "type": "boolean_operator",
                                                    "start_token": 155,
                                                    "end_token": 155,
                                                    "label": "not"
                                                }
                                            ],
                                            "label": "graph.is_active = not is_template"
                                        },
                                        {
                                            "type": "call",
                                            "start_token": 158,
                                            "end_token": 169,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 158,
                                                    "end_token": 160,
                                                    "label": "graph.reassign_ids"
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 161,
                                                    "end_token": 168,
                                                    "children": [
                                                        {
                                                            "type": "keyword_argument",
                                                            "start_token": 163,
                                                            "end_token": 165,
                                                            "label": "=user_id,"
                                                        },
                                                        {
                                                            "type": "keyword_argument",
                                                            "start_token": 167,
                                                            "end_token": 168,
                                                            "label": "=True"
                                                        }
                                                    ],
                                                    "label": "(user_id=user_id, reassign_graph_id=True"
                                                }
                                            ],
                                            "label": "graph.reassign_ids(user_id=user_id, reassign_graph_id=True)"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 172,
                                            "end_token": 184,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 172,
                                                    "end_token": 172,
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 174,
                                                    "end_token": 184,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 175,
                                                            "end_token": 184,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 175,
                                                                    "end_token": 177,
                                                                    "label": "graph_db.create_graph"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 178,
                                                                    "end_token": 183,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 179,
                                                                            "end_token": 179,
                                                                            "label": "graph"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 181,
                                                                            "end_token": 183,
                                                                            "label": "user_id=user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(graph, user_id=user_id"
                                                                }
                                                            ],
                                                            "label": "graph_db.create_graph(graph, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "await graph_db.create_graph(graph, user_id=user_id)"
                                                }
                                            ],
                                            "label": "graph = await graph_db.create_graph(graph, user_id=user_id)"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 186,
                                            "end_token": 208,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 186,
                                                    "end_token": 186,
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 188,
                                                    "end_token": 208,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 189,
                                                            "end_token": 208,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 189,
                                                                    "end_token": 189,
                                                                    "label": "on_graph_activate"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 190,
                                                                    "end_token": 207,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 192,
                                                                            "end_token": 192,
                                                                            "label": "graph"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 195,
                                                                            "end_token": 208,
                                                                            "children": [
                                                                                {
                                                                                    "type": "lambda",
                                                                                    "start_token": 197,
                                                                                    "end_token": 207,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 198,
                                                                                            "end_token": 198,
                                                                                            "label": "id"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 200,
                                                                                            "end_token": 207,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 200,
                                                                                                    "end_token": 202,
                                                                                                    "label": "integration_creds_manager.get"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 203,
                                                                                                    "end_token": 207,
                                                                                                    "label": "(user_id, id)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "integration_creds_manager.get(user_id, id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "lambda id: integration_creds_manager.get(user_id, id)"
                                                                                }
                                                                            ],
                                                                            "label": "get_credentials=lambda id: integration_creds_manager.get(user_id, id),"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        graph,\n        get_credentials=lambda id: integration_creds_manager.get(user_id, id)"
                                                                }
                                                            ],
                                                            "label": "on_graph_activate(\n        graph,\n        get_credentials=lambda id: integration_creds_manager.get(user_id, id),"
                                                        }
                                                    ],
                                                    "label": "await on_graph_activate(\n        graph,\n        get_credentials=lambda id: integration_creds_manager.get(user_id, id),"
                                                }
                                            ],
                                            "label": "graph = await on_graph_activate(\n        graph,\n        get_credentials=lambda id: integration_creds_manager.get(user_id, id),"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 212,
                                            "end_token": 213,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 213,
                                                    "end_token": 213,
                                                    "label": "graph"
                                                }
                                            ],
                                            "label": "return graph"
                                        }
                                    ],
                                    "label": "\n    if create_graph.graph:\n        graph = graph_db.make_graph_model(create_graph.graph, user_id)\n    elif create_graph.template_id:\n        # Create a new graph from a template\n        graph = await graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )\n        if not graph:\n            raise HTTPException(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n            )\n        graph.version = 1\n    else:\n        raise HTTPException(\n            status_code=400, detail=\"Either graph or template_id must be provided.\"\n        )\n\n    graph.is_template = is_template\n    graph.is_active = not is_template\n    graph.reassign_ids(user_id=user_id, reassign_graph_id=True)\n\n    graph = await graph_db.create_graph(graph, user_id=user_id)\n    graph = await on_graph_activate(\n        graph,\n        get_credentials=lambda id: integration_creds_manager.get(user_id, id),\n    )\n    return graph\n"
                                }
                            ],
                            "label": "async def do_create_graph(\n    create_graph: CreateGraph,\n    is_template: bool,\n    # user_id doesn't have to be annotated like on other endpoints,\n    # because create_graph isn't used directly as an endpoint\n    user_id: str,\n) -> graph_db.GraphModel:\n    if create_graph.graph:\n        graph = graph_db.make_graph_model(create_graph.graph, user_id)\n    elif create_graph.template_id:\n        # Create a new graph from a template\n        graph = await graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )\n        if not graph:\n            raise HTTPException(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n            )\n        graph.version = 1\n    else:\n        raise HTTPException(\n            status_code=400, detail=\"Either graph or template_id must be provided.\"\n        )\n\n    graph.is_template = is_template\n    graph.is_active = not is_template\n    graph.reassign_ids(user_id=user_id, reassign_graph_id=True)\n\n    graph = await graph_db.create_graph(graph, user_id=user_id)\n    graph = await on_graph_activate(\n        graph,\n        get_credentials=lambda id: integration_creds_manager.get(user_id, id),\n    )\n    return graph\n"
                        }
                    ],
                    "label": "async def do_create_graph(\n    create_graph: CreateGraph,\n    is_template: bool,\n    # user_id doesn't have to be annotated like on other endpoints,\n    # because create_graph isn't used directly as an endpoint\n    user_id: str,\n) -> graph_db.GraphModel:\n    if create_graph.graph:\n        graph = graph_db.make_graph_model(create_graph.graph, user_id)\n    elif create_graph.template_id:\n        # Create a new graph from a template\n        graph = await graph_db.get_graph(\n            create_graph.template_id,\n            create_graph.template_version,\n            template=True,\n            user_id=user_id,\n        )\n        if not graph:\n            raise HTTPException(\n                400, detail=f\"Template #{create_graph.template_id} not found\"\n            )\n        graph.version = 1\n    else:\n        raise HTTPException(\n            status_code=400, detail=\"Either graph or template_id must be provided.\"\n        )\n\n    graph.is_template = is_template\n    graph.is_active = not is_template\n    graph.reassign_ids(user_id=user_id, reassign_graph_id=True)\n\n    graph = await graph_db.create_graph(graph, user_id=user_id)\n    graph = await on_graph_activate(\n        graph,\n        get_credentials=lambda id: integration_creds_manager.get(user_id, id),\n    )\n    return graph\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "delete_graph",
            "start_line": 248,
            "end_line": 258,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 70,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 70,
                            "children": [
                                {
                                    "type": "decorated_definition",
                                    "start_token": 0,
                                    "end_token": 70,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "label": "async"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "delete_graph"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "graph_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "graph_id: str"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 9,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 13,
                                                                    "end_token": 13,
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 15,
                                                                    "end_token": 18,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 15,
                                                                            "end_token": 15,
                                                                            "label": "Depends"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 17,
                                                                            "end_token": 17,
                                                                            "label": "get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "Depends(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    graph_id: str, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 23,
                                            "end_token": 24,
                                            "label": "> DeleteGraphResponse"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 25,
                                            "end_token": 70,
                                            "children": [
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 27,
                                                    "end_token": 42,
                                                    "children": [
                                                        {
                                                            "type": "binary_operator",
                                                            "start_token": 28,
                                                            "end_token": 29,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 28,
                                                                    "end_token": 28,
                                                                    "label": "active_version"
                                                                }
                                                            ],
                                                            "label": "active_version :"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 30,
                                                            "end_token": 41,
                                                            "children": [
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 31,
                                                                    "end_token": 41,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 32,
                                                                            "end_token": 41,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 32,
                                                                                    "end_token": 34,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 32,
                                                                                            "end_token": 32,
                                                                                            "label": "graph_db"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 34,
                                                                                            "end_token": 34,
                                                                                            "label": "get_graph"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_db.get_graph"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 35,
                                                                                    "end_token": 41,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 36,
                                                                                            "end_token": 36,
                                                                                            "label": "graph_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 37,
                                                                                            "end_token": 40,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 37,
                                                                                                    "end_token": 39,
                                                                                                    "label": ", user_id="
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 40,
                                                                                                    "end_token": 40,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": ", user_id=user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(graph_id, user_id=user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.get_graph(graph_id, user_id=user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "await graph_db.get_graph(graph_id, user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "= await graph_db.get_graph(graph_id, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "if active_version := await graph_db.get_graph(graph_id, user_id=user_id):"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 46,
                                                    "end_token": 52,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 47,
                                                            "end_token": 52,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 47,
                                                                    "end_token": 47,
                                                                    "label": "on_graph_deactivate"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 48,
                                                                    "end_token": 52,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 49,
                                                                            "end_token": 49,
                                                                            "label": "active_version"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 51,
                                                                            "end_token": 51,
                                                                            "label": "get_credentials"
                                                                        }
                                                                    ],
                                                                    "label": "(active_version, get_credentials)"
                                                                }
                                                            ],
                                                            "label": "on_graph_deactivate(active_version, get_credentials)"
                                                        }
                                                    ],
                                                    "label": "await on_graph_deactivate(active_version, get_credentials)"
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 55,
                                                    "end_token": 70,
                                                    "children": [
                                                        {
                                                            "type": "dictionary",
                                                            "start_token": 56,
                                                            "end_token": 70,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "start_token": 57,
                                                                    "end_token": 63,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 57,
                                                                            "end_token": 57,
                                                                            "label": "\"version_counts\""
                                                                        },
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 59,
                                                                            "end_token": 63,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 60,
                                                                                    "end_token": 63,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 60,
                                                                                            "end_token": 62,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 60,
                                                                                                    "end_token": 60,
                                                                                                    "label": "graph_db"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 62,
                                                                                                    "end_token": 62,
                                                                                                    "label": "delete_graph"
                                                                                                }
                                                                                            ],
                                                                                            "label": "graph_db.delete_graph"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 63,
                                                                                            "end_token": 69,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 64,
                                                                                                    "end_token": 64,
                                                                                                    "label": "graph_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 65,
                                                                                                    "end_token": 68,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 65,
                                                                                                            "end_token": 67,
                                                                                                            "label": ", user_id="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 68,
                                                                                                            "end_token": 68,
                                                                                                            "label": "user_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ", user_id=user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(graph_id, user_id=user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_db.delete_graph("
                                                                                }
                                                                            ],
                                                                            "label": "await graph_db.delete_graph("
                                                                        }
                                                                    ],
                                                                    "label": "\"version_counts\": await graph_db.delete_graph("
                                                                }
                                                            ],
                                                            "label": "{\"version_counts\": await graph_db.delete_graph(graph_id, user_id=user_id)}"
                                                        }
                                                    ],
                                                    "label": "return {\"version_counts\": await graph_db.delete_graph(graph_id, user_id=user_id)}"
                                                }
                                            ],
                                            "label": ":\n    if active_version := await graph_db.get_graph(graph_id, user_id=user_id):\n\n\n        await on_graph_deactivate(active_version, get_credentials)\n\n    return {\"version_counts\": await graph_db.delete_graph(graph_id, user_id=user_id)}"
                                        }
                                    ],
                                    "label": "async def delete_graph(\n    graph_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> DeleteGraphResponse:\n    if active_version := await graph_db.get_graph(graph_id, user_id=user_id):\n\n\n        await on_graph_deactivate(active_version, get_credentials)\n\n    return {\"version_counts\": await graph_db.delete_graph(graph_id, user_id=user_id)}"
                                }
                            ],
                            "label": "async def delete_graph(\n    graph_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> DeleteGraphResponse:\n    if active_version := await graph_db.get_graph(graph_id, user_id=user_id):\n\n\n        await on_graph_deactivate(active_version, get_credentials)\n\n    return {\"version_counts\": await graph_db.delete_graph(graph_id, user_id=user_id)}"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "get_credentials",
                            "start_line": 253,
                            "end_line": 254,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 21,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 20,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "label": "get_credentials"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "label": "credentials_id"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "credentials_id: str"
                                                        }
                                                    ],
                                                    "label": "(credentials_id: str)"
                                                },
                                                {
                                                    "type": "union_type",
                                                    "start_token": 8,
                                                    "end_token": 9,
                                                    "label": "> \"Credentials | None\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 11,
                                                    "end_token": 20,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 12,
                                                            "end_token": 20,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 13,
                                                                    "end_token": 20,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 13,
                                                                            "end_token": 15,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 13,
                                                                                    "end_token": 13,
                                                                                    "label": "integration_creds_manager"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "label": "get"
                                                                                }
                                                                            ],
                                                                            "label": "integration_creds_manager.get"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 16,
                                                                            "end_token": 20,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 17,
                                                                                    "end_token": 17,
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 19,
                                                                                    "end_token": 19,
                                                                                    "label": "credentials_id"
                                                                                }
                                                                            ],
                                                                            "label": "(user_id, credentials_id)"
                                                                        }
                                                                    ],
                                                                    "label": "integration_creds_manager.get(user_id, credentials_id)"
                                                                }
                                                            ],
                                                            "label": "return integration_creds_manager.get(user_id, credentials_id)"
                                                        }
                                                    ],
                                                    "label": "\n            return integration_creds_manager.get(user_id, credentials_id)"
                                                }
                                            ],
                                            "label": "def get_credentials(credentials_id: str) -> \"Credentials | None\":\n            return integration_creds_manager.get(user_id, credentials_id)"
                                        }
                                    ],
                                    "label": "def get_credentials(credentials_id: str) -> \"Credentials | None\":\n            return integration_creds_manager.get(user_id, credentials_id)\n"
                                }
                            ]
                        }
                    ],
                    "label": "async def delete_graph(\n    graph_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> DeleteGraphResponse:\n    if active_version := await graph_db.get_graph(graph_id, user_id=user_id):\n\n\n        await on_graph_deactivate(active_version, get_credentials)\n\n    return {\"version_counts\": await graph_db.delete_graph(graph_id, user_id=user_id)}"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "update_graph",
            "start_line": 269,
            "end_line": 320,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 328,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 328,
                            "children": [
                                {
                                    "type": "await",
                                    "start_token": 0,
                                    "end_token": 328,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 1,
                                            "end_token": 328,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "label": "def"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 2,
                                                    "end_token": 2,
                                                    "label": "update_graph"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 3,
                                                    "end_token": 30,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 5,
                                                            "end_token": 8,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "label": "graph_id"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 6,
                                                                    "end_token": 7,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 7,
                                                                            "end_token": 7,
                                                                            "label": "str"
                                                                        }
                                                                    ],
                                                                    "label": ": str"
                                                                }
                                                            ],
                                                            "label": "graph_id: str,"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 10,
                                                            "end_token": 15,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 10,
                                                                    "end_token": 10,
                                                                    "label": "graph"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 11,
                                                                    "end_token": 14,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 12,
                                                                            "end_token": 14,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 12,
                                                                                    "end_token": 12,
                                                                                    "label": "graph_db"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 14,
                                                                                    "end_token": 14,
                                                                                    "label": "Graph"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.Graph"
                                                                        }
                                                                    ],
                                                                    "label": ": graph_db.Graph"
                                                                }
                                                            ],
                                                            "label": "graph: graph_db.Graph,"
                                                        },
                                                        {
                                                            "type": "typed_default_parameter",
                                                            "start_token": 17,
                                                            "end_token": 28,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 17,
                                                                    "end_token": 17,
                                                                    "label": "user_id"
                                                                },
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 19,
                                                                    "end_token": 27,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 19,
                                                                            "end_token": 19,
                                                                            "label": "Annotated"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 21,
                                                                            "end_token": 21,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 23,
                                                                            "end_token": 26,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 23,
                                                                                    "end_token": 23,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 25,
                                                                                    "end_token": 25,
                                                                                    "label": "get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": "user_id: Annotated[str, Depends(get_user_id)],"
                                                        }
                                                    ],
                                                    "label": "(\n    graph_id: str,\n    graph: graph_db.Graph,\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 32,
                                                    "end_token": 35,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 33,
                                                            "end_token": 35,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 33,
                                                                    "end_token": 33,
                                                                    "label": "graph_db"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 35,
                                                                    "end_token": 35,
                                                                    "label": "GraphModel"
                                                                }
                                                            ],
                                                            "label": "graph_db.GraphModel"
                                                        }
                                                    ],
                                                    "label": "> graph_db.GraphModel"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 36,
                                                    "end_token": 328,
                                                    "children": [
                                                        {
                                                            "type": "comment",
                                                            "start_token": 38,
                                                            "end_token": 40,
                                                            "label": "# Sanity check"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 42,
                                                            "end_token": 63,
                                                            "children": [
                                                                {
                                                                    "type": "boolean_operator",
                                                                    "start_token": 42,
                                                                    "end_token": 52,
                                                                    "children": [
                                                                        {
                                                                            "type": "comparison_operator",
                                                                            "start_token": 43,
                                                                            "end_token": 45,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 43,
                                                                                    "end_token": 45,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 43,
                                                                                            "end_token": 43,
                                                                                            "label": "graph"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 45,
                                                                                            "end_token": 45,
                                                                                            "label": "id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph.id"
                                                                                }
                                                                            ],
                                                                            "label": "graph.id"
                                                                        },
                                                                        {
                                                                            "type": "comparison_operator",
                                                                            "start_token": 47,
                                                                            "end_token": 52,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 47,
                                                                                    "end_token": 49,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 47,
                                                                                            "end_token": 47,
                                                                                            "label": "graph"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 49,
                                                                                            "end_token": 49,
                                                                                            "label": "id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph.id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 52,
                                                                                    "end_token": 52,
                                                                                    "label": "graph_id"
                                                                                }
                                                                            ],
                                                                            "label": "graph.id != graph_id"
                                                                        }
                                                                    ],
                                                                    "label": "if graph.id and graph.id != graph_id"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 55,
                                                                    "end_token": 63,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 56,
                                                                            "end_token": 63,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 56,
                                                                                    "end_token": 56,
                                                                                    "label": "HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 58,
                                                                                    "end_token": 58,
                                                                                    "label": "400"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 60,
                                                                                    "end_token": 62,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 60,
                                                                                            "end_token": 60,
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 62,
                                                                                            "end_token": 62,
                                                                                            "label": "\"Graph ID does not match ID in URI\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=\"Graph ID does not match ID in URI\""
                                                                                }
                                                                            ],
                                                                            "label": "HTTPException(400, detail=\"Graph ID does not match ID in URI\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise HTTPException(400, detail=\"Graph ID does not match ID in URI\")"
                                                                }
                                                            ],
                                                            "label": "if graph.id and graph.id != graph_id:\n        raise HTTPException(400, detail=\"Graph ID does not match ID in URI\")"
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "start_token": 66,
                                                            "end_token": 70,
                                                            "label": "# Determine new version\n"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 71,
                                                            "end_token": 83,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 71,
                                                                    "end_token": 71,
                                                                    "label": "existing_versions"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 73,
                                                                    "end_token": 83,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 74,
                                                                            "end_token": 83,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 74,
                                                                                    "end_token": 76,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 74,
                                                                                            "end_token": 74,
                                                                                            "label": "graph_db"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 76,
                                                                                            "end_token": 76,
                                                                                            "label": "get_graph_all_versions"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_db.get_graph_all_versions"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 78,
                                                                                    "end_token": 78,
                                                                                    "label": "graph_id"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 81,
                                                                                    "end_token": 82,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 81,
                                                                                            "end_token": 81,
                                                                                            "label": "="
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 82,
                                                                                            "end_token": 82,
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "=user_id"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.get_graph_all_versions(graph_id, user_id=user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "await graph_db.get_graph_all_versions(graph_id, user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "existing_versions = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 85,
                                                            "end_token": 99,
                                                            "children": [
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 86,
                                                                    "end_token": 87,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 87,
                                                                            "end_token": 87,
                                                                            "label": "existing_versions"
                                                                        }
                                                                    ],
                                                                    "label": "not existing_versions"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 90,
                                                                    "end_token": 99,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 91,
                                                                            "end_token": 99,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 91,
                                                                                    "end_token": 91,
                                                                                    "label": "HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 93,
                                                                                    "end_token": 93,
                                                                                    "label": "404"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 95,
                                                                                    "end_token": 98,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 95,
                                                                                            "end_token": 95,
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "concatenated_string",
                                                                                            "start_token": 97,
                                                                                            "end_token": 98,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 97,
                                                                                                    "end_token": 98,
                                                                                                    "label": "f\"Graph #{graph_id} not found\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "f\"Graph #{graph_id} not found\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=f\"Graph #{graph_id} not found\""
                                                                                }
                                                                            ],
                                                                            "label": "HTTPException(404, detail=f\"Graph #{graph_id} not found\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise HTTPException(404, detail=f\"Graph #{graph_id} not found\")"
                                                                }
                                                            ],
                                                            "label": "if not existing_versions:\n        raise HTTPException(404, detail=f\"Graph #{graph_id} not found\")"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 101,
                                                            "end_token": 112,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 101,
                                                                    "end_token": 101,
                                                                    "label": "latest_version_number"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 103,
                                                                    "end_token": 112,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 103,
                                                                            "end_token": 103,
                                                                            "label": "max"
                                                                        },
                                                                        {
                                                                            "type": "generator_expression",
                                                                            "start_token": 105,
                                                                            "end_token": 111,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 105,
                                                                                    "end_token": 107,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 105,
                                                                                            "end_token": 105,
                                                                                            "label": "g"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 107,
                                                                                            "end_token": 107,
                                                                                            "label": "version"
                                                                                        }
                                                                                    ],
                                                                                    "label": "g.version"
                                                                                },
                                                                                {
                                                                                    "type": "for_in_clause",
                                                                                    "start_token": 108,
                                                                                    "end_token": 111,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 109,
                                                                                            "end_token": 109,
                                                                                            "label": "g"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 111,
                                                                                            "end_token": 111,
                                                                                            "label": "existing_versions"
                                                                                        }
                                                                                    ],
                                                                                    "label": "for g in existing_versions"
                                                                                }
                                                                            ],
                                                                            "label": "g.version for g in existing_versions"
                                                                        }
                                                                    ],
                                                                    "label": "max(g.version for g in existing_versions)"
                                                                }
                                                            ],
                                                            "label": "latest_version_number = max(g.version for g in existing_versions)"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 114,
                                                            "end_token": 120,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 114,
                                                                    "end_token": 116,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 114,
                                                                            "end_token": 114,
                                                                            "label": "graph"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 116,
                                                                            "end_token": 116,
                                                                            "label": "version"
                                                                        }
                                                                    ],
                                                                    "label": "graph.version"
                                                                },
                                                                {
                                                                    "type": "binary_operator",
                                                                    "start_token": 118,
                                                                    "end_token": 120,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 118,
                                                                            "end_token": 118,
                                                                            "label": "latest_version_number"
                                                                        },
                                                                        {
                                                                            "type": "integer",
                                                                            "start_token": 120,
                                                                            "end_token": 120,
                                                                            "label": "1"
                                                                        }
                                                                    ],
                                                                    "label": "latest_version_number + 1"
                                                                }
                                                            ],
                                                            "label": "graph.version = latest_version_number + 1"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 123,
                                                            "end_token": 140,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 123,
                                                                    "end_token": 123,
                                                                    "label": "latest_version_graph"
                                                                },
                                                                {
                                                                    "type": "next",
                                                                    "start_token": 125,
                                                                    "end_token": 140,
                                                                    "children": [
                                                                        {
                                                                            "type": "generator_expression",
                                                                            "start_token": 128,
                                                                            "end_token": 139,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 128,
                                                                                    "end_token": 128,
                                                                                    "label": "v"
                                                                                },
                                                                                {
                                                                                    "type": "for_in_clause",
                                                                                    "start_token": 130,
                                                                                    "end_token": 132,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 131,
                                                                                            "end_token": 131,
                                                                                            "label": "in"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 133,
                                                                                            "end_token": 133,
                                                                                            "label": "if"
                                                                                        }
                                                                                    ],
                                                                                    "label": "v in existing_versions"
                                                                                },
                                                                                {
                                                                                    "type": "comparison_operator",
                                                                                    "start_token": 133,
                                                                                    "end_token": 139,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 134,
                                                                                            "end_token": 136,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 134,
                                                                                                    "end_token": 134,
                                                                                                    "label": "v"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 136,
                                                                                                    "end_token": 136,
                                                                                                    "label": "version"
                                                                                                }
                                                                                            ],
                                                                                            "label": "v.version"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 138,
                                                                                            "end_token": 138,
                                                                                            "label": "="
                                                                                        }
                                                                                    ],
                                                                                    "label": "if v.version == latest_version_number"
                                                                                }
                                                                            ],
                                                                            "label": "v for v in existing_versions if v.version == latest_version_number"
                                                                        }
                                                                    ],
                                                                    "label": "next(\n        v for v in existing_versions if v.version == latest_version_number\n"
                                                                }
                                                            ],
                                                            "label": "latest_version_graph = next(\n        v for v in existing_versions if v.version == latest_version_number\n"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 143,
                                                            "end_token": 160,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 143,
                                                                    "end_token": 143,
                                                                    "label": "current_active_version"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 145,
                                                                    "end_token": 160,
                                                                    "children": [
                                                                        {
                                                                            "type": "generator_expression",
                                                                            "start_token": 148,
                                                                            "end_token": 156,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 148,
                                                                                    "end_token": 148,
                                                                                    "label": "v"
                                                                                },
                                                                                {
                                                                                    "type": "for_in_clause",
                                                                                    "start_token": 149,
                                                                                    "end_token": 151,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 150,
                                                                                            "end_token": 150,
                                                                                            "label": "v"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 152,
                                                                                            "end_token": 152,
                                                                                            "label": "existing_versions"
                                                                                        }
                                                                                    ],
                                                                                    "label": "for v in"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 153,
                                                                                    "end_token": 155,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 153,
                                                                                            "end_token": 153,
                                                                                            "label": "if"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 155,
                                                                                            "end_token": 155,
                                                                                            "label": "."
                                                                                        }
                                                                                    ],
                                                                                    "label": "if v."
                                                                                }
                                                                            ],
                                                                            "label": "v for v in existing_versions if v.is_active"
                                                                        },
                                                                        {
                                                                            "type": "none",
                                                                            "start_token": 159,
                                                                            "end_token": 159,
                                                                            "label": "None"
                                                                        }
                                                                    ],
                                                                    "label": "next((v for v in existing_versions if v.is_active), None)"
                                                                }
                                                            ],
                                                            "label": "current_active_version = next((v for v in existing_versions if v.is_active), None)"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 162,
                                                            "end_token": 183,
                                                            "children": [
                                                                {
                                                                    "type": "comparison_operator",
                                                                    "start_token": 163,
                                                                    "end_token": 170,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 163,
                                                                            "end_token": 165,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 163,
                                                                                    "end_token": 163,
                                                                                    "label": "latest_version_graph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 165,
                                                                                    "end_token": 165,
                                                                                    "label": "is_template"
                                                                                }
                                                                            ],
                                                                            "label": "latest_version_graph.is_template"
                                                                        },
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 168,
                                                                            "end_token": 170,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 168,
                                                                                    "end_token": 168,
                                                                                    "label": "graph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 170,
                                                                                    "end_token": 170,
                                                                                    "label": "is_template"
                                                                                }
                                                                            ],
                                                                            "label": "graph.is_template"
                                                                        }
                                                                    ],
                                                                    "label": "latest_version_graph.is_template != graph.is_template"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 173,
                                                                    "end_token": 183,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 174,
                                                                            "end_token": 183,
                                                                            "children": [
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 177,
                                                                                    "end_token": 177,
                                                                                    "label": "400"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 179,
                                                                                    "end_token": 182,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 179,
                                                                                            "end_token": 179,
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 182,
                                                                                            "end_token": 182,
                                                                                            "label": "\n"
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=\"Changing is_template on an existing graph is forbidden\"\n"
                                                                                }
                                                                            ],
                                                                            "label": "HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "raise HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )"
                                                                }
                                                            ],
                                                            "label": "if latest_version_graph.is_template != graph.is_template:\n        raise HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 185,
                                                            "end_token": 192,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 185,
                                                                    "end_token": 187,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 185,
                                                                            "end_token": 185,
                                                                            "label": "graph"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 187,
                                                                            "end_token": 187,
                                                                            "label": "is_active"
                                                                        }
                                                                    ],
                                                                    "label": "graph.is_active"
                                                                },
                                                                {
                                                                    "type": "not_operator",
                                                                    "start_token": 189,
                                                                    "end_token": 192,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 190,
                                                                            "end_token": 192,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 190,
                                                                                    "end_token": 190,
                                                                                    "label": "graph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 192,
                                                                                    "end_token": 192,
                                                                                    "label": "is_template"
                                                                                }
                                                                            ],
                                                                            "label": "graph.is_template"
                                                                        }
                                                                    ],
                                                                    "label": "not graph.is_template"
                                                                }
                                                            ],
                                                            "label": "graph.is_active = not graph.is_template"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 194,
                                                            "end_token": 203,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 194,
                                                                    "end_token": 194,
                                                                    "label": "graph"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 196,
                                                                    "end_token": 203,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 196,
                                                                            "end_token": 198,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 196,
                                                                                    "end_token": 196,
                                                                                    "label": "graph_db"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 198,
                                                                                    "end_token": 198,
                                                                                    "label": "make_graph_model"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.make_graph_model"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 200,
                                                                            "end_token": 200,
                                                                            "label": "graph"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 202,
                                                                            "end_token": 202,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 202,
                                                                                    "end_token": 202,
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 202,
                                                                                    "end_token": 202,
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.make_graph_model(graph, user_id)"
                                                                }
                                                            ],
                                                            "label": "graph = graph_db.make_graph_model(graph, user_id)"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 206,
                                                            "end_token": 212,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 206,
                                                                    "end_token": 207,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 206,
                                                                            "end_token": 206,
                                                                            "label": "."
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 207,
                                                                            "end_token": 207,
                                                                            "label": "reassign_ids"
                                                                        }
                                                                    ],
                                                                    "label": ".reassign_ids"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 210,
                                                                    "end_token": 211,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 210,
                                                                            "end_token": 210,
                                                                            "label": "="
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 211,
                                                                            "end_token": 211,
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "=user_id"
                                                                }
                                                            ],
                                                            "label": ".reassign_ids(user_id=user_id)"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 215,
                                                            "end_token": 227,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 215,
                                                                    "end_token": 215,
                                                                    "label": "new_graph_version"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 217,
                                                                    "end_token": 227,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 218,
                                                                            "end_token": 227,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 218,
                                                                                    "end_token": 220,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 218,
                                                                                            "end_token": 218,
                                                                                            "label": "graph_db"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 220,
                                                                                            "end_token": 220,
                                                                                            "label": "create_graph"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_db.create_graph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 223,
                                                                                    "end_token": 223,
                                                                                    "label": ","
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 225,
                                                                                    "end_token": 226,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 225,
                                                                                            "end_token": 225,
                                                                                            "label": "="
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 226,
                                                                                            "end_token": 226,
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "=user_id"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.create_graph(graph, user_id=user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "await graph_db.create_graph(graph, user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "new_graph_version = await graph_db.create_graph(graph, user_id=user_id)"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 230,
                                                            "end_token": 264,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 231,
                                                                    "end_token": 233,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 231,
                                                                            "end_token": 231,
                                                                            "label": "new_graph_version"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 233,
                                                                            "end_token": 233,
                                                                            "label": "is_active"
                                                                        }
                                                                    ],
                                                                    "label": "new_graph_version.is_active"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 234,
                                                                    "end_token": 264,
                                                                    "children": [
                                                                        {
                                                                            "type": "comment",
                                                                            "start_token": 238,
                                                                            "end_token": 249,
                                                                            "label": "# Handle activation of the new graph first to ensure continuity\n"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 250,
                                                                            "end_token": 264,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 250,
                                                                                    "end_token": 250,
                                                                                    "label": "new_graph_version"
                                                                                },
                                                                                {
                                                                                    "type": "await",
                                                                                    "start_token": 252,
                                                                                    "end_token": 264,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 253,
                                                                                            "end_token": 264,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 253,
                                                                                                    "end_token": 253,
                                                                                                    "label": "on_graph_activate"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 260,
                                                                                                    "end_token": 263,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 260,
                                                                                                            "end_token": 260,
                                                                                                            "label": "="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 263,
                                                                                                            "end_token": 263,
                                                                                                            "label": "\n"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "=get_credentials,\n"
                                                                                                }
                                                                                            ],
                                                                                            "label": "on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": ":\n\n\n        # Handle activation of the new graph first to ensure continuity\n        new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )"
                                                                }
                                                            ],
                                                            "label": "if new_graph_version.is_active:\n\n\n        # Handle activation of the new graph first to ensure continuity\n        new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )"
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "start_token": 266,
                                                            "end_token": 275,
                                                            "label": "# Ensure new version is the only active version\n"
                                                        },
                                                        {
                                                            "type": "await",
                                                            "start_token": 276,
                                                            "end_token": 296,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 277,
                                                                    "end_token": 296,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 277,
                                                                            "end_token": 279,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 277,
                                                                                    "end_token": 277,
                                                                                    "label": "graph_db"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 279,
                                                                                    "end_token": 279,
                                                                                    "label": "set_graph_active_version"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.set_graph_active_version"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 283,
                                                                            "end_token": 284,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 283,
                                                                                    "end_token": 283,
                                                                                    "label": "="
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 284,
                                                                                    "end_token": 284,
                                                                                    "label": "graph_id"
                                                                                }
                                                                            ],
                                                                            "label": "=graph_id"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 286,
                                                                            "end_token": 290,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 286,
                                                                                    "end_token": 286,
                                                                                    "label": "version"
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 288,
                                                                                    "end_token": 290,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 288,
                                                                                            "end_token": 288,
                                                                                            "label": "new_graph_version"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 290,
                                                                                            "end_token": 290,
                                                                                            "label": "version"
                                                                                        }
                                                                                    ],
                                                                                    "label": "new_graph_version.version"
                                                                                }
                                                                            ],
                                                                            "label": "version=new_graph_version.version"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 292,
                                                                            "end_token": 294,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 292,
                                                                                    "end_token": 292,
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 294,
                                                                                    "end_token": 294,
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "user_id=user_id"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.set_graph_active_version(\n            graph_id=graph_id, version=new_graph_version.version, user_id=user_id\n        )"
                                                                }
                                                            ],
                                                            "label": "await graph_db.set_graph_active_version(\n            graph_id=graph_id, version=new_graph_version.version, user_id=user_id\n        )"
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "start_token": 298,
                                                            "end_token": 323,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 299,
                                                                    "end_token": 299,
                                                                    "label": "current_active_version"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 300,
                                                                    "end_token": 323,
                                                                    "children": [
                                                                        {
                                                                            "type": "comment",
                                                                            "start_token": 303,
                                                                            "end_token": 310,
                                                                            "label": "Handle deactivation of the previously active version\n"
                                                                        },
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 311,
                                                                            "end_token": 323,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 312,
                                                                                    "end_token": 323,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 312,
                                                                                            "end_token": 312,
                                                                                            "label": "on_graph_deactivate"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 315,
                                                                                            "end_token": 315,
                                                                                            "label": "current_active_version"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 319,
                                                                                            "end_token": 321,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 319,
                                                                                                    "end_token": 319,
                                                                                                    "label": "="
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 321,
                                                                                                    "end_token": 321,
                                                                                                    "label": ","
                                                                                                }
                                                                                            ],
                                                                                            "label": "=get_credentials,"
                                                                                        }
                                                                                    ],
                                                                                    "label": "on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )"
                                                                                }
                                                                            ],
                                                                            "label": "await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )"
                                                                        }
                                                                    ],
                                                                    "label": ":\n            # Handle deactivation of the previously active version\n            await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )"
                                                                }
                                                            ],
                                                            "label": "if current_active_version:\n            # Handle deactivation of the previously active version\n            await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 326,
                                                            "end_token": 327,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 327,
                                                                    "end_token": 327,
                                                                    "label": "new_graph_version"
                                                                }
                                                            ],
                                                            "label": "return new_graph_version"
                                                        }
                                                    ],
                                                    "label": ":\n    # Sanity check\n    if graph.id and graph.id != graph_id:\n        raise HTTPException(400, detail=\"Graph ID does not match ID in URI\")\n\n    # Determine new version\n    existing_versions = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not existing_versions:\n        raise HTTPException(404, detail=f\"Graph #{graph_id} not found\")\n    latest_version_number = max(g.version for g in existing_versions)\n    graph.version = latest_version_number + 1\n\n    latest_version_graph = next(\n        v for v in existing_versions if v.version == latest_version_number\n    )\n    current_active_version = next((v for v in existing_versions if v.is_active), None)\n    if latest_version_graph.is_template != graph.is_template:\n        raise HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )\n    graph.is_active = not graph.is_template\n    graph = graph_db.make_graph_model(graph, user_id)\n    graph.reassign_ids(user_id=user_id)\n\n    new_graph_version = await graph_db.create_graph(graph, user_id=user_id)\n\n    if new_graph_version.is_active:\n\n\n        # Handle activation of the new graph first to ensure continuity\n        new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )\n        # Ensure new version is the only active version\n        await graph_db.set_graph_active_version(\n            graph_id=graph_id, version=new_graph_version.version, user_id=user_id\n        )\n        if current_active_version:\n            # Handle deactivation of the previously active version\n            await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )\n\n    return new_graph_version\n"
                                                }
                                            ],
                                            "label": "def update_graph(\n    graph_id: str,\n    graph: graph_db.Graph,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> graph_db.GraphModel:\n    # Sanity check\n    if graph.id and graph.id != graph_id:\n        raise HTTPException(400, detail=\"Graph ID does not match ID in URI\")\n\n    # Determine new version\n    existing_versions = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not existing_versions:\n        raise HTTPException(404, detail=f\"Graph #{graph_id} not found\")\n    latest_version_number = max(g.version for g in existing_versions)\n    graph.version = latest_version_number + 1\n\n    latest_version_graph = next(\n        v for v in existing_versions if v.version == latest_version_number\n    )\n    current_active_version = next((v for v in existing_versions if v.is_active), None)\n    if latest_version_graph.is_template != graph.is_template:\n        raise HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )\n    graph.is_active = not graph.is_template\n    graph = graph_db.make_graph_model(graph, user_id)\n    graph.reassign_ids(user_id=user_id)\n\n    new_graph_version = await graph_db.create_graph(graph, user_id=user_id)\n\n    if new_graph_version.is_active:\n\n\n        # Handle activation of the new graph first to ensure continuity\n        new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )\n        # Ensure new version is the only active version\n        await graph_db.set_graph_active_version(\n            graph_id=graph_id, version=new_graph_version.version, user_id=user_id\n        )\n        if current_active_version:\n            # Handle deactivation of the previously active version\n            await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )\n\n    return new_graph_version\n"
                                        }
                                    ],
                                    "label": "async def update_graph(\n    graph_id: str,\n    graph: graph_db.Graph,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> graph_db.GraphModel:\n    # Sanity check\n    if graph.id and graph.id != graph_id:\n        raise HTTPException(400, detail=\"Graph ID does not match ID in URI\")\n\n    # Determine new version\n    existing_versions = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not existing_versions:\n        raise HTTPException(404, detail=f\"Graph #{graph_id} not found\")\n    latest_version_number = max(g.version for g in existing_versions)\n    graph.version = latest_version_number + 1\n\n    latest_version_graph = next(\n        v for v in existing_versions if v.version == latest_version_number\n    )\n    current_active_version = next((v for v in existing_versions if v.is_active), None)\n    if latest_version_graph.is_template != graph.is_template:\n        raise HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )\n    graph.is_active = not graph.is_template\n    graph = graph_db.make_graph_model(graph, user_id)\n    graph.reassign_ids(user_id=user_id)\n\n    new_graph_version = await graph_db.create_graph(graph, user_id=user_id)\n\n    if new_graph_version.is_active:\n\n\n        # Handle activation of the new graph first to ensure continuity\n        new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )\n        # Ensure new version is the only active version\n        await graph_db.set_graph_active_version(\n            graph_id=graph_id, version=new_graph_version.version, user_id=user_id\n        )\n        if current_active_version:\n            # Handle deactivation of the previously active version\n            await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )\n\n    return new_graph_version\n"
                                }
                            ],
                            "label": "async def update_graph(\n    graph_id: str,\n    graph: graph_db.Graph,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> graph_db.GraphModel:\n    # Sanity check\n    if graph.id and graph.id != graph_id:\n        raise HTTPException(400, detail=\"Graph ID does not match ID in URI\")\n\n    # Determine new version\n    existing_versions = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not existing_versions:\n        raise HTTPException(404, detail=f\"Graph #{graph_id} not found\")\n    latest_version_number = max(g.version for g in existing_versions)\n    graph.version = latest_version_number + 1\n\n    latest_version_graph = next(\n        v for v in existing_versions if v.version == latest_version_number\n    )\n    current_active_version = next((v for v in existing_versions if v.is_active), None)\n    if latest_version_graph.is_template != graph.is_template:\n        raise HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )\n    graph.is_active = not graph.is_template\n    graph = graph_db.make_graph_model(graph, user_id)\n    graph.reassign_ids(user_id=user_id)\n\n    new_graph_version = await graph_db.create_graph(graph, user_id=user_id)\n\n    if new_graph_version.is_active:\n\n\n        # Handle activation of the new graph first to ensure continuity\n        new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )\n        # Ensure new version is the only active version\n        await graph_db.set_graph_active_version(\n            graph_id=graph_id, version=new_graph_version.version, user_id=user_id\n        )\n        if current_active_version:\n            # Handle deactivation of the previously active version\n            await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )\n\n    return new_graph_version\n"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "get_credentials",
                            "start_line": 301,
                            "end_line": 302,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 21,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 20,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "label": "get_credentials"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "label": "credentials_id"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "credentials_id: str"
                                                        }
                                                    ],
                                                    "label": "(credentials_id: str)"
                                                },
                                                {
                                                    "type": "union_type",
                                                    "start_token": 8,
                                                    "end_token": 9,
                                                    "label": "> \"Credentials | None\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 10,
                                                    "end_token": 20,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 12,
                                                            "end_token": 20,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 13,
                                                                    "end_token": 20,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 13,
                                                                            "end_token": 15,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 13,
                                                                                    "end_token": 13,
                                                                                    "label": "integration_creds_manager"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "label": "get"
                                                                                }
                                                                            ],
                                                                            "label": "integration_creds_manager.get"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 16,
                                                                            "end_token": 20,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 17,
                                                                                    "end_token": 17,
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 19,
                                                                                    "end_token": 19,
                                                                                    "label": "credentials_id"
                                                                                }
                                                                            ],
                                                                            "label": "(user_id, credentials_id)"
                                                                        }
                                                                    ],
                                                                    "label": "integration_creds_manager.get(user_id, credentials_id)"
                                                                }
                                                            ],
                                                            "label": "return integration_creds_manager.get(user_id, credentials_id)"
                                                        }
                                                    ],
                                                    "label": ":\n            return integration_creds_manager.get(user_id, credentials_id)"
                                                }
                                            ],
                                            "label": "def get_credentials(credentials_id: str) -> \"Credentials | None\":\n            return integration_creds_manager.get(user_id, credentials_id)"
                                        }
                                    ],
                                    "label": "def get_credentials(credentials_id: str) -> \"Credentials | None\":\n            return integration_creds_manager.get(user_id, credentials_id)\n"
                                }
                            ]
                        }
                    ],
                    "label": "async def update_graph(\n    graph_id: str,\n    graph: graph_db.Graph,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> graph_db.GraphModel:\n    # Sanity check\n    if graph.id and graph.id != graph_id:\n        raise HTTPException(400, detail=\"Graph ID does not match ID in URI\")\n\n    # Determine new version\n    existing_versions = await graph_db.get_graph_all_versions(graph_id, user_id=user_id)\n    if not existing_versions:\n        raise HTTPException(404, detail=f\"Graph #{graph_id} not found\")\n    latest_version_number = max(g.version for g in existing_versions)\n    graph.version = latest_version_number + 1\n\n    latest_version_graph = next(\n        v for v in existing_versions if v.version == latest_version_number\n    )\n    current_active_version = next((v for v in existing_versions if v.is_active), None)\n    if latest_version_graph.is_template != graph.is_template:\n        raise HTTPException(\n            400, detail=\"Changing is_template on an existing graph is forbidden\"\n        )\n    graph.is_active = not graph.is_template\n    graph = graph_db.make_graph_model(graph, user_id)\n    graph.reassign_ids(user_id=user_id)\n\n    new_graph_version = await graph_db.create_graph(graph, user_id=user_id)\n\n    if new_graph_version.is_active:\n\n\n        # Handle activation of the new graph first to ensure continuity\n        new_graph_version = await on_graph_activate(\n            new_graph_version,\n            get_credentials=get_credentials,\n        )\n        # Ensure new version is the only active version\n        await graph_db.set_graph_active_version(\n            graph_id=graph_id, version=new_graph_version.version, user_id=user_id\n        )\n        if current_active_version:\n            # Handle deactivation of the previously active version\n            await on_graph_deactivate(\n                current_active_version,\n                get_credentials=get_credentials,\n            )\n\n    return new_graph_version\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "set_graph_active_version",
            "start_line": 328,
            "end_line": 361,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 178,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 178,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 28,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 8,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "graph_id: str,"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 10,
                                            "end_token": 13,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 10,
                                                    "end_token": 10,
                                                    "label": "request_body"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 12,
                                                    "end_token": 12,
                                                    "label": "SetGraphActiveVersion"
                                                }
                                            ],
                                            "label": "request_body: SetGraphActiveVersion,"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 15,
                                            "end_token": 25,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 15,
                                                    "end_token": 15,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 17,
                                                    "end_token": 25,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 17,
                                                            "end_token": 17,
                                                            "label": "Annotated"
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "start_token": 19,
                                                            "end_token": 19,
                                                            "label": "str"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 21,
                                                            "end_token": 24,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 21,
                                                                    "end_token": 21,
                                                                    "label": "Depends"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 22,
                                                                    "end_token": 24,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 23,
                                                                            "end_token": 23,
                                                                            "label": "get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Depends(get_user_id)"
                                                        }
                                                    ],
                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    graph_id: str,\n    request_body: SetGraphActiveVersion,\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 30,
                                    "end_token": 178,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 31,
                                            "end_token": 35,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 31,
                                                    "end_token": 31,
                                                    "label": "new_active_version"
                                                },
                                                {
                                                    "type": "attribute",
                                                    "start_token": 33,
                                                    "end_token": 35,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 33,
                                                            "end_token": 33,
                                                            "label": "request_body"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 35,
                                                            "end_token": 35,
                                                            "label": "active_graph_version"
                                                        }
                                                    ],
                                                    "label": "request_body.active_graph_version"
                                                }
                                            ],
                                            "label": "new_active_version = request_body.active_graph_version"
                                        },
                                        {
                                            "type": "await",
                                            "start_token": 37,
                                            "end_token": 53,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 37,
                                                    "end_token": 53,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 40,
                                                            "end_token": 42,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 40,
                                                                    "end_token": 40,
                                                                    "label": "graph_db"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 42,
                                                                    "end_token": 42,
                                                                    "label": "get_graph"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graph"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 43,
                                                            "end_token": 53,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 45,
                                                                    "end_token": 45,
                                                                    "label": "graph_id"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 47,
                                                                    "end_token": 47,
                                                                    "label": "new_active_version"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 49,
                                                                    "end_token": 51,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 49,
                                                                            "end_token": 49,
                                                                            "label": "user_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 51,
                                                                            "end_token": 51,
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "user_id=user_id"
                                                                }
                                                            ],
                                                            "label": "(\n        graph_id, new_active_version, user_id=user_id\n    )"
                                                        }
                                                    ],
                                                    "label": "new_active_graph = await graph_db.get_graph(\n        graph_id, new_active_version, user_id=user_id\n    )"
                                                }
                                            ],
                                            "label": "new_active_graph = await graph_db.get_graph(\n        graph_id, new_active_version, user_id=user_id\n    )"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 55,
                                            "end_token": 67,
                                            "children": [
                                                {
                                                    "type": "if_clause",
                                                    "start_token": 55,
                                                    "end_token": 58,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "start_token": 56,
                                                            "end_token": 57,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 57,
                                                                    "end_token": 57,
                                                                    "label": "new_active_graph"
                                                                }
                                                            ],
                                                            "label": "not new_active_graph"
                                                        }
                                                    ],
                                                    "label": "if not new_active_graph:"
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "start_token": 60,
                                                    "end_token": 67,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 61,
                                                            "end_token": 67,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 61,
                                                                    "end_token": 61,
                                                                    "label": "HTTPException"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 62,
                                                                    "end_token": 67,
                                                                    "children": [
                                                                        {
                                                                            "type": "integer",
                                                                            "start_token": 63,
                                                                            "end_token": 63,
                                                                            "label": "404"
                                                                        },
                                                                        {
                                                                            "type": "concatenated_string",
                                                                            "start_token": 65,
                                                                            "end_token": 66,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 65,
                                                                                    "end_token": 66,
                                                                                    "label": "f\"Graph #{graph_id} v{new_active_version} not found\""
                                                                                }
                                                                            ],
                                                                            "label": "f\"Graph #{graph_id} v{new_active_version} not found\""
                                                                        }
                                                                    ],
                                                                    "label": "(404, f\"Graph #{graph_id} v{new_active_version} not found\")"
                                                                }
                                                            ],
                                                            "label": "HTTPException(404, f\"Graph #{graph_id} v{new_active_version} not found\")"
                                                        }
                                                    ],
                                                    "label": "raise HTTPException(404, f\"Graph #{graph_id} v{new_active_version} not found\")"
                                                }
                                            ],
                                            "label": "if not new_active_graph:\n        raise HTTPException(404, f\"Graph #{graph_id} v{new_active_version} not found\")"
                                        },
                                        {
                                            "type": "await",
                                            "start_token": 70,
                                            "end_token": 82,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 70,
                                                    "end_token": 82,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 73,
                                                            "end_token": 75,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 73,
                                                                    "end_token": 73,
                                                                    "label": "graph_db"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 75,
                                                                    "end_token": 75,
                                                                    "label": "get_graph"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graph"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 76,
                                                            "end_token": 82,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 77,
                                                                    "end_token": 77,
                                                                    "label": "graph_id"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 80,
                                                                    "end_token": 81,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 80,
                                                                            "end_token": 80,
                                                                            "label": "="
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 81,
                                                                            "end_token": 81,
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "=user_id"
                                                                }
                                                            ],
                                                            "label": "(graph_id, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "current_active_graph = await graph_db.get_graph(graph_id, user_id=user_id)"
                                                }
                                            ],
                                            "label": "current_active_graph = await graph_db.get_graph(graph_id, user_id=user_id)"
                                        },
                                        {
                                            "type": "comment",
                                            "start_token": 86,
                                            "end_token": 97,
                                            "label": "# Handle activation of the new graph first to ensure continuity\n"
                                        },
                                        {
                                            "type": "await",
                                            "start_token": 98,
                                            "end_token": 110,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 98,
                                                    "end_token": 110,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 99,
                                                            "end_token": 99,
                                                            "label": "on_graph_activate"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 100,
                                                            "end_token": 110,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 102,
                                                                    "end_token": 102,
                                                                    "label": "new_active_graph"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 105,
                                                                    "end_token": 107,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 105,
                                                                            "end_token": 105,
                                                                            "label": "get_credentials"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 107,
                                                                            "end_token": 107,
                                                                            "label": "get_credentials"
                                                                        }
                                                                    ],
                                                                    "label": "get_credentials=get_credentials"
                                                                }
                                                            ],
                                                            "label": "(\n        new_active_graph,\n        get_credentials=get_credentials,\n    )"
                                                        }
                                                    ],
                                                    "label": "await on_graph_activate(\n        new_active_graph,\n        get_credentials=get_credentials,\n    )"
                                                }
                                            ],
                                            "label": "await on_graph_activate(\n        new_active_graph,\n        get_credentials=get_credentials,\n    )"
                                        },
                                        {
                                            "type": "comment",
                                            "start_token": 112,
                                            "end_token": 121,
                                            "label": "# Ensure new version is the only active version\n"
                                        },
                                        {
                                            "type": "await",
                                            "start_token": 122,
                                            "end_token": 143,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 122,
                                                    "end_token": 143,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 123,
                                                            "end_token": 125,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 123,
                                                                    "end_token": 123,
                                                                    "label": "graph_db"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 125,
                                                                    "end_token": 125,
                                                                    "label": "set_graph_active_version"
                                                                }
                                                            ],
                                                            "label": "graph_db.set_graph_active_version"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 126,
                                                            "end_token": 143,
                                                            "children": [
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 128,
                                                                    "end_token": 130,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 128,
                                                                            "end_token": 128,
                                                                            "label": "graph_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 130,
                                                                            "end_token": 130,
                                                                            "label": "graph_id"
                                                                        }
                                                                    ],
                                                                    "label": "graph_id=graph_id"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 133,
                                                                    "end_token": 135,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 133,
                                                                            "end_token": 133,
                                                                            "label": "version"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 135,
                                                                            "end_token": 135,
                                                                            "label": "new_active_version"
                                                                        }
                                                                    ],
                                                                    "label": "version=new_active_version"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 138,
                                                                    "end_token": 140,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 138,
                                                                            "end_token": 138,
                                                                            "label": "user_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 140,
                                                                            "end_token": 140,
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "user_id=user_id"
                                                                }
                                                            ],
                                                            "label": "(\n        graph_id=graph_id,\n        version=new_active_version,\n        user_id=user_id,\n    )"
                                                        }
                                                    ],
                                                    "label": "await graph_db.set_graph_active_version(\n        graph_id=graph_id,\n        version=new_active_version,\n        user_id=user_id,\n    )"
                                                }
                                            ],
                                            "label": "await graph_db.set_graph_active_version(\n        graph_id=graph_id,\n        version=new_active_version,\n        user_id=user_id,\n    )"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 145,
                                            "end_token": 177,
                                            "children": [
                                                {
                                                    "type": "if_clause",
                                                    "start_token": 145,
                                                    "end_token": 154,
                                                    "children": [
                                                        {
                                                            "type": "boolean_operator",
                                                            "start_token": 146,
                                                            "end_token": 153,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 146,
                                                                    "end_token": 146,
                                                                    "label": "current_active_graph"
                                                                },
                                                                {
                                                                    "type": "comparison_operator",
                                                                    "start_token": 148,
                                                                    "end_token": 153,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 148,
                                                                            "end_token": 150,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 148,
                                                                                    "end_token": 148,
                                                                                    "label": "current_active_graph"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 150,
                                                                                    "end_token": 150,
                                                                                    "label": "version"
                                                                                }
                                                                            ],
                                                                            "label": "current_active_graph.version"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 153,
                                                                            "end_token": 153,
                                                                            "label": "new_active_version"
                                                                        }
                                                                    ],
                                                                    "label": "current_active_graph.version != new_active_version"
                                                                }
                                                            ],
                                                            "label": "current_active_graph and current_active_graph.version != new_active_version"
                                                        }
                                                    ],
                                                    "label": "if current_active_graph and current_active_graph.version != new_active_version:"
                                                },
                                                {
                                                    "type": "comment",
                                                    "start_token": 156,
                                                    "end_token": 164,
                                                    "label": "# Handle deactivation of the previously active version\n"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 165,
                                                    "end_token": 177,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 165,
                                                            "end_token": 177,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 166,
                                                                    "end_token": 166,
                                                                    "label": "on_graph_deactivate"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 167,
                                                                    "end_token": 177,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 169,
                                                                            "end_token": 169,
                                                                            "label": "current_active_graph"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 172,
                                                                            "end_token": 174,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 172,
                                                                                    "end_token": 172,
                                                                                    "label": "get_credentials"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 174,
                                                                                    "end_token": 174,
                                                                                    "label": "get_credentials"
                                                                                }
                                                                            ],
                                                                            "label": "get_credentials=get_credentials"
                                                                        }
                                                                    ],
                                                                    "label": "(\n            current_active_graph,\n            get_credentials=get_credentials,\n        )"
                                                                }
                                                            ],
                                                            "label": "await on_graph_deactivate(\n            current_active_graph,\n            get_credentials=get_credentials,\n        )"
                                                        }
                                                    ],
                                                    "label": "await on_graph_deactivate(\n            current_active_graph,\n            get_credentials=get_credentials,\n        )"
                                                }
                                            ],
                                            "label": "if current_active_graph and current_active_graph.version != new_active_version:\n        # Handle deactivation of the previously active version\n        await on_graph_deactivate(\n            current_active_graph,\n            get_credentials=get_credentials,\n        )"
                                        }
                                    ],
                                    "label": "\n    new_active_version = request_body.active_graph_version\n    new_active_graph = await graph_db.get_graph(\n        graph_id, new_active_version, user_id=user_id\n    )\n    if not new_active_graph:\n        raise HTTPException(404, f\"Graph #{graph_id} v{new_active_version} not found\")\n\n    current_active_graph = await graph_db.get_graph(graph_id, user_id=user_id)\n\n\n    # Handle activation of the new graph first to ensure continuity\n    await on_graph_activate(\n        new_active_graph,\n        get_credentials=get_credentials,\n    )\n    # Ensure new version is the only active version\n    await graph_db.set_graph_active_version(\n        graph_id=graph_id,\n        version=new_active_version,\n        user_id=user_id,\n    )\n    if current_active_graph and current_active_graph.version != new_active_version:\n        # Handle deactivation of the previously active version\n        await on_graph_deactivate(\n            current_active_graph,\n            get_credentials=get_credentials,\n        )\n"
                                }
                            ],
                            "label": "async def set_graph_active_version(\n    graph_id: str,\n    request_body: SetGraphActiveVersion,\n    user_id: Annotated[str, Depends(get_user_id)],\n):\n    new_active_version = request_body.active_graph_version\n    new_active_graph = await graph_db.get_graph(\n        graph_id, new_active_version, user_id=user_id\n    )\n    if not new_active_graph:\n        raise HTTPException(404, f\"Graph #{graph_id} v{new_active_version} not found\")\n\n    current_active_graph = await graph_db.get_graph(graph_id, user_id=user_id)\n\n\n    # Handle activation of the new graph first to ensure continuity\n    await on_graph_activate(\n        new_active_graph,\n        get_credentials=get_credentials,\n    )\n    # Ensure new version is the only active version\n    await graph_db.set_graph_active_version(\n        graph_id=graph_id,\n        version=new_active_version,\n        user_id=user_id,\n    )\n    if current_active_graph and current_active_graph.version != new_active_version:\n        # Handle deactivation of the previously active version\n        await on_graph_deactivate(\n            current_active_graph,\n            get_credentials=get_credentials,\n        )\n"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "get_credentials",
                            "start_line": 342,
                            "end_line": 343,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 20,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 20,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "get_credentials"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 6,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 5,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "credentials_id"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "credentials_id: str"
                                                        }
                                                    ],
                                                    "label": "(credentials_id: str)"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": "\"Credentials | None\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 11,
                                                    "end_token": 20,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 12,
                                                            "end_token": 20,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 13,
                                                                    "end_token": 20,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 13,
                                                                            "end_token": 15,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 13,
                                                                                    "end_token": 13,
                                                                                    "children": [],
                                                                                    "label": "integration_creds_manager"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "children": [],
                                                                                    "label": "get"
                                                                                }
                                                                            ],
                                                                            "label": "integration_creds_manager.get"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 16,
                                                                            "end_token": 20,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 17,
                                                                                    "end_token": 17,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 19,
                                                                                    "end_token": 19,
                                                                                    "children": [],
                                                                                    "label": "credentials_id"
                                                                                }
                                                                            ],
                                                                            "label": "(user_id, credentials_id)"
                                                                        }
                                                                    ],
                                                                    "label": "integration_creds_manager.get(user_id, credentials_id)"
                                                                }
                                                            ],
                                                            "label": "return integration_creds_manager.get(user_id, credentials_id)"
                                                        }
                                                    ],
                                                    "label": "\n        return integration_creds_manager.get(user_id, credentials_id)"
                                                }
                                            ],
                                            "label": "def get_credentials(credentials_id: str) -> \"Credentials | None\":\n        return integration_creds_manager.get(user_id, credentials_id)"
                                        }
                                    ],
                                    "label": "def get_credentials(credentials_id: str) -> \"Credentials | None\":\n        return integration_creds_manager.get(user_id, credentials_id)"
                                }
                            ]
                        }
                    ],
                    "label": "async def set_graph_active_version(\n    graph_id: str,\n    request_body: SetGraphActiveVersion,\n    user_id: Annotated[str, Depends(get_user_id)],\n):\n    new_active_version = request_body.active_graph_version\n    new_active_graph = await graph_db.get_graph(\n        graph_id, new_active_version, user_id=user_id\n    )\n    if not new_active_graph:\n        raise HTTPException(404, f\"Graph #{graph_id} v{new_active_version} not found\")\n\n    current_active_graph = await graph_db.get_graph(graph_id, user_id=user_id)\n\n\n    # Handle activation of the new graph first to ensure continuity\n    await on_graph_activate(\n        new_active_graph,\n        get_credentials=get_credentials,\n    )\n    # Ensure new version is the only active version\n    await graph_db.set_graph_active_version(\n        graph_id=graph_id,\n        version=new_active_version,\n        user_id=user_id,\n    )\n    if current_active_graph and current_active_graph.version != new_active_version:\n        # Handle deactivation of the previously active version\n        await on_graph_deactivate(\n            current_active_graph,\n            get_credentials=get_credentials,\n        )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "execute_graph",
            "start_line": 369,
            "end_line": 381,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 114,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 114,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "execute_graph"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 32,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "graph_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 9,
                                            "end_token": 16,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "node_input"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 11,
                                                    "end_token": 16,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 11,
                                                            "end_token": 11,
                                                            "label": "dict"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 13,
                                                            "end_token": 15,
                                                            "label": "Any, Any"
                                                        }
                                                    ],
                                                    "label": "dict[Any, Any]"
                                                }
                                            ],
                                            "label": "node_input: dict[Any, Any]"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 19,
                                            "end_token": 29,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 19,
                                                    "end_token": 19,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 21,
                                                    "end_token": 29,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 21,
                                                            "end_token": 21,
                                                            "label": "Annotated"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 25,
                                                            "end_token": 28,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 25,
                                                                    "end_token": 25,
                                                                    "label": "Depends"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 26,
                                                                    "end_token": 27,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 27,
                                                                            "end_token": 27,
                                                                            "label": "get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(get_user_id"
                                                                }
                                                            ],
                                                            "label": "Depends(get_user_id)"
                                                        }
                                                    ],
                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    graph_id: str,\n    node_input: dict[Any, Any],\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 34,
                                    "end_token": 40,
                                    "children": [
                                        {
                                            "type": "type",
                                            "start_token": 35,
                                            "end_token": 37,
                                            "label": "dict[str"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 39,
                                            "end_token": 39,
                                            "label": "Any"
                                        }
                                    ],
                                    "label": "> dict[str, Any]"
                                },
                                {
                                    "type": "comment",
                                    "start_token": 42,
                                    "end_token": 48,
                                    "label": "# FIXME: add proper return type"
                                },
                                {
                                    "type": "block",
                                    "start_token": 50,
                                    "end_token": 114,
                                    "children": [
                                        {
                                            "type": "try_statement",
                                            "start_token": 50,
                                            "end_token": 114,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 52,
                                                    "end_token": 79,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 53,
                                                            "end_token": 59,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 53,
                                                                    "end_token": 53,
                                                                    "label": "graph_exec"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 55,
                                                                    "end_token": 57,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 55,
                                                                            "end_token": 56,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 55,
                                                                                    "end_token": 55,
                                                                                    "label": "execution_manager_client"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 56,
                                                                                    "end_token": 56,
                                                                                    "label": "("
                                                                                }
                                                                            ],
                                                                            "label": "execution_manager_client("
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 58,
                                                                            "end_token": 58,
                                                                            "label": "."
                                                                        }
                                                                    ],
                                                                    "label": "execution_manager_client()"
                                                                }
                                                            ],
                                                            "label": "graph_exec = execution_manager_client().add_execution"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 72,
                                                            "end_token": 79,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 73,
                                                                    "end_token": 79,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 74,
                                                                            "end_token": 78,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 74,
                                                                                    "end_token": 74,
                                                                                    "label": "\"id\""
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 76,
                                                                                    "end_token": 78,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 76,
                                                                                            "end_token": 76,
                                                                                            "label": "graph_exec"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 78,
                                                                                            "end_token": 78,
                                                                                            "label": "graph_exec_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_exec.graph_exec_id"
                                                                                }
                                                                            ],
                                                                            "label": "\"id\": graph_exec.graph_exec_id"
                                                                        }
                                                                    ],
                                                                    "label": "{\"id\": graph_exec.graph_exec_id}"
                                                                }
                                                            ],
                                                            "label": "return {\"id\": graph_exec.graph_exec_id}"
                                                        }
                                                    ],
                                                    "label": "\n        graph_exec = execution_manager_client().add_execution(\n            graph_id, node_input, user_id=user_id\n        )\n        return {\"id\": graph_exec.graph_exec_id}"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 81,
                                                    "end_token": 114,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 82,
                                                            "end_token": 83,
                                                            "label": "Exception as"
                                                        },
                                                        {
                                                            "type": "block",
                                                            "start_token": 85,
                                                            "end_token": 114,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 87,
                                                                    "end_token": 103,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 87,
                                                                            "end_token": 87,
                                                                            "label": "msg"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 89,
                                                                            "end_token": 102,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 89,
                                                                                    "end_token": 92,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 89,
                                                                                            "end_token": 89,
                                                                                            "label": "e"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 92,
                                                                                            "end_token": 92,
                                                                                            "label": "("
                                                                                        }
                                                                                    ],
                                                                                    "label": "e.__str__("
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 91,
                                                                                    "end_token": 101,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 101,
                                                                                            "end_token": 101,
                                                                                            "label": "\"unicode_escape\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "__str__().encode().decode(\"unicode_escape\""
                                                                                }
                                                                            ],
                                                                            "label": "e.__str__().encode().decode(\"unicode_escape\")"
                                                                        }
                                                                    ],
                                                                    "label": "msg = e.__str__().encode().decode(\"unicode_escape\")\n"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 104,
                                                                    "end_token": 114,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 105,
                                                                            "end_token": 114,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 105,
                                                                                    "end_token": 105,
                                                                                    "label": "HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 106,
                                                                                    "end_token": 113,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 107,
                                                                                            "end_token": 109,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 107,
                                                                                                    "end_token": 107,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 109,
                                                                                                    "end_token": 109,
                                                                                                    "label": "400"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=400"
                                                                                        },
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "start_token": 111,
                                                                                            "end_token": 113,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 111,
                                                                                                    "end_token": 111,
                                                                                                    "label": "detail"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 113,
                                                                                                    "end_token": 113,
                                                                                                    "label": "msg"
                                                                                                }
                                                                                            ],
                                                                                            "label": "detail=msg"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(status_code=400, detail=msg"
                                                                                }
                                                                            ],
                                                                            "label": "HTTPException(status_code=400, detail=msg)"
                                                                        }
                                                                    ],
                                                                    "label": "raise HTTPException(status_code=400, detail=msg)"
                                                                }
                                                            ],
                                                            "label": ":\n        msg = e.__str__().encode().decode(\"unicode_escape\")\n        raise HTTPException(status_code=400, detail=msg)"
                                                        }
                                                    ],
                                                    "label": "except Exception as e:\n        msg = e.__str__().encode().decode(\"unicode_escape\")\n        raise HTTPException(status_code=400, detail=msg)"
                                                }
                                            ],
                                            "label": "try:\n        graph_exec = execution_manager_client().add_execution(\n            graph_id, node_input, user_id=user_id\n        )\n        return {\"id\": graph_exec.graph_exec_id}\n    except Exception as e:\n        msg = e.__str__().encode().decode(\"unicode_escape\")\n        raise HTTPException(status_code=400, detail=msg)"
                                        }
                                    ],
                                    "label": "try:\n        graph_exec = execution_manager_client().add_execution(\n            graph_id, node_input, user_id=user_id\n        )\n        return {\"id\": graph_exec.graph_exec_id}\n    except Exception as e:\n        msg = e.__str__().encode().decode(\"unicode_escape\")\n        raise HTTPException(status_code=400, detail=msg)"
                                }
                            ],
                            "label": "def execute_graph(\n    graph_id: str,\n    node_input: dict[Any, Any],\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> dict[str, Any]:  # FIXME: add proper return type\n    try:\n        graph_exec = execution_manager_client().add_execution(\n            graph_id, node_input, user_id=user_id\n        )\n        return {\"id\": graph_exec.graph_exec_id}\n    except Exception as e:\n        msg = e.__str__().encode().decode(\"unicode_escape\")\n        raise HTTPException(status_code=400, detail=msg)"
                        }
                    ],
                    "label": "def execute_graph(\n    graph_id: str,\n    node_input: dict[Any, Any],\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> dict[str, Any]:  # FIXME: add proper return type\n    try:\n        graph_exec = execution_manager_client().add_execution(\n            graph_id, node_input, user_id=user_id\n        )\n        return {\"id\": graph_exec.graph_exec_id}\n    except Exception as e:\n        msg = e.__str__().encode().decode(\"unicode_escape\")\n        raise HTTPException(status_code=400, detail=msg)"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "stop_graph_run",
            "start_line": 389,
            "end_line": 400,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 100,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 100,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 100,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "children": [],
                                            "label": "async"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "children": [],
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "children": [],
                                            "label": "stop_graph_run"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 4,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "children": [],
                                                            "label": "graph_exec_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "\n    graph_exec_id: str"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 9,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "children": [],
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "children": [],
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 12,
                                                                    "end_token": 19,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 15,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "children": [],
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "arguments",
                                                                                    "start_token": 16,
                                                                                    "end_token": 17,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "children": [],
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    graph_exec_id: str, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                        },
                                        {
                                            "type": "generic_type",
                                            "start_token": 23,
                                            "end_token": 29,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 24,
                                                    "end_token": 24,
                                                    "children": [],
                                                    "label": "Sequence"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 25,
                                                    "end_token": 29,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 26,
                                                            "end_token": 28,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 26,
                                                                    "end_token": 26,
                                                                    "children": [],
                                                                    "label": "execution_db"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 28,
                                                                    "end_token": 28,
                                                                    "children": [],
                                                                    "label": "ExecutionResult"
                                                                }
                                                            ],
                                                            "label": "execution_db.ExecutionResult"
                                                        }
                                                    ],
                                                    "label": "[execution_db.ExecutionResult]"
                                                }
                                            ],
                                            "label": "> Sequence[execution_db.ExecutionResult]"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 31,
                                            "end_token": 100,
                                            "children": [
                                                {
                                                    "type": "if_statement",
                                                    "start_token": 32,
                                                    "end_token": 58,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "start_token": 33,
                                                            "end_token": 46,
                                                            "children": [
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 34,
                                                                    "end_token": 46,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 35,
                                                                            "end_token": 46,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 35,
                                                                                    "end_token": 37,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "children": [],
                                                                                            "label": "graph_db"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 37,
                                                                                            "end_token": 37,
                                                                                            "children": [],
                                                                                            "label": "get_execution"
                                                                                        }
                                                                                    ],
                                                                                    "label": "graph_db.get_execution"
                                                                                },
                                                                                {
                                                                                    "type": "arguments",
                                                                                    "start_token": 38,
                                                                                    "end_token": 46,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 39,
                                                                                            "end_token": 41,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 39,
                                                                                                    "end_token": 39,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 41,
                                                                                                    "end_token": 41,
                                                                                                    "children": [],
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 43,
                                                                                            "end_token": 45,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 43,
                                                                                                    "end_token": 43,
                                                                                                    "children": [],
                                                                                                    "label": "execution_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 45,
                                                                                                    "end_token": 45,
                                                                                                    "children": [],
                                                                                                    "label": "graph_exec_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "execution_id=graph_exec_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(user_id=user_id, execution_id=graph_exec_id)"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id)"
                                                                        }
                                                                    ],
                                                                    "label": "await graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id)"
                                                                }
                                                            ],
                                                            "label": "not await graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id)"
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 49,
                                                            "end_token": 58,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 50,
                                                                    "end_token": 58,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 50,
                                                                            "end_token": 50,
                                                                            "children": [],
                                                                            "label": "HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "arguments",
                                                                            "start_token": 51,
                                                                            "end_token": 58,
                                                                            "children": [
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 52,
                                                                                    "end_token": 52,
                                                                                    "children": [],
                                                                                    "label": "404"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 54,
                                                                                    "end_token": 57,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 54,
                                                                                            "end_token": 54,
                                                                                            "children": [],
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "concatenated_string",
                                                                                            "start_token": 56,
                                                                                            "end_token": 57,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 56,
                                                                                                    "children": [],
                                                                                                    "label": "f"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "start_token": 57,
                                                                                                    "end_token": 57,
                                                                                                    "children": [],
                                                                                                    "label": "\"Agent execution #{graph_exec_id} not found\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "start_token": 57,
                                                                                                    "end_token": 57,
                                                                                                    "children": [],
                                                                                                    "label": "\"Agent execution #{graph_exec_id} not found\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "f\"Agent execution #{graph_exec_id} not found\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=f\"Agent execution #{graph_exec_id} not found\""
                                                                                }
                                                                            ],
                                                                            "label": "(404, detail=f\"Agent execution #{graph_exec_id} not found\")"
                                                                        }
                                                                    ],
                                                                    "label": "HTTPException(404, detail=f\"Agent execution #{graph_exec_id} not found\")"
                                                                }
                                                            ],
                                                            "label": "raise HTTPException(404, detail=f\"Agent execution #{graph_exec_id} not found\")"
                                                        }
                                                    ],
                                                    "label": "if not await graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id):\n        raise HTTPException(404, detail=f\"Agent execution #{graph_exec_id} not found\")"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 61,
                                                    "end_token": 78,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 62,
                                                            "end_token": 78,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 62,
                                                                    "end_token": 64,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 62,
                                                                            "end_token": 62,
                                                                            "children": [],
                                                                            "label": "asyncio"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 64,
                                                                            "end_token": 64,
                                                                            "children": [],
                                                                            "label": "to_thread"
                                                                        }
                                                                    ],
                                                                    "label": "asyncio.to_thread"
                                                                },
                                                                {
                                                                    "type": "arguments",
                                                                    "start_token": 65,
                                                                    "end_token": 78,
                                                                    "children": [
                                                                        {
                                                                            "type": "lambda",
                                                                            "start_token": 67,
                                                                            "end_token": 78,
                                                                            "children": [
                                                                                {
                                                                                    "type": "lambda_parameters",
                                                                                    "start_token": 67,
                                                                                    "end_token": 68,
                                                                                    "children": [],
                                                                                    "label": "lambda:"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 69,
                                                                                    "end_token": 76,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 69,
                                                                                            "end_token": 72,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 69,
                                                                                                    "end_token": 71,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 69,
                                                                                                            "end_token": 69,
                                                                                                            "children": [],
                                                                                                            "label": "execution_manager_client"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "arguments",
                                                                                                            "start_token": 70,
                                                                                                            "end_token": 71,
                                                                                                            "children": [],
                                                                                                            "label": "()"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "execution_manager_client()"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 72,
                                                                                                    "children": [],
                                                                                                    "label": "."
                                                                                                }
                                                                                            ],
                                                                                            "label": "execution_manager_client()."
                                                                                        },
                                                                                        {
                                                                                            "type": "arguments",
                                                                                            "start_token": 73,
                                                                                            "end_token": 76,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 75,
                                                                                                    "end_token": 75,
                                                                                                    "children": [],
                                                                                                    "label": "graph_exec_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "cancel_execution(graph_exec_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "execution_manager_client().cancel_execution(graph_exec_id)"
                                                                                }
                                                                            ],
                                                                            "label": "lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )"
                                                                }
                                                            ],
                                                            "label": "asyncio.to_thread(\n        lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )"
                                                        }
                                                    ],
                                                    "label": "await asyncio.to_thread(\n        lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )"
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 93,
                                                    "end_token": 100,
                                                    "children": [
                                                        {
                                                            "type": "await",
                                                            "start_token": 94,
                                                            "end_token": 100,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 95,
                                                                    "end_token": 100,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 95,
                                                                            "end_token": 97,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 95,
                                                                                    "end_token": 95,
                                                                                    "children": [],
                                                                                    "label": "execution_db"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 97,
                                                                                    "end_token": 97,
                                                                                    "children": [],
                                                                                    "label": "get_execution_results"
                                                                                }
                                                                            ],
                                                                            "label": "execution_db.get_execution_results"
                                                                        },
                                                                        {
                                                                            "type": "arguments",
                                                                            "start_token": 98,
                                                                            "end_token": 100,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 99,
                                                                                    "end_token": 99,
                                                                                    "children": [],
                                                                                    "label": "graph_exec_id"
                                                                                }
                                                                            ],
                                                                            "label": "(graph_exec_id)"
                                                                        }
                                                                    ],
                                                                    "label": "execution_db.get_execution_results(graph_exec_id)"
                                                                }
                                                            ],
                                                            "label": "await execution_db.get_execution_results(graph_exec_id)"
                                                        }
                                                    ],
                                                    "label": "return await execution_db.get_execution_results(graph_exec_id)"
                                                }
                                            ],
                                            "label": "\n    if not await graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id):\n        raise HTTPException(404, detail=f\"Agent execution #{graph_exec_id} not found\")\n\n    await asyncio.to_thread(\n        lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )\n\n    # Retrieve & return canceled graph execution in its final state\n    return await execution_db.get_execution_results(graph_exec_id)"
                                        }
                                    ],
                                    "label": "async def stop_graph_run(\n    graph_exec_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[execution_db.ExecutionResult]:\n    if not await graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id):\n        raise HTTPException(404, detail=f\"Agent execution #{graph_exec_id} not found\")\n\n    await asyncio.to_thread(\n        lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )\n\n    # Retrieve & return canceled graph execution in its final state\n    return await execution_db.get_execution_results(graph_exec_id)"
                                }
                            ],
                            "label": "async def stop_graph_run(\n    graph_exec_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[execution_db.ExecutionResult]:\n    if not await graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id):\n        raise HTTPException(404, detail=f\"Agent execution #{graph_exec_id} not found\")\n\n    await asyncio.to_thread(\n        lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )\n\n    # Retrieve & return canceled graph execution in its final state\n    return await execution_db.get_execution_results(graph_exec_id)"
                        }
                    ],
                    "label": "async def stop_graph_run(\n    graph_exec_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[execution_db.ExecutionResult]:\n    if not await graph_db.get_execution(user_id=user_id, execution_id=graph_exec_id):\n        raise HTTPException(404, detail=f\"Agent execution #{graph_exec_id} not found\")\n\n    await asyncio.to_thread(\n        lambda: execution_manager_client().cancel_execution(graph_exec_id)\n    )\n\n    # Retrieve & return canceled graph execution in its final state\n    return await execution_db.get_execution_results(graph_exec_id)"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_executions",
            "start_line": 408,
            "end_line": 411,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 39,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 38,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 11,
                                    "end_token": 14,
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 11,
                                            "end_token": 14,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "label": "Depends"
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 12,
                                                    "end_token": 14,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 13,
                                                            "end_token": 13,
                                                            "label": "get_user_id"
                                                        }
                                                    ],
                                                    "label": "(get_user_id)"
                                                }
                                            ],
                                            "label": "Depends(get_user_id)"
                                        }
                                    ],
                                    "label": "Depends(get_user_id)"
                                },
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 38,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 2,
                                            "label": "def get_executions"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 18,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 7,
                                                            "end_token": 15,
                                                            "children": [
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 7,
                                                                    "end_token": 15,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 7,
                                                                            "end_token": 7,
                                                                            "label": "Annotated"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 8,
                                                                            "end_token": 15,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 9,
                                                                                    "end_token": 9,
                                                                                    "label": "str"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 11,
                                                                                    "end_token": 14,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 11,
                                                                                            "end_token": 11,
                                                                                            "label": "Depends"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 12,
                                                                                            "end_token": 14,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 13,
                                                                                                    "end_token": 13,
                                                                                                    "label": "get_user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(get_user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "Depends(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "[str, Depends(get_user_id)]"
                                                                        }
                                                                    ],
                                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 20,
                                            "end_token": 26,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 21,
                                                    "end_token": 26,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 21,
                                                            "end_token": 21,
                                                            "label": "list"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 22,
                                                            "end_token": 26,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 23,
                                                                    "end_token": 25,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 23,
                                                                            "end_token": 23,
                                                                            "label": "graph_db"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 25,
                                                                            "end_token": 25,
                                                                            "label": "GraphExecution"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.GraphExecution"
                                                                }
                                                            ],
                                                            "label": "[graph_db.GraphExecution]"
                                                        }
                                                    ],
                                                    "label": "list[graph_db.GraphExecution]"
                                                }
                                            ],
                                            "label": "> list[graph_db.GraphExecution]"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 28,
                                            "end_token": 38,
                                            "children": [
                                                {
                                                    "type": "return_statement",
                                                    "start_token": 29,
                                                    "end_token": 38,
                                                    "children": [
                                                        {
                                                            "type": "await",
                                                            "start_token": 30,
                                                            "end_token": 38,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 31,
                                                                    "end_token": 38,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 31,
                                                                            "end_token": 33,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 31,
                                                                                    "end_token": 31,
                                                                                    "label": "graph_db"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 33,
                                                                                    "end_token": 33,
                                                                                    "label": "get_executions"
                                                                                }
                                                                            ],
                                                                            "label": "graph_db.get_executions"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 34,
                                                                            "end_token": 38,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 35,
                                                                                    "end_token": 37,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "label": "user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 37,
                                                                                            "end_token": 37,
                                                                                            "label": "user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "user_id=user_id"
                                                                                }
                                                                            ],
                                                                            "label": "(user_id=user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.get_executions(user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "await graph_db.get_executions(user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "return await graph_db.get_executions(user_id=user_id)"
                                                }
                                            ],
                                            "label": "\n    return await graph_db.get_executions(user_id=user_id)"
                                        }
                                    ],
                                    "label": "async def get_executions(\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> list[graph_db.GraphExecution]:\n    return await graph_db.get_executions(user_id=user_id)"
                                }
                            ],
                            "label": "async def get_executions(\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> list[graph_db.GraphExecution]:\n    return await graph_db.get_executions(user_id=user_id)"
                        }
                    ],
                    "label": "async def get_executions(\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> list[graph_db.GraphExecution]:\n    return await graph_db.get_executions(user_id=user_id)\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_graph_run_node_execution_results",
            "start_line": 419,
            "end_line": 428,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 80,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 79,
                            "children": [
                                {
                                    "type": "decorated_definition",
                                    "start_token": 0,
                                    "end_token": 28,
                                    "children": [
                                        {
                                            "type": "dotted_name",
                                            "start_token": 0,
                                            "end_token": 1,
                                            "label": "async def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "get_graph_run_node_execution_results"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 28,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "graph_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "graph_id: str"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 10,
                                                    "end_token": 12,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "label": "graph_exec_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 11,
                                                            "end_token": 12,
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "graph_exec_id: str"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 15,
                                                    "end_token": 25,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 15,
                                                            "end_token": 15,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 17,
                                                            "end_token": 25,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 17,
                                                                    "end_token": 19,
                                                                    "label": "Annotated[str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 21,
                                                                    "end_token": 24,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 21,
                                                                            "end_token": 23,
                                                                            "label": "Depends(get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "Depends(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    graph_id: str,\n    graph_exec_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                        }
                                    ],
                                    "label": "async def get_graph_run_node_execution_results(\n    graph_id: str,\n    graph_exec_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                },
                                {
                                    "type": "union_type",
                                    "start_token": 29,
                                    "end_token": 37,
                                    "children": [
                                        {
                                            "type": "generic_type",
                                            "start_token": 31,
                                            "end_token": 36,
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 34,
                                                    "end_token": 35,
                                                    "label": ".ExecutionResult"
                                                }
                                            ],
                                            "label": "Sequence[execution_db.ExecutionResult]"
                                        }
                                    ],
                                    "label": "-> Sequence[execution_db.ExecutionResult]:"
                                },
                                {
                                    "type": "block",
                                    "start_token": 38,
                                    "end_token": 79,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 39,
                                            "end_token": 51,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 39,
                                                    "end_token": 39,
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 41,
                                                    "end_token": 51,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 42,
                                                            "end_token": 51,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 42,
                                                                    "end_token": 44,
                                                                    "label": "graph_db.get_graph"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 46,
                                                                    "end_token": 47,
                                                                    "label": "graph_id,"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 48,
                                                                    "end_token": 50,
                                                                    "label": "user_id=user_id"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graph(graph_id, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "await graph_db.get_graph(graph_id, user_id=user_id)"
                                                }
                                            ],
                                            "label": "graph = await graph_db.get_graph(graph_id, user_id=user_id)"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 53,
                                            "end_token": 69,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "start_token": 54,
                                                    "end_token": 55,
                                                    "label": "not graph"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 56,
                                                    "end_token": 69,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 58,
                                                            "end_token": 69,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 59,
                                                                    "end_token": 69,
                                                                    "children": [
                                                                        {
                                                                            "type": "dotted_name",
                                                                            "start_token": 59,
                                                                            "end_token": 59,
                                                                            "label": "HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 61,
                                                                            "end_token": 63,
                                                                            "label": "status_code=404"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 65,
                                                                            "end_token": 68,
                                                                            "label": "detail=f\"Graph #{graph_id} not found.\""
                                                                        }
                                                                    ],
                                                                    "label": "HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                                }
                                                            ],
                                                            "label": "raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                        }
                                                    ],
                                                    "label": ":\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                                }
                                            ],
                                            "label": "if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 72,
                                            "end_token": 79,
                                            "children": [
                                                {
                                                    "type": "await",
                                                    "start_token": 73,
                                                    "end_token": 79,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 74,
                                                            "end_token": 79,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 74,
                                                                    "end_token": 76,
                                                                    "label": "execution_db.get_execution_results"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 78,
                                                                    "end_token": 78,
                                                                    "label": "graph_exec_id"
                                                                }
                                                            ],
                                                            "label": "execution_db.get_execution_results(graph_exec_id)"
                                                        }
                                                    ],
                                                    "label": "await execution_db.get_execution_results(graph_exec_id)"
                                                }
                                            ],
                                            "label": "return await execution_db.get_execution_results(graph_exec_id)"
                                        }
                                    ],
                                    "label": "\n    graph = await graph_db.get_graph(graph_id, user_id=user_id)\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n\n    return await execution_db.get_execution_results(graph_exec_id)"
                                }
                            ],
                            "label": "async def get_graph_run_node_execution_results(\n    graph_id: str,\n    graph_exec_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> Sequence[execution_db.ExecutionResult]:\n    graph = await graph_db.get_graph(graph_id, user_id=user_id)\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n\n    return await execution_db.get_execution_results(graph_exec_id)"
                        }
                    ],
                    "label": "async def get_graph_run_node_execution_results(\n    graph_id: str,\n    graph_exec_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> Sequence[execution_db.ExecutionResult]:\n    graph = await graph_db.get_graph(graph_id, user_id=user_id)\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Graph #{graph_id} not found.\")\n\n    return await execution_db.get_execution_results(graph_exec_id)\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_templates",
            "start_line": 441,
            "end_line": 444,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 42,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 41,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "get_templates"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 17,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 15,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 6,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "children": [],
                                                            "label": "Annotated"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 8,
                                                            "end_token": 15,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 11,
                                                                    "end_token": 14,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "children": [],
                                                                            "label": "Depends"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 12,
                                                                            "end_token": 14,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 13,
                                                                                    "end_token": 13,
                                                                                    "children": [],
                                                                                    "label": "get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "Depends(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": ": Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    user_id: Annotated[str, Depends(get_user_id)]\n)"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 19,
                                    "end_token": 25,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 20,
                                            "end_token": 20,
                                            "children": [],
                                            "label": "Sequence"
                                        },
                                        {
                                            "type": "dotted_name",
                                            "start_token": 22,
                                            "end_token": 24,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 22,
                                                    "end_token": 22,
                                                    "children": [],
                                                    "label": "graph_db"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 24,
                                                    "end_token": 24,
                                                    "children": [],
                                                    "label": "GraphModel"
                                                }
                                            ],
                                            "label": "graph_db.GraphModel"
                                        }
                                    ],
                                    "label": "> Sequence[graph_db.GraphModel]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 28,
                                    "end_token": 41,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 28,
                                            "end_token": 41,
                                            "children": [
                                                {
                                                    "type": "await",
                                                    "start_token": 29,
                                                    "end_token": 41,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 30,
                                                            "end_token": 41,
                                                            "children": [
                                                                {
                                                                    "type": "dotted_name",
                                                                    "start_token": 30,
                                                                    "end_token": 32,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 30,
                                                                            "end_token": 30,
                                                                            "children": [],
                                                                            "label": "graph_db"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 32,
                                                                            "end_token": 32,
                                                                            "children": [],
                                                                            "label": "get_graphs"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.get_graphs"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 33,
                                                                    "end_token": 41,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 34,
                                                                            "end_token": 36,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 34,
                                                                                    "end_token": 34,
                                                                                    "children": [],
                                                                                    "label": "filter_by"
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 36,
                                                                                    "end_token": 36,
                                                                                    "children": [],
                                                                                    "label": "\"template\""
                                                                                }
                                                                            ],
                                                                            "label": "filter_by=\"template\""
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 38,
                                                                            "end_token": 40,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 38,
                                                                                    "end_token": 38,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 40,
                                                                                    "end_token": 40,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "user_id=user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(filter_by=\"template\", user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graphs(filter_by=\"template\", user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "await graph_db.get_graphs(filter_by=\"template\", user_id=user_id)"
                                                }
                                            ],
                                            "label": "return await graph_db.get_graphs(filter_by=\"template\", user_id=user_id)"
                                        }
                                    ],
                                    "label": "return await graph_db.get_graphs(filter_by=\"template\", user_id=user_id)"
                                }
                            ],
                            "label": "async def get_templates(\n    user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[graph_db.GraphModel]:\n    return await graph_db.get_graphs(filter_by=\"template\", user_id=user_id)"
                        }
                    ],
                    "label": "async def get_templates(\n    user_id: Annotated[str, Depends(get_user_id)]\n) -> Sequence[graph_db.GraphModel]:\n    return await graph_db.get_graphs(filter_by=\"template\", user_id=user_id)\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_template",
            "start_line": 452,
            "end_line": 458,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 61,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 61,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "def"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 17,
                                    "children": [
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 5,
                                            "end_token": 15,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "children": [],
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "children": [],
                                                    "label": ": str"
                                                },
                                                {
                                                    "type": "default_parameter",
                                                    "start_token": 14,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "none",
                                                            "start_token": 15,
                                                            "end_token": 15,
                                                            "children": [],
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "= None"
                                                }
                                            ],
                                            "label": "graph_id: str, version: int | None = None"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 9,
                                            "end_token": 15,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": "version"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 11,
                                                    "children": [],
                                                    "label": ": int"
                                                },
                                                {
                                                    "type": "default_parameter",
                                                    "start_token": 14,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "none",
                                                            "start_token": 15,
                                                            "end_token": 15,
                                                            "children": [],
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "= None"
                                                }
                                            ],
                                            "label": "version: int | None = None"
                                        }
                                    ],
                                    "label": "(\n    graph_id: str, version: int | None = None\n)"
                                },
                                {
                                    "type": "union_type",
                                    "start_token": 19,
                                    "end_token": 22,
                                    "children": [],
                                    "label": "> graph_db.GraphModel"
                                },
                                {
                                    "type": "block",
                                    "start_token": 24,
                                    "end_token": 61,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 25,
                                            "end_token": 38,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 25,
                                                    "end_token": 25,
                                                    "children": [],
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 27,
                                                    "end_token": 39,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 28,
                                                            "end_token": 39,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 28,
                                                                    "end_token": 30,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 28,
                                                                            "end_token": 28,
                                                                            "children": [],
                                                                            "label": "graph_db"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 30,
                                                                            "end_token": 30,
                                                                            "children": [],
                                                                            "label": "get_graph"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.get_graph"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 31,
                                                                    "end_token": 39,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 32,
                                                                            "end_token": 32,
                                                                            "children": [],
                                                                            "label": "graph_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 34,
                                                                            "end_token": 34,
                                                                            "children": [],
                                                                            "label": "version"
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "start_token": 36,
                                                                            "end_token": 38,
                                                                            "children": [
                                                                                {
                                                                                    "type": "true",
                                                                                    "start_token": 38,
                                                                                    "end_token": 38,
                                                                                    "children": [],
                                                                                    "label": "True"
                                                                                }
                                                                            ],
                                                                            "label": "template=True"
                                                                        }
                                                                    ],
                                                                    "label": "(graph_id, version, template=True)"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graph(graph_id, version, template=True)"
                                                        }
                                                    ],
                                                    "label": "await graph_db.get_graph(graph_id, version, template=True)"
                                                }
                                            ],
                                            "label": "graph = await graph_db.get_graph(graph_id, version, template=True"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 41,
                                            "end_token": 57,
                                            "children": [
                                                {
                                                    "type": "if_clause",
                                                    "start_token": 41,
                                                    "end_token": 44,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "start_token": 42,
                                                            "end_token": 42,
                                                            "children": [],
                                                            "label": "not"
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 43,
                                                            "end_token": 43,
                                                            "children": [],
                                                            "label": "graph"
                                                        }
                                                    ],
                                                    "label": "if not graph:"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 46,
                                                    "end_token": 57,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "start_token": 46,
                                                            "end_token": 57,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 47,
                                                                    "end_token": 57,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 47,
                                                                            "end_token": 47,
                                                                            "children": [],
                                                                            "label": "HTTPException"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 48,
                                                                            "end_token": 57,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 49,
                                                                                    "end_token": 51,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 49,
                                                                                            "end_token": 49,
                                                                                            "children": [],
                                                                                            "label": "status_code"
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "start_token": 51,
                                                                                            "end_token": 51,
                                                                                            "children": [],
                                                                                            "label": "404"
                                                                                        }
                                                                                    ],
                                                                                    "label": "status_code=404"
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "start_token": 53,
                                                                                    "end_token": 56,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 53,
                                                                                            "end_token": 53,
                                                                                            "children": [],
                                                                                            "label": "detail"
                                                                                        },
                                                                                        {
                                                                                            "type": "concatenated_string",
                                                                                            "start_token": 55,
                                                                                            "end_token": 56,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "interpolation",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 56,
                                                                                                    "children": [],
                                                                                                    "label": "\"Template #{graph_id} not found.\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "f\"Template #{graph_id} not found.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "detail=f\"Template #{graph_id} not found.\""
                                                                                }
                                                                            ],
                                                                            "label": "(status_code=404, detail=f\"Template #{graph_id} not found.\")"
                                                                        }
                                                                    ],
                                                                    "label": "HTTPException(status_code=404, detail=f\"Template #{graph_id} not found.\")"
                                                                }
                                                            ],
                                                            "label": "raise HTTPException(status_code=404, detail=f\"Template #{graph_id} not found.\")"
                                                        }
                                                    ],
                                                    "label": "raise HTTPException(status_code=404, detail=f\"Template #{graph_id} not found.\")"
                                                }
                                            ],
                                            "label": "if not graph:\n        raise HTTPException(status_code=404, detail=f\"Template #{graph_id} not found.\")"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 59,
                                            "end_token": 60,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 60,
                                                    "end_token": 60,
                                                    "children": [],
                                                    "label": "graph"
                                                }
                                            ],
                                            "label": "return graph"
                                        }
                                    ],
                                    "label": "\n    graph = await graph_db.get_graph(graph_id, version, template=True)\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Template #{graph_id} not found.\")\n    return graph\n"
                                }
                            ],
                            "label": "async def get_template(\n    graph_id: str, version: int | None = None\n) -> graph_db.GraphModel:\n    graph = await graph_db.get_graph(graph_id, version, template=True)\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Template #{graph_id} not found.\")\n    return graph\n"
                        }
                    ],
                    "label": "async def get_template(\n    graph_id: str, version: int | None = None\n) -> graph_db.GraphModel:\n    graph = await graph_db.get_graph(graph_id, version, template=True)\n    if not graph:\n        raise HTTPException(status_code=404, detail=f\"Template #{graph_id} not found.\")\n    return graph\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "create_new_template",
            "start_line": 466,
            "end_line": 469,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 43,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 42,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "label": "async"
                                        }
                                    ],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "create_new_template"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 21,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 7,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "label": "\n"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "label": "CreateGraph"
                                                        }
                                                    ],
                                                    "label": ": CreateGraph"
                                                }
                                            ],
                                            "label": "\n    create_graph: CreateGraph"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 9,
                                            "end_token": 19,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 11,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 11,
                                                            "end_token": 11,
                                                            "label": "Annotated"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 12,
                                                            "end_token": 13,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 13,
                                                                    "end_token": 13,
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "[str"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 15,
                                                            "end_token": 18,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 15,
                                                                    "end_token": 15,
                                                                    "label": "Depends"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 16,
                                                                    "end_token": 18,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 17,
                                                                            "end_token": 17,
                                                                            "label": "get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Depends(get_user_id)"
                                                        }
                                                    ],
                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    create_graph: CreateGraph, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                },
                                {
                                    "type": "union_type",
                                    "start_token": 22,
                                    "end_token": 26,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 24,
                                            "end_token": 26,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 24,
                                                    "end_token": 24,
                                                    "label": "graph_db"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 26,
                                                    "end_token": 26,
                                                    "label": "GraphModel"
                                                }
                                            ],
                                            "label": "graph_db.GraphModel"
                                        }
                                    ],
                                    "label": "-> graph_db.GraphModel"
                                },
                                {
                                    "type": "block",
                                    "start_token": 28,
                                    "end_token": 42,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 29,
                                            "end_token": 42,
                                            "children": [
                                                {
                                                    "type": "await",
                                                    "start_token": 30,
                                                    "end_token": 31,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 31,
                                                            "end_token": 31,
                                                            "label": "do_create_graph"
                                                        }
                                                    ],
                                                    "label": "await do_create_graph"
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 32,
                                                    "end_token": 42,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 33,
                                                            "end_token": 33,
                                                            "label": "create_graph"
                                                        },
                                                        {
                                                            "type": "keyword_argument",
                                                            "start_token": 34,
                                                            "end_token": 37,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 35,
                                                                    "end_token": 35,
                                                                    "label": "is_template"
                                                                },
                                                                {
                                                                    "type": "true",
                                                                    "start_token": 37,
                                                                    "end_token": 37,
                                                                    "label": "True"
                                                                }
                                                            ],
                                                            "label": ", is_template=True"
                                                        },
                                                        {
                                                            "type": "keyword_argument",
                                                            "start_token": 38,
                                                            "end_token": 41,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 39,
                                                                    "end_token": 39,
                                                                    "label": "user_id"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 41,
                                                                    "end_token": 41,
                                                                    "label": "user_id"
                                                                }
                                                            ],
                                                            "label": ", user_id=user_id"
                                                        }
                                                    ],
                                                    "label": "(create_graph, is_template=True, user_id=user_id)"
                                                }
                                            ],
                                            "label": "return await do_create_graph(create_graph, is_template=True, user_id=user_id)"
                                        }
                                    ],
                                    "label": "\n    return await do_create_graph(create_graph, is_template=True, user_id=user_id)"
                                }
                            ],
                            "label": "async def create_new_template(\n    create_graph: CreateGraph, user_id: Annotated[str, Depends(get_user_id)]\n) -> graph_db.GraphModel:\n    return await do_create_graph(create_graph, is_template=True, user_id=user_id)"
                        }
                    ],
                    "label": "async def create_new_template(\n    create_graph: CreateGraph, user_id: Annotated[str, Depends(get_user_id)]\n) -> graph_db.GraphModel:\n    return await do_create_graph(create_graph, is_template=True, user_id=user_id)\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "create_schedule",
            "start_line": 488,
            "end_line": 506,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 120,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 119,
                            "children": [
                                {
                                    "type": "async",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "children": [],
                                    "label": "create_schedule"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 23,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 5,
                                            "end_token": 15,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 6,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "children": [],
                                                            "label": "Annotated"
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "start_token": 8,
                                                            "end_token": 15,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 11,
                                                                    "end_token": 14,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "children": [],
                                                                            "label": "Depends"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 12,
                                                                            "end_token": 14,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 13,
                                                                                    "end_token": 13,
                                                                                    "children": [],
                                                                                    "label": "get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "Depends(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": ": Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 18,
                                            "end_token": 20,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 18,
                                                    "end_token": 18,
                                                    "children": [],
                                                    "label": "schedule"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 19,
                                                    "end_token": 20,
                                                    "children": [],
                                                    "label": ": ScheduleCreationRequest"
                                                }
                                            ],
                                            "label": "schedule: ScheduleCreationRequest"
                                        }
                                    ],
                                    "label": "(\n    user_id: Annotated[str, Depends(get_user_id)],\n    schedule: ScheduleCreationRequest,\n)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 29,
                                    "end_token": 119,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 31,
                                            "end_token": 45,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 31,
                                                    "end_token": 31,
                                                    "children": [],
                                                    "label": "graph"
                                                },
                                                {
                                                    "type": "await",
                                                    "start_token": 33,
                                                    "end_token": 45,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 34,
                                                            "end_token": 45,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 34,
                                                                    "end_token": 36,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 34,
                                                                            "end_token": 34,
                                                                            "children": [],
                                                                            "label": "graph_db"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 35,
                                                                            "end_token": 36,
                                                                            "children": [],
                                                                            "label": ".get_graph"
                                                                        }
                                                                    ],
                                                                    "label": "graph_db.get_graph"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 37,
                                                                    "end_token": 45,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 38,
                                                                            "end_token": 40,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 38,
                                                                                    "end_token": 38,
                                                                                    "children": [],
                                                                                    "label": "schedule"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 39,
                                                                                    "end_token": 40,
                                                                                    "children": [],
                                                                                    "label": ".graph_id"
                                                                                }
                                                                            ],
                                                                            "label": "schedule.graph_id"
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 42,
                                                                            "end_token": 44,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 42,
                                                                                    "end_token": 42,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 44,
                                                                                    "end_token": 44,
                                                                                    "children": [],
                                                                                    "label": "user_id"
                                                                                }
                                                                            ],
                                                                            "label": "user_id=user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(schedule.graph_id, user_id=user_id)"
                                                                }
                                                            ],
                                                            "label": "graph_db.get_graph(schedule.graph_id, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "await graph_db.get_graph(schedule.graph_id, user_id=user_id)"
                                                }
                                            ],
                                            "label": "graph = await graph_db.get_graph(schedule.graph_id, user_id=user_id)"
                                        },
                                        {
                                            "type": "if_statement",
                                            "start_token": 47,
                                            "end_token": 65,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "start_token": 48,
                                                    "end_token": 49,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 49,
                                                            "end_token": 49,
                                                            "children": [],
                                                            "label": "graph"
                                                        }
                                                    ],
                                                    "label": "not graph"
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "start_token": 52,
                                                    "end_token": 65,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 53,
                                                            "end_token": 65,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 53,
                                                                    "end_token": 53,
                                                                    "children": [],
                                                                    "label": "HTTPException"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 54,
                                                                    "end_token": 65,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 56,
                                                                            "end_token": 58,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 56,
                                                                                    "end_token": 56,
                                                                                    "children": [],
                                                                                    "label": "status_code"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 58,
                                                                                    "end_token": 58,
                                                                                    "children": [],
                                                                                    "label": "404"
                                                                                }
                                                                            ],
                                                                            "label": "status_code=404"
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 60,
                                                                            "end_token": 63,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 60,
                                                                                    "end_token": 60,
                                                                                    "children": [],
                                                                                    "label": "detail"
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "start_token": 62,
                                                                                    "end_token": 63,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "start_token": 63,
                                                                                            "end_token": 63,
                                                                                            "children": [],
                                                                                            "label": "\"Graph #{schedule.graph_id} not found.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "f\"Graph #{schedule.graph_id} not found.\""
                                                                                }
                                                                            ],
                                                                            "label": "detail=f\"Graph #{schedule.graph_id} not found.\""
                                                                        }
                                                                    ],
                                                                    "label": "(\n            status_code=404, detail=f\"Graph #{schedule.graph_id} not found.\"\n        )"
                                                                }
                                                            ],
                                                            "label": "HTTPException(\n            status_code=404, detail=f\"Graph #{schedule.graph_id} not found.\"\n        )"
                                                        }
                                                    ],
                                                    "label": "raise HTTPException(\n            status_code=404, detail=f\"Graph #{schedule.graph_id} not found.\"\n        )"
                                                }
                                            ],
                                            "label": "if not graph:\n        raise HTTPException(\n            status_code=404, detail=f\"Graph #{schedule.graph_id} not found.\"\n        )"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 68,
                                            "end_token": 119,
                                            "children": [
                                                {
                                                    "type": "await",
                                                    "start_token": 69,
                                                    "end_token": 119,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 70,
                                                            "end_token": 119,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 70,
                                                                    "end_token": 72,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 70,
                                                                            "end_token": 70,
                                                                            "children": [],
                                                                            "label": "asyncio"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 71,
                                                                            "end_token": 72,
                                                                            "children": [],
                                                                            "label": ".to_thread"
                                                                        }
                                                                    ],
                                                                    "label": "asyncio.to_thread"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 73,
                                                                    "end_token": 119,
                                                                    "children": [
                                                                        {
                                                                            "type": "lambda",
                                                                            "start_token": 75,
                                                                            "end_token": 119,
                                                                            "children": [
                                                                                {
                                                                                    "type": "lambda_parameters",
                                                                                    "start_token": 76,
                                                                                    "end_token": 76,
                                                                                    "children": [],
                                                                                    "label": ":"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 77,
                                                                                    "end_token": 117,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 77,
                                                                                            "end_token": 79,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 77,
                                                                                                    "end_token": 77,
                                                                                                    "children": [],
                                                                                                    "label": "execution_scheduler_client"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 79,
                                                                                                    "end_token": 79,
                                                                                                    "children": [],
                                                                                                    "label": ")"
                                                                                                }
                                                                                            ],
                                                                                            "label": "execution_scheduler_client()"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 82,
                                                                                            "end_token": 117,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 84,
                                                                                                    "end_token": 86,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 84,
                                                                                                            "end_token": 84,
                                                                                                            "children": [],
                                                                                                            "label": "graph_id"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 86,
                                                                                                            "end_token": 88,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 86,
                                                                                                                    "end_token": 86,
                                                                                                                    "children": [],
                                                                                                                    "label": "schedule"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 87,
                                                                                                                    "end_token": 88,
                                                                                                                    "children": [],
                                                                                                                    "label": ".graph_id"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "schedule.graph_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "graph_id=schedule"
                                                                                                },
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 91,
                                                                                                    "end_token": 95,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 91,
                                                                                                            "end_token": 91,
                                                                                                            "children": [],
                                                                                                            "label": "graph_version"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 93,
                                                                                                            "end_token": 95,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 93,
                                                                                                                    "end_token": 93,
                                                                                                                    "children": [],
                                                                                                                    "label": "graph"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 95,
                                                                                                                    "end_token": 95,
                                                                                                                    "children": [],
                                                                                                                    "label": "version"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "graph.version"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "graph_version=graph.version"
                                                                                                },
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 98,
                                                                                                    "end_token": 102,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 98,
                                                                                                            "end_token": 98,
                                                                                                            "children": [],
                                                                                                            "label": "cron"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 100,
                                                                                                            "end_token": 102,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 100,
                                                                                                                    "end_token": 100,
                                                                                                                    "children": [],
                                                                                                                    "label": "schedule"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 102,
                                                                                                                    "end_token": 102,
                                                                                                                    "children": [],
                                                                                                                    "label": "cron"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "schedule.cron"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "cron=schedule.cron"
                                                                                                },
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 105,
                                                                                                    "end_token": 109,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 105,
                                                                                                            "end_token": 105,
                                                                                                            "children": [],
                                                                                                            "label": "input_data"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 107,
                                                                                                            "end_token": 109,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 107,
                                                                                                                    "end_token": 107,
                                                                                                                    "children": [],
                                                                                                                    "label": "schedule"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 109,
                                                                                                                    "end_token": 109,
                                                                                                                    "children": [],
                                                                                                                    "label": "input_data"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "schedule.input_data"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "input_data=schedule.input_data"
                                                                                                },
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "start_token": 112,
                                                                                                    "end_token": 114,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 112,
                                                                                                            "end_token": 112,
                                                                                                            "children": [],
                                                                                                            "label": "user_id"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 114,
                                                                                                            "end_token": 114,
                                                                                                            "children": [],
                                                                                                            "label": "user_id"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "user_id=user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )"
                                                                                        }
                                                                                    ],
                                                                                    "label": "execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )"
                                                                        }
                                                                    ],
                                                                    "label": "(\n        lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )"
                                                                }
                                                            ],
                                                            "label": "asyncio.to_thread(\n        lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )"
                                                        }
                                                    ],
                                                    "label": "await asyncio.to_thread(\n        lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )"
                                                }
                                            ],
                                            "label": "return await asyncio.to_thread(\n        lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )"
                                        }
                                    ],
                                    "label": ":\n    graph = await graph_db.get_graph(schedule.graph_id, user_id=user_id)\n    if not graph:\n        raise HTTPException(\n            status_code=404, detail=f\"Graph #{schedule.graph_id} not found.\"\n        )\n\n    return await asyncio.to_thread(\n        lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )"
                                }
                            ],
                            "label": "async def create_schedule(\n    user_id: Annotated[str, Depends(get_user_id)],\n    schedule: ScheduleCreationRequest,\n) -> scheduler.JobInfo:\n    graph = await graph_db.get_graph(schedule.graph_id, user_id=user_id)\n    if not graph:\n        raise HTTPException(\n            status_code=404, detail=f\"Graph #{schedule.graph_id} not found.\"\n        )\n\n    return await asyncio.to_thread(\n        lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )"
                        }
                    ],
                    "label": "async def create_schedule(\n    user_id: Annotated[str, Depends(get_user_id)],\n    schedule: ScheduleCreationRequest,\n) -> scheduler.JobInfo:\n    graph = await graph_db.get_graph(schedule.graph_id, user_id=user_id)\n    if not graph:\n        raise HTTPException(\n            status_code=404, detail=f\"Graph #{schedule.graph_id} not found.\"\n        )\n\n    return await asyncio.to_thread(\n        lambda: execution_scheduler_client().add_execution_schedule(\n            graph_id=schedule.graph_id,\n            graph_version=graph.version,\n            cron=schedule.cron,\n            input_data=schedule.input_data,\n            user_id=user_id,\n        )\n    )\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "delete_schedule",
            "start_line": 514,
            "end_line": 519,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 51,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 51,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "delete_schedule"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 22,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 6,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "children": [],
                                                    "label": "schedule_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 6,
                                                    "children": [],
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "schedule_id: str"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 9,
                                            "end_token": 19,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 11,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 13,
                                                            "end_token": 13,
                                                            "children": [],
                                                            "label": "str"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 15,
                                                            "end_token": 18,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 15,
                                                                    "end_token": 15,
                                                                    "children": [],
                                                                    "label": "Depends"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 16,
                                                                    "end_token": 17,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 17,
                                                                            "end_token": 17,
                                                                            "children": [],
                                                                            "label": "get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(get_user_id"
                                                                }
                                                            ],
                                                            "label": "Depends(get_user_id)"
                                                        }
                                                    ],
                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    schedule_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 24,
                                    "end_token": 30,
                                    "children": [
                                        {
                                            "type": "type",
                                            "start_token": 25,
                                            "end_token": 30,
                                            "children": [],
                                            "label": "dict[Any, Any]"
                                        }
                                    ],
                                    "label": "> dict[Any, Any]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 32,
                                    "end_token": 51,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "start_token": 33,
                                            "end_token": 44,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 33,
                                                    "end_token": 44,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 33,
                                                            "end_token": 37,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 33,
                                                                    "end_token": 35,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 33,
                                                                            "end_token": 33,
                                                                            "children": [],
                                                                            "label": "execution_scheduler_client"
                                                                        }
                                                                    ],
                                                                    "label": "execution_scheduler_client()"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 37,
                                                                    "end_token": 37,
                                                                    "children": [],
                                                                    "label": "delete_schedule"
                                                                }
                                                            ],
                                                            "label": "execution_scheduler_client().delete_schedule"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 38,
                                                            "end_token": 44,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 39,
                                                                    "end_token": 39,
                                                                    "children": [],
                                                                    "label": "schedule_id"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 41,
                                                                    "end_token": 43,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 41,
                                                                            "end_token": 41,
                                                                            "children": [],
                                                                            "label": "user_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 43,
                                                                            "end_token": 43,
                                                                            "children": [],
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "user_id=user_id"
                                                                }
                                                            ],
                                                            "label": "(schedule_id, user_id=user_id)"
                                                        }
                                                    ],
                                                    "label": "execution_scheduler_client().delete_schedule(schedule_id, user_id=user_id)"
                                                }
                                            ],
                                            "label": "execution_scheduler_client().delete_schedule(schedule_id, user_id=user_id)"
                                        },
                                        {
                                            "type": "return_statement",
                                            "start_token": 46,
                                            "end_token": 51,
                                            "children": [
                                                {
                                                    "type": "dictionary",
                                                    "start_token": 47,
                                                    "end_token": 51,
                                                    "children": [
                                                        {
                                                            "type": "pair",
                                                            "start_token": 48,
                                                            "end_token": 50,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 48,
                                                                    "end_token": 48,
                                                                    "children": [],
                                                                    "label": "\"id\""
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 50,
                                                                    "end_token": 50,
                                                                    "children": [],
                                                                    "label": "schedule_id"
                                                                }
                                                            ],
                                                            "label": "\"id\": schedule_id"
                                                        }
                                                    ],
                                                    "label": "{\"id\": schedule_id}"
                                                }
                                            ],
                                            "label": "return {\"id\": schedule_id}"
                                        }
                                    ],
                                    "label": "\n    execution_scheduler_client().delete_schedule(schedule_id, user_id=user_id)\n    return {\"id\": schedule_id}"
                                }
                            ],
                            "label": "def delete_schedule(\n    schedule_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> dict[Any, Any]:\n    execution_scheduler_client().delete_schedule(schedule_id, user_id=user_id)\n    return {\"id\": schedule_id}"
                        }
                    ],
                    "label": "def delete_schedule(\n    schedule_id: str,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> dict[Any, Any]:\n    execution_scheduler_client().delete_schedule(schedule_id, user_id=user_id)\n    return {\"id\": schedule_id}"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_execution_schedules",
            "start_line": 527,
            "end_line": 534,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 55,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 55,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "get_execution_schedules"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 26,
                                    "children": [
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 4,
                                            "end_token": 14,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 4,
                                                    "end_token": 4,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 6,
                                                    "end_token": 14,
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 8,
                                                            "end_token": 8,
                                                            "label": "str"
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 10,
                                                            "end_token": 13,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 10,
                                                                    "end_token": 10,
                                                                    "label": "Depends"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 11,
                                                                    "end_token": 13,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 12,
                                                                            "end_token": 12,
                                                                            "label": "get_user_id"
                                                                        }
                                                                    ],
                                                                    "label": "(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Depends(get_user_id)"
                                                        }
                                                    ],
                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                        },
                                        {
                                            "type": "typed_default_parameter",
                                            "start_token": 17,
                                            "end_token": 23,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 17,
                                                    "end_token": 17,
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "union_type",
                                                    "start_token": 19,
                                                    "end_token": 22,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 19,
                                                            "end_token": 19,
                                                            "label": "str"
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 21,
                                                            "end_token": 21,
                                                            "label": "None"
                                                        }
                                                    ],
                                                    "label": "str | None ="
                                                },
                                                {
                                                    "type": "none",
                                                    "start_token": 23,
                                                    "end_token": 23,
                                                    "label": "None"
                                                }
                                            ],
                                            "label": "graph_id: str | None = None"
                                        }
                                    ],
                                    "label": "(\n    user_id: Annotated[str, Depends(get_user_id)],\n    graph_id: str | None = None,\n)"
                                },
                                {
                                    "type": "generic_type",
                                    "start_token": 28,
                                    "end_token": 34,
                                    "children": [
                                        {
                                            "type": "dotted_name",
                                            "start_token": 29,
                                            "end_token": 29,
                                            "label": "list"
                                        },
                                        {
                                            "type": "dotted_name",
                                            "start_token": 31,
                                            "end_token": 33,
                                            "label": "scheduler.JobInfo"
                                        }
                                    ],
                                    "label": "> list[scheduler.JobInfo]"
                                },
                                {
                                    "type": "block",
                                    "start_token": 35,
                                    "end_token": 55,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "start_token": 37,
                                            "end_token": 55,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 37,
                                                    "end_token": 55,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 38,
                                                            "end_token": 42,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 38,
                                                                    "end_token": 40,
                                                                    "label": "execution_scheduler_client()"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 42,
                                                                    "end_token": 42,
                                                                    "label": "get_execution_schedules"
                                                                }
                                                            ],
                                                            "label": "execution_scheduler_client().get_execution_schedules"
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 43,
                                                            "end_token": 55,
                                                            "children": [
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 45,
                                                                    "end_token": 47,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 45,
                                                                            "end_token": 45,
                                                                            "label": "user_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 47,
                                                                            "end_token": 47,
                                                                            "label": "user_id"
                                                                        }
                                                                    ],
                                                                    "label": "user_id=user_id"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 50,
                                                                    "end_token": 52,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 50,
                                                                            "end_token": 50,
                                                                            "label": "graph_id"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 52,
                                                                            "end_token": 52,
                                                                            "label": "graph_id"
                                                                        }
                                                                    ],
                                                                    "label": "graph_id=graph_id"
                                                                }
                                                            ],
                                                            "label": "(\n        user_id=user_id,\n        graph_id=graph_id,\n    )"
                                                        }
                                                    ],
                                                    "label": "return execution_scheduler_client().get_execution_schedules(\n        user_id=user_id,\n        graph_id=graph_id,\n    )"
                                                }
                                            ],
                                            "label": "return execution_scheduler_client().get_execution_schedules(\n        user_id=user_id,\n        graph_id=graph_id,\n    )"
                                        }
                                    ],
                                    "label": ":\n    return execution_scheduler_client().get_execution_schedules(\n        user_id=user_id,\n        graph_id=graph_id,\n    )"
                                }
                            ],
                            "label": "def get_execution_schedules(\n    user_id: Annotated[str, Depends(get_user_id)],\n    graph_id: str | None = None,\n) -> list[scheduler.JobInfo]:\n    return execution_scheduler_client().get_execution_schedules(\n        user_id=user_id,\n        graph_id=graph_id,\n    )"
                        }
                    ],
                    "label": "def get_execution_schedules(\n    user_id: Annotated[str, Depends(get_user_id)],\n    graph_id: str | None = None,\n) -> list[scheduler.JobInfo]:\n    return execution_scheduler_client().get_execution_schedules(\n        user_id=user_id,\n        graph_id=graph_id,\n    )"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "create_api_key",
            "start_line": 549,
            "end_line": 563,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 109,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 109,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "label": "async"
                                        }
                                    ],
                                    "label": "async"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "def"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 2,
                                    "end_token": 2,
                                    "label": "create_api_key"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 3,
                                    "end_token": 21,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 4,
                                            "end_token": 7,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "request"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 6,
                                                    "end_token": 7,
                                                    "label": ": CreateAPIKeyRequest"
                                                }
                                            ],
                                            "label": "\n    request: CreateAPIKeyRequest"
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 8,
                                            "end_token": 19,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "user_id"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "type_parameter",
                                                                    "start_token": 12,
                                                                    "end_token": 19,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 15,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 16,
                                                                                    "end_token": 18,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": ": Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": ", user_id: Annotated[str, Depends(get_user_id)]"
                                        }
                                    ],
                                    "label": "(\n    request: CreateAPIKeyRequest, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                },
                                {
                                    "type": "type",
                                    "start_token": 23,
                                    "end_token": 24,
                                    "label": "> CreateAPIKeyResponse"
                                },
                                {
                                    "type": "string",
                                    "start_token": 27,
                                    "end_token": 29,
                                    "label": "\"\"\"Create a new API key\"\"\""
                                },
                                {
                                    "type": "block",
                                    "start_token": 30,
                                    "end_token": 109,
                                    "children": [
                                        {
                                            "type": "try_statement",
                                            "start_token": 31,
                                            "end_token": 109,
                                            "children": [
                                                {
                                                    "type": "block",
                                                    "start_token": 32,
                                                    "end_token": 80,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 34,
                                                            "end_token": 39,
                                                            "children": [
                                                                {
                                                                    "type": "expression_list",
                                                                    "start_token": 34,
                                                                    "end_token": 36,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 34,
                                                                            "end_token": 34,
                                                                            "label": "api_key"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 35,
                                                                            "end_token": 35,
                                                                            "label": ","
                                                                        }
                                                                    ],
                                                                    "label": "api_key, plain_text"
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "start_token": 37,
                                                                    "end_token": 39,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 38,
                                                                            "end_token": 68,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 39,
                                                                                    "end_token": 39,
                                                                                    "label": "generate_api_key"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 40,
                                                                                    "end_token": 68,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 42,
                                                                                            "end_token": 46,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 42,
                                                                                                    "end_token": 42,
                                                                                                    "label": "name"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 44,
                                                                                                    "end_token": 46,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 44,
                                                                                                            "end_token": 44,
                                                                                                            "label": "request"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 46,
                                                                                                            "end_token": 46,
                                                                                                            "label": "name"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "request.name"
                                                                                                }
                                                                                            ],
                                                                                            "label": "name=request.name"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 49,
                                                                                            "end_token": 51,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 49,
                                                                                                    "end_token": 49,
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 51,
                                                                                                    "end_token": 51,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "user_id=user_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 54,
                                                                                            "end_token": 58,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 54,
                                                                                                    "end_token": 54,
                                                                                                    "label": "permissions"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 58,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 56,
                                                                                                            "end_token": 56,
                                                                                                            "label": "request"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 58,
                                                                                                            "end_token": 58,
                                                                                                            "label": "permissions"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "request.permissions"
                                                                                                }
                                                                                            ],
                                                                                            "label": "permissions=request.permissions"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 61,
                                                                                            "end_token": 65,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 61,
                                                                                                    "end_token": 61,
                                                                                                    "label": "description"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 63,
                                                                                                    "end_token": 65,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 63,
                                                                                                            "end_token": 63,
                                                                                                            "label": "request"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 65,
                                                                                                            "end_token": 65,
                                                                                                            "label": "description"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "request.description"
                                                                                                }
                                                                                            ],
                                                                                            "label": "description=request.description"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\n            name=request.name,\n            user_id=user_id,\n            permissions=request.permissions,\n            description=request.description,\n        )"
                                                                                }
                                                                            ],
                                                                            "label": "await generate_api_key(\n            name=request.name,\n            user_id=user_id,\n            permissions=request.permissions,\n            description=request.description,\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "= await generate_api_key"
                                                                }
                                                            ],
                                                            "label": "api_key, plain_text = await generate_api_key"
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 70,
                                                            "end_token": 80,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 71,
                                                                    "end_token": 80,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 71,
                                                                            "end_token": 71,
                                                                            "label": "CreateAPIKeyResponse"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 72,
                                                                            "end_token": 80,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 73,
                                                                                    "end_token": 75,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 73,
                                                                                            "end_token": 73,
                                                                                            "label": "api_key"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 75,
                                                                                            "end_token": 75,
                                                                                            "label": "api_key"
                                                                                        }
                                                                                    ],
                                                                                    "label": "api_key=api_key"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 77,
                                                                                    "end_token": 79,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 77,
                                                                                            "end_token": 77,
                                                                                            "label": "plain_text_key"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 79,
                                                                                            "end_token": 79,
                                                                                            "label": "plain_text"
                                                                                        }
                                                                                    ],
                                                                                    "label": "plain_text_key=plain_text"
                                                                                }
                                                                            ],
                                                                            "label": "(api_key=api_key, plain_text_key=plain_text)"
                                                                        }
                                                                    ],
                                                                    "label": "CreateAPIKeyResponse(api_key=api_key, plain_text_key=plain_text)"
                                                                }
                                                            ],
                                                            "label": "return CreateAPIKeyResponse(api_key=api_key, plain_text_key=plain_text)"
                                                        }
                                                    ],
                                                    "label": ":\n        api_key, plain_text = await generate_api_key(\n            name=request.name,\n            user_id=user_id,\n            permissions=request.permissions,\n            description=request.description,\n        )\n        return CreateAPIKeyResponse(api_key=api_key, plain_text_key=plain_text)"
                                                },
                                                {
                                                    "type": "except_clause",
                                                    "start_token": 82,
                                                    "end_token": 109,
                                                    "children": [
                                                        {
                                                            "type": "as_pattern",
                                                            "start_token": 83,
                                                            "end_token": 85,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 83,
                                                                    "end_token": 83,
                                                                    "label": "APIKeyError"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 85,
                                                                    "end_token": 85,
                                                                    "label": "e"
                                                                }
                                                            ],
                                                            "label": "APIKeyError as e"
                                                        },
                                                        {
                                                            "type": "block",
                                                            "start_token": 86,
                                                            "end_token": 109,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "start_token": 88,
                                                                    "end_token": 94,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 88,
                                                                            "end_token": 94,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 88,
                                                                                    "end_token": 90,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 88,
                                                                                            "end_token": 88,
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 90,
                                                                                            "end_token": 90,
                                                                                            "label": "error"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 91,
                                                                                    "end_token": 94,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "start_token": 92,
                                                                                            "end_token": 93,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "start_token": 93,
                                                                                                    "end_token": 93,
                                                                                                    "label": "\"Failed to create API key: {str(e)}\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "f\"Failed to create API key: {str(e)}\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(f\"Failed to create API key: {str(e)}\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.error(f\"Failed to create API key: {str(e)}\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.error(f\"Failed to create API key: {str(e)}\")"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 96,
                                                                    "end_token": 109,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 97,
                                                                            "end_token": 109,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 97,
                                                                                    "end_token": 97,
                                                                                    "label": "HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 98,
                                                                                    "end_token": 109,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 99,
                                                                                            "end_token": 101,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 99,
                                                                                                    "end_token": 99,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 101,
                                                                                                    "end_token": 101,
                                                                                                    "label": "400"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=400"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 103,
                                                                                            "end_token": 109,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 103,
                                                                                                    "end_token": 103,
                                                                                                    "label": "detail"
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 105,
                                                                                                    "end_token": 108,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 105,
                                                                                                            "end_token": 105,
                                                                                                            "label": "str"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 106,
                                                                                                            "end_token": 108,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 107,
                                                                                                                    "end_token": 107,
                                                                                                                    "label": "e"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "(e)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "str(e)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "detail=str(e))"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(status_code=400, detail=str(e))"
                                                                                }
                                                                            ],
                                                                            "label": "HTTPException(status_code=400, detail=str(e))"
                                                                        }
                                                                    ],
                                                                    "label": "raise HTTPException(status_code=400, detail=str(e))"
                                                                }
                                                            ],
                                                            "label": ":\n        logger.error(f\"Failed to create API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                        }
                                                    ],
                                                    "label": "except APIKeyError as e:\n        logger.error(f\"Failed to create API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                }
                                            ],
                                            "label": "try:\n        api_key, plain_text = await generate_api_key(\n            name=request.name,\n            user_id=user_id,\n            permissions=request.permissions,\n            description=request.description,\n        )\n        return CreateAPIKeyResponse(api_key=api_key, plain_text_key=plain_text)\n    except APIKeyError as e:\n        logger.error(f\"Failed to create API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                        }
                                    ],
                                    "label": "\n    try:\n        api_key, plain_text = await generate_api_key(\n            name=request.name,\n            user_id=user_id,\n            permissions=request.permissions,\n            description=request.description,\n        )\n        return CreateAPIKeyResponse(api_key=api_key, plain_text_key=plain_text)\n    except APIKeyError as e:\n        logger.error(f\"Failed to create API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                }
                            ],
                            "label": "async def create_api_key(\n    request: CreateAPIKeyRequest, user_id: Annotated[str, Depends(get_user_id)]\n) -> CreateAPIKeyResponse:\n    \"\"\"Create a new API key\"\"\"\n    try:\n        api_key, plain_text = await generate_api_key(\n            name=request.name,\n            user_id=user_id,\n            permissions=request.permissions,\n            description=request.description,\n        )\n        return CreateAPIKeyResponse(api_key=api_key, plain_text_key=plain_text)\n    except APIKeyError as e:\n        logger.error(f\"Failed to create API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                        }
                    ],
                    "label": "async def create_api_key(\n    request: CreateAPIKeyRequest, user_id: Annotated[str, Depends(get_user_id)]\n) -> CreateAPIKeyResponse:\n    \"\"\"Create a new API key\"\"\"\n    try:\n        api_key, plain_text = await generate_api_key(\n            name=request.name,\n            user_id=user_id,\n            permissions=request.permissions,\n            description=request.description,\n        )\n        return CreateAPIKeyResponse(api_key=api_key, plain_text_key=plain_text)\n    except APIKeyError as e:\n        logger.error(f\"Failed to create API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_api_keys",
            "start_line": 573,
            "end_line": 580,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 52,
                    "children": [
                        {
                            "type": "function_definition",
                            "start_token": 0,
                            "end_token": 53,
                            "children": [
                                {
                                    "type": "decorated_definition",
                                    "start_token": 0,
                                    "end_token": 53,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "get_api_keys"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 17,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 15,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 6,
                                                            "end_token": 15,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 8,
                                                                    "end_token": 15,
                                                                    "children": [
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 9,
                                                                            "end_token": 9,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 11,
                                                                            "end_token": 14,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 11,
                                                                                    "end_token": 11,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 12,
                                                                                    "end_token": 14,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 13,
                                                                                            "end_token": 13,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": ": Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    user_id: Annotated[str, Depends(get_user_id)]\n)"
                                        },
                                        {
                                            "type": "generic_type",
                                            "start_token": 19,
                                            "end_token": 23,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 20,
                                                    "end_token": 20,
                                                    "label": "list"
                                                },
                                                {
                                                    "type": "list",
                                                    "start_token": 21,
                                                    "end_token": 23,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 22,
                                                            "end_token": 22,
                                                            "label": "APIKeyWithoutHash"
                                                        }
                                                    ],
                                                    "label": "[APIKeyWithoutHash]"
                                                }
                                            ],
                                            "label": "> list[APIKeyWithoutHash]"
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 26,
                                            "end_token": 28,
                                            "children": [
                                                {
                                                    "type": "string_content",
                                                    "start_token": 27,
                                                    "end_token": 27,
                                                    "label": "\"List all API keys for the user\""
                                                }
                                            ],
                                            "label": "\"\"\"List all API keys for the user\"\"\""
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 30,
                                            "end_token": 53,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 30,
                                                    "end_token": 53,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 33,
                                                            "end_token": 38,
                                                            "children": [
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 33,
                                                                    "end_token": 38,
                                                                    "children": [
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 34,
                                                                            "end_token": 38,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 35,
                                                                                    "end_token": 38,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "label": "list_user_api_keys"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 36,
                                                                                            "end_token": 38,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 37,
                                                                                                    "end_token": 37,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "list_user_api_keys(user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "await list_user_api_keys(user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "return await list_user_api_keys(user_id)"
                                                                }
                                                            ],
                                                            "label": "return await list_user_api_keys(user_id)"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 40,
                                                            "end_token": 53,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 41,
                                                                    "end_token": 41,
                                                                    "label": "APIKeyError"
                                                                },
                                                                {
                                                                    "type": "as_pattern",
                                                                    "start_token": 42,
                                                                    "end_token": 43,
                                                                    "children": [
                                                                        {
                                                                            "type": "as_pattern_target",
                                                                            "start_token": 42,
                                                                            "end_token": 42,
                                                                            "label": "as"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 43,
                                                                            "end_token": 43,
                                                                            "label": "e"
                                                                        }
                                                                    ],
                                                                    "label": "as e"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 46,
                                                                    "end_token": 52,
                                                                    "children": [
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "start_token": 46,
                                                                            "end_token": 52,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 46,
                                                                                    "end_token": 52,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 46,
                                                                                            "end_token": 48,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 46,
                                                                                                    "end_token": 46,
                                                                                                    "label": "logger"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 47,
                                                                                                    "end_token": 47,
                                                                                                    "label": "."
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger.error"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 49,
                                                                                            "end_token": 52,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "concatenated_string",
                                                                                                    "start_token": 50,
                                                                                                    "end_token": 51,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "start_token": 51,
                                                                                                            "end_token": 51,
                                                                                                            "label": "\"Failed to list API keys: {str(e)}\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "f\"Failed to list API keys: {str(e)}\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(f\"Failed to list API keys: {str(e)}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error(f\"Failed to list API keys: {str(e)}\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.error(f\"Failed to list API keys: {str(e)}\")"
                                                                        }
                                                                    ],
                                                                    "label": "logger.error(f\"Failed to list API keys: {str(e)}\")"
                                                                }
                                                            ],
                                                            "label": "except APIKeyError as e:\n        logger.error(f\"Failed to list API keys: {str(e)}\")\n"
                                                        }
                                                    ],
                                                    "label": "try:\n        return await list_user_api_keys(user_id)\n    except APIKeyError as e:\n        logger.error(f\"Failed to list API keys: {str(e)}\")\n"
                                                }
                                            ],
                                            "label": "try:\n        return await list_user_api_keys(user_id)\n    except APIKeyError as e:\n        logger.error(f\"Failed to list API keys: {str(e)}\")\n"
                                        }
                                    ],
                                    "label": "async def get_api_keys(\n    user_id: Annotated[str, Depends(get_user_id)]\n) -> list[APIKeyWithoutHash]:\n    \"\"\"List all API keys for the user\"\"\"\n    try:\n        return await list_user_api_keys(user_id)\n    except APIKeyError as e:\n        logger.error(f\"Failed to list API keys: {str(e)}\")\n"
                                }
                            ],
                            "label": "async def get_api_keys(\n    user_id: Annotated[str, Depends(get_user_id)]\n) -> list[APIKeyWithoutHash]:\n    \"\"\"List all API keys for the user\"\"\"\n    try:\n        return await list_user_api_keys(user_id)\n    except APIKeyError as e:\n        logger.error(f\"Failed to list API keys: {str(e)}\")\n"
                        }
                    ],
                    "label": "async def get_api_keys(\n    user_id: Annotated[str, Depends(get_user_id)]\n) -> list[APIKeyWithoutHash]:\n    \"\"\"List all API keys for the user\"\"\"\n    try:\n        return await list_user_api_keys(user_id)\n    except APIKeyError as e:\n        logger.error(f\"Failed to list API keys: {str(e)}\")"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "get_api_key",
            "start_line": 591,
            "end_line": 599,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 63,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 63,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 63,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1,
                                            "end_token": 1,
                                            "label": "def"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "get_api_key"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "key_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "key_id: str"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 9,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 12,
                                                                    "end_token": 19,
                                                                    "children": [
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 15,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 16,
                                                                                    "end_token": 18,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                        },
                                        {
                                            "type": "type",
                                            "start_token": 23,
                                            "end_token": 24,
                                            "label": "> APIKeyWithoutHash"
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 27,
                                            "end_token": 29,
                                            "label": "\"\"\"Get a specific API key\"\"\""
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 31,
                                            "end_token": 63,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 31,
                                                    "end_token": 63,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 34,
                                                            "end_token": 62,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 34,
                                                                    "end_token": 42,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 34,
                                                                            "end_token": 34,
                                                                            "label": "api_key"
                                                                        },
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 36,
                                                                            "end_token": 42,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 37,
                                                                                    "end_token": 42,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 37,
                                                                                            "end_token": 37,
                                                                                            "label": "get_api_key_by_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 38,
                                                                                            "end_token": 42,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 39,
                                                                                                    "end_token": 39,
                                                                                                    "label": "key_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 41,
                                                                                                    "end_token": 41,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(key_id, user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "get_api_key_by_id(key_id, user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "await get_api_key_by_id(key_id, user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "api_key = await get_api_key_by_id(key_id, user_id)"
                                                                },
                                                                {
                                                                    "type": "if_statement",
                                                                    "start_token": 44,
                                                                    "end_token": 59,
                                                                    "children": [
                                                                        {
                                                                            "type": "if_clause",
                                                                            "start_token": 44,
                                                                            "end_token": 47,
                                                                            "children": [
                                                                                {
                                                                                    "type": "not_operator",
                                                                                    "start_token": 45,
                                                                                    "end_token": 46,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 46,
                                                                                            "end_token": 46,
                                                                                            "label": "api_key"
                                                                                        }
                                                                                    ],
                                                                                    "label": "not api_key"
                                                                                }
                                                                            ],
                                                                            "label": "if not api_key:"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 49,
                                                                            "end_token": 59,
                                                                            "children": [
                                                                                {
                                                                                    "type": "raise_statement",
                                                                                    "start_token": 49,
                                                                                    "end_token": 59,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 50,
                                                                                            "end_token": 59,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 50,
                                                                                                    "end_token": 50,
                                                                                                    "label": "HTTPException"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 51,
                                                                                                    "end_token": 59,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 52,
                                                                                                            "end_token": 54,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 52,
                                                                                                                    "end_token": 52,
                                                                                                                    "label": "status_code"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "integer",
                                                                                                                    "start_token": 54,
                                                                                                                    "end_token": 54,
                                                                                                                    "label": "404"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "status_code=404"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "start_token": 56,
                                                                                                            "end_token": 58,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 56,
                                                                                                                    "end_token": 56,
                                                                                                                    "label": "detail"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "start_token": 58,
                                                                                                                    "end_token": 58,
                                                                                                                    "label": "\"API key not found\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "detail=\"API key not found\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(status_code=404, detail=\"API key not found\")"
                                                                                                }
                                                                                            ],
                                                                                            "label": "HTTPException(status_code=404, detail=\"API key not found\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                        }
                                                                    ],
                                                                    "label": "if not api_key:\n            raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 61,
                                                                    "end_token": 62,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 62,
                                                                            "end_token": 62,
                                                                            "label": "api_key"
                                                                        }
                                                                    ],
                                                                    "label": "return api_key"
                                                                }
                                                            ],
                                                            "label": "api_key = await get_api_key_by_id(key_id, user_id)\n        if not api_key:\n            raise HTTPException(status_code=404, detail=\"API key not found\")\n        return api_key"
                                                        }
                                                    ],
                                                    "label": "try:\n        api_key = await get_api_key_by_id(key_id, user_id)\n        if not api_key:\n            raise HTTPException(status_code=404, detail=\"API key not found\")\n        return api_key\n"
                                                }
                                            ],
                                            "label": "try:\n        api_key = await get_api_key_by_id(key_id, user_id)\n        if not api_key:\n            raise HTTPException(status_code=404, detail=\"API key not found\")\n        return api_key\n"
                                        }
                                    ],
                                    "label": "async def get_api_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> APIKeyWithoutHash:\n    \"\"\"Get a specific API key\"\"\"\n    try:\n        api_key = await get_api_key_by_id(key_id, user_id)\n        if not api_key:\n            raise HTTPException(status_code=404, detail=\"API key not found\")\n        return api_key\n"
                                }
                            ],
                            "label": "async def get_api_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> APIKeyWithoutHash:\n    \"\"\"Get a specific API key\"\"\"\n    try:\n        api_key = await get_api_key_by_id(key_id, user_id)\n        if not api_key:\n            raise HTTPException(status_code=404, detail=\"API key not found\")\n        return api_key\n"
                        }
                    ],
                    "label": "async def get_api_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> APIKeyWithoutHash:\n    \"\"\"Get a specific API key\"\"\"\n    try:\n        api_key = await get_api_key_by_id(key_id, user_id)\n        if not api_key:\n            raise HTTPException(status_code=404, detail=\"API key not found\")\n        return api_key\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "delete_api_key",
            "start_line": 612,
            "end_line": 624,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 106,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 105,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 105,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "delete_api_key"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 4,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "key_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 6,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": ": str"
                                                        }
                                                    ],
                                                    "label": "\n    key_id: str"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 9,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 10,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "type_parameter",
                                                                    "start_token": 12,
                                                                    "end_token": 19,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 15,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 16,
                                                                                    "end_token": 17,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": ": Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                        },
                                        {
                                            "type": "generic_type",
                                            "start_token": 23,
                                            "end_token": 27,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 24,
                                                    "end_token": 24,
                                                    "label": "Optional"
                                                },
                                                {
                                                    "type": "type_parameter",
                                                    "start_token": 25,
                                                    "end_token": 26,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 26,
                                                            "end_token": 26,
                                                            "label": "APIKeyWithoutHash"
                                                        }
                                                    ],
                                                    "label": "[APIKeyWithoutHash"
                                                }
                                            ],
                                            "label": "> Optional[APIKeyWithoutHash]"
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 30,
                                            "end_token": 32,
                                            "children": [
                                                {
                                                    "type": "string_content",
                                                    "start_token": 31,
                                                    "end_token": 31,
                                                    "label": "\"Revoke an API key\""
                                                }
                                            ],
                                            "label": "\"\"\"Revoke an API key\"\"\""
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 34,
                                            "end_token": 105,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 34,
                                                    "end_token": 105,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 35,
                                                            "end_token": 44,
                                                            "children": [
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 37,
                                                                    "end_token": 44,
                                                                    "children": [
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 38,
                                                                            "end_token": 44,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 39,
                                                                                    "end_token": 44,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 39,
                                                                                            "end_token": 39,
                                                                                            "label": "revoke_api_key"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 40,
                                                                                            "end_token": 43,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 41,
                                                                                                    "end_token": 41,
                                                                                                    "label": "key_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 43,
                                                                                                    "end_token": 43,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(key_id, user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "revoke_api_key(key_id, user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "await revoke_api_key(key_id, user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "return await revoke_api_key(key_id, user_id)"
                                                                }
                                                            ],
                                                            "label": ":\n        return await revoke_api_key(key_id, user_id)"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 46,
                                                            "end_token": 60,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 47,
                                                                    "end_token": 47,
                                                                    "label": "APIKeyNotFoundError"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 48,
                                                                    "end_token": 60,
                                                                    "children": [
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 50,
                                                                            "end_token": 60,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 51,
                                                                                    "end_token": 60,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 51,
                                                                                            "end_token": 51,
                                                                                            "label": "HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 52,
                                                                                            "end_token": 59,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 53,
                                                                                                    "end_token": 55,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 53,
                                                                                                            "end_token": 53,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 55,
                                                                                                            "end_token": 55,
                                                                                                            "label": "404"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=404"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 56,
                                                                                                    "end_token": 59,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 57,
                                                                                                            "end_token": 57,
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 59,
                                                                                                            "end_token": 59,
                                                                                                            "label": "\"API key not found\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ", detail=\"API key not found\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_code=404, detail=\"API key not found\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(status_code=404, detail=\"API key not found\")"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                        }
                                                                    ],
                                                                    "label": ":\n        raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                }
                                                            ],
                                                            "label": "except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 62,
                                                            "end_token": 76,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 63,
                                                                    "end_token": 63,
                                                                    "label": "APIKeyPermissionError"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 64,
                                                                    "end_token": 76,
                                                                    "children": [
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 66,
                                                                            "end_token": 76,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 67,
                                                                                    "end_token": 76,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 67,
                                                                                            "end_token": 67,
                                                                                            "label": "HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 68,
                                                                                            "end_token": 75,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 69,
                                                                                                    "end_token": 71,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 69,
                                                                                                            "end_token": 69,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 71,
                                                                                                            "end_token": 71,
                                                                                                            "label": "403"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=403"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 75,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 73,
                                                                                                            "end_token": 73,
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 75,
                                                                                                            "end_token": 75,
                                                                                                            "label": "\"Permission denied\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ", detail=\"Permission denied\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_code=403, detail=\"Permission denied\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                        }
                                                                    ],
                                                                    "label": ":\n        raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                }
                                                            ],
                                                            "label": "except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 78,
                                                            "end_token": 105,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 79,
                                                                    "end_token": 79,
                                                                    "label": "APIKeyError"
                                                                },
                                                                {
                                                                    "type": "as_pattern",
                                                                    "start_token": 80,
                                                                    "end_token": 81,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 81,
                                                                            "end_token": 81,
                                                                            "label": "e"
                                                                        }
                                                                    ],
                                                                    "label": "as e"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 82,
                                                                    "end_token": 105,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 84,
                                                                            "end_token": 90,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 84,
                                                                                    "end_token": 86,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 84,
                                                                                            "end_token": 84,
                                                                                            "label": "logger"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 86,
                                                                                            "end_token": 86,
                                                                                            "label": "error"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 87,
                                                                                    "end_token": 89,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "concatenated_string",
                                                                                            "start_token": 88,
                                                                                            "end_token": 88,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "interpolation",
                                                                                                    "start_token": 89,
                                                                                                    "end_token": 89,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 101,
                                                                                                            "end_token": 103,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 101,
                                                                                                                    "end_token": 101,
                                                                                                                    "label": "str"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "start_token": 102,
                                                                                                                    "end_token": 102,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 103,
                                                                                                                            "end_token": 103,
                                                                                                                            "label": "e"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "("
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "str(e"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\"Failed to revoke API key: {str(e)}\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "f"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(f\"Failed to revoke API key: {str(e)}\""
                                                                                }
                                                                            ],
                                                                            "label": "logger.error(f\"Failed to revoke API key: {str(e)}\")"
                                                                        },
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 92,
                                                                            "end_token": 105,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 93,
                                                                                    "end_token": 105,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 93,
                                                                                            "end_token": 93,
                                                                                            "label": "HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 94,
                                                                                            "end_token": 104,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 97,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 95,
                                                                                                            "end_token": 95,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 97,
                                                                                                            "end_token": 97,
                                                                                                            "label": "400"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=400"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 98,
                                                                                                    "end_token": 104,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 99,
                                                                                                            "end_token": 99,
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 101,
                                                                                                            "end_token": 103,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 101,
                                                                                                                    "end_token": 101,
                                                                                                                    "label": "str"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "start_token": 102,
                                                                                                                    "end_token": 102,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 103,
                                                                                                                            "end_token": 103,
                                                                                                                            "label": "e"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "("
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "str(e"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ", detail=str(e)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_code=400, detail=str(e)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(status_code=400, detail=str(e))"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=400, detail=str(e))"
                                                                        }
                                                                    ],
                                                                    "label": ":\n        logger.error(f\"Failed to revoke API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                                }
                                                            ],
                                                            "label": "except APIKeyError as e:\n        logger.error(f\"Failed to revoke API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                        }
                                                    ],
                                                    "label": "try:\n        return await revoke_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to revoke API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                }
                                            ],
                                            "label": "try:\n        return await revoke_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to revoke API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                        }
                                    ],
                                    "label": "async def delete_api_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Revoke an API key\"\"\"\n    try:\n        return await revoke_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to revoke API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                }
                            ],
                            "label": "async def delete_api_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Revoke an API key\"\"\"\n    try:\n        return await revoke_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to revoke API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                        }
                    ],
                    "label": "async def delete_api_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Revoke an API key\"\"\"\n    try:\n        return await revoke_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to revoke API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))\n"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "suspend_key",
            "start_line": 634,
            "end_line": 646,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 105,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 105,
                            "children": [
                                {
                                    "type": "decorator",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 0,
                                            "end_token": 0,
                                            "label": "async"
                                        }
                                    ],
                                    "label": "async"
                                },
                                {
                                    "type": "function_definition",
                                    "start_token": 1,
                                    "end_token": 105,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "suspend_key"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 21,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "key_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "key_id: str"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 9,
                                                    "end_token": 19,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 9,
                                                            "end_token": 9,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 19,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "label": "Annotated"
                                                                },
                                                                {
                                                                    "type": "keyword_argument",
                                                                    "start_token": 12,
                                                                    "end_token": 18,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 15,
                                                                            "end_token": 18,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 15,
                                                                                    "end_token": 15,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 16,
                                                                                    "end_token": 18,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 17,
                                                                                            "end_token": 17,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "[str, Depends(get_user_id)"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n)"
                                        },
                                        {
                                            "type": "union_type",
                                            "start_token": 23,
                                            "end_token": 27,
                                            "children": [
                                                {
                                                    "type": "none",
                                                    "start_token": 24,
                                                    "end_token": 25,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 24,
                                                            "end_token": 24,
                                                            "label": "Optional"
                                                        }
                                                    ],
                                                    "label": "Optional["
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 26,
                                                    "end_token": 26,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 26,
                                                            "end_token": 26,
                                                            "label": "APIKeyWithoutHash"
                                                        }
                                                    ],
                                                    "label": "APIKeyWithoutHash"
                                                }
                                            ],
                                            "label": "> Optional[APIKeyWithoutHash]"
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 30,
                                            "end_token": 32,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "start_token": 30,
                                                    "end_token": 30,
                                                    "label": "\"\""
                                                },
                                                {
                                                    "type": "string_content",
                                                    "start_token": 31,
                                                    "end_token": 31,
                                                    "label": "\"Suspend an API key\""
                                                },
                                                {
                                                    "type": "string_end",
                                                    "start_token": 32,
                                                    "end_token": 32,
                                                    "label": "\"\""
                                                }
                                            ],
                                            "label": "\"\"\"Suspend an API key\"\"\""
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 34,
                                            "end_token": 105,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 34,
                                                    "end_token": 105,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 36,
                                                            "end_token": 45,
                                                            "children": [
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 37,
                                                                    "end_token": 44,
                                                                    "children": [
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 38,
                                                                            "end_token": 44,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 39,
                                                                                    "end_token": 44,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 39,
                                                                                            "end_token": 39,
                                                                                            "label": "suspend_api_key"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 40,
                                                                                            "end_token": 44,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 41,
                                                                                                    "end_token": 41,
                                                                                                    "label": "key_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 43,
                                                                                                    "end_token": 43,
                                                                                                    "label": "user_id"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(key_id, user_id)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "suspend_api_key(key_id, user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "await suspend_api_key(key_id, user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "return await suspend_api_key(key_id, user_id)"
                                                                }
                                                            ],
                                                            "label": "\n        return await suspend_api_key(key_id, user_id)\n"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 46,
                                                            "end_token": 60,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 47,
                                                                    "end_token": 47,
                                                                    "label": "APIKeyNotFoundError"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 50,
                                                                    "end_token": 60,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 51,
                                                                            "end_token": 60,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 51,
                                                                                    "end_token": 51,
                                                                                    "label": "HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 52,
                                                                                    "end_token": 60,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 53,
                                                                                            "end_token": 55,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 53,
                                                                                                    "end_token": 53,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 55,
                                                                                                    "end_token": 55,
                                                                                                    "label": "404"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=404"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 57,
                                                                                            "end_token": 59,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 57,
                                                                                                    "end_token": 57,
                                                                                                    "label": "detail"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 59,
                                                                                                    "end_token": 59,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "start_token": 59,
                                                                                                            "end_token": 59,
                                                                                                            "label": "\"API key not found\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\"API key not found\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "detail=\"API key not found\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(status_code=404, detail=\"API key not found\")"
                                                                                }
                                                                            ],
                                                                            "label": "HTTPException(status_code=404, detail=\"API key not found\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                }
                                                            ],
                                                            "label": "except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 62,
                                                            "end_token": 76,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 63,
                                                                    "end_token": 63,
                                                                    "label": "APIKeyPermissionError"
                                                                },
                                                                {
                                                                    "type": "raise_statement",
                                                                    "start_token": 66,
                                                                    "end_token": 76,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 67,
                                                                            "end_token": 76,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 67,
                                                                                    "end_token": 67,
                                                                                    "label": "HTTPException"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 68,
                                                                                    "end_token": 76,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 69,
                                                                                            "end_token": 71,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 69,
                                                                                                    "end_token": 69,
                                                                                                    "label": "status_code"
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "start_token": 71,
                                                                                                    "end_token": 71,
                                                                                                    "label": "403"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_code=403"
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "start_token": 73,
                                                                                            "end_token": 75,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 73,
                                                                                                    "end_token": 73,
                                                                                                    "label": "detail"
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 75,
                                                                                                    "end_token": 75,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "start_token": 75,
                                                                                                            "end_token": 75,
                                                                                                            "label": "\"Permission denied\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\"Permission denied\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "detail=\"Permission denied\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(status_code=403, detail=\"Permission denied\")"
                                                                                }
                                                                            ],
                                                                            "label": "HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                        }
                                                                    ],
                                                                    "label": "raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                }
                                                            ],
                                                            "label": "except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 78,
                                                            "end_token": 105,
                                                            "children": [
                                                                {
                                                                    "type": "as_pattern",
                                                                    "start_token": 79,
                                                                    "end_token": 81,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 79,
                                                                            "end_token": 79,
                                                                            "label": "APIKeyError"
                                                                        },
                                                                        {
                                                                            "type": "as_pattern_target",
                                                                            "start_token": 81,
                                                                            "end_token": 81,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 81,
                                                                                    "end_token": 81,
                                                                                    "label": "e"
                                                                                }
                                                                            ],
                                                                            "label": "e"
                                                                        }
                                                                    ],
                                                                    "label": "APIKeyError as e"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 83,
                                                                    "end_token": 105,
                                                                    "children": [
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "start_token": 84,
                                                                            "end_token": 90,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 84,
                                                                                    "end_token": 90,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 84,
                                                                                            "end_token": 86,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 84,
                                                                                                    "end_token": 84,
                                                                                                    "label": "logger"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 86,
                                                                                                    "end_token": 86,
                                                                                                    "label": "error"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger.error"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 87,
                                                                                            "end_token": 90,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "concatenated_string",
                                                                                                    "start_token": 88,
                                                                                                    "end_token": 89,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "escape_interpolation",
                                                                                                            "start_token": 89,
                                                                                                            "end_token": 89,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 102,
                                                                                                                    "end_token": 103,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 101,
                                                                                                                            "end_token": 101,
                                                                                                                            "label": "str"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "start_token": 102,
                                                                                                                            "end_token": 103,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 103,
                                                                                                                                    "end_token": 103,
                                                                                                                                    "label": "e"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "(e"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "(e"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "\"Failed to suspend API key: {str(e)}\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "f\"Failed to suspend API key: {str(e)}\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(f\"Failed to suspend API key: {str(e)}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error(f\"Failed to suspend API key: {str(e)}\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.error(f\"Failed to suspend API key: {str(e)}\")"
                                                                        },
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 92,
                                                                            "end_token": 105,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 93,
                                                                                    "end_token": 105,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 93,
                                                                                            "end_token": 93,
                                                                                            "label": "HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 94,
                                                                                            "end_token": 105,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 97,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 95,
                                                                                                            "end_token": 95,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 97,
                                                                                                            "end_token": 97,
                                                                                                            "label": "400"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=400"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 99,
                                                                                                    "end_token": 104,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 99,
                                                                                                            "end_token": 99,
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 101,
                                                                                                            "end_token": 104,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 101,
                                                                                                                    "end_token": 101,
                                                                                                                    "label": "str"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "start_token": 102,
                                                                                                                    "end_token": 104,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 103,
                                                                                                                            "end_token": 103,
                                                                                                                            "label": "e"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "(e)"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "str(e)"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "detail=str(e)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_code=400, detail=str(e))"
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(status_code=400, detail=str(e))"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=400, detail=str(e))"
                                                                        }
                                                                    ],
                                                                    "label": "\n        logger.error(f\"Failed to suspend API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                                }
                                                            ],
                                                            "label": "except APIKeyError as e:\n        logger.error(f\"Failed to suspend API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                        }
                                                    ],
                                                    "label": "try:\n        return await suspend_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to suspend API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                }
                                            ],
                                            "label": "try:\n        return await suspend_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to suspend API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                        }
                                    ],
                                    "label": "def suspend_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Suspend an API key\"\"\"\n    try:\n        return await suspend_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to suspend API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                }
                            ],
                            "label": "async def suspend_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Suspend an API key\"\"\"\n    try:\n        return await suspend_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to suspend API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                        }
                    ],
                    "label": "async def suspend_key(\n    key_id: str, user_id: Annotated[str, Depends(get_user_id)]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Suspend an API key\"\"\"\n    try:\n        return await suspend_api_key(key_id, user_id)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to suspend API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                }
            ]
        },
        {
            "type": "function_placeholder",
            "name": "update_permissions",
            "start_line": 656,
            "end_line": 670,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 116,
                    "children": [
                        {
                            "type": "decorated_definition",
                            "start_token": 0,
                            "end_token": 116,
                            "children": [
                                {
                                    "type": "function_definition",
                                    "start_token": 0,
                                    "end_token": 116,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 2,
                                            "end_token": 2,
                                            "label": "update_permissions"
                                        },
                                        {
                                            "type": "parameters",
                                            "start_token": 3,
                                            "end_token": 28,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 5,
                                                    "end_token": 7,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 5,
                                                            "end_token": 5,
                                                            "label": "key_id"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 7,
                                                            "end_token": 7,
                                                            "label": "str"
                                                        }
                                                    ],
                                                    "label": "key_id: str"
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "start_token": 10,
                                                    "end_token": 12,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 10,
                                                            "end_token": 10,
                                                            "label": "request"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 12,
                                                            "end_token": 12,
                                                            "label": "UpdatePermissionsRequest"
                                                        }
                                                    ],
                                                    "label": "request: UpdatePermissionsRequest"
                                                },
                                                {
                                                    "type": "typed_default_parameter",
                                                    "start_token": 15,
                                                    "end_token": 25,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 15,
                                                            "end_token": 15,
                                                            "label": "user_id"
                                                        },
                                                        {
                                                            "type": "annotated_type",
                                                            "start_token": 17,
                                                            "end_token": 25,
                                                            "children": [
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 17,
                                                                    "end_token": 25,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 19,
                                                                            "end_token": 19,
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 21,
                                                                            "end_token": 24,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 21,
                                                                                    "end_token": 21,
                                                                                    "label": "Depends"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 22,
                                                                                    "end_token": 24,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 23,
                                                                                            "end_token": 23,
                                                                                            "label": "get_user_id"
                                                                                        }
                                                                                    ],
                                                                                    "label": "(get_user_id)"
                                                                                }
                                                                            ],
                                                                            "label": "Depends(get_user_id)"
                                                                        }
                                                                    ],
                                                                    "label": "Annotated[str, Depends(get_user_id)]"
                                                                }
                                                            ],
                                                            "label": "Annotated[str, Depends(get_user_id)]"
                                                        }
                                                    ],
                                                    "label": "user_id: Annotated[str, Depends(get_user_id)]"
                                                }
                                            ],
                                            "label": "(\n    key_id: str,\n    request: UpdatePermissionsRequest,\n    user_id: Annotated[str, Depends(get_user_id)],\n)"
                                        },
                                        {
                                            "type": "union_type",
                                            "start_token": 30,
                                            "end_token": 34,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 33,
                                                    "end_token": 33,
                                                    "label": "APIKeyWithoutHash"
                                                }
                                            ],
                                            "label": "> Optional[APIKeyWithoutHash]"
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 36,
                                            "end_token": 116,
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 37,
                                                    "end_token": 39,
                                                    "label": "\"\"\"Update API key permissions\"\"\""
                                                },
                                                {
                                                    "type": "try_statement",
                                                    "start_token": 41,
                                                    "end_token": 116,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "start_token": 43,
                                                            "end_token": 55,
                                                            "children": [
                                                                {
                                                                    "type": "return_statement",
                                                                    "start_token": 44,
                                                                    "end_token": 55,
                                                                    "children": [
                                                                        {
                                                                            "type": "await",
                                                                            "start_token": 45,
                                                                            "end_token": 55,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 46,
                                                                                    "end_token": 55,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 46,
                                                                                            "end_token": 46,
                                                                                            "label": "update_api_key_permissions"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 47,
                                                                                            "end_token": 55,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 48,
                                                                                                    "end_token": 48,
                                                                                                    "label": "key_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 50,
                                                                                                    "end_token": 50,
                                                                                                    "label": "user_id"
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 52,
                                                                                                    "end_token": 54,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 52,
                                                                                                            "end_token": 52,
                                                                                                            "label": "request"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 54,
                                                                                                            "end_token": 54,
                                                                                                            "label": "permissions"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "request.permissions"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(key_id, user_id, request.permissions)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "update_api_key_permissions(key_id, user_id, request.permissions)"
                                                                                }
                                                                            ],
                                                                            "label": "await update_api_key_permissions(key_id, user_id, request.permissions)"
                                                                        }
                                                                    ],
                                                                    "label": "return await update_api_key_permissions(key_id, user_id, request.permissions)"
                                                                }
                                                            ],
                                                            "label": "\n        return await update_api_key_permissions(key_id, user_id, request.permissions)"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 57,
                                                            "end_token": 71,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 58,
                                                                    "end_token": 58,
                                                                    "label": "APIKeyNotFoundError"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 59,
                                                                    "end_token": 71,
                                                                    "children": [
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 61,
                                                                            "end_token": 71,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 62,
                                                                                    "end_token": 71,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 62,
                                                                                            "end_token": 62,
                                                                                            "label": "HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 63,
                                                                                            "end_token": 71,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 64,
                                                                                                    "end_token": 66,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 64,
                                                                                                            "end_token": 64,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 66,
                                                                                                            "end_token": 66,
                                                                                                            "label": "404"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=404"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 68,
                                                                                                    "end_token": 70,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 68,
                                                                                                            "end_token": 68,
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 70,
                                                                                                            "end_token": 70,
                                                                                                            "label": "\"API key not found\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "detail=\"API key not found\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_code=404, detail=\"API key not found\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(status_code=404, detail=\"API key not found\")"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                        }
                                                                    ],
                                                                    "label": ":\n        raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                                }
                                                            ],
                                                            "label": "except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 73,
                                                            "end_token": 87,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 74,
                                                                    "end_token": 74,
                                                                    "label": "APIKeyPermissionError"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 75,
                                                                    "end_token": 87,
                                                                    "children": [
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 77,
                                                                            "end_token": 87,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 78,
                                                                                    "end_token": 87,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 78,
                                                                                            "end_token": 78,
                                                                                            "label": "HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 79,
                                                                                            "end_token": 87,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 80,
                                                                                                    "end_token": 82,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 80,
                                                                                                            "end_token": 80,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 82,
                                                                                                            "end_token": 82,
                                                                                                            "label": "403"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=403"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 84,
                                                                                                    "end_token": 86,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 84,
                                                                                                            "end_token": 84,
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "start_token": 86,
                                                                                                            "end_token": 86,
                                                                                                            "label": "\"Permission denied\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "detail=\"Permission denied\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_code=403, detail=\"Permission denied\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                        }
                                                                    ],
                                                                    "label": ":\n        raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                                }
                                                            ],
                                                            "label": "except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 89,
                                                            "end_token": 116,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 90,
                                                                    "end_token": 90,
                                                                    "label": "APIKeyError"
                                                                },
                                                                {
                                                                    "type": "as_pattern",
                                                                    "start_token": 91,
                                                                    "end_token": 93,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 91,
                                                                            "end_token": 91,
                                                                            "label": "as"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 93,
                                                                            "end_token": 93,
                                                                            "label": ":"
                                                                        }
                                                                    ],
                                                                    "label": "as e:"
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 94,
                                                                    "end_token": 116,
                                                                    "children": [
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "start_token": 95,
                                                                            "end_token": 101,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 95,
                                                                                    "end_token": 101,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 95,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 95,
                                                                                                    "label": "logger"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 97,
                                                                                                    "end_token": 97,
                                                                                                    "label": "error"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger.error"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 98,
                                                                                            "end_token": 101,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "concatenated_string",
                                                                                                    "start_token": 99,
                                                                                                    "end_token": 100,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "start_token": 100,
                                                                                                            "end_token": 100,
                                                                                                            "label": "\"Failed to update API key permissions: {str(e)}\""
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "start_token": 99,
                                                                                                            "end_token": 99,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 100,
                                                                                                                    "end_token": 100,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 100,
                                                                                                                            "end_token": 100,
                                                                                                                            "label": "\"Failed to update API key permissions: {str(e)}\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "start_token": 100,
                                                                                                                            "end_token": 100,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 100,
                                                                                                                                    "end_token": 100,
                                                                                                                                    "label": "\"Failed to update API key permissions: {str(e)}\""
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "\"Failed to update API key permissions: {str(e)}\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"Failed to update API key permissions: {str(e)}\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "f"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "f\"Failed to update API key permissions: {str(e)}\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(f\"Failed to update API key permissions: {str(e)}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error(f\"Failed to update API key permissions: {str(e)}\")"
                                                                                }
                                                                            ],
                                                                            "label": "logger.error(f\"Failed to update API key permissions: {str(e)}\")"
                                                                        },
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 103,
                                                                            "end_token": 116,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 104,
                                                                                    "end_token": 116,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 104,
                                                                                            "end_token": 104,
                                                                                            "label": "HTTPException"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 105,
                                                                                            "end_token": 116,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 106,
                                                                                                    "end_token": 108,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 106,
                                                                                                            "end_token": 106,
                                                                                                            "label": "status_code"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "integer",
                                                                                                            "start_token": 108,
                                                                                                            "end_token": 108,
                                                                                                            "label": "400"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_code=400"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 110,
                                                                                                    "end_token": 113,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 110,
                                                                                                            "end_token": 110,
                                                                                                            "label": "detail"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 112,
                                                                                                            "end_token": 114,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 112,
                                                                                                                    "end_token": 112,
                                                                                                                    "label": "str"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "start_token": 113,
                                                                                                                    "end_token": 114,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 114,
                                                                                                                            "end_token": 114,
                                                                                                                            "label": "e"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "(e"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "str(e"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "detail=str("
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_code=400, detail=str(e))"
                                                                                        }
                                                                                    ],
                                                                                    "label": "HTTPException(status_code=400, detail=str(e))"
                                                                                }
                                                                            ],
                                                                            "label": "raise HTTPException(status_code=400, detail=str(e))"
                                                                        }
                                                                    ],
                                                                    "label": "\n        logger.error(f\"Failed to update API key permissions: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                                }
                                                            ],
                                                            "label": "except APIKeyError as e:\n        logger.error(f\"Failed to update API key permissions: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                        }
                                                    ],
                                                    "label": "try:\n        return await update_api_key_permissions(key_id, user_id, request.permissions)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to update API key permissions: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                                }
                                            ],
                                            "label": "\n    \"\"\"Update API key permissions\"\"\"\n    try:\n        return await update_api_key_permissions(key_id, user_id, request.permissions)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to update API key permissions: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                        }
                                    ],
                                    "label": "async def update_permissions(\n    key_id: str,\n    request: UpdatePermissionsRequest,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Update API key permissions\"\"\"\n    try:\n        return await update_api_key_permissions(key_id, user_id, request.permissions)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to update API key permissions: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                                }
                            ],
                            "label": "async def update_permissions(\n    key_id: str,\n    request: UpdatePermissionsRequest,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Update API key permissions\"\"\"\n    try:\n        return await update_api_key_permissions(key_id, user_id, request.permissions)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to update API key permissions: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                        }
                    ],
                    "label": "async def update_permissions(\n    key_id: str,\n    request: UpdatePermissionsRequest,\n    user_id: Annotated[str, Depends(get_user_id)],\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"Update API key permissions\"\"\"\n    try:\n        return await update_api_key_permissions(key_id, user_id, request.permissions)\n    except APIKeyNotFoundError:\n        raise HTTPException(status_code=404, detail=\"API key not found\")\n    except APIKeyPermissionError:\n        raise HTTPException(status_code=403, detail=\"Permission denied\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to update API key permissions: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "DeleteGraphResponse",
            "start_line": 145,
            "end_line": 146,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 9,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 9,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "class"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "DeleteGraphResponse"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "children": [],
                                            "label": "TypedDict"
                                        }
                                    ],
                                    "label": "(TypedDict)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 5,
                                    "end_token": 9,
                                    "children": [
                                        {
                                            "type": "typed_parameter",
                                            "start_token": 7,
                                            "end_token": 9,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 7,
                                                    "end_token": 7,
                                                    "children": [],
                                                    "label": "version_counts"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "children": [],
                                                    "label": "int"
                                                }
                                            ],
                                            "label": "version_counts: int"
                                        }
                                    ],
                                    "label": ":\n    version_counts: int"
                                }
                            ],
                            "label": "class DeleteGraphResponse(TypedDict):\n    version_counts: int"
                        }
                    ],
                    "label": "class DeleteGraphResponse(TypedDict):\n    version_counts: int"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "ScheduleCreationRequest",
            "start_line": 477,
            "end_line": 480,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 24,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 24,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "ScheduleCreationRequest"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 6,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 3,
                                            "end_token": 5,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 3,
                                                    "end_token": 3,
                                                    "label": "pydantic"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 5,
                                                    "end_token": 5,
                                                    "label": "BaseModel"
                                                }
                                            ],
                                            "label": "pydantic.BaseModel"
                                        }
                                    ],
                                    "label": "(pydantic.BaseModel)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 7,
                                    "end_token": 24,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 9,
                                            "end_token": 11,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "cron"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "cron: str"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 13,
                                            "end_token": 20,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 13,
                                                    "end_token": 13,
                                                    "label": "input_data"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 15,
                                                    "end_token": 20,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 15,
                                                            "end_token": 15,
                                                            "label": "dict"
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 16,
                                                            "end_token": 20,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 17,
                                                                    "end_token": 17,
                                                                    "label": "Any"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 19,
                                                                    "end_token": 19,
                                                                    "label": "Any"
                                                                }
                                                            ],
                                                            "label": "[Any, Any]"
                                                        }
                                                    ],
                                                    "label": "dict[Any, Any]"
                                                }
                                            ],
                                            "label": "input_data: dict[Any, Any]"
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 22,
                                            "end_token": 24,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 22,
                                                    "end_token": 22,
                                                    "label": "graph_id"
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 24,
                                                    "end_token": 24,
                                                    "label": "str"
                                                }
                                            ],
                                            "label": "graph_id: str"
                                        }
                                    ],
                                    "label": ":\n    cron: str\n    input_data: dict[Any, Any]\n    graph_id: str"
                                }
                            ],
                            "label": "class ScheduleCreationRequest(pydantic.BaseModel):\n    cron: str\n    input_data: dict[Any, Any]\n    graph_id: str"
                        }
                    ],
                    "label": "class ScheduleCreationRequest(pydantic.BaseModel):\n    cron: str\n    input_data: dict[Any, Any]\n    graph_id: str"
                }
            ]
        }
    ],
    "label": "import asyncio\nimport logging\nfrom collections import defaultdict\nfrom typing import TYPE_CHECKING, Annotated, Any, Sequence\n\nimport pydantic\nfrom autogpt_libs.auth.middleware import auth_middleware\nfrom autogpt_libs.feature_flag.client import feature_flag\nfrom autogpt_libs.utils.cache import thread_cached\nfrom fastapi import APIRouter, Depends, HTTPException\nfrom typing_extensions import Optional, TypedDict\n\nimport backend.data.block\nimport backend.server.integrations.router\nimport backend.server.routers.analytics\nfrom backend.data import execution as execution_db\nfrom backend.data import graph as graph_db\nfrom backend.data.api_key import (\n    APIKeyError,\n    APIKeyNotFoundError,\n    APIKeyPermissionError,\n    APIKeyWithoutHash,\n    generate_api_key,\n    get_api_key_by_id,\n    list_user_api_keys,\n    revoke_api_key,\n    suspend_api_key,\n    update_api_key_permissions,\n)\nfrom backend.data.block import BlockInput, CompletedBlockOutput\nfrom backend.data.credit import get_block_costs, get_user_credit_model\nfrom backend.data.user import get_or_create_user\nfrom backend.executor import ExecutionManager, ExecutionScheduler, scheduler\nfrom backend.integrations.creds_manager import IntegrationCredentialsManager\nfrom backend.integrations.webhooks.graph_lifecycle_hooks import (\n    on_graph_activate,\n    on_graph_deactivate,\n)\nfrom backend.server.model import (\n    CreateAPIKeyRequest,\n    CreateAPIKeyResponse,\n    CreateGraph,\n    SetGraphActiveVersion,\n    UpdatePermissionsRequest,\n)\nfrom backend.server.utils import get_user_id\nfrom backend.util.service import get_service_client\nfrom backend.util.settings import Settings\n\nif TYPE_CHECKING:\n    from backend.data.model import Credentials\n\n\n@thread_cached\n\n\n@thread_cached\n\n\nsettings = Settings()\nlogger = logging.getLogger(__name__)\nintegration_creds_manager = IntegrationCredentialsManager()\n\n\n_user_credit_model = get_user_credit_model()\n\n# Define the API routes\nv1_router = APIRouter()\n\nv1_router.include_router(\n    backend.server.integrations.router.router,\n    prefix=\"/integrations\",\n    tags=[\"integrations\"],\n)\n\nv1_router.include_router(\n    backend.server.routers.analytics.router,\n    prefix=\"/analytics\",\n    tags=[\"analytics\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n##################### Auth #############################\n########################################################\n\n\n@v1_router.post(\"/auth/user\", tags=[\"auth\"], dependencies=[Depends(auth_middleware)])\n\n\n########################################################\n##################### Blocks ###########################\n########################################################\n\n\n@v1_router.get(path=\"/blocks\", tags=[\"blocks\"], dependencies=[Depends(auth_middleware)])\n\n\n@v1_router.post(\n    path=\"/blocks/{block_id}/execute\",\n    tags=[\"blocks\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n##################### Credits ##########################\n########################################################\n\n\n@v1_router.get(path=\"/credits\", dependencies=[Depends(auth_middleware)])\n\n\n########################################################\n##################### Graphs ###########################\n########################################################\n\n\n\n\n@v1_router.get(path=\"/graphs\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)])\n\n\n@v1_router.get(\n    path=\"/graphs/{graph_id}\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n@v1_router.get(\n    path=\"/graphs/{graph_id}/versions/{version}\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/graphs/{graph_id}/versions\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@v1_router.get(\n    path=\"/templates/{graph_id}/versions\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/graphs\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n\n\n\n\n@v1_router.delete(\n    path=\"/graphs/{graph_id}\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n\n\n@v1_router.put(\n    path=\"/graphs/{graph_id}\", tags=[\"graphs\"], dependencies=[Depends(auth_middleware)]\n)\n@v1_router.put(\n    path=\"/templates/{graph_id}\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.put(\n    path=\"/graphs/{graph_id}/versions/active\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/graphs/{graph_id}/execute\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/graphs/{graph_id}/executions/{graph_exec_id}/stop\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/executions\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/graphs/{graph_id}/executions/{graph_exec_id}\",\n    tags=[\"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n##################### Templates ########################\n########################################################\n\n\n@v1_router.get(\n    path=\"/templates\",\n    tags=[\"graphs\", \"templates\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/templates/{graph_id}\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.post(\n    path=\"/templates\",\n    tags=[\"templates\", \"graphs\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n##################### Schedules ########################\n########################################################\n\n\n\n\n@v1_router.post(\n    path=\"/schedules\",\n    tags=[\"schedules\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.delete(\n    path=\"/schedules/{schedule_id}\",\n    tags=[\"schedules\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n@v1_router.get(\n    path=\"/schedules\",\n    tags=[\"schedules\"],\n    dependencies=[Depends(auth_middleware)],\n)\n\n\n########################################################\n#####################  API KEY ##############################\n########################################################\n\n\n@v1_router.post(\n    \"/api-keys\",\n    response_model=list[CreateAPIKeyResponse] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n\n\n@v1_router.get(\n    \"/api-keys\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n        raise HTTPException(status_code=400, detail=str(e))\n\n\n@v1_router.get(\n    \"/api-keys/{key_id}\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n    except APIKeyError as e:\n        logger.error(f\"Failed to get API key: {str(e)}\")\n        raise HTTPException(status_code=400, detail=str(e))\n\n\n@v1_router.delete(\n    \"/api-keys/{key_id}\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n\n\n@v1_router.post(\n    \"/api-keys/{key_id}/suspend\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n\n\n@v1_router.put(\n    \"/api-keys/{key_id}/permissions\",\n    response_model=list[APIKeyWithoutHash] | dict[str, str],\n    tags=[\"api-keys\"],\n    dependencies=[Depends(auth_middleware)],\n)\n@feature_flag(\"api-keys-enabled\")\n"
}