{
    "type": "module",
    "start_token": 0,
    "end_token": 86,
    "children": [
        {
            "type": "import_statement",
            "start_token": 0,
            "end_token": 1,
            "children": [],
            "label": "import logging"
        },
        {
            "type": "import_statement",
            "start_token": 3,
            "end_token": 4,
            "children": [],
            "label": "import time"
        },
        {
            "type": "import_from_statement",
            "start_token": 6,
            "end_token": 9,
            "children": [],
            "label": "from enum import Enum"
        },
        {
            "type": "import_from_statement",
            "start_token": 11,
            "end_token": 14,
            "children": [],
            "label": "from typing import Any"
        },
        {
            "type": "import_statement",
            "start_token": 17,
            "end_token": 18,
            "children": [],
            "label": "import httpx"
        },
        {
            "type": "import_from_statement",
            "start_token": 21,
            "end_token": 47,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 22,
                    "end_token": 28,
                    "children": [],
                    "label": "backend.blocks.fal._auth"
                },
                {
                    "type": "import_prefix",
                    "start_token": 29,
                    "end_token": 47,
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 32,
                            "end_token": 32,
                            "children": [],
                            "label": "TEST_CREDENTIALS"
                        },
                        {
                            "type": "identifier",
                            "start_token": 35,
                            "end_token": 35,
                            "children": [],
                            "label": "TEST_CREDENTIALS_INPUT"
                        },
                        {
                            "type": "identifier",
                            "start_token": 38,
                            "end_token": 38,
                            "children": [],
                            "label": "FalCredentials"
                        },
                        {
                            "type": "identifier",
                            "start_token": 41,
                            "end_token": 41,
                            "children": [],
                            "label": "FalCredentialsField"
                        },
                        {
                            "type": "identifier",
                            "start_token": 44,
                            "end_token": 44,
                            "children": [],
                            "label": "FalCredentialsInput"
                        }
                    ],
                    "label": "import (\n    TEST_CREDENTIALS,\n    TEST_CREDENTIALS_INPUT,\n    FalCredentials,\n    FalCredentialsField,\n    FalCredentialsInput,\n)"
                }
            ],
            "label": "from backend.blocks.fal._auth import (\n    TEST_CREDENTIALS,\n    TEST_CREDENTIALS_INPUT,\n    FalCredentials,\n    FalCredentialsField,\n    FalCredentialsInput,\n)"
        },
        {
            "type": "import_from_statement",
            "start_token": 49,
            "end_token": 62,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 50,
                    "end_token": 54,
                    "children": [],
                    "label": "backend.data.block"
                },
                {
                    "type": "import_prefix",
                    "start_token": 55,
                    "end_token": 62,
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 56,
                            "end_token": 56,
                            "children": [],
                            "label": "Block"
                        },
                        {
                            "type": "identifier",
                            "start_token": 58,
                            "end_token": 58,
                            "children": [],
                            "label": "BlockCategory"
                        },
                        {
                            "type": "identifier",
                            "start_token": 60,
                            "end_token": 60,
                            "children": [],
                            "label": "BlockOutput"
                        }
                    ],
                    "label": "import Block, BlockCategory, BlockOutput, BlockSchema"
                }
            ],
            "label": "from backend.data.block import Block, BlockCategory, BlockOutput, BlockSchema"
        },
        {
            "type": "import_from_statement",
            "start_token": 64,
            "end_token": 71,
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 65,
                    "end_token": 69,
                    "children": [],
                    "label": "backend.data.model"
                },
                {
                    "type": "identifier",
                    "start_token": 71,
                    "end_token": 71,
                    "children": [],
                    "label": "SchemaField"
                }
            ],
            "label": "from backend.data.model import SchemaField"
        },
        {
            "type": "assignment",
            "start_token": 74,
            "end_token": 81,
            "children": [
                {
                    "type": "attribute",
                    "start_token": 76,
                    "end_token": 78,
                    "children": [],
                    "label": "logging.getLogger"
                },
                {
                    "type": "call",
                    "start_token": 78,
                    "end_token": 81,
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 80,
                            "end_token": 80,
                            "children": [],
                            "label": "__name__"
                        }
                    ],
                    "label": "getLogger(__name__)"
                }
            ],
            "label": "logger = logging.getLogger(__name__)"
        },
        {
            "type": "class_placeholder",
            "name": "FalModel",
            "start_line": 21,
            "end_line": 23,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 16,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 16,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "label": "FalModel"
                                },
                                {
                                    "type": "parameters",
                                    "start_token": 2,
                                    "end_token": 6,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "label": "str"
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 5,
                                            "end_token": 5,
                                            "label": "Enum"
                                        }
                                    ],
                                    "label": "(str, Enum)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 7,
                                    "end_token": 16,
                                    "children": [
                                        {
                                            "type": "assignment",
                                            "start_token": 9,
                                            "end_token": 11,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 9,
                                                    "end_token": 9,
                                                    "label": "MOCHI"
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 11,
                                                    "end_token": 11,
                                                    "label": "\"fal-ai/mochi-v1\""
                                                }
                                            ],
                                            "label": "MOCHI = \"fal-ai/mochi-v1\""
                                        },
                                        {
                                            "type": "assignment",
                                            "start_token": 13,
                                            "end_token": 15,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 13,
                                                    "end_token": 13,
                                                    "label": "LUMA"
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 15,
                                                    "end_token": 15,
                                                    "label": "\"fal-ai/luma-dream-machine\""
                                                }
                                            ],
                                            "label": "LUMA = \"fal-ai/luma-dream-machine\""
                                        }
                                    ],
                                    "label": ":\n    MOCHI = \"fal-ai/mochi-v1\"\n    LUMA = \"fal-ai/luma-dream-machine\"\n"
                                }
                            ],
                            "label": "class FalModel(str, Enum):\n    MOCHI = \"fal-ai/mochi-v1\"\n    LUMA = \"fal-ai/luma-dream-machine\"\n"
                        }
                    ],
                    "label": "class FalModel(str, Enum):\n    MOCHI = \"fal-ai/mochi-v1\"\n    LUMA = \"fal-ai/luma-dream-machine\"\n"
                }
            ]
        },
        {
            "type": "class_placeholder",
            "name": "AIVideoGeneratorBlock",
            "start_line": 26,
            "end_line": 199,
            "children": [
                {
                    "type": "module",
                    "start_token": 0,
                    "end_token": 13,
                    "children": [
                        {
                            "type": "class_definition",
                            "start_token": 0,
                            "end_token": 5,
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 0,
                                    "end_token": 0,
                                    "children": [],
                                    "label": "class"
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 1,
                                    "end_token": 1,
                                    "children": [],
                                    "label": "AIVideoGeneratorBlock"
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 2,
                                    "end_token": 4,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 3,
                                            "end_token": 3,
                                            "children": [],
                                            "label": "Block"
                                        }
                                    ],
                                    "label": "(Block)"
                                },
                                {
                                    "type": "block",
                                    "start_token": 5,
                                    "end_token": 13,
                                    "children": [],
                                    "label": ":\n\n\n\n\n\n\n\n"
                                }
                            ],
                            "label": "class AIVideoGeneratorBlock(Block):"
                        },
                        {
                            "type": "function_placeholder",
                            "name": "__init__",
                            "start_line": 48,
                            "end_line": 65,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 106,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 106,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "__init__"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 4,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "self"
                                                        }
                                                    ],
                                                    "label": "(self)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 6,
                                                    "end_token": 106,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "start_token": 7,
                                                            "end_token": 13,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 7,
                                                                    "end_token": 11,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 7,
                                                                            "end_token": 7,
                                                                            "children": [],
                                                                            "label": "super"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "children": [],
                                                                            "label": "__init__"
                                                                        }
                                                                    ],
                                                                    "label": "super().__init__"
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 12,
                                                                    "end_token": 13,
                                                                    "children": [],
                                                                    "label": "(\n"
                                                                }
                                                            ],
                                                            "label": "super().__init__(\n"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 14,
                                                            "end_token": 16,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 14,
                                                                    "end_token": 14,
                                                                    "children": [],
                                                                    "label": "id"
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 16,
                                                                    "end_token": 16,
                                                                    "children": [],
                                                                    "label": "\"530cf046-2ce0-4854-ae2c-659db17c7a46\""
                                                                }
                                                            ],
                                                            "label": "id=\"530cf046-2ce0-4854-ae2c-659db17c7a46\""
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 19,
                                                            "end_token": 21,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 19,
                                                                    "end_token": 19,
                                                                    "children": [],
                                                                    "label": "description"
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 21,
                                                                    "end_token": 21,
                                                                    "children": [],
                                                                    "label": "\"Generate videos using FAL AI models.\""
                                                                }
                                                            ],
                                                            "label": "description=\"Generate videos using FAL AI models.\""
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 24,
                                                            "end_token": 30,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 24,
                                                                    "end_token": 24,
                                                                    "children": [],
                                                                    "label": "categories"
                                                                },
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 26,
                                                                    "end_token": 30,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 27,
                                                                            "end_token": 30,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 27,
                                                                                    "end_token": 29,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 27,
                                                                                            "end_token": 27,
                                                                                            "children": [],
                                                                                            "label": "BlockCategory"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 29,
                                                                                            "end_token": 29,
                                                                                            "children": [],
                                                                                            "label": "AI"
                                                                                        }
                                                                                    ],
                                                                                    "label": "BlockCategory.AI"
                                                                                }
                                                                            ],
                                                                            "label": "BlockCategory.AI}"
                                                                        }
                                                                    ],
                                                                    "label": "{BlockCategory.AI}"
                                                                }
                                                            ],
                                                            "label": "categories={BlockCategory.AI}"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 33,
                                                            "end_token": 38,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 33,
                                                                    "end_token": 33,
                                                                    "children": [],
                                                                    "label": "input_schema"
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 35,
                                                                    "end_token": 37,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 35,
                                                                            "end_token": 35,
                                                                            "children": [],
                                                                            "label": "self"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 37,
                                                                            "end_token": 37,
                                                                            "children": [],
                                                                            "label": "Input"
                                                                        }
                                                                    ],
                                                                    "label": "self.Input"
                                                                }
                                                            ],
                                                            "label": "input_schema=self.Input,"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 40,
                                                            "end_token": 45,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 40,
                                                                    "end_token": 40,
                                                                    "children": [],
                                                                    "label": "output_schema"
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 42,
                                                                    "end_token": 44,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 42,
                                                                            "end_token": 42,
                                                                            "children": [],
                                                                            "label": "self"
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 44,
                                                                            "end_token": 44,
                                                                            "children": [],
                                                                            "label": "Output"
                                                                        }
                                                                    ],
                                                                    "label": "self.Output"
                                                                }
                                                            ],
                                                            "label": "output_schema=self.Output,"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 47,
                                                            "end_token": 68,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 47,
                                                                    "end_token": 47,
                                                                    "children": [],
                                                                    "label": "test_input"
                                                                },
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 49,
                                                                    "end_token": 68,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 51,
                                                                            "end_token": 54,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 51,
                                                                                    "end_token": 51,
                                                                                    "children": [],
                                                                                    "label": "\"prompt\""
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 53,
                                                                                    "end_token": 53,
                                                                                    "children": [],
                                                                                    "label": "\"A dog running in a field.\""
                                                                                }
                                                                            ],
                                                                            "label": "\"prompt\": \"A dog running in a field.\","
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 56,
                                                                            "end_token": 61,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 56,
                                                                                    "end_token": 56,
                                                                                    "children": [],
                                                                                    "label": "\"model\""
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 58,
                                                                                    "end_token": 60,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 58,
                                                                                            "end_token": 58,
                                                                                            "children": [],
                                                                                            "label": "FalModel"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 60,
                                                                                            "end_token": 60,
                                                                                            "children": [],
                                                                                            "label": "MOCHI"
                                                                                        }
                                                                                    ],
                                                                                    "label": "FalModel.MOCHI"
                                                                                }
                                                                            ],
                                                                            "label": "\"model\": FalModel.MOCHI,"
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 63,
                                                                            "end_token": 65,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 63,
                                                                                    "end_token": 63,
                                                                                    "children": [],
                                                                                    "label": "\"credentials\""
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 65,
                                                                                    "end_token": 65,
                                                                                    "children": [],
                                                                                    "label": "TEST_CREDENTIALS_INPUT"
                                                                                }
                                                                            ],
                                                                            "label": "\"credentials\": TEST_CREDENTIALS_INPUT"
                                                                        }
                                                                    ],
                                                                    "label": "{\n                \"prompt\": \"A dog running in a field.\",\n                \"model\": FalModel.MOCHI,\n                \"credentials\": TEST_CREDENTIALS_INPUT,\n            }"
                                                                }
                                                            ],
                                                            "label": "test_input={\n                \"prompt\": \"A dog running in a field.\",\n                \"model\": FalModel.MOCHI,\n                \"credentials\": TEST_CREDENTIALS_INPUT,\n            }"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 71,
                                                            "end_token": 73,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 71,
                                                                    "end_token": 71,
                                                                    "children": [],
                                                                    "label": "test_credentials"
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 73,
                                                                    "end_token": 73,
                                                                    "children": [],
                                                                    "label": "TEST_CREDENTIALS"
                                                                }
                                                            ],
                                                            "label": "test_credentials=TEST_CREDENTIALS"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 76,
                                                            "end_token": 84,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 76,
                                                                    "end_token": 76,
                                                                    "children": [],
                                                                    "label": "test_output"
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 78,
                                                                    "end_token": 84,
                                                                    "children": [
                                                                        {
                                                                            "type": "tuple",
                                                                            "start_token": 79,
                                                                            "end_token": 83,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 80,
                                                                                    "end_token": 80,
                                                                                    "children": [],
                                                                                    "label": "\"video_url\""
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 82,
                                                                                    "end_token": 82,
                                                                                    "children": [],
                                                                                    "label": "\"https://fal.media/files/example/video.mp4\""
                                                                                }
                                                                            ],
                                                                            "label": "(\"video_url\", \"https://fal.media/files/example/video.mp4\")"
                                                                        }
                                                                    ],
                                                                    "label": "[(\"video_url\", \"https://fal.media/files/example/video.mp4\")]"
                                                                }
                                                            ],
                                                            "label": "test_output=[(\"video_url\", \"https://fal.media/files/example/video.mp4\")]"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 87,
                                                            "end_token": 103,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 87,
                                                                    "end_token": 87,
                                                                    "children": [],
                                                                    "label": "test_mock"
                                                                },
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 89,
                                                                    "end_token": 103,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 91,
                                                                            "end_token": 101,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 91,
                                                                                    "end_token": 91,
                                                                                    "children": [],
                                                                                    "label": "\"generate_video\""
                                                                                },
                                                                                {
                                                                                    "type": "lambda",
                                                                                    "start_token": 93,
                                                                                    "end_token": 101,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "lambda_parameters",
                                                                                            "start_token": 94,
                                                                                            "end_token": 99,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 95,
                                                                                                    "children": [],
                                                                                                    "label": "args"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 98,
                                                                                                    "end_token": 99,
                                                                                                    "children": [],
                                                                                                    "label": "*kwargs"
                                                                                                }
                                                                                            ],
                                                                                            "label": "*args, **kwargs"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 101,
                                                                                            "end_token": 101,
                                                                                            "children": [],
                                                                                            "label": "\"https://fal.media/files/example/video.mp4\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "lambda *args, **kwargs: \"https://fal.media/files/example/video.mp4\""
                                                                                }
                                                                            ],
                                                                            "label": "\"generate_video\": lambda *args, **kwargs: \"https://fal.media/files/example/video.mp4\""
                                                                        }
                                                                    ],
                                                                    "label": "{\n                \"generate_video\": lambda *args, **kwargs: \"https://fal.media/files/example/video.mp4\"\n            }"
                                                                }
                                                            ],
                                                            "label": "test_mock={\n                \"generate_video\": lambda *args, **kwargs: \"https://fal.media/files/example/video.mp4\"\n            }"
                                                        }
                                                    ],
                                                    "label": "\n        super().__init__(\n            id=\"530cf046-2ce0-4854-ae2c-659db17c7a46\",\n            description=\"Generate videos using FAL AI models.\",\n            categories={BlockCategory.AI},\n            input_schema=self.Input,\n            output_schema=self.Output,\n            test_input={\n                \"prompt\": \"A dog running in a field.\",\n                \"model\": FalModel.MOCHI,\n                \"credentials\": TEST_CREDENTIALS_INPUT,\n            },\n            test_credentials=TEST_CREDENTIALS,\n            test_output=[(\"video_url\", \"https://fal.media/files/example/video.mp4\")],\n            test_mock={\n                \"generate_video\": lambda *args, **kwargs: \"https://fal.media/files/example/video.mp4\"\n            },\n        )"
                                                }
                                            ],
                                            "label": "def __init__(self):\n        super().__init__(\n            id=\"530cf046-2ce0-4854-ae2c-659db17c7a46\",\n            description=\"Generate videos using FAL AI models.\",\n            categories={BlockCategory.AI},\n            input_schema=self.Input,\n            output_schema=self.Output,\n            test_input={\n                \"prompt\": \"A dog running in a field.\",\n                \"model\": FalModel.MOCHI,\n                \"credentials\": TEST_CREDENTIALS_INPUT,\n            },\n            test_credentials=TEST_CREDENTIALS,\n            test_output=[(\"video_url\", \"https://fal.media/files/example/video.mp4\")],\n            test_mock={\n                \"generate_video\": lambda *args, **kwargs: \"https://fal.media/files/example/video.mp4\"\n            },\n        )"
                                        }
                                    ],
                                    "label": "def __init__(self):\n        super().__init__(\n            id=\"530cf046-2ce0-4854-ae2c-659db17c7a46\",\n            description=\"Generate videos using FAL AI models.\",\n            categories={BlockCategory.AI},\n            input_schema=self.Input,\n            output_schema=self.Output,\n            test_input={\n                \"prompt\": \"A dog running in a field.\",\n                \"model\": FalModel.MOCHI,\n                \"credentials\": TEST_CREDENTIALS_INPUT,\n            },\n            test_credentials=TEST_CREDENTIALS,\n            test_output=[(\"video_url\", \"https://fal.media/files/example/video.mp4\")],\n            test_mock={\n                \"generate_video\": lambda *args, **kwargs: \"https://fal.media/files/example/video.mp4\"\n            },\n        )"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "_get_headers",
                            "start_line": 67,
                            "end_line": 72,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 38,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 38,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "_get_headers"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 8,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "self"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 5,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "api_key"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "api_key: str"
                                                        }
                                                    ],
                                                    "label": "(self, api_key: str)"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 10,
                                                    "end_token": 16,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 11,
                                                            "end_token": 16,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 11,
                                                                    "end_token": 11,
                                                                    "children": [],
                                                                    "label": "dict"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 13,
                                                                    "end_token": 15,
                                                                    "children": [
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 13,
                                                                            "end_token": 13,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        },
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 15,
                                                                            "end_token": 15,
                                                                            "children": [],
                                                                            "label": "str"
                                                                        }
                                                                    ],
                                                                    "label": "str, str"
                                                                }
                                                            ],
                                                            "label": "dict[str, str]"
                                                        }
                                                    ],
                                                    "label": "> dict[str, str]"
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 19,
                                                    "end_token": 21,
                                                    "children": [
                                                        {
                                                            "type": "string_content",
                                                            "start_token": 20,
                                                            "end_token": 20,
                                                            "children": [],
                                                            "label": "\"Get headers for FAL API requests.\""
                                                        }
                                                    ],
                                                    "label": "\"\"\"Get headers for FAL API requests.\"\"\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 22,
                                                    "end_token": 38,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "start_token": 23,
                                                            "end_token": 37,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 24,
                                                                    "end_token": 37,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 26,
                                                                            "end_token": 29,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 26,
                                                                                    "end_token": 26,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "start_token": 26,
                                                                                            "end_token": 26,
                                                                                            "children": [],
                                                                                            "label": "\"Authorization\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"Authorization\""
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "start_token": 28,
                                                                                    "end_token": 29,
                                                                                    "children": [],
                                                                                    "label": "f\"Key {api_key}\""
                                                                                }
                                                                            ],
                                                                            "label": "\"Authorization\": f\"Key {api_key}\""
                                                                        },
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 32,
                                                                            "end_token": 34,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 32,
                                                                                    "end_token": 32,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "start_token": 32,
                                                                                            "end_token": 32,
                                                                                            "children": [],
                                                                                            "label": "\"Content-Type\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"Content-Type\""
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 34,
                                                                                    "end_token": 34,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "start_token": 34,
                                                                                            "end_token": 34,
                                                                                            "children": [],
                                                                                            "label": "\"application/json\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "\"application/json\""
                                                                                }
                                                                            ],
                                                                            "label": "\"Content-Type\": \"application/json\""
                                                                        }
                                                                    ],
                                                                    "label": "{\n            \"Authorization\": f\"Key {api_key}\",\n            \"Content-Type\": \"application/json\",\n        }"
                                                                }
                                                            ],
                                                            "label": "return {\n            \"Authorization\": f\"Key {api_key}\",\n            \"Content-Type\": \"application/json\",\n        }"
                                                        }
                                                    ],
                                                    "label": "\n        return {\n            \"Authorization\": f\"Key {api_key}\",\n            \"Content-Type\": \"application/json\",\n        }\n"
                                                }
                                            ],
                                            "label": "def _get_headers(self, api_key: str) -> dict[str, str]:\n        \"\"\"Get headers for FAL API requests.\"\"\"\n        return {\n            \"Authorization\": f\"Key {api_key}\",\n            \"Content-Type\": \"application/json\",\n        }\n"
                                        }
                                    ],
                                    "label": "def _get_headers(self, api_key: str) -> dict[str, str]:\n        \"\"\"Get headers for FAL API requests.\"\"\"\n        return {\n            \"Authorization\": f\"Key {api_key}\",\n            \"Content-Type\": \"application/json\",\n        }\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "_submit_request",
                            "start_line": 74,
                            "end_line": 84,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 97,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 97,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "_submit_request"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 28,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 4,
                                                            "end_token": 4,
                                                            "children": [],
                                                            "label": "self"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 6,
                                                            "end_token": 8,
                                                            "children": [],
                                                            "label": "url: str"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 10,
                                                            "end_token": 17,
                                                            "children": [],
                                                            "label": "headers: dict[str, str]"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 19,
                                                            "end_token": 26,
                                                            "children": [],
                                                            "label": "data: dict[str, Any]"
                                                        }
                                                    ],
                                                    "label": "(\n        self, url: str, headers: dict[str, str], data: dict[str, Any]\n    )"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 30,
                                                    "end_token": 36,
                                                    "children": [],
                                                    "label": "> dict[str, Any]"
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 39,
                                                    "end_token": 41,
                                                    "children": [],
                                                    "label": "\"\"\"Submit a request to the FAL API.\"\"\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 42,
                                                    "end_token": 97,
                                                    "children": [
                                                        {
                                                            "type": "try_statement",
                                                            "start_token": 43,
                                                            "end_token": 97,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 45,
                                                                    "end_token": 75,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 46,
                                                                            "end_token": 61,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 48,
                                                                                    "end_token": 61,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 48,
                                                                                            "end_token": 50,
                                                                                            "children": [],
                                                                                            "label": "httpx.post"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 51,
                                                                                            "end_token": 61,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 52,
                                                                                                    "end_token": 52,
                                                                                                    "children": [],
                                                                                                    "label": "url"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 54,
                                                                                                    "end_token": 56,
                                                                                                    "children": [],
                                                                                                    "label": "headers=headers"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 58,
                                                                                                    "end_token": 60,
                                                                                                    "children": [],
                                                                                                    "label": "json=data"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(url, headers=headers, json=data)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "httpx.post(url, headers=headers, json=data)"
                                                                                }
                                                                            ],
                                                                            "label": "response = httpx.post(url, headers=headers, json=data)"
                                                                        },
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "start_token": 63,
                                                                            "end_token": 67,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 64,
                                                                                    "end_token": 67,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 64,
                                                                                            "end_token": 65,
                                                                                            "children": [],
                                                                                            "label": ".raise_for_status"
                                                                                        }
                                                                                    ],
                                                                                    "label": ".raise_for_status()"
                                                                                }
                                                                            ],
                                                                            "label": "response.raise_for_status()"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 69,
                                                                            "end_token": 74,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 71,
                                                                                    "end_token": 74,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 71,
                                                                                            "end_token": 72,
                                                                                            "children": [],
                                                                                            "label": ".json"
                                                                                        }
                                                                                    ],
                                                                                    "label": ".json()"
                                                                                }
                                                                            ],
                                                                            "label": "return response.json()"
                                                                        }
                                                                    ],
                                                                    "label": "\n            response = httpx.post(url, headers=headers, json=data)\n            response.raise_for_status()\n            return response.json()\n"
                                                                },
                                                                {
                                                                    "type": "except_clause",
                                                                    "start_token": 76,
                                                                    "end_token": 97,
                                                                    "children": [
                                                                        {
                                                                            "type": "as_pattern",
                                                                            "start_token": 77,
                                                                            "end_token": 81,
                                                                            "children": [],
                                                                            "label": "httpx.HTTPError as e"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 82,
                                                                            "end_token": 97,
                                                                            "children": [
                                                                                {
                                                                                    "type": "expression_statement",
                                                                                    "start_token": 84,
                                                                                    "end_token": 90,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 86,
                                                                                            "end_token": 90,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 84,
                                                                                                    "end_token": 86,
                                                                                                    "children": [],
                                                                                                    "label": "logger.error"
                                                                                                },
                                                                                                {
                                                                                                    "type": "format_specifier",
                                                                                                    "start_token": 88,
                                                                                                    "end_token": 89,
                                                                                                    "children": [],
                                                                                                    "label": "f\"FAL API request failed: {str(e)}\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "error(f\"FAL API request failed: {str(e)}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error(f\"FAL API request failed: {str(e)}\")"
                                                                                },
                                                                                {
                                                                                    "type": "raise_statement",
                                                                                    "start_token": 92,
                                                                                    "end_token": 97,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 93,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "format_specifier",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 96,
                                                                                                    "children": [],
                                                                                                    "label": "f\"Failed to submit request: {str(e)}\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "raise RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                                                                }
                                                                            ],
                                                                            "label": ":\n            logger.error(f\"FAL API request failed: {str(e)}\")\n            raise RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                                                        }
                                                                    ],
                                                                    "label": "except httpx.HTTPError as e:\n            logger.error(f\"FAL API request failed: {str(e)}\")\n            raise RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                                                }
                                                            ],
                                                            "label": "try:\n            response = httpx.post(url, headers=headers, json=data)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"FAL API request failed: {str(e)}\")\n            raise RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                                        }
                                                    ],
                                                    "label": "\n        try:\n            response = httpx.post(url, headers=headers, json=data)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"FAL API request failed: {str(e)}\")\n            raise RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                                }
                                            ],
                                            "label": "def _submit_request(\n        self, url: str, headers: dict[str, str], data: dict[str, Any]\n    ) -> dict[str, Any]:\n        \"\"\"Submit a request to the FAL API.\"\"\"\n        try:\n            response = httpx.post(url, headers=headers, json=data)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"FAL API request failed: {str(e)}\")\n            raise RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                        }
                                    ],
                                    "label": "def _submit_request(\n        self, url: str, headers: dict[str, str], data: dict[str, Any]\n    ) -> dict[str, Any]:\n        \"\"\"Submit a request to the FAL API.\"\"\"\n        try:\n            response = httpx.post(url, headers=headers, json=data)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"FAL API request failed: {str(e)}\")\n            raise RuntimeError(f\"Failed to submit request: {str(e)}\")"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "_poll_status",
                            "start_line": 86,
                            "end_line": 94,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 83,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 83,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "_poll_status"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 17,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "self"
                                                                }
                                                            ],
                                                            "label": "self"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 5,
                                                            "end_token": 7,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "status_url"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "str"
                                                                }
                                                            ],
                                                            "label": "status_url: str"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 9,
                                                            "end_token": 16,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "headers"
                                                                },
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 11,
                                                                    "end_token": 16,
                                                                    "children": [
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "children": [],
                                                                            "label": "dict"
                                                                        },
                                                                        {
                                                                            "type": "type",
                                                                            "start_token": 13,
                                                                            "end_token": 15,
                                                                            "children": [],
                                                                            "label": "str, str"
                                                                        }
                                                                    ],
                                                                    "label": "dict[str, str]"
                                                                }
                                                            ],
                                                            "label": "headers: dict[str, str]"
                                                        }
                                                    ],
                                                    "label": "(self, status_url: str, headers: dict[str, str])"
                                                },
                                                {
                                                    "type": "generic_type",
                                                    "start_token": 19,
                                                    "end_token": 25,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 20,
                                                            "end_token": 20,
                                                            "children": [],
                                                            "label": "dict"
                                                        },
                                                        {
                                                            "type": "type",
                                                            "start_token": 22,
                                                            "end_token": 24,
                                                            "children": [],
                                                            "label": "str, Any"
                                                        }
                                                    ],
                                                    "label": "> dict[str, Any]"
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 28,
                                                    "end_token": 30,
                                                    "children": [
                                                        {
                                                            "type": "string_content",
                                                            "start_token": 28,
                                                            "end_token": 30,
                                                            "children": [],
                                                            "label": "\"\"\"Poll the status endpoint until completion or failure.\"\"\""
                                                        }
                                                    ],
                                                    "label": "\"\"\"Poll the status endpoint until completion or failure.\"\"\""
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 31,
                                                    "end_token": 83,
                                                    "children": [
                                                        {
                                                            "type": "try_statement",
                                                            "start_token": 32,
                                                            "end_token": 83,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 34,
                                                                    "end_token": 60,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 35,
                                                                            "end_token": 46,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 35,
                                                                                    "end_token": 35,
                                                                                    "children": [],
                                                                                    "label": "response"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 37,
                                                                                    "end_token": 46,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 37,
                                                                                            "end_token": 39,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 37,
                                                                                                    "end_token": 37,
                                                                                                    "children": [],
                                                                                                    "label": "httpx"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 39,
                                                                                                    "end_token": 39,
                                                                                                    "children": [],
                                                                                                    "label": "get"
                                                                                                }
                                                                                            ],
                                                                                            "label": "httpx.get"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 40,
                                                                                            "end_token": 46,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 41,
                                                                                                    "end_token": 41,
                                                                                                    "children": [],
                                                                                                    "label": "status_url"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 43,
                                                                                                    "end_token": 45,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 43,
                                                                                                            "end_token": 43,
                                                                                                            "children": [],
                                                                                                            "label": "headers"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 45,
                                                                                                            "end_token": 45,
                                                                                                            "children": [],
                                                                                                            "label": "headers"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "headers=headers"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(status_url, headers=headers)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "httpx.get(status_url, headers=headers)"
                                                                                }
                                                                            ],
                                                                            "label": "response = httpx.get(status_url, headers=headers)"
                                                                        },
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "start_token": 48,
                                                                            "end_token": 52,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 48,
                                                                                    "end_token": 52,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 48,
                                                                                            "end_token": 50,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 48,
                                                                                                    "end_token": 48,
                                                                                                    "children": [],
                                                                                                    "label": "response"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 50,
                                                                                                    "end_token": 50,
                                                                                                    "children": [],
                                                                                                    "label": "raise_for_status"
                                                                                                }
                                                                                            ],
                                                                                            "label": "response.raise_for_status"
                                                                                        }
                                                                                    ],
                                                                                    "label": "response.raise_for_status()"
                                                                                }
                                                                            ],
                                                                            "label": "response.raise_for_status()"
                                                                        },
                                                                        {
                                                                            "type": "return_statement",
                                                                            "start_token": 54,
                                                                            "end_token": 59,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 55,
                                                                                    "end_token": 59,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 55,
                                                                                            "end_token": 57,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 55,
                                                                                                    "end_token": 55,
                                                                                                    "children": [],
                                                                                                    "label": "response"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 57,
                                                                                                    "end_token": 57,
                                                                                                    "children": [],
                                                                                                    "label": "json"
                                                                                                }
                                                                                            ],
                                                                                            "label": "response.json"
                                                                                        }
                                                                                    ],
                                                                                    "label": "response.json()"
                                                                                }
                                                                            ],
                                                                            "label": "return response.json()"
                                                                        }
                                                                    ],
                                                                    "label": "\n            response = httpx.get(status_url, headers=headers)\n            response.raise_for_status()\n            return response.json()\n"
                                                                },
                                                                {
                                                                    "type": "except_clause",
                                                                    "start_token": 61,
                                                                    "end_token": 83,
                                                                    "children": [
                                                                        {
                                                                            "type": "as_pattern",
                                                                            "start_token": 62,
                                                                            "end_token": 66,
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 62,
                                                                                    "end_token": 64,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 62,
                                                                                            "end_token": 62,
                                                                                            "children": [],
                                                                                            "label": "httpx"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 64,
                                                                                            "end_token": 64,
                                                                                            "children": [],
                                                                                            "label": "HTTPError"
                                                                                        }
                                                                                    ],
                                                                                    "label": "httpx.HTTPError"
                                                                                },
                                                                                {
                                                                                    "type": "as_pattern_target",
                                                                                    "start_token": 66,
                                                                                    "end_token": 66,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 66,
                                                                                            "end_token": 66,
                                                                                            "children": [],
                                                                                            "label": "e"
                                                                                        }
                                                                                    ],
                                                                                    "label": "e"
                                                                                }
                                                                            ],
                                                                            "label": "httpx.HTTPError as e"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 68,
                                                                            "end_token": 83,
                                                                            "children": [
                                                                                {
                                                                                    "type": "expression_statement",
                                                                                    "start_token": 69,
                                                                                    "end_token": 75,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 69,
                                                                                            "end_token": 75,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 69,
                                                                                                    "end_token": 71,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 69,
                                                                                                            "end_token": 69,
                                                                                                            "children": [],
                                                                                                            "label": "logger"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 71,
                                                                                                            "end_token": 71,
                                                                                                            "children": [],
                                                                                                            "label": "error"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "logger.error"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 72,
                                                                                                    "end_token": 75,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "concatenated_string",
                                                                                                            "start_token": 73,
                                                                                                            "end_token": 74,
                                                                                                            "children": [],
                                                                                                            "label": "f\"Failed to get status: {str(e)}\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(f\"Failed to get status: {str(e)}\")"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logger.error(f\"Failed to get status: {str(e)}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "logger.error(f\"Failed to get status: {str(e)}\")"
                                                                                },
                                                                                {
                                                                                    "type": "raise_statement",
                                                                                    "start_token": 77,
                                                                                    "end_token": 82,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 78,
                                                                                            "end_token": 82,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 78,
                                                                                                    "end_token": 78,
                                                                                                    "children": [],
                                                                                                    "label": "RuntimeError"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 79,
                                                                                                    "end_token": 82,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "concatenated_string",
                                                                                                            "start_token": 80,
                                                                                                            "end_token": 81,
                                                                                                            "children": [],
                                                                                                            "label": "f\"Failed to get status: {str(e)}\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(f\"Failed to get status: {str(e)}\")"
                                                                                                }
                                                                                            ],
                                                                                            "label": "RuntimeError(f\"Failed to get status: {str(e)}\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "raise RuntimeError(f\"Failed to get status: {str(e)}\")"
                                                                                }
                                                                            ],
                                                                            "label": "\n            logger.error(f\"Failed to get status: {str(e)}\")\n            raise RuntimeError(f\"Failed to get status: {str(e)}\")\n"
                                                                        }
                                                                    ],
                                                                    "label": "except httpx.HTTPError as e:\n            logger.error(f\"Failed to get status: {str(e)}\")\n            raise RuntimeError(f\"Failed to get status: {str(e)}\")\n"
                                                                }
                                                            ],
                                                            "label": "try:\n            response = httpx.get(status_url, headers=headers)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"Failed to get status: {str(e)}\")\n            raise RuntimeError(f\"Failed to get status: {str(e)}\")\n"
                                                        }
                                                    ],
                                                    "label": "\n        try:\n            response = httpx.get(status_url, headers=headers)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"Failed to get status: {str(e)}\")\n            raise RuntimeError(f\"Failed to get status: {str(e)}\")\n"
                                                }
                                            ],
                                            "label": "def _poll_status(self, status_url: str, headers: dict[str, str]) -> dict[str, Any]:\n        \"\"\"Poll the status endpoint until completion or failure.\"\"\"\n        try:\n            response = httpx.get(status_url, headers=headers)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"Failed to get status: {str(e)}\")\n            raise RuntimeError(f\"Failed to get status: {str(e)}\")\n"
                                        }
                                    ],
                                    "label": "def _poll_status(self, status_url: str, headers: dict[str, str]) -> dict[str, Any]:\n        \"\"\"Poll the status endpoint until completion or failure.\"\"\"\n        try:\n            response = httpx.get(status_url, headers=headers)\n            response.raise_for_status()\n            return response.json()\n        except httpx.HTTPError as e:\n            logger.error(f\"Failed to get status: {str(e)}\")\n            raise RuntimeError(f\"Failed to get status: {str(e)}\")\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "generate_video",
                            "start_line": 96,
                            "end_line": 189,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 573,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 573,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "generate_video"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 12,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 3,
                                                            "end_token": 4,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 3,
                                                                    "end_token": 3,
                                                                    "children": [],
                                                                    "label": "self"
                                                                }
                                                            ],
                                                            "label": "self,"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 5,
                                                            "end_token": 8,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 5,
                                                                    "end_token": 5,
                                                                    "children": [],
                                                                    "label": "input_data"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 6,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": ": Input"
                                                                }
                                                            ],
                                                            "label": "input_data: Input,"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 9,
                                                            "end_token": 11,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "credentials"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 10,
                                                                    "end_token": 11,
                                                                    "children": [],
                                                                    "label": ": FalCredentials"
                                                                }
                                                            ],
                                                            "label": "credentials: FalCredentials"
                                                        }
                                                    ],
                                                    "label": "(self, input_data: Input, credentials: FalCredentials)"
                                                },
                                                {
                                                    "type": "type",
                                                    "start_token": 14,
                                                    "end_token": 15,
                                                    "children": [],
                                                    "label": "> str"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 17,
                                                    "end_token": 573,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 18,
                                                            "end_token": 20,
                                                            "children": [],
                                                            "label": "\"\"\"Generate video using the specified FAL model.\"\"\""
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 22,
                                                            "end_token": 24,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 22,
                                                                    "end_token": 22,
                                                                    "children": [],
                                                                    "label": "base_url"
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 24,
                                                                    "end_token": 24,
                                                                    "children": [],
                                                                    "label": "\"https://queue.fal.run\""
                                                                }
                                                            ],
                                                            "label": "base_url = \"https://queue.fal.run\""
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 26,
                                                            "end_token": 34,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 26,
                                                                    "end_token": 26,
                                                                    "children": [],
                                                                    "label": "api_key"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 28,
                                                                    "end_token": 34,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 28,
                                                                            "end_token": 32,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 28,
                                                                                    "end_token": 30,
                                                                                    "children": [],
                                                                                    "label": "credentials.api_key"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 32,
                                                                                    "end_token": 32,
                                                                                    "children": [],
                                                                                    "label": "get_secret_value"
                                                                                }
                                                                            ],
                                                                            "label": "credentials.api_key.get_secret_value"
                                                                        }
                                                                    ],
                                                                    "label": "credentials.api_key.get_secret_value()"
                                                                }
                                                            ],
                                                            "label": "api_key = credentials.api_key.get_secret_value()"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 36,
                                                            "end_token": 43,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 36,
                                                                    "end_token": 36,
                                                                    "children": [],
                                                                    "label": "headers"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 38,
                                                                    "end_token": 43,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 38,
                                                                            "end_token": 40,
                                                                            "children": [],
                                                                            "label": "self._get_headers"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 41,
                                                                            "end_token": 42,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 42,
                                                                                    "end_token": 42,
                                                                                    "children": [],
                                                                                    "label": "api_key"
                                                                                }
                                                                            ],
                                                                            "label": "(api_key"
                                                                        }
                                                                    ],
                                                                    "label": "self._get_headers(api_key)"
                                                                }
                                                            ],
                                                            "label": "headers = self._get_headers(api_key)"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 51,
                                                            "end_token": 54,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 51,
                                                                    "end_token": 51,
                                                                    "children": [],
                                                                    "label": "submit_url"
                                                                },
                                                                {
                                                                    "type": "concatenated_string",
                                                                    "start_token": 53,
                                                                    "end_token": 54,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 53,
                                                                            "end_token": 54,
                                                                            "children": [],
                                                                            "label": "f\"{base_url}/{input_data.model.value}\""
                                                                        }
                                                                    ],
                                                                    "label": "f\"{base_url}/{input_data.model.value}\""
                                                                }
                                                            ],
                                                            "label": "submit_url = f\"{base_url}/{input_data.model.value}\""
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 56,
                                                            "end_token": 64,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 56,
                                                                    "end_token": 56,
                                                                    "children": [],
                                                                    "label": "submit_data"
                                                                },
                                                                {
                                                                    "type": "dictionary",
                                                                    "start_token": 58,
                                                                    "end_token": 64,
                                                                    "children": [
                                                                        {
                                                                            "type": "pair",
                                                                            "start_token": 59,
                                                                            "end_token": 63,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 59,
                                                                                    "end_token": 59,
                                                                                    "children": [],
                                                                                    "label": "\"prompt\""
                                                                                },
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 61,
                                                                                    "end_token": 63,
                                                                                    "children": [],
                                                                                    "label": "input_data.prompt"
                                                                                }
                                                                            ],
                                                                            "label": "\"prompt\": input_data.prompt"
                                                                        }
                                                                    ],
                                                                    "label": "{\"prompt\": input_data.prompt}"
                                                                }
                                                            ],
                                                            "label": "submit_data = {\"prompt\": input_data.prompt}"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 67,
                                                            "end_token": 71,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 67,
                                                                    "end_token": 67,
                                                                    "children": [],
                                                                    "label": "seen_logs"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 69,
                                                                    "end_token": 71,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 69,
                                                                            "end_token": 69,
                                                                            "children": [],
                                                                            "label": "set"
                                                                        }
                                                                    ],
                                                                    "label": "set()"
                                                                }
                                                            ],
                                                            "label": "seen_logs = set()"
                                                        },
                                                        {
                                                            "type": "try_statement",
                                                            "start_token": 74,
                                                            "end_token": 556,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 76,
                                                                    "end_token": 555,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 83,
                                                                            "end_token": 98,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 83,
                                                                                    "end_token": 83,
                                                                                    "children": [],
                                                                                    "label": "submit_response"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 85,
                                                                                    "end_token": 98,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 85,
                                                                                            "end_token": 87,
                                                                                            "children": [],
                                                                                            "label": "httpx.post"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 88,
                                                                                            "end_token": 97,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 89,
                                                                                                    "end_token": 89,
                                                                                                    "children": [],
                                                                                                    "label": "submit_url"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 92,
                                                                                                    "end_token": 93,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 92,
                                                                                                            "end_token": 92,
                                                                                                            "children": [],
                                                                                                            "label": "="
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "=headers"
                                                                                                },
                                                                                                {
                                                                                                    "type": "keyword_argument",
                                                                                                    "start_token": 95,
                                                                                                    "end_token": 96,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 95,
                                                                                                            "end_token": 95,
                                                                                                            "children": [],
                                                                                                            "label": "json"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "json="
                                                                                                }
                                                                                            ],
                                                                                            "label": "(submit_url, headers=headers, json=submit_data"
                                                                                        }
                                                                                    ],
                                                                                    "label": "httpx.post(submit_url, headers=headers, json=submit_data)"
                                                                                }
                                                                            ],
                                                                            "label": "submit_response = httpx.post(submit_url, headers=headers, json=submit_data)"
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "start_token": 100,
                                                                            "end_token": 104,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "start_token": 100,
                                                                                    "end_token": 102,
                                                                                    "children": [],
                                                                                    "label": "submit_response.raise_for_status"
                                                                                }
                                                                            ],
                                                                            "label": "submit_response.raise_for_status()"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 106,
                                                                            "end_token": 112,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 106,
                                                                                    "end_token": 106,
                                                                                    "children": [],
                                                                                    "label": "request_data"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 108,
                                                                                    "end_token": 112,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 108,
                                                                                            "end_token": 110,
                                                                                            "children": [],
                                                                                            "label": "submit_response.json"
                                                                                        }
                                                                                    ],
                                                                                    "label": "submit_response.json()"
                                                                                }
                                                                            ],
                                                                            "label": "request_data = submit_response.json()"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 124,
                                                                            "end_token": 131,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 124,
                                                                                    "end_token": 124,
                                                                                    "children": [],
                                                                                    "label": "request_id"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 126,
                                                                                    "end_token": 131,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 126,
                                                                                            "end_token": 128,
                                                                                            "children": [],
                                                                                            "label": "request_data.get"
                                                                                        }
                                                                                    ],
                                                                                    "label": "request_data.get(\"request_id\")"
                                                                                }
                                                                            ],
                                                                            "label": "request_id = request_data.get(\"request_id\")"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 133,
                                                                            "end_token": 140,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 133,
                                                                                    "end_token": 133,
                                                                                    "children": [],
                                                                                    "label": "status_url"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 135,
                                                                                    "end_token": 140,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 135,
                                                                                            "end_token": 137,
                                                                                            "children": [],
                                                                                            "label": "request_data.get"
                                                                                        }
                                                                                    ],
                                                                                    "label": "request_data.get(\"status_url\")"
                                                                                }
                                                                            ],
                                                                            "label": "status_url = request_data.get(\"status_url\")"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 142,
                                                                            "end_token": 149,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 142,
                                                                                    "end_token": 142,
                                                                                    "children": [],
                                                                                    "label": "result_url"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 144,
                                                                                    "end_token": 149,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 144,
                                                                                            "end_token": 146,
                                                                                            "children": [],
                                                                                            "label": "request_data.get"
                                                                                        }
                                                                                    ],
                                                                                    "label": "request_data.get(\"response_url\")"
                                                                                }
                                                                            ],
                                                                            "label": "result_url = request_data.get(\"response_url\")"
                                                                        },
                                                                        {
                                                                            "type": "conditional_expression",
                                                                            "start_token": 152,
                                                                            "end_token": 170,
                                                                            "children": [
                                                                                {
                                                                                    "type": "boolean_operator",
                                                                                    "start_token": 154,
                                                                                    "end_token": 162,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 157,
                                                                                            "end_token": 157,
                                                                                            "children": [],
                                                                                            "label": "request_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 159,
                                                                                            "end_token": 159,
                                                                                            "children": [],
                                                                                            "label": "status_url"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 161,
                                                                                            "end_token": 161,
                                                                                            "children": [],
                                                                                            "label": "result_url"
                                                                                        }
                                                                                    ],
                                                                                    "label": "all([request_id, status_url, result_url]"
                                                                                },
                                                                                {
                                                                                    "type": "raise_statement",
                                                                                    "start_token": 166,
                                                                                    "end_token": 170,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 167,
                                                                                            "end_token": 167,
                                                                                            "children": [],
                                                                                            "label": "ValueError"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 168,
                                                                                            "end_token": 170,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 169,
                                                                                                    "end_token": 169,
                                                                                                    "children": [],
                                                                                                    "label": "\"Missing required data in submission response\""
                                                                                                }
                                                                                            ],
                                                                                            "label": "(\"Missing required data in submission response\")"
                                                                                        }
                                                                                    ],
                                                                                    "label": "raise ValueError(\"Missing required data in submission response\")"
                                                                                }
                                                                            ],
                                                                            "label": "if not all([request_id, status_url, result_url]):\n                raise ValueError(\"Missing required data in submission response\")"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 181,
                                                                            "end_token": 183,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 181,
                                                                                    "end_token": 181,
                                                                                    "children": [],
                                                                                    "label": "max_attempts"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 183,
                                                                                    "end_token": 183,
                                                                                    "children": [],
                                                                                    "label": "30"
                                                                                }
                                                                            ],
                                                                            "label": "max_attempts = 30"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 185,
                                                                            "end_token": 187,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 185,
                                                                                    "end_token": 185,
                                                                                    "children": [],
                                                                                    "label": "attempt"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 187,
                                                                                    "end_token": 187,
                                                                                    "children": [],
                                                                                    "label": "0"
                                                                                }
                                                                            ],
                                                                            "label": "attempt = 0"
                                                                        },
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 189,
                                                                            "end_token": 191,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 189,
                                                                                    "end_token": 189,
                                                                                    "children": [],
                                                                                    "label": "base_wait_time"
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "start_token": 191,
                                                                                    "end_token": 191,
                                                                                    "children": [],
                                                                                    "label": "5"
                                                                                }
                                                                            ],
                                                                            "label": "base_wait_time = 5"
                                                                        },
                                                                        {
                                                                            "type": "while_statement",
                                                                            "start_token": 194,
                                                                            "end_token": 555,
                                                                            "children": [
                                                                                {
                                                                                    "type": "comparison_operator",
                                                                                    "start_token": 195,
                                                                                    "end_token": 197,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 195,
                                                                                            "end_token": 195,
                                                                                            "children": [],
                                                                                            "label": "attempt"
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 197,
                                                                                            "end_token": 197,
                                                                                            "children": [],
                                                                                            "label": "max_attempts"
                                                                                        }
                                                                                    ],
                                                                                    "label": "attempt < max_attempts"
                                                                                },
                                                                                {
                                                                                    "type": "block",
                                                                                    "start_token": 198,
                                                                                    "end_token": 555,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "assignment",
                                                                                            "start_token": 200,
                                                                                            "end_token": 212,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 200,
                                                                                                    "end_token": 200,
                                                                                                    "children": [],
                                                                                                    "label": "status_response"
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 202,
                                                                                                    "end_token": 212,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 202,
                                                                                                            "end_token": 204,
                                                                                                            "children": [],
                                                                                                            "label": "httpx.get"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "start_token": 205,
                                                                                                            "end_token": 211,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 206,
                                                                                                                    "end_token": 206,
                                                                                                                    "children": [],
                                                                                                                    "label": "f"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "keyword_argument",
                                                                                                                    "start_token": 209,
                                                                                                                    "end_token": 211,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 209,
                                                                                                                            "end_token": 209,
                                                                                                                            "children": [],
                                                                                                                            "label": "headers"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "headers=headers"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "(f\"{status_url}?logs=1\", headers=headers"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "httpx.get(f\"{status_url}?logs=1\", headers=headers)"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 214,
                                                                                            "end_token": 218,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "start_token": 214,
                                                                                                    "end_token": 216,
                                                                                                    "children": [],
                                                                                                    "label": "status_response.raise_for_status"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_response.raise_for_status()"
                                                                                        },
                                                                                        {
                                                                                            "type": "assignment",
                                                                                            "start_token": 220,
                                                                                            "end_token": 226,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 220,
                                                                                                    "end_token": 220,
                                                                                                    "children": [],
                                                                                                    "label": "status_data"
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 222,
                                                                                                    "end_token": 226,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 222,
                                                                                                            "end_token": 224,
                                                                                                            "children": [],
                                                                                                            "label": "status_response.json"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_response.json()"
                                                                                                }
                                                                                            ],
                                                                                            "label": "status_data = status_response.json()"
                                                                                        },
                                                                                        {
                                                                                            "type": "assignment",
                                                                                            "start_token": 235,
                                                                                            "end_token": 245,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 235,
                                                                                                    "end_token": 235,
                                                                                                    "children": [],
                                                                                                    "label": "logs"
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "start_token": 237,
                                                                                                    "end_token": 245,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "start_token": 237,
                                                                                                            "end_token": 239,
                                                                                                            "children": [],
                                                                                                            "label": "status_data.get"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_data.get(\"logs\", [])"
                                                                                                }
                                                                                            ],
                                                                                            "label": "logs = status_data.get(\"logs\", [])"
                                                                                        },
                                                                                        {
                                                                                            "type": "conditional_expression",
                                                                                            "start_token": 247,
                                                                                            "end_token": 329,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "boolean_operator",
                                                                                                    "start_token": 249,
                                                                                                    "end_token": 255,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 248,
                                                                                                            "end_token": 248,
                                                                                                            "children": [],
                                                                                                            "label": "logs"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 250,
                                                                                                            "end_token": 256,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 251,
                                                                                                                    "end_token": 252,
                                                                                                                    "children": [],
                                                                                                                    "label": "(logs"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "isinstance(logs, list):"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "and isinstance(logs, list)"
                                                                                                },
                                                                                                {
                                                                                                    "type": "block",
                                                                                                    "start_token": 257,
                                                                                                    "end_token": 329,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "for_statement",
                                                                                                            "start_token": 258,
                                                                                                            "end_token": 329,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 259,
                                                                                                                    "end_token": 259,
                                                                                                                    "children": [],
                                                                                                                    "label": "log"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "expression_list",
                                                                                                                    "start_token": 261,
                                                                                                                    "end_token": 261,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 261,
                                                                                                                            "end_token": 261,
                                                                                                                            "children": [],
                                                                                                                            "label": "logs"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "logs"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "block",
                                                                                                                    "start_token": 262,
                                                                                                                    "end_token": 329,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "conditional_expression",
                                                                                                                            "start_token": 264,
                                                                                                                            "end_token": 329,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "call",
                                                                                                                                    "start_token": 265,
                                                                                                                                    "end_token": 271,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 266,
                                                                                                                                            "end_token": 269,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "(log, dict"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "isinstance(log, dict):"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "block",
                                                                                                                                    "start_token": 272,
                                                                                                                                    "end_token": 329,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "assignment",
                                                                                                                                            "start_token": 273,
                                                                                                                                            "end_token": 288,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "start_token": 283,
                                                                                                                                                    "end_token": 283,
                                                                                                                                                    "children": [],
                                                                                                                                                    "label": "log_key"
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "concatenated_string",
                                                                                                                                                    "start_token": 285,
                                                                                                                                                    "end_token": 288,
                                                                                                                                                    "children": [
                                                                                                                                                        {
                                                                                                                                                            "type": "string",
                                                                                                                                                            "start_token": 285,
                                                                                                                                                            "end_token": 288,
                                                                                                                                                            "children": [],
                                                                                                                                                            "label": "(\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\""
                                                                                                                                                        }
                                                                                                                                                    ],
                                                                                                                                                    "label": "(\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\""
                                                                                                                                                }
                                                                                                                                            ],
                                                                                                                                            "label": "# Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\""
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "conditional_expression",
                                                                                                                                            "start_token": 292,
                                                                                                                                            "end_token": 329,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "boolean_operator",
                                                                                                                                                    "start_token": 293,
                                                                                                                                                    "end_token": 295,
                                                                                                                                                    "children": [
                                                                                                                                                        {
                                                                                                                                                            "type": "identifier",
                                                                                                                                                            "start_token": 292,
                                                                                                                                                            "end_token": 292,
                                                                                                                                                            "children": [],
                                                                                                                                                            "label": "if"
                                                                                                                                                        },
                                                                                                                                                        {
                                                                                                                                                            "type": "call",
                                                                                                                                                            "start_token": 294,
                                                                                                                                                            "end_token": 296,
                                                                                                                                                            "children": [
                                                                                                                                                                {
                                                                                                                                                                    "type": "identifier",
                                                                                                                                                                    "start_token": 293,
                                                                                                                                                                    "end_token": 293,
                                                                                                                                                                    "children": [],
                                                                                                                                                                    "label": "log_key"
                                                                                                                                                                }
                                                                                                                                                            ],
                                                                                                                                                            "label": "not in seen_logs"
                                                                                                                                                        }
                                                                                                                                                    ],
                                                                                                                                                    "label": "log_key not in"
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "block",
                                                                                                                                                    "start_token": 297,
                                                                                                                                                    "end_token": 329,
                                                                                                                                                    "children": [
                                                                                                                                                        {
                                                                                                                                                            "type": "call",
                                                                                                                                                            "start_token": 300,
                                                                                                                                                            "end_token": 304,
                                                                                                                                                            "children": [
                                                                                                                                                                {
                                                                                                                                                                    "type": "identifier",
                                                                                                                                                                    "start_token": 301,
                                                                                                                                                                    "end_token": 303,
                                                                                                                                                                    "children": [],
                                                                                                                                                                    "label": "add(log_key"
                                                                                                                                                                }
                                                                                                                                                            ],
                                                                                                                                                            "label": ".add(log_key)"
                                                                                                                                                        },
                                                                                                                                                        {
                                                                                                                                                            "type": "conditional_expression",
                                                                                                                                                            "start_token": 316,
                                                                                                                                                            "end_token": 329,
                                                                                                                                                            "children": [
                                                                                                                                                                {
                                                                                                                                                                    "type": "boolean_operator",
                                                                                                                                                                    "start_token": 318,
                                                                                                                                                                    "end_token": 329,
                                                                                                                                                                    "children": [
                                                                                                                                                                        {
                                                                                                                                                                            "type": "identifier",
                                                                                                                                                                            "start_token": 317,
                                                                                                                                                                            "end_token": 317,
                                                                                                                                                                            "children": [],
                                                                                                                                                                            "label": "if"
                                                                                                                                                                        },
                                                                                                                                                                        {
                                                                                                                                                                            "type": "identifier",
                                                                                                                                                                            "start_token": 319,
                                                                                                                                                                            "end_token": 319,
                                                                                                                                                                            "children": [],
                                                                                                                                                                            "label": ":"
                                                                                                                                                                        }
                                                                                                                                                                    ],
                                                                                                                                                                    "label": "message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                                                                },
                                                                                                                                                                {
                                                                                                                                                                    "type": "block",
                                                                                                                                                                    "start_token": 321,
                                                                                                                                                                    "end_token": 329,
                                                                                                                                                                    "children": [
                                                                                                                                                                        {
                                                                                                                                                                            "type": "call",
                                                                                                                                                                            "start_token": 322,
                                                                                                                                                                            "end_token": 329,
                                                                                                                                                                            "children": [
                                                                                                                                                                                {
                                                                                                                                                                                    "type": "identifier",
                                                                                                                                                                                    "start_token": 323,
                                                                                                                                                                                    "end_token": 326,
                                                                                                                                                                                    "children": [],
                                                                                                                                                                                    "label": "debug(\n                                        f"
                                                                                                                                                                                }
                                                                                                                                                                            ],
                                                                                                                                                                            "label": ".debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                                                                        }
                                                                                                                                                                    ],
                                                                                                                                                                    "label": "logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                                                                }
                                                                                                                                                            ],
                                                                                                                                                            "label": "\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                                                        }
                                                                                                                                                    ],
                                                                                                                                                    "label": ":\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                                                }
                                                                                                                                            ],
                                                                                                                                            "label": "if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": ":\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                                }
                                                                                            ],
                                                                                            "label": "if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )"
                                                                                        },
                                                                                        {
                                                                                            "type": "conditional_expression",
                                                                                            "start_token": 333,
                                                                                            "end_token": 463,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "boolean_operator",
                                                                                                    "start_token": 341,
                                                                                                    "end_token": 345,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 334,
                                                                                                            "end_token": 334,
                                                                                                            "children": [],
                                                                                                            "label": "status_data"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 338,
                                                                                                            "end_token": 338,
                                                                                                            "children": [],
                                                                                                            "label": "\"status\""
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "if status == \"COMPLETED\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "block",
                                                                                                    "start_token": 346,
                                                                                                    "end_token": 432,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "assignment",
                                                                                                            "start_token": 354,
                                                                                                            "end_token": 364,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 354,
                                                                                                                    "end_token": 354,
                                                                                                                    "children": [],
                                                                                                                    "label": "result_response"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 356,
                                                                                                                    "end_token": 364,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 356,
                                                                                                                            "end_token": 357,
                                                                                                                            "children": [],
                                                                                                                            "label": "httpx."
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "start_token": 358,
                                                                                                                            "end_token": 362,
                                                                                                                            "children": [],
                                                                                                                            "label": "get(result_url, headers"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "httpx.get(result_url, headers=headers"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "result_response = httpx.get(result_url, headers=headers"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "start_token": 367,
                                                                                                            "end_token": 371,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "start_token": 367,
                                                                                                                    "end_token": 368,
                                                                                                                    "children": [],
                                                                                                                    "label": "result_response."
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "result_response.raise_for_status()"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "assignment",
                                                                                                            "start_token": 373,
                                                                                                            "end_token": 379,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 373,
                                                                                                                    "end_token": 373,
                                                                                                                    "children": [],
                                                                                                                    "label": "result_data"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 375,
                                                                                                                    "end_token": 379,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 375,
                                                                                                                            "end_token": 376,
                                                                                                                            "children": [],
                                                                                                                            "label": "result_response."
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "result_response.json()"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "result_data = result_response.json()"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "conditional_expression",
                                                                                                            "start_token": 382,
                                                                                                            "end_token": 430,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "boolean_operator",
                                                                                                                    "start_token": 383,
                                                                                                                    "end_token": 395,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 383,
                                                                                                                            "end_token": 383,
                                                                                                                            "children": [],
                                                                                                                            "label": "\"video\""
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "boolean_operator",
                                                                                                                            "start_token": 390,
                                                                                                                            "end_token": 393,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 391,
                                                                                                                                    "end_token": 391,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "\n"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "(\n                        result_data["
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\"video\" not in result_data or not isinstance(\n                        result_data[\"video\"]"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "block",
                                                                                                                    "start_token": 399,
                                                                                                                    "end_token": 407,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "raise_statement",
                                                                                                                            "start_token": 402,
                                                                                                                            "end_token": 406,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 403,
                                                                                                                                    "end_token": 403,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "ValueError"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "argument_list",
                                                                                                                                    "start_token": 404,
                                                                                                                                    "end_token": 406,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "string",
                                                                                                                                            "start_token": 405,
                                                                                                                                            "end_token": 405,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "\"Invalid response format - missing video data\""
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "(\"Invalid response format - missing video data\")"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "raise ValueError(\"Invalid response format - missing video data\")"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "):\n                        raise ValueError(\"Invalid response format - missing video data\")\n"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "assignment",
                                                                                                            "start_token": 409,
                                                                                                            "end_token": 419,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 409,
                                                                                                                    "end_token": 409,
                                                                                                                    "children": [],
                                                                                                                    "label": "video_url"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 411,
                                                                                                                    "end_token": 419,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "start_token": 411,
                                                                                                                            "end_token": 412,
                                                                                                                            "children": [],
                                                                                                                            "label": "result_data["
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "result_data[\"video\"].get(\"url\")"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "video_url = result_data[\"video\"].get(\"url\")"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "conditional_expression",
                                                                                                            "start_token": 421,
                                                                                                            "end_token": 430,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "boolean_operator",
                                                                                                                    "start_token": 422,
                                                                                                                    "end_token": 422,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 424,
                                                                                                                            "end_token": 424,
                                                                                                                            "children": [],
                                                                                                                            "label": ":"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "not"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "block",
                                                                                                                    "start_token": 425,
                                                                                                                    "end_token": 431,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "raise_statement",
                                                                                                                            "start_token": 426,
                                                                                                                            "end_token": 430,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 427,
                                                                                                                                    "end_token": 427,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "ValueError"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "argument_list",
                                                                                                                                    "start_token": 428,
                                                                                                                                    "end_token": 430,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "string",
                                                                                                                                            "start_token": 429,
                                                                                                                                            "end_token": 429,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "\"No video URL in response\""
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "(\"No video URL in response\")"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "raise ValueError(\"No video URL in response\")"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\n                        raise ValueError(\"No video URL in response\")\n"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "if not video_url:\n                        raise ValueError(\"No video URL in response\")"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n"
                                                                                                },
                                                                                                {
                                                                                                    "type": "conditional_expression",
                                                                                                    "start_token": 471,
                                                                                                    "end_token": 488,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "boolean_operator",
                                                                                                            "start_token": 470,
                                                                                                            "end_token": 470,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 466,
                                                                                                                    "end_token": 466,
                                                                                                                    "children": [],
                                                                                                                    "label": "\"IN_QUEUE\""
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "="
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "block",
                                                                                                            "start_token": 470,
                                                                                                            "end_token": 488,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "assignment",
                                                                                                                    "start_token": 470,
                                                                                                                    "end_token": 475,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 471,
                                                                                                                            "end_token": 471,
                                                                                                                            "children": [],
                                                                                                                            "label": "status_data"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "call",
                                                                                                                            "start_token": 473,
                                                                                                                            "end_token": 475,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "start_token": 473,
                                                                                                                                    "end_token": 474,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "get("
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "get(\"queue_position\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "= status_data.get(\"queue_position\""
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 479,
                                                                                                                    "end_token": 487,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 481,
                                                                                                                            "end_token": 485,
                                                                                                                            "children": [],
                                                                                                                            "label": ".debug(\n                        f"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "= status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )"
                                                                                                },
                                                                                                {
                                                                                                    "type": "conditional_expression",
                                                                                                    "start_token": 482,
                                                                                                    "end_token": 592,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "boolean_operator",
                                                                                                            "start_token": 490,
                                                                                                            "end_token": 490,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "start_token": 495,
                                                                                                                    "end_token": 495,
                                                                                                                    "children": [],
                                                                                                                    "label": ":"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": "elif"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "block",
                                                                                                            "start_token": 495,
                                                                                                            "end_token": 562,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "start_token": 497,
                                                                                                                    "end_token": 503,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "start_token": 501,
                                                                                                                            "end_token": 502,
                                                                                                                            "children": [],
                                                                                                                            "label": "\n                        \"[FAL Generation] Status: Request is being processed...\""
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": "logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "conditional_expression",
                                                                                                                    "start_token": 507,
                                                                                                                    "end_token": 531,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "comparison_operator",
                                                                                                                            "start_token": 513,
                                                                                                                            "end_token": 517,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "start_token": 511,
                                                                                                                                    "end_token": 511,
                                                                                                                                    "children": [],
                                                                                                                                    "label": "info"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "integer",
                                                                                                                                    "start_token": 515,
                                                                                                                                    "end_token": 515,
                                                                                                                                    "children": [],
                                                                                                                                    "label": ")"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "f\"[FAL Generation] Status: Unknown status: {status}\")\n\n"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "block",
                                                                                                                            "start_token": 519,
                                                                                                                            "end_token": 531,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "call",
                                                                                                                                    "start_token": 519,
                                                                                                                                    "end_token": 528,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "start_token": 525,
                                                                                                                                            "end_token": 525,
                                                                                                                                            "children": [],
                                                                                                                                            "label": "2"
                                                                                                                                        }
                                                                                                                                    ],
                                                                                                                                    "label": "= min(base_wait_time * (2**attempt"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                            "label": "= min(base_wait_time * (2**attempt), 60"
                                                                                                                        }
                                                                                                                    ],
                                                                                                                    "label": ":\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60"
                                                                                                                }
                                                                                                            ],
                                                                                                            "label": ":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\")\n\n        except httpx.HTTPError"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": ""
                                                                                                }
                                                                                            ],
                                                                                            "label": "= status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status"
                                                                                        }
                                                                                    ],
                                                                                    "label": ":\n                status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)\n                status_response.raise_for_status()\n                status_data = status_response.json()\n\n                # Process new logs only\n                logs = status_data.get(\"logs\", [])\n                if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )\n\n                status = status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status == \"IN_QUEUE\":\n                    position = status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )\n                elif status == \"IN_PROGRESS\":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\""
                                                                                }
                                                                            ],
                                                                            "label": "while attempt < max_attempts:\n                status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)\n                status_response.raise_for_status()\n                status_data = status_response.json()\n\n                # Process new logs only\n                logs = status_data.get(\"logs\", [])\n                if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )\n\n                status = status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status == \"IN_QUEUE\":\n                    position = status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )\n                elif status == \"IN_PROGRESS\":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\""
                                                                        },
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "start_token": 552,
                                                                            "end_token": 556,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 553,
                                                                                    "end_token": 553,
                                                                                    "children": [],
                                                                                    "label": "RuntimeError"
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "start_token": 554,
                                                                                    "end_token": 556,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 555,
                                                                                            "end_token": 555,
                                                                                            "children": [],
                                                                                            "label": "\"Maximum polling attempts reached\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "(\"Maximum polling attempts reached\")"
                                                                                }
                                                                            ],
                                                                            "label": "raise RuntimeError(\"Maximum polling attempts reached\")"
                                                                        }
                                                                    ],
                                                                    "label": "\n            # Submit request to queue\n            submit_response = httpx.post(submit_url, headers=headers, json=submit_data)\n            submit_response.raise_for_status()\n            request_data = submit_response.json()\n\n            # Get request_id and urls from initial response\n            request_id = request_data.get(\"request_id\")\n            status_url = request_data.get(\"status_url\")\n            result_url = request_data.get(\"response_url\")\n\n            if not all([request_id, status_url, result_url]):\n                raise ValueError(\"Missing required data in submission response\")\n\n            # Poll for status with exponential backoff\n            max_attempts = 30\n            attempt = 0\n            base_wait_time = 5\n\n            while attempt < max_attempts:\n                status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)\n                status_response.raise_for_status()\n                status_data = status_response.json()\n\n                # Process new logs only\n                logs = status_data.get(\"logs\", [])\n                if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )\n\n                status = status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status == \"IN_QUEUE\":\n                    position = status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )\n                elif status == \"IN_PROGRESS\":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\""
                                                                }
                                                            ],
                                                            "label": "try:\n            # Submit request to queue\n            submit_response = httpx.post(submit_url, headers=headers, json=submit_data)\n            submit_response.raise_for_status()\n            request_data = submit_response.json()\n\n            # Get request_id and urls from initial response\n            request_id = request_data.get(\"request_id\")\n            status_url = request_data.get(\"status_url\")\n            result_url = request_data.get(\"response_url\")\n\n            if not all([request_id, status_url, result_url]):\n                raise ValueError(\"Missing required data in submission response\")\n\n            # Poll for status with exponential backoff\n            max_attempts = 30\n            attempt = 0\n            base_wait_time = 5\n\n            while attempt < max_attempts:\n                status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)\n                status_response.raise_for_status()\n                status_data = status_response.json()\n\n                # Process new logs only\n                logs = status_data.get(\"logs\", [])\n                if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )\n\n                status = status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status == \"IN_QUEUE\":\n                    position = status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )\n                elif status == \"IN_PROGRESS\":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\")"
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "start_token": 559,
                                                            "end_token": 572,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "start_token": 570,
                                                                    "end_token": 572,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 570,
                                                                            "end_token": 570,
                                                                            "children": [],
                                                                            "label": "f"
                                                                        },
                                                                        {
                                                                            "type": "concatenated_string",
                                                                            "start_token": 571,
                                                                            "end_token": 572,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "start_token": 571,
                                                                                    "end_token": 572,
                                                                                    "children": [],
                                                                                    "label": "\"API request failed: {str(e)}\")"
                                                                                }
                                                                            ],
                                                                            "label": "\"API request failed: {str(e)}\")"
                                                                        }
                                                                    ],
                                                                    "label": "f\"API request failed: {str(e)}\")"
                                                                }
                                                            ],
                                                            "label": "except httpx.HTTPError as e:\n            raise RuntimeError(f\"API request failed: {str(e)}\")"
                                                        }
                                                    ],
                                                    "label": "\n        \"\"\"Generate video using the specified FAL model.\"\"\"\n        base_url = \"https://queue.fal.run\"\n        api_key = credentials.api_key.get_secret_value()\n        headers = self._get_headers(api_key)\n\n        # Submit generation request\n        submit_url = f\"{base_url}/{input_data.model.value}\"\n        submit_data = {\"prompt\": input_data.prompt}\n\n        seen_logs = set()\n\n        try:\n            # Submit request to queue\n            submit_response = httpx.post(submit_url, headers=headers, json=submit_data)\n            submit_response.raise_for_status()\n            request_data = submit_response.json()\n\n            # Get request_id and urls from initial response\n            request_id = request_data.get(\"request_id\")\n            status_url = request_data.get(\"status_url\")\n            result_url = request_data.get(\"response_url\")\n\n            if not all([request_id, status_url, result_url]):\n                raise ValueError(\"Missing required data in submission response\")\n\n            # Poll for status with exponential backoff\n            max_attempts = 30\n            attempt = 0\n            base_wait_time = 5\n\n            while attempt < max_attempts:\n                status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)\n                status_response.raise_for_status()\n                status_data = status_response.json()\n\n                # Process new logs only\n                logs = status_data.get(\"logs\", [])\n                if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )\n\n                status = status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status == \"IN_QUEUE\":\n                    position = status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )\n                elif status == \"IN_PROGRESS\":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\")\n\n        except httpx.HTTPError as e:\n            raise RuntimeError(f\"API request failed: {str(e)}\")\n"
                                                }
                                            ],
                                            "label": "def generate_video(self, input_data: Input, credentials: FalCredentials) -> str:\n        \"\"\"Generate video using the specified FAL model.\"\"\"\n        base_url = \"https://queue.fal.run\"\n        api_key = credentials.api_key.get_secret_value()\n        headers = self._get_headers(api_key)\n\n        # Submit generation request\n        submit_url = f\"{base_url}/{input_data.model.value}\"\n        submit_data = {\"prompt\": input_data.prompt}\n\n        seen_logs = set()\n\n        try:\n            # Submit request to queue\n            submit_response = httpx.post(submit_url, headers=headers, json=submit_data)\n            submit_response.raise_for_status()\n            request_data = submit_response.json()\n\n            # Get request_id and urls from initial response\n            request_id = request_data.get(\"request_id\")\n            status_url = request_data.get(\"status_url\")\n            result_url = request_data.get(\"response_url\")\n\n            if not all([request_id, status_url, result_url]):\n                raise ValueError(\"Missing required data in submission response\")\n\n            # Poll for status with exponential backoff\n            max_attempts = 30\n            attempt = 0\n            base_wait_time = 5\n\n            while attempt < max_attempts:\n                status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)\n                status_response.raise_for_status()\n                status_data = status_response.json()\n\n                # Process new logs only\n                logs = status_data.get(\"logs\", [])\n                if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )\n\n                status = status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status == \"IN_QUEUE\":\n                    position = status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )\n                elif status == \"IN_PROGRESS\":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\")\n\n        except httpx.HTTPError as e:\n            raise RuntimeError(f\"API request failed: {str(e)}\")\n"
                                        }
                                    ],
                                    "label": "def generate_video(self, input_data: Input, credentials: FalCredentials) -> str:\n        \"\"\"Generate video using the specified FAL model.\"\"\"\n        base_url = \"https://queue.fal.run\"\n        api_key = credentials.api_key.get_secret_value()\n        headers = self._get_headers(api_key)\n\n        # Submit generation request\n        submit_url = f\"{base_url}/{input_data.model.value}\"\n        submit_data = {\"prompt\": input_data.prompt}\n\n        seen_logs = set()\n\n        try:\n            # Submit request to queue\n            submit_response = httpx.post(submit_url, headers=headers, json=submit_data)\n            submit_response.raise_for_status()\n            request_data = submit_response.json()\n\n            # Get request_id and urls from initial response\n            request_id = request_data.get(\"request_id\")\n            status_url = request_data.get(\"status_url\")\n            result_url = request_data.get(\"response_url\")\n\n            if not all([request_id, status_url, result_url]):\n                raise ValueError(\"Missing required data in submission response\")\n\n            # Poll for status with exponential backoff\n            max_attempts = 30\n            attempt = 0\n            base_wait_time = 5\n\n            while attempt < max_attempts:\n                status_response = httpx.get(f\"{status_url}?logs=1\", headers=headers)\n                status_response.raise_for_status()\n                status_data = status_response.json()\n\n                # Process new logs only\n                logs = status_data.get(\"logs\", [])\n                if logs and isinstance(logs, list):\n                    for log in logs:\n                        if isinstance(log, dict):\n                            # Create a unique key for this log entry\n                            log_key = (\n                                f\"{log.get('timestamp', '')}-{log.get('message', '')}\"\n                            )\n                            if log_key not in seen_logs:\n                                seen_logs.add(log_key)\n                                message = log.get(\"message\", \"\")\n                                if message:\n                                    logger.debug(\n                                        f\"[FAL Generation] [{log.get('level', 'INFO')}] [{log.get('source', '')}] [{log.get('timestamp', '')}] {message}\"\n                                    )\n\n                status = status_data.get(\"status\")\n                if status == \"COMPLETED\":\n                    # Get the final result\n                    result_response = httpx.get(result_url, headers=headers)\n                    result_response.raise_for_status()\n                    result_data = result_response.json()\n\n                    if \"video\" not in result_data or not isinstance(\n                        result_data[\"video\"], dict\n                    ):\n                        raise ValueError(\"Invalid response format - missing video data\")\n\n                    video_url = result_data[\"video\"].get(\"url\")\n                    if not video_url:\n                        raise ValueError(\"No video URL in response\")\n\n                    return video_url\n\n                elif status == \"FAILED\":\n                    error_msg = status_data.get(\"error\", \"No error details provided\")\n                    raise RuntimeError(f\"Video generation failed: {error_msg}\")\n                elif status == \"IN_QUEUE\":\n                    position = status_data.get(\"queue_position\", \"unknown\")\n                    logger.debug(\n                        f\"[FAL Generation] Status: In queue, position: {position}\"\n                    )\n                elif status == \"IN_PROGRESS\":\n                    logger.debug(\n                        \"[FAL Generation] Status: Request is being processed...\"\n                    )\n                else:\n                    logger.info(f\"[FAL Generation] Status: Unknown status: {status}\")\n\n                wait_time = min(base_wait_time * (2**attempt), 60)  # Cap at 60 seconds\n                time.sleep(wait_time)\n                attempt += 1\n\n            raise RuntimeError(\"Maximum polling attempts reached\")\n\n        except httpx.HTTPError as e:\n            raise RuntimeError(f\"API request failed: {str(e)}\")\n"
                                }
                            ]
                        },
                        {
                            "type": "function_placeholder",
                            "name": "run",
                            "start_line": 191,
                            "end_line": 199,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 62,
                                    "children": [
                                        {
                                            "type": "function_definition",
                                            "start_token": 0,
                                            "end_token": 62,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "run"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 20,
                                                    "children": [
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 4,
                                                            "end_token": 8,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 4,
                                                                    "end_token": 4,
                                                                    "children": [],
                                                                    "label": "self"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 7,
                                                                    "end_token": 8,
                                                                    "children": [],
                                                                    "label": ": Input"
                                                                }
                                                            ],
                                                            "label": "self, input_data: Input"
                                                        },
                                                        {
                                                            "type": "typed_parameter",
                                                            "start_token": 12,
                                                            "end_token": 14,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 12,
                                                                    "end_token": 12,
                                                                    "children": [],
                                                                    "label": "credentials"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 13,
                                                                    "end_token": 14,
                                                                    "children": [],
                                                                    "label": ": FalCredentials"
                                                                }
                                                            ],
                                                            "label": "credentials: FalCredentials"
                                                        },
                                                        {
                                                            "type": "list_splat",
                                                            "start_token": 10,
                                                            "end_token": 11,
                                                            "children": [],
                                                            "label": "*,"
                                                        },
                                                        {
                                                            "type": "list_splat_pattern",
                                                            "start_token": 16,
                                                            "end_token": 18,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 18,
                                                                    "end_token": 18,
                                                                    "children": [],
                                                                    "label": "kwargs"
                                                                }
                                                            ],
                                                            "label": "**kwargs"
                                                        }
                                                    ],
                                                    "label": "(\n        self, input_data: Input, *, credentials: FalCredentials, **kwargs\n    )"
                                                },
                                                {
                                                    "type": "union_type",
                                                    "start_token": 22,
                                                    "end_token": 23,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "start_token": 23,
                                                            "end_token": 23,
                                                            "children": [],
                                                            "label": "BlockOutput"
                                                        }
                                                    ],
                                                    "label": "> BlockOutput"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 24,
                                                    "end_token": 62,
                                                    "children": [
                                                        {
                                                            "type": "try_statement",
                                                            "start_token": 26,
                                                            "end_token": 61,
                                                            "children": [
                                                                {
                                                                    "type": "block",
                                                                    "start_token": 28,
                                                                    "end_token": 44,
                                                                    "children": [
                                                                        {
                                                                            "type": "assignment",
                                                                            "start_token": 29,
                                                                            "end_token": 38,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 29,
                                                                                    "end_token": 29,
                                                                                    "children": [],
                                                                                    "label": "video_url"
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "start_token": 31,
                                                                                    "end_token": 38,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 31,
                                                                                            "end_token": 33,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 31,
                                                                                                    "end_token": 31,
                                                                                                    "children": [],
                                                                                                    "label": "self"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 33,
                                                                                                    "end_token": 33,
                                                                                                    "children": [],
                                                                                                    "label": "generate_video"
                                                                                                }
                                                                                            ],
                                                                                            "label": "self.generate_video"
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "start_token": 34,
                                                                                            "end_token": 38,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 35,
                                                                                                    "end_token": 35,
                                                                                                    "children": [],
                                                                                                    "label": "input_data"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 37,
                                                                                                    "end_token": 37,
                                                                                                    "children": [],
                                                                                                    "label": "credentials"
                                                                                                }
                                                                                            ],
                                                                                            "label": "(input_data, credentials)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "self.generate_video(input_data, credentials)"
                                                                                }
                                                                            ],
                                                                            "label": "video_url = self.generate_video(input_data, credentials)"
                                                                        },
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "start_token": 40,
                                                                            "end_token": 43,
                                                                            "children": [
                                                                                {
                                                                                    "type": "yield",
                                                                                    "start_token": 40,
                                                                                    "end_token": 43,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 41,
                                                                                            "end_token": 41,
                                                                                            "children": [],
                                                                                            "label": "\"video_url\""
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 43,
                                                                                            "end_token": 43,
                                                                                            "children": [],
                                                                                            "label": "video_url"
                                                                                        }
                                                                                    ],
                                                                                    "label": "yield \"video_url\", video_url"
                                                                                }
                                                                            ],
                                                                            "label": "yield \"video_url\", video_url"
                                                                        }
                                                                    ],
                                                                    "label": "\n            video_url = self.generate_video(input_data, credentials)\n            yield \"video_url\", video_url\n"
                                                                },
                                                                {
                                                                    "type": "except_clause",
                                                                    "start_token": 45,
                                                                    "end_token": 61,
                                                                    "children": [
                                                                        {
                                                                            "type": "as_pattern_target",
                                                                            "start_token": 46,
                                                                            "end_token": 48,
                                                                            "children": [
                                                                                {
                                                                                    "type": "type",
                                                                                    "start_token": 46,
                                                                                    "end_token": 46,
                                                                                    "children": [],
                                                                                    "label": "Exception"
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 48,
                                                                                    "end_token": 48,
                                                                                    "children": [],
                                                                                    "label": "e"
                                                                                }
                                                                            ],
                                                                            "label": "Exception as e"
                                                                        },
                                                                        {
                                                                            "type": "block",
                                                                            "start_token": 50,
                                                                            "end_token": 61,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "start_token": 51,
                                                                                    "end_token": 56,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 51,
                                                                                            "end_token": 51,
                                                                                            "children": [],
                                                                                            "label": "error_message"
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "start_token": 53,
                                                                                            "end_token": 56,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 53,
                                                                                                    "end_token": 53,
                                                                                                    "children": [],
                                                                                                    "label": "str"
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "start_token": 54,
                                                                                                    "end_token": 55,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "start_token": 55,
                                                                                                            "end_token": 55,
                                                                                                            "children": [],
                                                                                                            "label": "e"
                                                                                                        }
                                                                                                    ],
                                                                                                    "label": "(e"
                                                                                                }
                                                                                            ],
                                                                                            "label": "str(e)"
                                                                                        }
                                                                                    ],
                                                                                    "label": "error_message = str(e)"
                                                                                },
                                                                                {
                                                                                    "type": "expression_statement",
                                                                                    "start_token": 58,
                                                                                    "end_token": 61,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "yield",
                                                                                            "start_token": 58,
                                                                                            "end_token": 61,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "start_token": 59,
                                                                                                    "end_token": 59,
                                                                                                    "children": [],
                                                                                                    "label": "\"error\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 61,
                                                                                                    "end_token": 61,
                                                                                                    "children": [],
                                                                                                    "label": "error_message"
                                                                                                }
                                                                                            ],
                                                                                            "label": "yield \"error\", error_message"
                                                                                        }
                                                                                    ],
                                                                                    "label": "yield \"error\", error_message"
                                                                                }
                                                                            ],
                                                                            "label": "\n            error_message = str(e)\n            yield \"error\", error_message"
                                                                        }
                                                                    ],
                                                                    "label": "except Exception as e:\n            error_message = str(e)\n            yield \"error\", error_message"
                                                                }
                                                            ],
                                                            "label": "try:\n            video_url = self.generate_video(input_data, credentials)\n            yield \"video_url\", video_url\n        except Exception as e:\n            error_message = str(e)\n            yield \"error\", error_message"
                                                        }
                                                    ],
                                                    "label": ":\n        try:\n            video_url = self.generate_video(input_data, credentials)\n            yield \"video_url\", video_url\n        except Exception as e:\n            error_message = str(e)\n            yield \"error\", error_message\n"
                                                }
                                            ],
                                            "label": "def run(\n        self, input_data: Input, *, credentials: FalCredentials, **kwargs\n    ) -> BlockOutput:\n        try:\n            video_url = self.generate_video(input_data, credentials)\n            yield \"video_url\", video_url\n        except Exception as e:\n            error_message = str(e)\n            yield \"error\", error_message\n"
                                        }
                                    ],
                                    "label": "def run(\n        self, input_data: Input, *, credentials: FalCredentials, **kwargs\n    ) -> BlockOutput:\n        try:\n            video_url = self.generate_video(input_data, credentials)\n            yield \"video_url\", video_url\n        except Exception as e:\n            error_message = str(e)\n            yield \"error\", error_message\n"
                                }
                            ]
                        },
                        {
                            "type": "class_placeholder",
                            "name": "Input",
                            "start_line": 27,
                            "end_line": 37,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 59,
                                    "children": [
                                        {
                                            "type": "class_definition",
                                            "start_token": 0,
                                            "end_token": 59,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 0,
                                                    "end_token": 0,
                                                    "label": "class"
                                                },
                                                {
                                                    "type": "parameters",
                                                    "start_token": 2,
                                                    "end_token": 4,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "label": "BlockSchema"
                                                        }
                                                    ],
                                                    "label": "(BlockSchema)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 6,
                                                    "end_token": 59,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 7,
                                                            "end_token": 24,
                                                            "children": [
                                                                {
                                                                    "type": "typed_default_parameter",
                                                                    "start_token": 7,
                                                                    "end_token": 9,
                                                                    "label": "prompt: str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 11,
                                                                    "end_token": 24,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "label": "SchemaField"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 12,
                                                                            "end_token": 24,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 14,
                                                                                    "end_token": 17,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 16,
                                                                                            "end_token": 16,
                                                                                            "label": "\"Description of the video to generate.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "description=\"Description of the video to generate.\","
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 19,
                                                                                    "end_token": 22,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 21,
                                                                                            "end_token": 21,
                                                                                            "label": "\"A dog running in a field.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "placeholder=\"A dog running in a field.\","
                                                                                }
                                                                            ],
                                                                            "label": "(\n            description=\"Description of the video to generate.\",\n            placeholder=\"A dog running in a field.\",\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "SchemaField(\n            description=\"Description of the video to generate.\",\n            placeholder=\"A dog running in a field.\",\n        )"
                                                                }
                                                            ],
                                                            "label": "prompt: str = SchemaField(\n            description=\"Description of the video to generate.\",\n            placeholder=\"A dog running in a field.\",\n        )"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 26,
                                                            "end_token": 50,
                                                            "children": [
                                                                {
                                                                    "type": "typed_default_parameter",
                                                                    "start_token": 26,
                                                                    "end_token": 28,
                                                                    "label": "model: FalModel"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 30,
                                                                    "end_token": 50,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 30,
                                                                            "end_token": 30,
                                                                            "label": "SchemaField"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 31,
                                                                            "end_token": 50,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 33,
                                                                                    "end_token": 35,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 35,
                                                                                            "end_token": 35,
                                                                                            "label": "\"FAL Model\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "title=\"FAL Model\""
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 38,
                                                                                    "end_token": 43,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "start_token": 40,
                                                                                            "end_token": 42,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 40,
                                                                                                    "end_token": 40,
                                                                                                    "label": "FalModel"
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "start_token": 42,
                                                                                                    "end_token": 42,
                                                                                                    "label": "MOCHI"
                                                                                                }
                                                                                            ],
                                                                                            "label": "FalModel.MOCHI"
                                                                                        }
                                                                                    ],
                                                                                    "label": "default=FalModel.MOCHI,"
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 45,
                                                                                    "end_token": 48,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 47,
                                                                                            "end_token": 47,
                                                                                            "label": "\"The FAL model to use for video generation.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "description=\"The FAL model to use for video generation.\","
                                                                                }
                                                                            ],
                                                                            "label": "(\n            title=\"FAL Model\",\n            default=FalModel.MOCHI,\n            description=\"The FAL model to use for video generation.\",\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "SchemaField(\n            title=\"FAL Model\",\n            default=FalModel.MOCHI,\n            description=\"The FAL model to use for video generation.\",\n        )"
                                                                }
                                                            ],
                                                            "label": "model: FalModel = SchemaField(\n            title=\"FAL Model\",\n            default=FalModel.MOCHI,\n            description=\"The FAL model to use for video generation.\",\n        )"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 52,
                                                            "end_token": 58,
                                                            "children": [
                                                                {
                                                                    "type": "typed_default_parameter",
                                                                    "start_token": 52,
                                                                    "end_token": 54,
                                                                    "label": "credentials: FalCredentialsInput"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 56,
                                                                    "end_token": 58,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 56,
                                                                            "end_token": 56,
                                                                            "label": "FalCredentialsField"
                                                                        }
                                                                    ],
                                                                    "label": "FalCredentialsField()"
                                                                }
                                                            ],
                                                            "label": "credentials: FalCredentialsInput = FalCredentialsField()"
                                                        }
                                                    ],
                                                    "label": "\n        prompt: str = SchemaField(\n            description=\"Description of the video to generate.\",\n            placeholder=\"A dog running in a field.\",\n        )\n        model: FalModel = SchemaField(\n            title=\"FAL Model\",\n            default=FalModel.MOCHI,\n            description=\"The FAL model to use for video generation.\",\n        )\n        credentials: FalCredentialsInput = FalCredentialsField()\n"
                                                }
                                            ],
                                            "label": "class Input(BlockSchema):\n        prompt: str = SchemaField(\n            description=\"Description of the video to generate.\",\n            placeholder=\"A dog running in a field.\",\n        )\n        model: FalModel = SchemaField(\n            title=\"FAL Model\",\n            default=FalModel.MOCHI,\n            description=\"The FAL model to use for video generation.\",\n        )\n        credentials: FalCredentialsInput = FalCredentialsField()\n"
                                        }
                                    ],
                                    "label": "class Input(BlockSchema):\n        prompt: str = SchemaField(\n            description=\"Description of the video to generate.\",\n            placeholder=\"A dog running in a field.\",\n        )\n        model: FalModel = SchemaField(\n            title=\"FAL Model\",\n            default=FalModel.MOCHI,\n            description=\"The FAL model to use for video generation.\",\n        )\n        credentials: FalCredentialsInput = FalCredentialsField()\n"
                                }
                            ]
                        },
                        {
                            "type": "class_placeholder",
                            "name": "Output",
                            "start_line": 39,
                            "end_line": 46,
                            "children": [
                                {
                                    "type": "module",
                                    "start_token": 0,
                                    "end_token": 50,
                                    "children": [
                                        {
                                            "type": "class_definition",
                                            "start_token": 0,
                                            "end_token": 50,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1,
                                                    "end_token": 1,
                                                    "children": [],
                                                    "label": "Output"
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 2,
                                                    "end_token": 4,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 3,
                                                            "end_token": 3,
                                                            "children": [],
                                                            "label": "BlockSchema"
                                                        }
                                                    ],
                                                    "label": "(BlockSchema)"
                                                },
                                                {
                                                    "type": "block",
                                                    "start_token": 6,
                                                    "end_token": 50,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 7,
                                                            "end_token": 16,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 7,
                                                                    "end_token": 7,
                                                                    "children": [],
                                                                    "label": "video_url"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 9,
                                                                    "end_token": 9,
                                                                    "children": [],
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 11,
                                                                    "end_token": 16,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 11,
                                                                            "end_token": 11,
                                                                            "children": [],
                                                                            "label": "SchemaField"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 12,
                                                                            "end_token": 16,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 13,
                                                                                    "end_token": 15,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 13,
                                                                                            "end_token": 13,
                                                                                            "children": [],
                                                                                            "label": "description"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 15,
                                                                                            "end_token": 15,
                                                                                            "children": [],
                                                                                            "label": "\"The URL of the generated video.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "description=\"The URL of the generated video.\""
                                                                                }
                                                                            ],
                                                                            "label": "(description=\"The URL of the generated video.\")"
                                                                        }
                                                                    ],
                                                                    "label": "SchemaField(description=\"The URL of the generated video.\")"
                                                                }
                                                            ],
                                                            "label": "video_url: str = SchemaField(description=\"The URL of the generated video.\")"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 18,
                                                            "end_token": 29,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 18,
                                                                    "end_token": 18,
                                                                    "children": [],
                                                                    "label": "error"
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "start_token": 20,
                                                                    "end_token": 20,
                                                                    "children": [],
                                                                    "label": "str"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 22,
                                                                    "end_token": 29,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 22,
                                                                            "end_token": 22,
                                                                            "children": [],
                                                                            "label": "SchemaField"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 23,
                                                                            "end_token": 29,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 25,
                                                                                    "end_token": 27,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 25,
                                                                                            "end_token": 25,
                                                                                            "children": [],
                                                                                            "label": "description"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 27,
                                                                                            "end_token": 27,
                                                                                            "children": [],
                                                                                            "label": "\"Error message if video generation failed.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "description=\"Error message if video generation failed.\""
                                                                                }
                                                                            ],
                                                                            "label": "(\n            description=\"Error message if video generation failed.\"\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "SchemaField(\n            description=\"Error message if video generation failed.\"\n        )"
                                                                }
                                                            ],
                                                            "label": "error: str = SchemaField(\n            description=\"Error message if video generation failed.\"\n        )"
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 31,
                                                            "end_token": 49,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 31,
                                                                    "end_token": 31,
                                                                    "children": [],
                                                                    "label": "logs"
                                                                },
                                                                {
                                                                    "type": "generic_type",
                                                                    "start_token": 33,
                                                                    "end_token": 36,
                                                                    "children": [
                                                                        {
                                                                            "type": "list",
                                                                            "start_token": 33,
                                                                            "end_token": 36,
                                                                            "children": [
                                                                                {
                                                                                    "type": "type",
                                                                                    "start_token": 35,
                                                                                    "end_token": 35,
                                                                                    "children": [],
                                                                                    "label": "str"
                                                                                }
                                                                            ],
                                                                            "label": "list[str]"
                                                                        }
                                                                    ],
                                                                    "label": "list[str]"
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 38,
                                                                    "end_token": 49,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 38,
                                                                            "end_token": 38,
                                                                            "children": [],
                                                                            "label": "SchemaField"
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 39,
                                                                            "end_token": 49,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 41,
                                                                                    "end_token": 43,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 41,
                                                                                            "end_token": 41,
                                                                                            "children": [],
                                                                                            "label": "description"
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "start_token": 43,
                                                                                            "end_token": 43,
                                                                                            "children": [],
                                                                                            "label": "\"Generation progress logs.\""
                                                                                        }
                                                                                    ],
                                                                                    "label": "description=\"Generation progress logs.\""
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "start_token": 45,
                                                                                    "end_token": 47,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "start_token": 45,
                                                                                            "end_token": 45,
                                                                                            "children": [],
                                                                                            "label": "optional"
                                                                                        },
                                                                                        {
                                                                                            "type": "true",
                                                                                            "start_token": 47,
                                                                                            "end_token": 47,
                                                                                            "children": [],
                                                                                            "label": "True"
                                                                                        }
                                                                                    ],
                                                                                    "label": "optional=True"
                                                                                }
                                                                            ],
                                                                            "label": "(\n            description=\"Generation progress logs.\", optional=True\n        )"
                                                                        }
                                                                    ],
                                                                    "label": "SchemaField(\n            description=\"Generation progress logs.\", optional=True\n        )"
                                                                }
                                                            ],
                                                            "label": "logs: list[str] = SchemaField(\n            description=\"Generation progress logs.\", optional=True\n        )"
                                                        }
                                                    ],
                                                    "label": "\n        video_url: str = SchemaField(description=\"The URL of the generated video.\")\n        error: str = SchemaField(\n            description=\"Error message if video generation failed.\"\n        )\n        logs: list[str] = SchemaField(\n            description=\"Generation progress logs.\", optional=True\n        )\n"
                                                }
                                            ],
                                            "label": "class Output(BlockSchema):\n        video_url: str = SchemaField(description=\"The URL of the generated video.\")\n        error: str = SchemaField(\n            description=\"Error message if video generation failed.\"\n        )\n        logs: list[str] = SchemaField(\n            description=\"Generation progress logs.\", optional=True\n        )\n"
                                        }
                                    ],
                                    "label": "class Output(BlockSchema):\n        video_url: str = SchemaField(description=\"The URL of the generated video.\")\n        error: str = SchemaField(\n            description=\"Error message if video generation failed.\"\n        )\n        logs: list[str] = SchemaField(\n            description=\"Generation progress logs.\", optional=True\n        )\n"
                                }
                            ]
                        }
                    ],
                    "label": "class AIVideoGeneratorBlock(Block):\n\n\n\n\n\n\n\n"
                }
            ]
        }
    ],
    "label": "import logging\nimport time\nfrom enum import Enum\nfrom typing import Any\n\nimport httpx\n\nfrom backend.blocks.fal._auth import (\n    TEST_CREDENTIALS,\n    TEST_CREDENTIALS_INPUT,\n    FalCredentials,\n    FalCredentialsField,\n    FalCredentialsInput,\n)\nfrom backend.data.block import Block, BlockCategory, BlockOutput, BlockSchema\nfrom backend.data.model import SchemaField\n\nlogger = logging.getLogger(__name__)\n\n\n\n\n"
}