digraph "21.ts" {
  subgraph "cluster_1" {
    label="example_script (CFG) [L1-L130]";
    node_1_1 [label="id: 1\nimport { Log } from '../utils/Log';
import { BroadcastConstants } from '../constants/BroadcastConstants';
import { MenuOperationCallback } from './MenuOperationCallback';
import { MenuOperation } from './MenuOperation';
import { MenuContext } from './MenuContext';
import { userFileModel } from '../base/UserFileModel';
import { Constants } from '../constants/BrowserConstants';
import { getResourceString } from '../utils/ResourceUtils';
import { showToast } from '../utils/UiUtil';
import { UserFileDataItem } from '../base/UserFileDataItem.';
const TAG = 'RenameMenuOperation';", shape=box];
  subgraph "cluster_2" {
    label="RenameMenuOperation (class) [L29-L130]";
    node_2_1 [label="id: 1\nexport class RenameMenuOperation implements MenuOperation, MenuOperationCallback {
private menuContext: MenuContext;", shape=box];
  subgraph "cluster_3" {
    label="constructor (function) [L32-L34]";
    node_3_1 [label="id: 1\nconstructor(menuContext: MenuContext) {
  this.menuContext = menuContext;
}", shape=box];
  }
  subgraph "cluster_4" {
    label="doAction (function) [L36-L59]";
    node_4_1 [label="id: 1\nif (this.menuContext == null) {
    Log.warn(TAG, 'menuContext is null, return');
    return;", shape=box];
  }
  subgraph "cluster_5" {
    label="onCompleted (function) [L61-L63]";
    node_5_1 [label="id: 1\nonCompleted(): void {
    Log.info(TAG, 'Rename data succeed!');", shape=box];
  }
  subgraph "cluster_6" {
    label="onError (function) [L65-L67]";
    node_6_1 [label="id: 1\nonError(): void {
    Log.error(TAG, 'Rename data failed!');", shape=box];
  }
  subgraph "cluster_7" {
    label="confirmCallback (function) [L69-L71]";
    node_7_1 [label="id: 1\nprivate async confirmCallback(title: string): Promise<void> {
return await this.confirmCallbackBindImpl(title);", shape=box];
  }
  subgraph "cluster_8" {
    label="confirmCallbackBindImpl (function) [L73-L100]";
    node_8_1 [label="id: 1\nLog.info(TAG, 'Rename confirm new name: ' + title);
let mediaItem = (this.menuContext.items[0] as UserFileDataItem);
if (mediaItem == null) {", shape=box];
  }
  subgraph "cluster_9" {
    label="rename (function) [L102-L106]";
    node_9_1 [label="id: 1\nLog.info(TAG, 'renameSinglePhoto start');
await item.setName(name);", shape=box];
  }
  subgraph "cluster_10" {
    label="hasSameNameAsset (function) [L108-L121]";
    node_10_1 [label="id: 1\nLog.debug(TAG, 'hasSameNameAsset start');
let fileAsset = await item.loadFileAsset();
let displayName = fileAsset.displayName;
let index = displayName.lastIndexOf('.');
displayName = name + displayName.slice(index);
let counts = (await userFileModel.getMediaItemCountsByDisplayName(fileAsset.uri));
if (counts === 0) {", shape=box];
  }
  subgraph "cluster_11" {
    label="cancelCallback (function) [L123-L125]";
    node_11_1 [label="id: 1\nprivate cancelCallback(): void {
  this.cancelCallbackBindImpl();", shape=box];
  }
  subgraph "cluster_12" {
    label="cancelCallbackBindImpl (function) [L127-L129]";
    node_12_1 [label="id: 1\nprivate cancelCallbackBindImpl(): void {
    Log.info(TAG, 'Rename cancel');
}", shape=box];
  }
  }
  }
}